/********************************************/
/*   Use MADS http://g2f.atari8.info/mads   */
/*   Mode: DLI (char mode)                  */
/********************************************/

pmBase	equ $b000

scr48	equ %00111111	;screen 48b
scr40	equ %00111110	;screen 40b
scr32	equ %00111101	;screen 32b

cloc	equ $0014	;(1)
byt2	equ $0000	;(1) <$0100
byt3	equ $0100	;(1) >$00FF

ftmp	equ $80		;(2)
regA	equ ftmp+2	;(1)
regX	equ regA+1	;(1)
regY	equ regX+1	;(1)

hposp0	equ $D000
hposp1	equ $D001
hposp2	equ $D002
hposp3	equ $D003
hposm0	equ $D004
hposm1	equ $D005
hposm2	equ $D006
hposm3	equ $D007
sizep0	equ $D008
sizep1	equ $D009
sizep2	equ $D00A
sizep3	equ $D00B
sizem	equ $D00C

colpm0	equ 704		;$D012
colpm1	equ 705		;$D013
colpm2	equ 706		;$D014
colpm3	equ 707		;$D015
color0	equ 708		;$D016
color1	equ 709		;$D017
color2	equ 710		;$D018
color3	equ 711		;$D019
colbak	equ 712		;$D01A

gtictl	equ 623		;$D01B

chbase	equ 756		;$d409


;-- MAIN PROGRAM

	org pmBase+$10

.pages 3


.local ant

 dta $44
adr dta a(scr_first),$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04
 dta $04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04
 dta b($4e),a(ostatni_wiersz),$e,$e,$e,$e,$e,$e 
 dta $41,a(ant)

.endl


ostatni_wiersz
 ins 'load\load_2.mic',232*32,7*32

.endpg
 
	org pmBase+$300

pmg	SPRITES


 	org pmBase+$800

.pages 8

fnt
 ins 'load\load.fnt',0,73*8

scr
 ins 'load\load_2.scr'

; org $2000

main
;-- init PMG
 mva >pmg $d407		;missiles and players data address
 mva #3 $d01d		;enable players and missiles

; jsr save_color		;then save all colors and set value 0 for all colors
 jsr colors

 lda:cmp:req 20

 mwa #ant 560		;ANTIC address program
 mva #scr32 559		;set new screen's width

;-- first line of screen initialization

 lda >fnt
 sta chbase

 lda #$04
 sta gtictl
 lda #$03
 sta sizep0
 sta sizep1
 sta sizep3 
 lda #$0F
 sta sizem
 lda #$84
 sta hposp0
 sta hposp1
 lda #$A4
 sta hposm0
 sta hposm1
; lda #$54
; sta hposp3
; lda #$70
; sta hposm3 
 
 jsr fade_in

 rts

;--


colors

c0 lda #$00
 sta colbak
c1 lda #$00	54
 sta color0
c2 lda #$00	8A
 sta color1
c3 lda #$00	68
 sta color2
c4 lda #$00	34
 sta color3
c5 lda #$00	F8
 sta colpm0
c6 lda #$00	C8
 sta colpm1
c7 lda #$00	0C
 sta colpm3

 rts

;--
 icl 'load\load.fad'

.endpg

.macro SPRITES
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$0A,$0A,$0A,$0A,$0A,$0A,$0A,$00
 dta $0A,$0A,$0A,$0A,$0A,$0A,$0A,$00,$0A,$0A,$0A,$0A,$0A,$0A,$0A,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $08,$08,$08,$08,$08,$08,$08,$00,$0C,$0C,$0C,$0C,$0C,$0C,$0C,$00
 dta $0C,$0C,$0C,$0C,$0C,$0C,$0C,$00,$0C,$0C,$0C,$0C,$8C,$4C,$0C,$00
 dta $08,$08,$08,$08,$08,$08,$08,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $0C,$0C,$0C,$0C,$0C,$0C,$0C,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $0C,$0C,$0C,$0C,$0C,$0C,$0C,$00,$0C,$0C,$0C,$0C,$0C,$0C,$0C,$00
 dta $0C,$0C,$0C,$0C,$0C,$0C,$0C,$00,$3C,$3C,$3C,$3C,$3C,$3C,$3C,$3C

 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $07,$07,$07,$07,$07,$07,$07,$00,$0D,$0D,$0D,$0D,$0D,$0D,$0D,$00
 dta $0D,$0D,$0D,$0D,$0D,$0D,$0D,$00,$0D,$0D,$0D,$0D,$0D,$0D,$0D,$00
 dta $3F,$3F,$3F,$3F,$3F,$3F,$3F,$00,$6C,$6C,$6C,$6C,$6C,$6C,$6C,$00
 dta $6C,$6C,$6C,$6C,$6C,$6C,$6C,$00,$7C,$7C,$7C,$7C,$7C,$7C,$7C,$00
 dta $68,$68,$68,$68,$68,$68,$68,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $30,$30,$30,$30,$30,$30,$30,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $30,$30,$30,$30,$30,$30,$30,$00,$30,$30,$30,$30,$30,$30,$30,$00
 dta $30,$30,$30,$30,$30,$30,$30,$00,$30,$30,$30,$30,$30,$30,$30,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF

 dta $00,$00,$00,$00,$00,$00,$00,$00,$30,$30,$30,$30,$30,$30,$30,$00
 dta $30,$30,$30,$30,$30,$30,$30,$00,$30,$30,$30,$30,$30,$30,$30,$00
 dta $30,$30,$30,$30,$30,$30,$30,$00,$3C,$3C,$3C,$3C,$3C,$3C,$3C,$00
 dta $07,$07,$07,$07,$07,$07,$07,$00,$0D,$0D,$0D,$0D,$0D,$0D,$0D,$00
 dta $0D,$0D,$0D,$0D,$0D,$0D,$0D,$00,$0D,$0D,$0D,$0D,$0D,$0D,$0D,$00
 dta $07,$07,$07,$07,$07,$07,$07,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $07,$07,$07,$07,$07,$07,$07,$00,$06,$06,$06,$06,$06,$06,$06,$00
 dta $06,$06,$06,$06,$06,$06,$06,$00,$06,$06,$06,$06,$06,$06,$06,$00
 dta $07,$07,$07,$07,$07,$07,$07,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $03,$03,$03,$03,$03,$03,$03,$00,$06,$06,$06,$06,$06,$06,$06,$00
 dta $06,$06,$06,$06,$06,$06,$06,$00,$06,$06,$06,$06,$06,$06,$06,$00
 dta $03,$03,$03,$03,$03,$03,$03,$00,$00,$00,$00,$00,$00,$00,$00,$00

 org *+$100
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $7F,$7F,$43,$C3,$C3,$C3,$C3,$C0,$C0,$C0,$C0,$CF,$CF,$C3,$C3,$C3
 dta $C3,$C3,$C3,$C3,$C3,$63,$7F,$7F,$00,$00,$00,$00,$00,$00,$00,$00
 dta $7F,$7F,$43,$C3,$C3,$C3,$C3,$C0,$C0,$C0,$C0,$FC,$FC,$C0,$C0,$C0
 dta $C3,$C3,$C3,$C3,$C3,$63,$7F,$7F,$00,$00,$00,$00,$00,$00,$00,$00
 dta $7F,$7F,$43,$C3,$C3,$C3,$C3,$E3,$03,$03,$03,$03,$03,$03,$03,$03
 dta $03,$03,$03,$03,$03,$03,$03,$03,$00,$00,$00,$00,$00,$00,$00,$00
 dta $FF,$FE,$C2,$C3,$C3,$C3,$C3,$C3,$C3,$C3,$C2,$FE,$FE,$C2,$C3,$C3
 dta $C3,$C3,$C3,$C3,$C3,$C3,$C3,$E3,$00,$00,$00,$00,$00,$00,$00,$00
 dta $1C,$18,$18,$18,$18,$18,$18,$18,$18,$18,$18,$18,$18,$18,$18,$18
 dta $18,$18,$18,$18,$18,$18,$18,$1C,$00,$00,$00,$00,$00,$00,$00,$00
 dta $7F,$7E,$42,$C3,$C3,$C3,$C3,$C3,$C0,$C0,$60,$7F,$7E,$02,$03,$03
 dta $E3,$C3,$C3,$C3,$C3,$62,$7E,$7F,$00,$00,$00,$00,$00,$00,$00,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00

.endm

*--- MACRO DEFINITIONS

 opt l-
 icl 'load\load.mac'
 opt l+