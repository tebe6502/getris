mads 2.1.6 build 71 (9 Aug 23)
Source: d:\Download\getris\getris2.asm
     1 				/*
     2 				 Getris v2.0
     3 				 by Tomasz Biela (Tebe/Madteam)
     4 				 changes: 25.02.2006
     5 				 
     6 				 Opis rozgrywki:
     7 				 - zaczynamy od poziomu = 0, opoznienie dla spadajacych klockow to 8fps
     8 				 - aby przejsc na nastepny poziom musimy usunac 8 poziomych linii
     9 				 - z kazdym nowym poziomem liczba poziomych linii do usuniecia zwiekszana jest o 2, a opoznienie zmniejszane o 1 (min=2fps)
    10 				 - maksymalna liczba linii poziomych do usuniecia ograniczona jest do 16
    11
    12 				 Punktacja:
    13 				 - za kazdy upuszczony klocek dostajemy 10pkt * numer_poziomu
    14 				 - za usuniecie linii poziomej dostajemy 100pkt
    15
    16 				 Banki pamieci:
    17 				 - bank #1  over_msx ($4000..$4FFF), title_intro ($5000..$7FFF)
    18 				 - bank #2  muza z ekranu tytulowego
    19 				 - bank #3  muzy podczas gry
    20 				 - bank #4  mem_backup ($4000..$6FFF)
    21 				*/
    21
    22
    23 = 0100			@TAB_MEM_BANKS	equ $0100
    24 = 0400			@PROC_ADD_BANK	equ $0400
    25
    26 = B000			intro.fade_out	equ $b000		; 'JMP ADDRESS' do procedury wygaszenia ekranu GETRIS LOADING
    27
    28 = 23FD			title_intro.main	equ $2400-3	; adres uruchomienia dla TITLE_INTRO, blok aktualizacji i skok pod MAIN
    29 = 1000			congrat_intro.main	equ $1000
    30
    31 = 4000			muza            equ $4000
    32
    33
    34 = 00FF			delay_trig_default_value	equ $ff
    35 = 0004			delay_joy_default_value		equ 4
    36
    37
    38 = 0008			max_fps         equ 8           ; maksymalne opoznienie spadajacych klockow = 8
    39 = 0002			min_fps         equ 2           ; minimalne opoznienie spadajacych klockow = 2
    40
    41 = 0010			max_line        equ 16          ; maksymalna liczba poziomych linii do usuniecia
    42 = 0008			min_line	equ 8           ; minimalna liczba poziomych linii do usuniecia
    43
    44 				;nowy_klocek	equ 3           ; od ktorego poziomu gry dopuszczac najtrudniejszy klocek (krzyzowy)
    45
    46
    47 = 003D			scr32	equ %00111101	        ; obraz waski    *-screen 32b
    48 = 003E			scr40	equ %00111110	        ; obraz normalny *-screen 40b
    49
    50 = D000			Player0_PositionX equ $d000
    51 = D001			Player1_PositionX equ $d001
    52 = D002			Player2_PositionX equ $d002
    53 = D003			Player3_PositionX equ $d003
    54
    55 = D004			Missile0_PositionX equ $d004
    56 = D005			Missile1_PositionX equ $d005
    57 = D006			Missile2_PositionX equ $d006
    58 = D007			Missile3_PositionX equ $d007
    59
    60 = D008			Player0_Size equ $d008
    61 = D009			Player1_Size equ $d009
    62 = D00A			Player2_Size equ $d00a
    63 = D00B			Player3_Size equ $d00b
    64
    65 = D00C			Missiles_Size equ $d00c
    66
    67 = D012			Player0_Missile0_Color0_PM0 equ $d012
    68 = D013			Player1_Missile1_Color1_PM1 equ $d013
    69 = D014			Player2_Missile2_Color2_PM2 equ $d014
    70 = D015			Player3_Missile3_Color3_PM3 equ $d015
    71
    72 = D016			Playfield_Color0_PF0 equ $d016
    73 = D017			Playfield_Color1_PF1 equ $d017
    74 = D018			Playfield_Color2_PF2 equ $d018
    75 = D019			Playfield_Color3_PF3 equ $d019
    76 = D01A			Background_BAK       equ $d01a
    77
    78 = D01B			PRIOR_GTIACTL        equ $d01b
    79 = D409			CHARBASE             equ $d409
    80
    81 = 0200			buf		equ $0200           ; bufor tetris'a (width*height) ($d00 bajtow)
    82
    83 = 1000			fnt_txt1	equ $1000           ; zestaw znakow z grafika GAME OVER
    84 = 1400			fnt_txt2	equ fnt_txt1+$400   ; zestaw znakow z grafika napisow (well done, pause, game over)
    85
    86 = C000			t_satur		equ $c000
    87 = C300			pmBase1		equ t_satur+$300    ; pamiec dla PMG1
    88
    89 = C800			t_color		equ $c800
    90 = CB00			pmBase2		equ t_color+$300    ; pamiec dla PMG2
    91
    92 = CB00			pmBase_Text	equ pmBase2         ; pamiec PMG dla napisow (well done, pause, game over) i High Score
    93
    94 = D800			level_gfx	equ $d800           ; grafika licznika leveli (1200 bajtow)
    95 = DD00			klocki_gfx	equ $dd00           ; wycentrowana grafika klockow dla pola NEXT (648 bajtow)
    96
    97 = E000			fnt3_2		equ $e000           ; 2 zestaw znakow dla High Score ($400)
    98 = E800			fnt3		equ $e800           ; 1 zestaw znakow dla High Score ($300)
    99
   100
   101 				// !!!  FREE $EB00 ...  !!!
   102 = EB00			free_rom	equ $eb00
   103
   104
   105 = 006B			klocek_char	equ 107             ; wspolny znak klocka dla wszystkich zestawow znakow
   106 = 0073			puste_char	equ klocek_char+8   ; wspolny znak pustego klocka dla wszystkich zestawow znakow
   107
   108 = 0080			rejA	equ $80
   109 = 0081			rejX	equ rejA+1
   110 = 0082			rejY	equ rejX+1
   111 = 0083			tmp	equ rejY+1
   112
   113 = 0085			zp_free		equ tmp+2
   114
   115 = 0003			ofset		equ 3
   116
   117 = 0025			color_l		equ 37
   118
   119
   120 				;--- BASIC OFF
   121 				 org $2000
   122
   123 FFFF> 2000-2486> A9 01 +  mva #1 82
   124 2004 A9 FF 8D 01 D3	 mva #$ff $d301
   125 				 
   126 2009			 clrscr
Macro: CLRSCR [Source: d:\Download\getris\getris2.asm]
     1 2009 A9 7D			lda #'}'
     2 200B 20 B0 F2			jsr $f2b0
Source: d:\Download\getris\getris2.asm
   127
   128 				; print ' ' 
   129 200E			 print '          GETRIS 25.02.2006'
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 200E A2 18			ldx <text
     2 2010 A0 20			ldy >text
     3 2012 20 42 C6			jsr $c642
     4 2015 4C 34 20			jmp skip
     5 2018 20 20 20 20 20 20 + text	dta c '          GETRIS 25.02.2006',$9b
     6 2034			skip
Source: d:\Download\getris\getris2.asm
   130 2034			 print '          -------------------' 
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 2034 A2 3E			ldx <text
     2 2036 A0 20			ldy >text
     3 2038 20 42 C6			jsr $c642
     4 203B 4C 5C 20			jmp skip
     5 203E 20 20 20 20 20 20 + text	dta c '          -------------------',$9b
     6 205C			skip
Source: d:\Download\getris\getris2.asm
   131 205C			 print ' '
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 205C A2 66			ldx <text
     2 205E A0 20			ldy >text
     3 2060 20 42 C6			jsr $c642
     4 2063 4C 68 20			jmp skip
     5 2066 20 9B		text	dta c ' ',$9b
     6 2068			skip
Source: d:\Download\getris\getris2.asm
   132 2068			 print '                 CODE                 '*
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 2068 A2 72			ldx <text
     2 206A A0 20			ldy >text
     3 206C 20 42 C6			jsr $c642
     4 206F 4C 99 20			jmp skip
     5 2072 A0 A0 A0 A0 A0 A0 + text	dta c '                 CODE                 '*,$9b
     6 2099			skip
Source: d:\Download\getris\getris2.asm
   133 2099			 print '           Tomasz TEBE Biela'
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 2099 A2 A3			ldx <text
     2 209B A0 20			ldy >text
     3 209D 20 42 C6			jsr $c642
     4 20A0 4C C0 20			jmp skip
     5 20A3 20 20 20 20 20 20 + text	dta c '           Tomasz TEBE Biela',$9b
     6 20C0			skip
Source: d:\Download\getris\getris2.asm
   134 20C0			 print ' '
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 20C0 A2 CA			ldx <text
     2 20C2 A0 20			ldy >text
     3 20C4 20 42 C6			jsr $c642
     4 20C7 4C CC 20			jmp skip
     5 20CA 20 9B		text	dta c ' ',$9b
     6 20CC			skip
Source: d:\Download\getris\getris2.asm
   135 20CC			 print '               GRAPHICS               '*
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 20CC A2 D6			ldx <text
     2 20CE A0 20			ldy >text
     3 20D0 20 42 C6			jsr $c642
     4 20D3 4C FD 20			jmp skip
     5 20D6 A0 A0 A0 A0 A0 A0 + text	dta c '               GRAPHICS               '*,$9b
     6 20FD			skip
Source: d:\Download\getris\getris2.asm
   136 20FD			 print '          Kamil VIDOL Walaszek'
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 20FD A2 07			ldx <text
     2 20FF A0 21			ldy >text
     3 2101 20 42 C6			jsr $c642
     4 2104 4C 26 21			jmp skip
     5 2107 20 20 20 20 20 20 + text	dta c '          Kamil VIDOL Walaszek',$9b
     6 2126			skip
Source: d:\Download\getris\getris2.asm
   137 2126			 print ' '
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 2126 A2 30			ldx <text
     2 2128 A0 21			ldy >text
     3 212A 20 42 C6			jsr $c642
     4 212D 4C 32 21			jmp skip
     5 2130 20 9B		text	dta c ' ',$9b
     6 2132			skip
Source: d:\Download\getris\getris2.asm
   138 2132			 print '                MUSIC                 '*
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 2132 A2 3C			ldx <text
     2 2134 A0 21			ldy >text
     3 2136 20 42 C6			jsr $c642
     4 2139 4C 63 21			jmp skip
     5 213C A0 A0 A0 A0 A0 A0 + text	dta c '                MUSIC                 '*,$9b
     6 2163			skip
Source: d:\Download\getris\getris2.asm
   139 2163			 print '          Various People from'
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 2163 A2 6D			ldx <text
     2 2165 A0 21			ldy >text
     3 2167 20 42 C6			jsr $c642
     4 216A 4C 8B 21			jmp skip
     5 216D 20 20 20 20 20 20 + text	dta c '          Various People from',$9b
     6 218B			skip
Source: d:\Download\getris\getris2.asm
   140 218B			 print '        Atari Sap Music Archive'
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 218B A2 95			ldx <text
     2 218D A0 21			ldy >text
     3 218F 20 42 C6			jsr $c642
     4 2192 4C B5 21			jmp skip
     5 2195 20 20 20 20 20 20 + text	dta c '        Atari Sap Music Archive',$9b
     6 21B5			skip
Source: d:\Download\getris\getris2.asm
   141 21B5			 print ' '
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 21B5 A2 BF			ldx <text
     2 21B7 A0 21			ldy >text
     3 21B9 20 42 C6			jsr $c642
     4 21BC 4C C1 21			jmp skip
     5 21BF 20 9B		text	dta c ' ',$9b
     6 21C1			skip
Source: d:\Download\getris\getris2.asm
   142 21C1			 print '        -----------------------'  
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 21C1 A2 CB			ldx <text
     2 21C3 A0 21			ldy >text
     3 21C5 20 42 C6			jsr $c642
     4 21C8 4C EB 21			jmp skip
     5 21CB 20 20 20 20 20 20 + text	dta c '        -----------------------',$9b
     6 21EB			skip
Source: d:\Download\getris\getris2.asm
   143 21EB			 print '         Hardware Requirements'
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 21EB A2 F5			ldx <text
     2 21ED A0 21			ldy >text
     3 21EF 20 42 C6			jsr $c642
     4 21F2 4C 14 22			jmp skip
     5 21F5 20 20 20 20 20 20 + text	dta c '         Hardware Requirements',$9b
     6 2214			skip
Source: d:\Download\getris\getris2.asm
   144 2214			 print '        -----------------------' 
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 2214 A2 1E			ldx <text
     2 2216 A0 22			ldy >text
     3 2218 20 42 C6			jsr $c642
     4 221B 4C 3E 22			jmp skip
     5 221E 20 20 20 20 20 20 + text	dta c '        -----------------------',$9b
     6 223E			skip
Source: d:\Download\getris\getris2.asm
   145 				; print ' '
   146 223E			 print '- ANTIC (PAL System)'
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 223E A2 48			ldx <text
     2 2240 A0 22			ldy >text
     3 2242 20 42 C6			jsr $c642
     4 2245 4C 5D 22			jmp skip
     5 2248 2D 20 41 4E 54 49 + text	dta c '- ANTIC (PAL System)',$9b
     6 225D			skip
Source: d:\Download\getris\getris2.asm
   147 225D			 print '- POKEY (Recommended 2 pokey''''s)'
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 225D A2 67			ldx <text
     2 225F A0 22			ldy >text
     3 2261 20 42 C6			jsr $c642
     4 2264 4C 87 22			jmp skip
     5 2267 2D 20 50 4F 4B 45 + text	dta c '- POKEY (Recommended 2 pokey''s)',$9b
     6 2287			skip
Source: d:\Download\getris\getris2.asm
   148 2287			 print '- 64kB additional memory (ATARI 130XE) - Joystick in port 1 (AUTOFIRE=OFF !!!)- Color TV (PAL System)'
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 2287 A2 91			ldx <text
     2 2289 A0 22			ldy >text
     3 228B 20 42 C6			jsr $c642
     4 228E 4C F7 22			jmp skip
     5 2291 2D 20 36 34 6B 42 + text	dta c '- 64kB additional memory (ATARI 130XE) - Joystick in port 1 (AUTOFIRE=OFF !!!)- Color TV (PAL System)',$9b
     6 22F7			skip
Source: d:\Download\getris\getris2.asm
   149 22F7			 print ' '
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 22F7 A2 01			ldx <text
     2 22F9 A0 23			ldy >text
     3 22FB 20 42 C6			jsr $c642
     4 22FE 4C 03 23			jmp skip
     5 2301 20 9B		text	dta c ' ',$9b
     6 2303			skip
Source: d:\Download\getris\getris2.asm
   150 2303			 print '   >> Press any key to continue <<'
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 2303 A2 0D			ldx <text
     2 2305 A0 23			ldy >text
     3 2307 20 42 C6			jsr $c642
     4 230A 4C 30 23			jmp skip
     5 230D 20 20 20 3E 3E 20 + text	dta c '   >> Press any key to continue <<',$9b
     6 2330			skip
Source: d:\Download\getris\getris2.asm
   151
   152 2330			_lp
   153 2330 AC FC 02 C8		 ldy:iny 764
   154 2334 F0 FA		 beq _lp
   155 				 
   156 2336 A9 FF 8D FC 02	 mva #$ff 764
   157
   158 233B			 print ' '
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 233B A2 45			ldx <text
     2 233D A0 23			ldy >text
     3 233F 20 42 C6			jsr $c642
     4 2342 4C 47 23			jmp skip
     5 2345 20 9B		text	dta c ' ',$9b
     6 2347			skip
Source: d:\Download\getris\getris2.asm
   159
   160 2347 A5 14 C5 14 F0 FC	 lda:cmp:req 20
   161
   162 234D A9 00		 lda #0
   163 234F 8D 2F 02		 sta 559
   164 2352 8D 00 D4		 sta $d400
   165
   166 2355 A9 40 8D 0E D4	 mva #$40 $d40e 
   167 235A A9 FF 8D 01 D3	 mva #$ff $d301
   168 				 
   169 235F 20 E4 23		 jsr @mem_detect
   170 				 
   171 2362 C9 04		 cmp #4
   172 2364 B0 6D		 bcs ok
   173 				 
   174 2366 A9 3E		 lda #scr40
   175 2368 8D 2F 02		 sta 559
   176
   177 236B			 print 'GETRIS requires at least 64kB of RAM'
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 236B A2 75			ldx <text
     2 236D A0 23			ldy >text
     3 236F 20 42 C6			jsr $c642
     4 2372 4C 9A 23			jmp skip
     5 2375 47 45 54 52 49 53 + text	dta c 'GETRIS requires at least 64kB of RAM',$9b
     6 239A			skip
Source: d:\Download\getris\getris2.asm
   178 239A			 print ' '
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 239A A2 A4			ldx <text
     2 239C A0 23			ldy >text
     3 239E 20 42 C6			jsr $c642
     4 23A1 4C A6 23			jmp skip
     5 23A4 20 9B		text	dta c ' ',$9b
     6 23A6			skip
Source: d:\Download\getris\getris2.asm
   179 23A6			 print 'Press any key'
Macro: PRINT [Source: d:\Download\getris\getris2.asm]
     1 23A6 A2 B0			ldx <text
     2 23A8 A0 23			ldy >text
     3 23AA 20 42 C6			jsr $c642
     4 23AD 4C BE 23			jmp skip
     5 23B0 50 72 65 73 73 20 + text	dta c 'Press any key',$9b
     6 23BE			skip
Source: d:\Download\getris\getris2.asm
   180
   181 23BE A9 FF 8D FC 02	 mva #$ff 764
   182
   183 23C3			_rk
   184 23C3 AC FC 02 C8		 ldy:iny 764
   185 23C7 F0 FA		 beq _rk
   186
   187 23C9 A9 FF 8D FC 02	 mva #$ff 764
   188
   189 23CE 68			 pla
   190 23CF 68			 pla
   191
   192 23D0 6C 0A 00		 jmp ($a)
   193
   194
   195 23D3			ok
   196 23D3 A5 14 C5 14 F0 FC	 lda:cmp:req 20
   197
   198 23D9 A9 40 8D 0E D4	 mva #$40 $d40e 
   199 23DE A9 FF 8D 01 D3	 mva #$ff $d301
   200 23E3 60			 rts
   201
   202 23E4			 icl 'proc\@mem_detect.asm'
Source: macro\proc\@mem_detect.asm
     1
     2 				/*
     3 				  Detekcja pamiêci dodatkowej
     4
     5 				  Program na podstawie dopuszczalnych kodów banków dBANK sprawdza obecnoœæ rozszerzenia pamiêci
     6 				  i zapisuje od adresu @TAB_MEM_BANKS+1 znalezione banki. Sposób testowania wyklucza mo¿liwoœæ zdublowania
     7 				  któregokolwiek banku pamiêci dodatkowej.
     8
     9 				  Pierwszym wpisem w tablicy @TAB_MEM_BANKS jest wartoœæ $FF, jest to kod banku numer 0 w pamiêci podstawowej.
    10 				  Maksymalnie tablica z odnalezionymi bankami pamiêci mo¿e zawieraæ 65 wpisów !!! (dla 1MB dodatkowej pamiêci).
    11
    12 				  Liczba odnalezionych banków zwracana jest w rejestrze akumulatora A.
    13
    14 				  ostatnie zmiany: 14.03.2007
    15 				*/
    15
    16
    17
    18 23E4			.proc   @MEM_DETECT
    19
    20 = 0040			MAX_BANKS = 64		; maksymalna liczba banków pamiêci
    21
    22 = D301			PORTB	  = $D301
    23
    24
    25 				* zapamiêtamy bajty spod adresu $7FFF w tablicy dSAFE
    26
    27 23E4 AD FF 7F			LDA $7FFF	; bajt z pamiêci podstawowej
    28 23E7 8D 41 24			STA TEMP
    29
    30
    31 23EA A2 3F		        LDX #MAX_BANKS-1
    32
    33 23EC BD 47 24		_s1     LDA dBANK,X
    34 23EF 8D 01 D3		        STA PORTB
    35
    36 23F2 AD FF 7F		        LDA $7FFF
    37 23F5 9D 87 24		        STA dSAFE,X
    38
    39 23F8 CA			        DEX
    40 23F9 10 F1		        BPL _s1
    41
    42 				* w ka¿dym z banków pod adresem $7FFF zapisujemy kod banku
    43
    44 23FB A2 3F		        LDX #MAX_BANKS-1
    45
    46 23FD BD 47 24		_s2     LDA dBANK,X
    47 2400 8D 01 D3		        STA PORTB
    48
    49 2403 8D FF 7F		        STA $7FFF
    50
    51 2406 CA			        DEX
    52 2407 10 F4		        BPL _s2
    53
    54 				* wracamy do pamiêci podstawowej, tutaj pod $7FFF zapisujemy wartoœæ $FF
    55
    56 2409 A9 FF			LDA #$FF
    57 240B 8D 01 D3			STA PORTB
    58
    59 240E 8D FF 7F			STA $7FFF
    60
    61 2411 8D 00 01			STA @TAB_MEM_BANKS		; pierwszy wpis w @TAB_MEM_BANKS = $FF
    62
    63 				* sprawdzamy obecnoœæ banków dodatkowej pamiêci
    64 				* wykryte banki zapisujemy od adresu @TAB_MEM_BANKS+1
    65 				* rejestr Y zlicza znalezione banki pamiêci
    66
    67 2414 A0 00			LDY #0
    68
    69 2416 A2 3F		        LDX #MAX_BANKS-1
    70
    71 2418 BD 47 24		LOP	LDA dBANK,X
    72 241B 8D 01 D3		        STA PORTB
    73
    74 241E CD FF 7F		        CMP $7FFF
    75 2421 D0 04		        BNE SKP
    76
    77 2423 99 01 01			STA @TAB_MEM_BANKS+1,Y
    78 2426 C8			        INY
    79 2427			SKP
    80 2427 CA			        DEX
    81 2428 10 EE		        BPL LOP
    82
    83 				* przywracamy bajty z tablicy dSAFE pod adres $7FFF
    84
    85 242A A2 3F		        LDX #MAX_BANKS-1
    86
    87 242C BD 47 24		_r3     LDA dBANK,X
    88 242F 8D 01 D3		        STA PORTB
    89
    90 2432 BD 87 24		        LDA dSAFE,X
    91 2435 8D FF 7F		        STA $7FFF
    92
    93 2438 CA			        DEX
    94 2439 10 F1		        BPL _r3
    95
    96 				* koñczymy, przywracaj¹c pamiêæ podstawow¹
    97
    98 243B A9 FF		        LDA #$FF
    99 243D 8D 01 D3		        STA PORTB
   100
   101 2440 A9 00			LDA #0		; przywracamy star¹ zawartoœæ komórki pamiêci spod adresu $7FFF w pamiêci podstawowej
   102 = 2441			TEMP	EQU *-1
   103 2442 8D FF 7F			STA $7FFF
   104
   105 2445 98				TYA		; w regA liczba odnalezionych banków dodatkowej pamiêci
   106
   107 2446 60			        RTS
   108
   109 				* tablica dBANK zawiera dopuszczalne kody dla PORTB w³¹czaj¹ce banki
   110
   111 2447 E3 C3 A3 83 63 43 + dBANK   DTA B($E3),B($C3),B($A3),B($83),B($63),B($43),B($23),B($03)
   112 244F E7 C7 A7 87 67 47 +         DTA B($E7),B($C7),B($A7),B($87),B($67),B($47),B($27),B($07)
   113 2457 EB CB AB 8B 6B 4B +         DTA B($EB),B($CB),B($AB),B($8B),B($6B),B($4B),B($2B),B($0B)
   114 245F EF CF AF 8F 6F 4F +         DTA B($EF),B($CF),B($AF),B($8F),B($6F),B($4F),B($2F),B($0F)
   115
   116 2467 ED CD AD 8D 6D 4D +         DTA B($ED),B($CD),B($AD),B($8D),B($6D),B($4D),B($2D),B($0D)
   117 246F E9 C9 A9 89 69 49 +         DTA B($E9),B($C9),B($A9),B($89),B($69),B($49),B($29),B($09)
   118 2477 E5 C5 A5 85 65 45 +         DTA B($E5),B($C5),B($A5),B($85),B($65),B($45),B($25),B($05)
   119 247F E1 C1 A1 81 61 41 +         DTA B($E1),B($C1),B($A1),B($81),B($61),B($41),B($21),B($01)
   120
   121 = 2487			dSAFE	.ds MAX_BANKS
   122
   123 				.endp
   203
   204 02E2-02E3> 00 20		 ini $2000
   205
   206
   207 24C7			 org $2000
   208
   209 				*--- INTRO
   210 				 opt h-
   211
   212 2000 FF FF 10 B0 1A B1 +  ins 'intro3\intro3.obx'
   213
   214 				 opt h+
   215
   216 				;--- BANK #1,#2,#3,#4
   217 				 opt b+
   218
   219 				*--- BANK #1
   220
   221 				 lmb #1
   221 01,6244			@BANK_ADD 'L'
Macro: @BANK_ADD [Source: macro\@bank_add.mac]
    26 01,6244			 org @PROC_ADD_BANK
    28 01,0400-0406> AD 01 01	 lda @TAB_MEM_BANKS+(=*)
    29 01,0403 8D 01 D3		 sta $d301
    30 01,0406 60		 rts
    32 01,02E2-02E3> 00 04	 ini @PROC_ADD_BANK
    37 01,0407			   org $4000
Source: d:\Download\getris\getris2.asm
   222
   223 01,4000			.pages $40
   224
   225 01,4000			over_msx
   226 01,4000-7C39> 52 4D 54 +  ins 'game_over\msx\over_msx.dat'
   227
   228 01,5000			title_intro
   229 01,5000 DD 59 0F 74 53 +  ins 'title_lib.def'	; wersja z etykietami external
   230
   231 01,63BB			congrat_intro
   232 01,63BB DD 59 7F 5C 54 +  ins 'grat_lib.def'	; wersja z etykietami external
   233
   234 01,7C3A			.endpg
   235
   236 				 .print 'Bank #1 $4000..',*
   236 				Bank #1 $4000..$7C3A
   237
   238
   239 				*--- BANK #2
   240
   241 				 lmb #2
   241 02,7C3A			@BANK_ADD 'L'
Macro: @BANK_ADD [Source: macro\@bank_add.mac]
    26 02,7C3A			 org @PROC_ADD_BANK
    28 02,0400-0406> AD 02 01	 lda @TAB_MEM_BANKS+(=*)
    29 02,0403 8D 01 D3		 sta $d301
    30 02,0406 60		 rts
    32 02,02E2-02E3> 00 04	 ini @PROC_ADD_BANK
    37 02,0407			   org $4000
Source: d:\Download\getris\getris2.asm
   242
   243 02,4000			.pages $40
   244
   245 02,4000			title_intro_msx
   246
   249 				 opt l+
   250 02,4000-73FF> 46 6F 72 +  .sav [6] length
   251
   252 02,7400			.endpg
   253
   254 				 .print 'Bank #2 $4000..',*
   254 				Bank #2 $4000..$7400
   255
   256
   257 				*--- BANK #3
   258
   259 				 lmb #3
   259 03,7400			@BANK_ADD 'L'
Macro: @BANK_ADD [Source: macro\@bank_add.mac]
    26 03,7400			 org @PROC_ADD_BANK
    28 03,0400-0406> AD 03 01	 lda @TAB_MEM_BANKS+(=*)
    29 03,0403 8D 01 D3		 sta $d301
    30 03,0406 60		 rts
    32 03,02E2-02E3> 00 04	 ini @PROC_ADD_BANK
    37 03,0407			   org $4000
Source: d:\Download\getris\getris2.asm
   260
   261 03,4000			.pages $40
   262
   263 03,4000			game_msx
   264
   267 				 opt l+
   268 03,4000-7ECB> 3A 44 6A +  .sav [6] ?length
   269
   270
   271 03,4C36			game_msx2
   272
   275 				 opt l+
   276 03,4C36 D0 4E 00 4F 30 +  .sav [6] ?length
   277
   278
   279 03,580B			game_msx3
   280
   283 				 opt l+
   284 03,580B F5 5A 25 5B 55 +  .sav [6] ?length
   285
   286
   287 03,621C			hscore_msx
   288
   291 				 opt l+
   292 03,621C 66 65 96 65 C6 +  .sav [6] ?length
   293 				 
   294
   295 03,718A			congrat_intro_msx
   296
   299 				 opt l+
   300
   301 03,718A A0 E3 ED E3 A0 +  .sav [6] ?length
   302
   303 03,7ECC			.endpg
   304
   305 				 .print 'Bank #3 $4000..',*
   305 				Bank #3 $4000..$7ECC
   306
   307
   308 				*--- BANK #0
   309
   310 				 lmb #0		; koniecznie ustawiamy bank #0 wymuszajac wpisanie do $D301 wartosci $FF
   310 7ECC			@BANK_ADD 'L'
Macro: @BANK_ADD [Source: macro\@bank_add.mac]
    26 7ECC			 org @PROC_ADD_BANK
    28 0400-0406> AD 00 01	 lda @TAB_MEM_BANKS+(=*)
    29 0403 8D 01 D3		 sta $d301
    30 0406 60			 rts
    32 02E2-02E3> 00 04		 ini @PROC_ADD_BANK
    37 0407			   org $4000
Source: d:\Download\getris\getris2.asm
   311
   312
   313 				 opt b-
   314
   315
   316 				*--- BANK #4
   317
   318 04,4000			 lmb #4
   319
   320 = 04,4000		mem_backup = $4000
   321
   322
   323 				*--- BANK #0 (default)
   324
   325 4000			 rmb
   326
   327
   328 				/******************************************************************/
   329
   330 				/******************************************************************/
   331
   332 				/******************************************************************/
   333 				 
   334
   335 				;---
   336 4000			 org $2000
   337 				;---
   338
   339 2000-3286> A5 14 C5 14 +  lda:cmp:req 20
   340 				 
   341 2006 78			 sei
   342 2007 A9 00 8D 0E D4	 mva #0 $d40e
   343 				; sta $d400
   344 				; sta 559
   345
   346 200C A9 FE 8D 01 D3	 mva #$fe $d301
   347
   348 				; fonty przepisz przed PMG
   349 				; PMG wykorzystuje koncowke zestawow znakowych
   350 				 
   351 2011			 @move _fnt3_cop , fnt3 , 4
Macro: @MOVE [Source: d:\Download\getris\getris2.asm]
     1 2011 A9 65 8D AB 20 A9 +  mwa #_FNT3_COP move._src+1
     2 201B A9 E8		 lda >FNT3
     3 201D A2 04		 ldx #4
     4 201F 20 A5 20		 jsr move
Source: d:\Download\getris\getris2.asm
   352
   353 2022			 @move _fnt3_2_cop , fnt3_2 , 4
Macro: @MOVE [Source: d:\Download\getris\getris2.asm]
     1 2022 A9 65 8D AB 20 A9 +  mwa #_FNT3_2_COP move._src+1
     2 202C A9 E0		 lda >FNT3_2
     3 202E A2 04		 ldx #4
     4 2030 20 A5 20		 jsr move
Source: d:\Download\getris\getris2.asm
   354
   355 				/*
   356 				 ldy #0
   357 				pm_ini
   358 				 lda pm1,y
   359 				 sta pmBase1,y
   360 				 lda pm1+$100,y
   361 				 sta pmBase1+$100,y
   362 				 lda pm1+$200,y
   363 				 sta pmBase1+$200,y
   364 				 lda pm1+$300,y
   365 				 sta pmBase1+$300,y
   366 				 lda pm1+$400,y
   367 				 sta pmBase1+$400,y
   368
   369 				 lda pm2,y
   370 				 sta pmBase2,y
   371 				 lda pm2+$100,y
   372 				 sta pmBase2+$100,y
   373 				 lda pm2+$200,y
   374 				 sta pmBase2+$200,y
   375 				 lda pm2+$300,y
   376 				 sta pmBase2+$300,y
   377 				 lda pm2+$400,y
   378 				 sta pmBase2+$400,y
   379
   380 				 iny
   381 				 bne pm_ini
   382 				*/
   382
   383
   384 2033			 @move lvl_gfx , level_gfx , 5
Macro: @MOVE [Source: d:\Download\getris\getris2.asm]
     1 2033 A9 D7 8D AB 20 A9 +  mwa #LVL_GFX move._src+1
     2 203D A9 D8		 lda >LEVEL_GFX
     3 203F A2 05		 ldx #5
     4 2041 20 A5 20		 jsr move
Source: d:\Download\getris\getris2.asm
   385
   386 2044 A0 00		 ldy #0
   387 2046 B9 BD 2C		_cp lda kloc_gfx,y
   388 2049 99 00 DD		 sta klocki_gfx,y
   389 204C B9 BD 2D		 lda kloc_gfx+$100,y
   390 204F 99 00 DE		 sta klocki_gfx+$100,y
   391 2052 C8			 iny
   392 2053 D0 F1		 bne _cp
   393 				 
   394 				/*
   395 				 plik 'klocek_fazy.mic' zostanie przepisany
   396 				 na koniec zestawow znakow FNT1, FNT2
   397 				*/
   397
   398
   399 2055 A0 00		 ldy #0
   400 2057 B9 BD 20		_cp2 lda kloc_fazy,y
   401 205A 99 58 83		 sta fnt1+$400*0+klocek_char*8,y
   402 205D 99 58 87		 sta fnt1+$400*1+klocek_char*8,y
   403 2060 99 58 8B		 sta fnt1+$400*2+klocek_char*8,y
   404 2063 99 58 8F		 sta fnt1+$400*3+klocek_char*8,y
   405 2066 99 58 93		 sta fnt1+$400*4+klocek_char*8,y
   406 2069 99 58 97		 sta fnt1+$400*5+klocek_char*8,y
   407 				 
   408 206C 99 58 9B		 sta fnt2+$400*0+klocek_char*8,y
   409 206F 99 58 9F		 sta fnt2+$400*1+klocek_char*8,y
   410 2072 99 58 A3		 sta fnt2+$400*2+klocek_char*8,y
   411 2075 99 58 A7		 sta fnt2+$400*3+klocek_char*8,y
   412 2078 99 58 AB		 sta fnt2+$400*4+klocek_char*8,y
   413 207B 99 58 AF		 sta fnt2+$400*5+klocek_char*8,y
   414 207E C8			 iny
   415 207F C0 A8		 cpy #21*8
   416 2081 D0 D4		 bne _cp2
   417
   418
   419 2083 A2 14		 ldx #$14
   420 2085 A0 00		 ldy #0
   421 2087 B9 87 32		_cp0 lda pod_rom,y
   422 208A 99 00 EB		_cp1 sta free_rom,y
   423 208D C8			 iny
   424 208E D0 F7		 bne _cp0
   425
   426 2090 EE 89 20		 inc _cp0+2
   427 2093 EE 8C 20		 inc _cp1+2
   428 2096 CA			 dex
   429 2097 10 EE		 bpl _cp0
   430
   431
   432 2099 A9 FF 8D 01 D3	 mva #$ff $d301
   433 209E A9 40 8D 0E D4	 mva #$40 $d40e
   434 20A3 58			 cli 
   435 20A4 60			 rts
   436
   437 				;---
   438
   439 				/*
   440 				  Kopiuj 4kb obszar
   441 				  src: A (msb), dst: Y (msb)
   442 				*/
   442
   443
   444 				.macro @move
   445 				 mwa #:1 move._src+1
   446 				 lda >:2
   447 				 ldx #:3
   448 				 jsr move
   449 				.endm
   450
   451 20A5			.proc move
   452 20A5 8D AF 20		 sta _dst+2
   453 				 
   454 20A8 A0 00		 ldy #0
   455 				 
   456 20AA B9 00 FF		_src lda $ff00,y
   457 20AD 99 00 FF		_dst sta $ff00,y
   458
   459 20B0 C8			 iny
   460 20B1 D0 F7		 bne _src
   461 				 
   462 20B3 EE AC 20		 inc _src+2
   463 20B6 EE AF 20		 inc _dst+2
   464
   465 20B9 CA			 dex
   466 20BA D0 EE		 bne _src
   467 20BC 60			 rts
   468
   469 				.endp
   470
   471 				;---
   472
   473 				.macro load_level
   474 				?licz = :3
   475 				
   476 				 .rept :2
   477 				  ins :1,?licz,3
   478 				?licz = ?licz + 32
   479 				 .endr
   480 				
   481 				.endm
   482
   483
   484 				.macro get_klocSCR_pion
   485 				 ins :1+:2,1
   486 				 ins :1+:2+32,1
   487 				 ins :1+:2+64,1
   488 				 ins :1+:2+96,1
   489 				.endm
   490
   491 				.macro get_klocSCR
   492 				 get_klocSCR_pion :1 , 0
   493 				 get_klocSCR_pion :1 , 1
   494 				 get_klocSCR_pion :1 , 2
   495 				 get_klocSCR_pion :1 , 3
   496 				 get_klocSCR_pion :1 , 4
   497 				 get_klocSCR_pion :1 , 5
   498 				 get_klocSCR_pion :1 , 6
   499 				 get_klocSCR_pion :1 , 7
   500 				 get_klocSCR_pion :1 , 8
   501 				.endm
   502
   503
   504 				// fazy spadajacego klocka
   505 20BD			kloc_fazy
   506 20BD 3F 43 4F 43 53 43 +  ins 'klocek_fazy.fnt',0,21*8
   507
   508 				// zestaw znakow dla High Score
   509 2165			_fnt3_cop
   510 2165 00 00 00 00 00 00 +  ins 'H_Score_OK.fnt'                   ; FNT3
   511
   512 2965			_fnt3_2_cop
   513 2965 00 00 00 00 00 00 +  ins 'H_Score_OK.fnt',128*8,107*8       ; FNT3_2
   514 				 
   515
   516 				// grafika klockow dla okna NEXT
   517 2CBD			kloc_gfx
   518 2CBD			 load_level 'klocki_mic.scr'* , 30 , 0
Macro: LOAD_LEVEL [Source: d:\Download\getris\getris2.asm]
     1 = 0000			?licz = 0
     4 2CBD 00 01 00		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 0020			?LICZ = ?LICZ + 32
     4 2CC0 00 02 00		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 0040			?LICZ = ?LICZ + 32
     4 2CC3 00 03 00		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 0060			?LICZ = ?LICZ + 32
     4 2CC6 04 05 00		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 0080			?LICZ = ?LICZ + 32
     4 2CC9 06 07 00		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 00A0			?LICZ = ?LICZ + 32
     4 2CCC 08 09 0A		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 00C0			?LICZ = ?LICZ + 32
     4 2CCF 00 00 00		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 00E0			?LICZ = ?LICZ + 32
     4 2CD2 0B 0C 0D		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 0100			?LICZ = ?LICZ + 32
     4 2CD5 0E 0F 10		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 0120			?LICZ = ?LICZ + 32
     4 2CD8 00 00 00		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 0140			?LICZ = ?LICZ + 32
     4 2CDB 11 12 13		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 0160			?LICZ = ?LICZ + 32
     4 2CDE 14 14 00		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 0180			?LICZ = ?LICZ + 32
     4 2CE1 00 00 00		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 01A0			?LICZ = ?LICZ + 32
     4 2CE4 13 12 11		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 01C0			?LICZ = ?LICZ + 32
     4 2CE7 00 14 14		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 01E0			?LICZ = ?LICZ + 32
     4 2CEA 00 00 00		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 0200			?LICZ = ?LICZ + 32
     4 2CED 13 12 13		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 0220			?LICZ = ?LICZ + 32
     4 2CF0 00 14 00		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 0240			?LICZ = ?LICZ + 32
     4 2CF3 00 00 01		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 0260			?LICZ = ?LICZ + 32
     4 2CF6 00 00 02		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 0280			?LICZ = ?LICZ + 32
     4 2CF9 03 03 03		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 02A0			?LICZ = ?LICZ + 32
     4 2CFC 04 15 05		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 02C0			?LICZ = ?LICZ + 32
     4 2CFF 06 16 07		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 02E0			?LICZ = ?LICZ + 32
     4 2D02 08 0A 00		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 0300			?LICZ = ?LICZ + 32
     4 2D05 00 04 05		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 0320			?LICZ = ?LICZ + 32
     4 2D08 00 06 07		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 0340			?LICZ = ?LICZ + 32
     4 2D0B 08 09 0A		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 0360			?LICZ = ?LICZ + 32
     4 2D0E 00 01 00		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 0380			?LICZ = ?LICZ + 32
     4 2D11 17 02 17		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 03A0			?LICZ = ?LICZ + 32
     4 2D14 00 03 00		  INS 'klocki_mic.scr'*,?LICZ,3
     4 = 03C0			?LICZ = ?LICZ + 32
Source: d:\Download\getris\getris2.asm
   519 2D17 00 00 00 00 00 00 +  ins 'klocki_mic.fnt',0,24*8
   520
   521 				// grafika dla licznika leveli (360 bajtow + 840 bajtow = 1200 bajtow)
   522 2DD7			lvl_gfx
   523 2DD7			 load_level 'level_al.scr'* , 20 , 0
Macro: LOAD_LEVEL [Source: d:\Download\getris\getris2.asm]
     1 = 0000			?licz = 0
     4 2DD7 00 01 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 0020			?LICZ = ?LICZ + 32
     4 2DDA 08 09 0A		  INS 'level_al.scr'*,?LICZ,3
     4 = 0040			?LICZ = ?LICZ + 32
     4 2DDD 00 15 07		  INS 'level_al.scr'*,?LICZ,3
     4 = 0060			?LICZ = ?LICZ + 32
     4 2DE0 08 17 18		  INS 'level_al.scr'*,?LICZ,3
     4 = 0080			?LICZ = ?LICZ + 32
     4 2DE3 00 01 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 00A0			?LICZ = ?LICZ + 32
     4 2DE6 08 1E 1F		  INS 'level_al.scr'*,?LICZ,3
     4 = 00C0			?LICZ = ?LICZ + 32
     4 2DE9 00 01 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 00E0			?LICZ = ?LICZ + 32
     4 2DEC 08 25 26		  INS 'level_al.scr'*,?LICZ,3
     4 = 0100			?LICZ = ?LICZ + 32
     4 2DEF 00 2C 2D		  INS 'level_al.scr'*,?LICZ,3
     4 = 0120			?LICZ = ?LICZ + 32
     4 2DF2 08 2F 30		  INS 'level_al.scr'*,?LICZ,3
     4 = 0140			?LICZ = ?LICZ + 32
     4 2DF5 00 36 2D		  INS 'level_al.scr'*,?LICZ,3
     4 = 0160			?LICZ = ?LICZ + 32
     4 2DF8 08 38 39		  INS 'level_al.scr'*,?LICZ,3
     4 = 0180			?LICZ = ?LICZ + 32
     4 2DFB 00 01 2D		  INS 'level_al.scr'*,?LICZ,3
     4 = 01A0			?LICZ = ?LICZ + 32
     4 2DFE 08 40 39		  INS 'level_al.scr'*,?LICZ,3
     4 = 01C0			?LICZ = ?LICZ + 32
     4 2E01 00 46 47		  INS 'level_al.scr'*,?LICZ,3
     4 = 01E0			?LICZ = ?LICZ + 32
     4 2E04 08 4A 4B		  INS 'level_al.scr'*,?LICZ,3
     4 = 0200			?LICZ = ?LICZ + 32
     4 2E07 00 01 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 0220			?LICZ = ?LICZ + 32
     4 2E0A 08 51 52		  INS 'level_al.scr'*,?LICZ,3
     4 = 0240			?LICZ = ?LICZ + 32
     4 2E0D 00 01 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 0260			?LICZ = ?LICZ + 32
     4 2E10 08 58 26		  INS 'level_al.scr'*,?LICZ,3
     4 = 0280			?LICZ = ?LICZ + 32
Source: d:\Download\getris\getris2.asm
   524 2E13			 load_level 'level_al.scr'* , 20 , 3
Macro: LOAD_LEVEL [Source: d:\Download\getris\getris2.asm]
     1 = 0003			?licz = 3
     4 2E13 03 00 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 0023			?LICZ = ?LICZ + 32
     4 2E16 0B 0C 0A		  INS 'level_al.scr'*,?LICZ,3
     4 = 0043			?LICZ = ?LICZ + 32
     4 2E19 03 03 07		  INS 'level_al.scr'*,?LICZ,3
     4 = 0063			?LICZ = ?LICZ + 32
     4 2E1C 0B 19 18		  INS 'level_al.scr'*,?LICZ,3
     4 = 0083			?LICZ = ?LICZ + 32
     4 2E1F 03 00 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 00A3			?LICZ = ?LICZ + 32
     4 2E22 0B 20 1F		  INS 'level_al.scr'*,?LICZ,3
     4 = 00C3			?LICZ = ?LICZ + 32
     4 2E25 03 00 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 00E3			?LICZ = ?LICZ + 32
     4 2E28 0B 27 26		  INS 'level_al.scr'*,?LICZ,3
     4 = 0103			?LICZ = ?LICZ + 32
     4 2E2B 03 04 2D		  INS 'level_al.scr'*,?LICZ,3
     4 = 0123			?LICZ = ?LICZ + 32
     4 2E2E 0B 31 30		  INS 'level_al.scr'*,?LICZ,3
     4 = 0143			?LICZ = ?LICZ + 32
     4 2E31 03 06 2D		  INS 'level_al.scr'*,?LICZ,3
     4 = 0163			?LICZ = ?LICZ + 32
     4 2E34 0B 3A 39		  INS 'level_al.scr'*,?LICZ,3
     4 = 0183			?LICZ = ?LICZ + 32
     4 2E37 03 00 2D		  INS 'level_al.scr'*,?LICZ,3
     4 = 01A3			?LICZ = ?LICZ + 32
     4 2E3A 0B 41 39		  INS 'level_al.scr'*,?LICZ,3
     4 = 01C3			?LICZ = ?LICZ + 32
     4 2E3D 03 48 47		  INS 'level_al.scr'*,?LICZ,3
     4 = 01E3			?LICZ = ?LICZ + 32
     4 2E40 0B 4C 4B		  INS 'level_al.scr'*,?LICZ,3
     4 = 0203			?LICZ = ?LICZ + 32
     4 2E43 03 00 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 0223			?LICZ = ?LICZ + 32
     4 2E46 0B 53 52		  INS 'level_al.scr'*,?LICZ,3
     4 = 0243			?LICZ = ?LICZ + 32
     4 2E49 03 00 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 0263			?LICZ = ?LICZ + 32
     4 2E4C 0B 59 5A		  INS 'level_al.scr'*,?LICZ,3
     4 = 0283			?LICZ = ?LICZ + 32
Source: d:\Download\getris\getris2.asm
   525 2E4F			 load_level 'level_al.scr'* , 20 , 6
Macro: LOAD_LEVEL [Source: d:\Download\getris\getris2.asm]
     1 = 0006			?licz = 6
     4 2E4F 00 01 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 0026			?LICZ = ?LICZ + 32
     4 2E52 0D 0E 0A		  INS 'level_al.scr'*,?LICZ,3
     4 = 0046			?LICZ = ?LICZ + 32
     4 2E55 00 15 07		  INS 'level_al.scr'*,?LICZ,3
     4 = 0066			?LICZ = ?LICZ + 32
     4 2E58 0D 1A 18		  INS 'level_al.scr'*,?LICZ,3
     4 = 0086			?LICZ = ?LICZ + 32
     4 2E5B 00 01 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 00A6			?LICZ = ?LICZ + 32
     4 2E5E 0D 21 1F		  INS 'level_al.scr'*,?LICZ,3
     4 = 00C6			?LICZ = ?LICZ + 32
     4 2E61 00 01 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 00E6			?LICZ = ?LICZ + 32
     4 2E64 0D 28 26		  INS 'level_al.scr'*,?LICZ,3
     4 = 0106			?LICZ = ?LICZ + 32
     4 2E67 00 2C 2D		  INS 'level_al.scr'*,?LICZ,3
     4 = 0126			?LICZ = ?LICZ + 32
     4 2E6A 0D 32 30		  INS 'level_al.scr'*,?LICZ,3
     4 = 0146			?LICZ = ?LICZ + 32
     4 2E6D 00 36 2D		  INS 'level_al.scr'*,?LICZ,3
     4 = 0166			?LICZ = ?LICZ + 32
     4 2E70 0D 3B 39		  INS 'level_al.scr'*,?LICZ,3
     4 = 0186			?LICZ = ?LICZ + 32
     4 2E73 00 01 2D		  INS 'level_al.scr'*,?LICZ,3
     4 = 01A6			?LICZ = ?LICZ + 32
     4 2E76 0D 42 39		  INS 'level_al.scr'*,?LICZ,3
     4 = 01C6			?LICZ = ?LICZ + 32
     4 2E79 00 46 47		  INS 'level_al.scr'*,?LICZ,3
     4 = 01E6			?LICZ = ?LICZ + 32
     4 2E7C 0D 4D 4B		  INS 'level_al.scr'*,?LICZ,3
     4 = 0206			?LICZ = ?LICZ + 32
     4 2E7F 00 01 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 0226			?LICZ = ?LICZ + 32
     4 2E82 0D 54 52		  INS 'level_al.scr'*,?LICZ,3
     4 = 0246			?LICZ = ?LICZ + 32
     4 2E85 00 01 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 0266			?LICZ = ?LICZ + 32
     4 2E88 0D 5B 5A		  INS 'level_al.scr'*,?LICZ,3
     4 = 0286			?LICZ = ?LICZ + 32
Source: d:\Download\getris\getris2.asm
   526 2E8B			 load_level 'level_al.scr'* , 20 , 9
Macro: LOAD_LEVEL [Source: d:\Download\getris\getris2.asm]
     1 = 0009			?licz = 9
     4 2E8B 00 01 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 0029			?LICZ = ?LICZ + 32
     4 2E8E 0F 10 0A		  INS 'level_al.scr'*,?LICZ,3
     4 = 0049			?LICZ = ?LICZ + 32
     4 2E91 00 15 07		  INS 'level_al.scr'*,?LICZ,3
     4 = 0069			?LICZ = ?LICZ + 32
     4 2E94 0F 1B 18		  INS 'level_al.scr'*,?LICZ,3
     4 = 0089			?LICZ = ?LICZ + 32
     4 2E97 00 01 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 00A9			?LICZ = ?LICZ + 32
     4 2E9A 0F 22 1F		  INS 'level_al.scr'*,?LICZ,3
     4 = 00C9			?LICZ = ?LICZ + 32
     4 2E9D 00 01 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 00E9			?LICZ = ?LICZ + 32
     4 2EA0 0F 29 26		  INS 'level_al.scr'*,?LICZ,3
     4 = 0109			?LICZ = ?LICZ + 32
     4 2EA3 00 2C 2D		  INS 'level_al.scr'*,?LICZ,3
     4 = 0129			?LICZ = ?LICZ + 32
     4 2EA6 0F 33 30		  INS 'level_al.scr'*,?LICZ,3
     4 = 0149			?LICZ = ?LICZ + 32
     4 2EA9 00 36 2D		  INS 'level_al.scr'*,?LICZ,3
     4 = 0169			?LICZ = ?LICZ + 32
     4 2EAC 3C 3D 39		  INS 'level_al.scr'*,?LICZ,3
     4 = 0189			?LICZ = ?LICZ + 32
     4 2EAF 00 01 2D		  INS 'level_al.scr'*,?LICZ,3
     4 = 01A9			?LICZ = ?LICZ + 32
     4 2EB2 3C 43 39		  INS 'level_al.scr'*,?LICZ,3
     4 = 01C9			?LICZ = ?LICZ + 32
     4 2EB5 00 46 47		  INS 'level_al.scr'*,?LICZ,3
     4 = 01E9			?LICZ = ?LICZ + 32
     4 2EB8 3C 4E 4B		  INS 'level_al.scr'*,?LICZ,3
     4 = 0209			?LICZ = ?LICZ + 32
     4 2EBB 00 01 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 0229			?LICZ = ?LICZ + 32
     4 2EBE 3C 55 52		  INS 'level_al.scr'*,?LICZ,3
     4 = 0249			?LICZ = ?LICZ + 32
     4 2EC1 00 01 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 0269			?LICZ = ?LICZ + 32
     4 2EC4 3C 5C 5A		  INS 'level_al.scr'*,?LICZ,3
     4 = 0289			?LICZ = ?LICZ + 32
Source: d:\Download\getris\getris2.asm
   527 2EC7			 load_level 'level_al.scr'* , 20 , 12
Macro: LOAD_LEVEL [Source: d:\Download\getris\getris2.asm]
     1 = 000C			?licz = 12
     4 2EC7 04 05 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 002C			?LICZ = ?LICZ + 32
     4 2ECA 11 12 0A		  INS 'level_al.scr'*,?LICZ,3
     4 = 004C			?LICZ = ?LICZ + 32
     4 2ECD 04 16 07		  INS 'level_al.scr'*,?LICZ,3
     4 = 006C			?LICZ = ?LICZ + 32
     4 2ED0 11 1C 18		  INS 'level_al.scr'*,?LICZ,3
     4 = 008C			?LICZ = ?LICZ + 32
     4 2ED3 04 05 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 00AC			?LICZ = ?LICZ + 32
     4 2ED6 11 23 1F		  INS 'level_al.scr'*,?LICZ,3
     4 = 00CC			?LICZ = ?LICZ + 32
     4 2ED9 04 05 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 00EC			?LICZ = ?LICZ + 32
     4 2EDC 11 2A 26		  INS 'level_al.scr'*,?LICZ,3
     4 = 010C			?LICZ = ?LICZ + 32
     4 2EDF 04 2E 2D		  INS 'level_al.scr'*,?LICZ,3
     4 = 012C			?LICZ = ?LICZ + 32
     4 2EE2 11 34 30		  INS 'level_al.scr'*,?LICZ,3
     4 = 014C			?LICZ = ?LICZ + 32
     4 2EE5 04 37 2D		  INS 'level_al.scr'*,?LICZ,3
     4 = 016C			?LICZ = ?LICZ + 32
     4 2EE8 11 3E 39		  INS 'level_al.scr'*,?LICZ,3
     4 = 018C			?LICZ = ?LICZ + 32
     4 2EEB 04 05 2D		  INS 'level_al.scr'*,?LICZ,3
     4 = 01AC			?LICZ = ?LICZ + 32
     4 2EEE 11 44 39		  INS 'level_al.scr'*,?LICZ,3
     4 = 01CC			?LICZ = ?LICZ + 32
     4 2EF1 04 49 47		  INS 'level_al.scr'*,?LICZ,3
     4 = 01EC			?LICZ = ?LICZ + 32
     4 2EF4 11 4F 4B		  INS 'level_al.scr'*,?LICZ,3
     4 = 020C			?LICZ = ?LICZ + 32
     4 2EF7 04 05 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 022C			?LICZ = ?LICZ + 32
     4 2EFA 11 56 52		  INS 'level_al.scr'*,?LICZ,3
     4 = 024C			?LICZ = ?LICZ + 32
     4 2EFD 04 05 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 026C			?LICZ = ?LICZ + 32
     4 2F00 11 5D 5A		  INS 'level_al.scr'*,?LICZ,3
     4 = 028C			?LICZ = ?LICZ + 32
Source: d:\Download\getris\getris2.asm
   528 2F03			 load_level 'level_al.scr'* , 20 , 15
Macro: LOAD_LEVEL [Source: d:\Download\getris\getris2.asm]
     1 = 000F			?licz = 15
     4 2F03 06 05 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 002F			?LICZ = ?LICZ + 32
     4 2F06 13 14 0A		  INS 'level_al.scr'*,?LICZ,3
     4 = 004F			?LICZ = ?LICZ + 32
     4 2F09 06 16 07		  INS 'level_al.scr'*,?LICZ,3
     4 = 006F			?LICZ = ?LICZ + 32
     4 2F0C 13 1D 18		  INS 'level_al.scr'*,?LICZ,3
     4 = 008F			?LICZ = ?LICZ + 32
     4 2F0F 06 05 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 00AF			?LICZ = ?LICZ + 32
     4 2F12 13 24 1F		  INS 'level_al.scr'*,?LICZ,3
     4 = 00CF			?LICZ = ?LICZ + 32
     4 2F15 06 05 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 00EF			?LICZ = ?LICZ + 32
     4 2F18 13 2B 26		  INS 'level_al.scr'*,?LICZ,3
     4 = 010F			?LICZ = ?LICZ + 32
     4 2F1B 06 2E 2D		  INS 'level_al.scr'*,?LICZ,3
     4 = 012F			?LICZ = ?LICZ + 32
     4 2F1E 13 35 30		  INS 'level_al.scr'*,?LICZ,3
     4 = 014F			?LICZ = ?LICZ + 32
     4 2F21 06 37 2D		  INS 'level_al.scr'*,?LICZ,3
     4 = 016F			?LICZ = ?LICZ + 32
     4 2F24 13 3F 39		  INS 'level_al.scr'*,?LICZ,3
     4 = 018F			?LICZ = ?LICZ + 32
     4 2F27 06 05 2D		  INS 'level_al.scr'*,?LICZ,3
     4 = 01AF			?LICZ = ?LICZ + 32
     4 2F2A 13 45 39		  INS 'level_al.scr'*,?LICZ,3
     4 = 01CF			?LICZ = ?LICZ + 32
     4 2F2D 06 49 47		  INS 'level_al.scr'*,?LICZ,3
     4 = 01EF			?LICZ = ?LICZ + 32
     4 2F30 13 50 4B		  INS 'level_al.scr'*,?LICZ,3
     4 = 020F			?LICZ = ?LICZ + 32
     4 2F33 06 05 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 022F			?LICZ = ?LICZ + 32
     4 2F36 13 57 52		  INS 'level_al.scr'*,?LICZ,3
     4 = 024F			?LICZ = ?LICZ + 32
     4 2F39 06 05 02		  INS 'level_al.scr'*,?LICZ,3
     4 = 026F			?LICZ = ?LICZ + 32
     4 2F3C 13 5E 5A		  INS 'level_al.scr'*,?LICZ,3
     4 = 028F			?LICZ = ?LICZ + 32
Source: d:\Download\getris\getris2.asm
   529 				 
   530 2F3F 00 00 00 00 00 00 +  ins 'level_al.fnt',0,105*8
   531
   532 				/*
   533 				// ekran1
   534 				pm1
   535 				 :ofset brk
   536 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   537 				 dta $0E,$06,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$06,$0E,$08
   538 				 dta $0E,$02,$0E,$06,$0E,$02,$0E,$02,$02,$02,$02,$02,$02,$02,$02,$00
   539 				 dta $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$00
   540 				 dta $02,$02,$02,$0A,$0E,$02,$02,$02,$02,$02,$02,$02,$06,$02,$0A,$00
   541 				 dta $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$00
   542 				 dta $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$00
   543 				 dta $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$0A,$02,$06,$00
   544 				 dta $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$06,$02,$06,$02,$02,$00
   545 				 dta $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$00
   546 				 dta $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$00
   547 				 dta $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$0A,$02,$06,$02,$04
   548 				 dta $0E,$02,$0A,$02,$02,$02,$06,$02,$02,$02,$0E,$02,$02,$02,$06,$00
   549 				 dta $02,$02,$02,$02,$02,$02,$02,$02,$03,$03,$03,$03,$03,$03,$03,$00
   550 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   551 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   552
   553 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   554 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$00
   555 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$00
   556 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$00
   557 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$00
   558 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$00
   559 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$00
   560 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$00
   561 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$00
   562 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$00
   563 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$00
   564 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$00
   565 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$00
   566 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$55,$FF,$FF,$FF,$FF,$FF,$FF,$00
   567 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   568 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   569
   570 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   571 				 dta $A0,$80,$80,$80,$80,$EA,$20,$FE,$D4,$FC,$F4,$FC,$F8,$E8,$FC,$50
   572 				 dta $F9,$03,$A3,$01,$A1,$01,$81,$03,$02,$00,$00,$00,$00,$00,$00,$00
   573 				 dta $00,$00,$00,$00,$02,$28,$00,$20,$00,$23,$80,$A8,$50,$F8,$50,$F0
   574 				 dta $70,$B0,$6B,$F5,$FF,$D5,$FF,$C0,$EA,$00,$A8,$00,$00,$00,$00,$00
   575 				 dta $00,$00,$00,$00,$00,$00,$00,$01,$00,$02,$00,$24,$00,$28,$00,$2A
   576 				 dta $0A,$3B,$4A,$9F,$0B,$1F,$1F,$1A,$1F,$0A,$1B,$02,$0A,$00,$0A,$00
   577 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$80,$00,$80,$00
   578 				 dta $FE,$00,$00,$00,$00,$00,$00,$00,$5C,$00,$00,$00,$00,$00,$00,$00
   579 				 dta $30,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   580 				 dta $04,$00,$08,$00,$00,$00,$00,$00,$68,$00,$00,$00,$01,$00,$02,$00
   581 				 dta $16,$00,$08,$00,$00,$00,$00,$00,$00,$0E,$11,$40,$00,$80,$00,$00
   582 				 dta $1C,$04,$1C,$00,$00,$00,$00,$00,$28,$00,$00,$00,$30,$00,$80,$00
   583 				 dta $C0,$00,$98,$00,$00,$00,$02,$00,$02,$00,$00,$00,$00,$00,$00,$00
   584 				 dta $21,$00,$6C,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   585 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   586
   587 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   588 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   589 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   590 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   591 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   592 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   593 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   594 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   595 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   596 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   597 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   598 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   599 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   600 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$28,$78,$78,$78,$78,$78,$78,$00
   601 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   602 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   603
   604 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   605 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   606 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   607 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   608 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   609 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   610 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   611 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   612 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   613 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   614 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   615 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   616 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   617 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$28,$78,$78,$78,$78,$78,$78,$00
   618 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   619 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   620
   621 				;---
   622 				// ekran2
   623 				pm2
   624 				 :ofset brk
   625 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   626 				 dta $0A,$0E,$02,$02,$02,$02,$02,$0E,$02,$02,$02,$02,$02,$02,$02,$02
   627 				 dta $0A,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02
   628 				 dta $02,$02,$02,$02,$02,$02,$02,$02,$0A,$02,$02,$02,$02,$02,$02,$02
   629 				 dta $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02
   630 				 dta $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02
   631 				 dta $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02
   632 				 dta $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$06
   633 				 dta $06,$02,$02,$02,$02,$0A,$02,$0A,$02,$0A,$02,$02,$02,$02,$02,$02
   634 				 dta $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02
   635 				 dta $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02
   636 				 dta $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02
   637 				 dta $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02
   638 				 dta $02,$02,$02,$02,$02,$02,$02,$02,$03,$03,$03,$03,$03,$03,$03,$00
   639 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   640 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF
   641
   642 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   643 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01
   644 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01
   645 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01
   646 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01
   647 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01
   648 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01
   649 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01
   650 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01
   651 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01
   652 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01
   653 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01
   654 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01
   655 				 dta $01,$01,$01,$01,$01,$01,$01,$01,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$00
   656 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   657 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF
   658
   659 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   660 				 dta $E0,$C0,$00,$20,$00,$A0,$00,$00,$7F,$00,$00,$00,$00,$08,$00,$08
   661 				 dta $24,$00,$00,$00,$00,$00,$00,$00,$00,$02,$00,$00,$00,$00,$00,$00
   662 				 dta $00,$00,$00,$00,$04,$00,$A0,$00,$A0,$00,$D4,$00,$F0,$A8,$F0,$A0
   663 				 dta $F0,$F0,$7E,$FF,$00,$00,$00,$00,$80,$00,$00,$01,$00,$00,$00,$04
   664 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$02,$00,$08,$00,$48,$00,$AA,$00
   665 				 dta $3E,$22,$BE,$2A,$AC,$3A,$2E,$3E,$2A,$3E,$22,$2E,$00,$2A,$00,$08
   666 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$08,$00,$00
   667 				 dta $3F,$02,$00,$40,$00,$80,$00,$02,$02,$00,$00,$00,$00,$00,$00,$00
   668 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   669 				 dta $0A,$00,$02,$00,$0B,$00,$3F,$2A,$3E,$2E,$36,$3C,$34,$3C,$54,$7C
   670 				 dta $04,$50,$00,$10,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   671 				 dta $01,$50,$00,$00,$00,$08,$08,$28,$F5,$05,$00,$30,$00,$40,$00,$C0
   672 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00,$00,$00
   673 				 dta $00,$94,$00,$E0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   674 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF
   675
   676 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   677 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   678 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   679 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   680 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   681 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   682 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   683 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   684 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   685 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   686 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   687 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   688 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   689 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   690 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   691 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF
   692
   693 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   694 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   695 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   696 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   697 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   698 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   699 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   700 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   701 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   702 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   703 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   704 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   705 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   706 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$78,$78,$78,$78,$78,$78,$78,$00
   707 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   708 				 dta $00,$00,$00,$00,$00,$00,$00,$00,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF
   709 				*/
   709
   710
   711
   712 				/*
   713 				  Procedury do przepisania pod ROM
   714 				*/
   714
   715 3287			pod_rom
   716
   717 3287			        org free_rom,*
   718
   719 EB00			switch_bank
   720 3287-46A6> BD 00 01	 lda @TAB_MEM_BANKS,x
   721 EB03 29 FE		 and #$fe
   722 EB05 8D 01 D3		 sta $d301
   723 EB08 60			 rts 
   724
   725
   726 EB09			.proc mem_move
   727 EB09 8E 15 EB		 stx src+2
   728 EB0C 8C 18 EB		 sty dst+2
   729
   730 EB0F A2 2F		 ldx #$30-1
   731 EB11 A0 00		 ldy #0
   732 EB13 B9 00 FF		src lda $FF00,y
   733 EB16 99 00 FF		dst sta $FF00,y
   734 EB19 C8			 iny
   735 EB1A D0 F7		 bne src
   736
   737 EB1C EE 15 EB		 inc src+2
   738 EB1F EE 18 EB		 inc dst+2
   739 EB22 CA			 dex
   740 EB23 10 EE		 bpl src
   741 EB25 60			 rts
   742
   743 				.endp
   744
   745
   746 				/*
   747 				  Procedura wlaczajaca ekran CONGRATULATIONS  (koniecznie ponizej adresu $4000)
   748 				*/
   748
   749 EB26			.proc congrat
   750
   751 				;--- zachowujemy zawartosc obszaru $1000..$3FFF
   752 EB26 A2 04		 ldx #=mem_backup
   753 EB28 20 00 EB		 jsr switch_bank
   754
   755 EB2B A2 10		 ldx >$1000
   756 EB2D A0 40		 ldy >mem_backup
   757 EB2F 20 09 EB		 jsr mem_move
   758
   759 				;--- kopiujemy CONGRAT_INTRO w obszar $1000..$3FFF
   760 EB32 A2 01		 ldx #=congrat_intro
   761 EB34 20 00 EB		 jsr switch_bank
   762
   763 EB37 A9 BB 85 40 A9 63 +  mwa #congrat_intro inputPointer
   764 EB3F A9 00 85 42 A9 10 +  mwa #$1000	    outputPointer
   765 EB47 20 28 FC		 jsr inflate
   766
   767 EB4A A2 03		 ldx #=congrat_intro_msx
   768 EB4C 20 00 EB		 jsr switch_bank
   769
   770 EB4F A2 59		 ldx <congrat_intro_update_address
   771 EB51 A0 EB		 ldy >congrat_intro_update_address
   772 EB53 20 00 10		 jsr congrat_intro.main
   773
   774 EB56 4C 8F EB		 jmp title.return
   775
   776 				.endp
   777
   778 				;  music		ext .word
   779 				;  default_nmi		ext .word
   780 				;  reset_pokey		ext .word
   781
   782 EB59			congrat_intro_update_address
   783 EB59 8A 71 CB EB B5 EB	 dta a( congrat_intro_msx , default_nmi , reset_pokey )
   784
   785
   786 				/*
   787 				  Procedura wlaczajaca ekran tytulowy  (koniecznie ponizej adresu $4000)
   788 				*/
   788
   789 EB5F			.proc title
   790
   791 				;--- zachowujemy zawartosc obszaru $1000..$3FFF
   792 EB5F A2 04		 ldx #=mem_backup
   793 EB61 20 00 EB		 jsr switch_bank
   794
   795 EB64 A2 10		 ldx >$1000
   796 EB66 A0 40		 ldy >mem_backup
   797 EB68 20 09 EB		 jsr mem_move
   798
   799 				;--- kopiujemy obszar $5000..$7FFF w obszar $1000..$3FFF
   800 EB6B A2 01		 ldx #=title_intro
   801 EB6D 20 00 EB		 jsr switch_bank
   802
   803 EB70 A9 00 85 40 A9 50 +  mwa #title_intro inputPointer
   804 EB78 A9 00 85 42 A9 10 +  mwa #$1000	  outputPointer
   805 EB80 20 28 FC		 jsr inflate 
   806
   807 EB83 A2 02		 ldx #=title_intro_msx
   808 EB85 20 00 EB		 jsr switch_bank
   809
   810 EB88 A2 A6		 ldx <title_intro_update_address
   811 EB8A A0 EB		 ldy >title_intro_update_address
   812 EB8C 20 FD 23		 jsr title_intro.main
   813
   814 				;--- przywracamy poprzednia zawartosc obszaru $1000..$3FFF
   815 EB8F			return
   816 EB8F 8D A4 EB		 sta console
   817
   818 EB92 A2 04		 ldx #=mem_backup
   819 EB94 20 00 EB		 jsr switch_bank
   820
   821 EB97 A2 40		 ldx >mem_backup
   822 EB99 A0 10		 ldy >$1000
   823 EB9B 20 09 EB		 jsr mem_move
   824
   825 EB9E A9 FE 8D 01 D3	 mva #$fe $d301
   826
   827 EBA3 A9 00		 lda #0
   828 = EBA4			console equ *-1
   829 EBA5 60			 rts
   830 				.endp
   831
   832
   833 EBA6			title_intro_update_address
   834 EBA6 B5 EB 4A F7 D0 F1 +  dta a(reset_pokey , tmc_player.initialization , tmc_player.sound , tmc_player.play , default_nmi)
   835
   836
   837 EBB0			game_msx_stop
   838 EBB0 A9 00 8D C3 EC	 mva #0 mpt.player
   839
   840 EBB5			reset_pokey
   841 EBB5 A0 08		 ldy #8			;muza stop
   842 EBB7 A9 00		 lda #0
   843 EBB9			sil
   844 EBB9 99 00 D2		 sta $d200,y
   845 EBBC 99 10 D2		 sta $d210,y
   846 EBBF 88			 dey
   847 EBC0 10 F7		 bpl sil
   848
   849 EBC2 A9 03		 lda #3
   850 EBC4 8D 0F D2		 sta $d20f
   851 EBC7 8D 1F D2		 sta $d21f
   852 EBCA 60			 rts
   853
   854
   855 				// domyslne przerwanie NMI
   856 EBCB			.proc default_nmi
   857
   858 EBCB A9 00		 lda #0
   859 EBCD 8D 0E D4		 sta $d40e
   860 EBD0 8D 00 D4		 sta $d400
   861 EBD3 A9 C1 8D FA FF A9 +  mwa #nmi._rti $fffa
   862 EBDD 60			 rts
   863
   864 				.endp
   865
   866
   867 				* --------- *
   868 				* -  NMI  - *
   869 				* --------- *
   870 EBDE			.proc nmi
   871
   872 EBDE 85 80		 sta rejA
   873 EBE0 86 81		 stx rejX
   874 EBE2 84 82		 sty rejY
   875
   876 EBE4 2C 0F D4		 bit $d40f
   877 EBE7 10 03		 bpl vbl
   878
   879 EBE9 4C BB EC		 jmp quit
   880 = EBEA			vdli equ *-2
   881
   882 				  
   883 EBEC			vbl
   884 EBEC 8D 0F D4		 sta $d40f
   885 				 
   886 EBEF E6 14		 inc $14
   887
   888 EBF1 A9 40 8D 02 D4 A9 +  mwa #ant $d402
   889 				 
   890 EBFB A9 3E 8D 00 D4	 mva #scr40 $d400       	;ustawienie szerokosci obrazu ($d400)
   891 				 
   892 EC00 A9 00		 lda #0
   893 = EC01			pmBase equ *-1
   894 EC02 49 08		 eor #[>pmBase1^>pmBase2]
   895 EC04 8D 07 D4		 sta $d407
   896 EC07 8D 01 EC		 sta pmBase
   897 				 
   898 EC0A AD 44 B5		 lda adr+1
   899 EC0D 49 06		 eor #[>TEXT1^>text2]
   900 EC0F 8D 44 B5		 sta adr+1
   901 				 
   902 				;--- wspolne wartosci dla obu ekranow
   903
   904 EC12 A9 04		 lda #$04
   905 EC14 8D 1B D0		 sta PRIOR_GTIACTL
   906 EC17 A9 00		 lda #$00
   907 EC19 8D 1A D0		 sta Background_BAK
   908 EC1C 8D 09 D0		 sta Player1_Size 
   909
   910 				; lda #$08
   911 EC1F 8D 14 D0		 sta Player2_Missile2_Color2_PM2   ; poza gorna ramka klocki niewidoczne (kolor czarny)
   912 EC22 8D 15 D0		 sta Player3_Missile3_Color3_PM3 
   913 				 
   914 EC25 A9 14		c0 lda #$14
   915 EC27 8D 16 D0		 sta Playfield_Color0_PF0
   916 EC2A A9 78		c1 lda #$78
   917 EC2C 8D 17 D0		 sta Playfield_Color1_PF1
   918
   919 EC2F A9 78		 lda #$78
   920 EC31 8D 03 D0		 sta Player3_PositionX
   921 				  
   922 EC34 A9 0A		c2 lda #$0A
   923 EC36 8D 18 D0		 sta Playfield_Color2_PF2
   924 EC39 A9 54		c3 lda #$54
   925 EC3B 8D 19 D0		 sta Playfield_Color3_PF3
   926 EC3E 8D 13 D0		 sta Player1_Missile1_Color1_PM1  
   927 EC41 A9 03		 lda #$03
   928 EC43 8D 08 D0		 sta Player0_Size
   929 EC46 8D 0A D0		 sta Player2_Size
   930 EC49 8D 0B D0		 sta Player3_Size
   931 EC4C A9 F3		 lda #$F3
   932 EC4E 8D 0C D0		 sta Missiles_Size
   933 EC51 A9 7C		 lda #$7C
   934 EC53 8D 00 D0		 sta Player0_PositionX
   935 EC56 A9 44		 lda #$44
   936 EC58 8D 01 D0		 sta Player1_PositionX
   937 EC5B A9 68		 lda #$68
   938 EC5D 8D 02 D0		 sta Player2_PositionX
   939 EC60 A9 64		 lda #$64
   940 EC62 8D 04 D0		 sta Missile0_PositionX
   941 EC65 A9 4D		 lda #$4D
   942 EC67 8D 05 D0		 sta Missile1_PositionX
   943 EC6A A9 90		 lda #$90
   944 EC6C 8D 06 D0		 sta Missile2_PositionX
   945 EC6F A9 88		 lda #$88
   946 EC71 8D 07 D0		 sta Missile3_PositionX
   947 EC74 A9 48		c4 lda #$48
   948 EC76 8D 12 D0		 sta Player0_Missile0_Color0_PM0
   949
   950 				;--- odczyt joya i przycisku
   951 				 
   952 EC79 AD D3 EC		 lda read_joy
   953 EC7C D0 21		 bne _skip
   954 				 
   955 EC7E AD 00 D3		 lda $d300
   956 EC81 29 0F		 and #$f
   957 EC83 C9 0E		 cmp #14
   958 EC85 B0 18		 bcs _skip
   959 				 
   960 EC87			ok
   961 EC87 CD D7 EC		 cmp old_joy
   962 EC8A D0 05		 bne new_joy
   963 				 
   964 EC8C CE D6 EC		 dec delay_joy
   965 EC8F D0 0E		 bne _skip
   966 				 
   967 EC91			new_joy
   968 EC91 8D 40 58		 sta tetris.r_d300
   969 EC94 8D D7 EC		 sta old_joy
   970 				 
   971 EC97 A9 04		 lda #delay_joy_default_value
   972 EC99 8D D6 EC		 sta delay_joy
   973 EC9C 8D D3 EC		 sta read_joy
   974 				 
   975 EC9F			_skip
   976 EC9F AD 10 D0		 lda $d010
   977 ECA2 D0 0D		 bne nmiQ
   978
   979 ECA4 CE D5 EC		 dec delay_trig
   980 ECA7 D0 0D		 bne wyjscie
   981
   982 ECA9 8D 34 58		 sta tetris.r_d010
   983
   984 ECAC A9 FF		 lda #delay_trig_default_value
   985 				; sta delay_trig
   986 ECAE 4C B3 EC		 jmp ___s
   987
   988 ECB1			nmiQ
   989 ECB1 A9 01		 lda #1
   990
   991 ECB3			___s
   992 ECB3 8D D5 EC		 sta delay_trig
   993
   994 ECB6			wyjscie
   995
   996 ECB6 A2 03		 ldx #=game_msx
   997 ECB8 20 C2 EC		 jsr mpt
   998
   999 ECBB			quit
  1000 ECBB A5 80		 lda rejA
  1001 ECBD A6 81		 ldx rejX
  1002 ECBF A4 82		 ldy rejY
  1003 ECC1			_rti
  1004 ECC1 40			 rti
  1005
  1006 				.endp
  1007
  1008
  1009 ECC2			.proc mpt
  1010
  1011 ECC2 A9 00		 lda #0
  1012 = ECC3			player equ *-1
  1013 ECC4 F0 0B		 beq skp
  1014
  1015 ECC6 20 00 EB		 jsr switch_bank
  1016
  1017 ECC9 20 61 F7		 jsr mpt_player.play
  1018
  1019 ECCC A9 FE		 lda #$fe
  1020 ECCE 8D 01 D3		 sta $d301
  1021
  1022 ECD1			skp
  1023 ECD1 60			 rts
  1024
  1025 				.endp
  1026
  1027 				 
  1028 				;---
  1029
  1030 ECD2 00			maska      brk
  1031 ECD3 00			read_joy   brk
  1032 ECD4 08			delay      dta max_fps
  1033 ECD5 FF			delay_trig dta delay_trig_default_value
  1034 ECD6 04			delay_joy  dta 4
  1035 ECD7 00			old_joy    brk
  1036 				 
  1037 				;---
  1038
  1039 ECD8			wait60cycle
  1040 ECD8 20 E8 EC		 jsr _rts
  1041 ECDB CD E9 EC		 cmp raster
  1042 ECDE			wait44cycle
  1043 ECDE EE E9 EC		 inc raster
  1044 ECE1 EA			 nop
  1045 ECE2			wait36cycle
  1046 ECE2 20 E8 EC		 jsr _rts
  1047 ECE5			wait24cycle
  1048 ECE5 20 E8 EC		 jsr _rts
  1049 ECE8 60			_rts rts
  1050
  1051 ECE9 00			raster	brk
  1052
  1053 ECEA			 icl 'title\tmc_player.asm'
Source: d:\Download\getris\title\tmc_player.asm
     1 				/**********************
     2 				      TMC  Player
     3 				    Jaskier/Taquart
     4 				**********************/
     4
     5
     6 ECEA			.proc tmc_player
     7
     8 = 00FA			byte	equ $fa     ;(1)
     9 = 00FB			bajt	equ byte+1  ;(1)
    10 = 00FC			addr	equ bajt+1  ;(2)
    11 = 00FE			adrsng	equ addr+2  ;(1)
    12
    13 ECEA 0F			maxvol dta 15
    14 ECEB 00 00 00 00 00 00 + volume dta d'        '
    15 ECF3 00 00 00 00 00 00 + freqen dta d'        '
    16 ECFB 00 00 00 00 00 00 + kanal  dta d'        '
    17 ED03 00 00 00 00 00 00 + aktwys dta d'        '
    18 ED0B 00 00 00 00 00 00 + numdzw dta d'        '
    19 ED13 00 00 00 00 00 00 + audctl dta d'        '
    20 ED1B 00			aud1   dta 0
    21 ED1C 00			aud2   dta 0
    22
    23 ED1D			voltab
    24 ED1D 00 00 00 00 00 00 +  dta d'                '
    25 ED2D 00 00 00 00 00 00 +  dta d'        !!!!!!!!'
    26 ED3D 00 00 00 00 01 01 +  dta d'    !!!!!!!!""""'
    27 ED4D 00 00 00 01 01 01 +  dta d'   !!!!!"""""###'
    28 ED5D 00 00 01 01 01 01 +  dta d'  !!!!""""####$$'
    29 ED6D 00 00 01 01 01 02 +  dta d'  !!!"""###$$$%%'
    30 ED7D 00 00 01 01 02 02 +  dta d'  !!"""##$$$%%&&'
    31 ED8D 00 00 01 01 02 02 +  dta d'  !!""##$$%%&&'''''
    32 ED9D 00 01 01 02 02 03 +  dta d' !!""##$$%%&&''''('
    33 EDAD 00 01 01 02 02 03 +  dta d' !!""#$$%%&''''(()'
    34 EDBD 00 01 01 02 03 03 +  dta d' !!"##$%%&''''())*'
    35 EDCD 00 01 01 02 03 04 +  dta d' !!"#$$%&''''()**+'
    36 EDDD 00 01 02 02 03 04 +  dta d' !""#$%&&''()**+,'
    37 EDED 00 01 02 03 03 04 +  dta d' !"##$%&''()**+,-'
    38 EDFD 00 01 02 03 04 05 +  dta d' !"#$%&''''()*+,-.'
    39 EE0D 00 01 02 03 04 05 +  dta d' !"#$%&''()*+,-./'
    40
    41 EE1D			frqtab
    42 EE1D 00 F1 E4 D7 CB C0 +  dta 0,$f1,$e4,$d7,$cb,$c0,$b5,$aa
    43 EE25 A1 98 8F 87 7F 78 +  dta $a1,$98,$8f,$87,$7f,$78,$72,$6b
    44 EE2D 65 5F 5A 55 50 4B +  dta $65,$5f,$5a,$55,$50,$4b,$47,$43
    45 EE35 3F 3C 38 35 32 2F +  dta $3f,$3c,$38,$35,$32,$2f,$2c,$2a
    46 EE3D 27 25 23 21 1F 1D +  dta $27,$25,$23,$21,$1f,$1d,$1c,$1a
    47 EE45 18 17 16 14 13 12 +  dta $18,$17,$16,$14,$13,$12,$11,$10
    48 EE4D 0F 0E 0D 0C 0B 0A +  dta 15,14,13,12,11,10,9,8
    49 EE55 07 06 05 04 03 02 +  dta 7,6,5,4,3,2,1,0
    50
    51 EE5D 00 F2 E6 DA CE BF +  dta 0,$f2,$e6,$da,$ce,$bf,$b6,$aa
    52 EE65 A1 98 8F 89 80 7A +  dta $a1,$98,$8f,$89,$80,$7a,$71,$6b
    53 EE6D 65 5F 5C 56 50 4D +  dta $65,$5f,$5c,$56,$50,$4d,$47,$44
    54 EE75 3E 3C 38 35 32 2F +  dta $3e,$3c,$38,$35,$32,$2f,$2d,$2a
    55 EE7D 28 25 23 21 1F 1D +  dta $28,$25,$23,$21,$1f,$1d,$1c,$1a
    56 EE85 18 17 16 14 13 12 +  dta $18,$17,$16,$14,$13,$12,$11,$10
    57 EE8D 0F 0E 0D 0C 0B 0A +  dta 15,14,13,12,11,10,9,8
    58 EE95 07 06 05 04 03 02 +  dta 7,6,5,4,3,2,1,0
    59
    60 EE9D 00 FF F1 E4 D8 CA +  dta 0,$ff,$f1,$e4,$d8,$ca,$c0,$b5
    61 EEA5 AB A2 99 8E 87 7F +  dta $ab,$a2,$99,$8e,$87,$7f,$79,$73
    62 EEAD 70 66 61 5A 55 52 +  dta $70,$66,$61,$5a,$55,$52,$4b,$48
    63 EEB5 43 3F 3C 39 37 33 +  dta $43,$3f,$3c,$39,$37,$33,$30,$2d
    64 EEBD 2A 28 25 24 21 1F +  dta $2a,$28,$25,$24,$21,$1f,$1e,$1c
    65 EEC5 1B 19 17 16 15 13 +  dta $1b,$19,$17,$16,$15,$13,$12,$11
    66 EECD 10 0F 0E 0D 0C 0B +  dta $10,15,14,13,12,11,10,9
    67 EED5 08 07 06 05 04 03 +  dta 8,7,6,5,4,3,2,1
    68
    69 EEDD 00 F3 E6 D9 CC C1 +  dta 0,$f3,$e6,$d9,$cc,$c1,$b5,$ad
    70 EEE5 A2 99 90 88 80 79 +  dta $a2,$99,$90,$88,$80,$79,$72,$6c
    71 EEED 66 60 5B 55 51 4C +  dta $66,$60,$5b,$55,$51,$4c,$48,$44
    72 EEF5 40 3C 39 35 32 2F +  dta $40,$3c,$39,$35,$32,$2f,$2d,$2a
    73 EEFD 28 25 23 21 1F 1D +  dta $28,$25,$23,$21,$1f,$1d,$1c,$1a
    74 EF05 18 17 16 14 13 12 +  dta $18,$17,$16,$14,$13,$12,$11,$10
    75 EF0D 0F 0E 0D 0C 0B 0A +  dta 15,14,13,12,11,10,9,8
    76 EF15 07 06 05 04 03 02 +  dta 7,6,5,4,3,2,1,0
    77
    78 EF1D			basslo
    79 EF1D 00 F2 33 96 E2 38 +  dta 0,$f2,$33,$96,$e2,$38,$8c,$00
    80 EF25 6A E8 6A EF 80 08 +  dta $6a,$e8,$6a,$ef,$80,$08,$ae,$46
    81 EF2D E6 95 41 F6 B0 6E +  dta $e6,$95,$41,$f6,$b0,$6e,$30,$f6
    82 EF35 BB 84 52 22 F4 C8 +  dta $bb,$84,$52,$22,$f4,$c8,$a0,$7a
    83 EF3D 55 34 14 F5 D8 BD +  dta $55,$34,$14,$f5,$d8,$bd,$a4,$8d
    84 EF45 77 60 4E 38 27 15 +  dta $77,$60,$4e,$38,$27,$15,$06,$f7
    85 EF4D E8 DB CF C3 B8 AC +  dta $e8,$db,$cf,$c3,$b8,$ac,$a2,$9a
    86 EF55 90 88 7F 78 70 6A +  dta $90,$88,$7f,$78,$70,$6a,$64,$5e
    87
    88 EF5D			basshi
    89 EF5D 00 0D 0D 0C 0B 0B +  dta 0,13,13,12,11,11,10,10
    90 EF65 09 08 08 07 07 07 +  dta 9,8,8,7,7,7,6,6
    91 EF6D 05 05 05 04 04 04 +  dta 5,5,5,4,4,4,4,3
    92 EF75 03 03 03 03 02 02 +  dta 3,3,3,3,2,2,2,2
    93 EF7D 02 02 02 01 01 01 +  dta 2,2,2,1,1,1,1,1
    94 EF85 01 01 01 01 01 01 +  dta 1,1,1,1,1,1,1,0
    95 EF8D 00 00 00 00 00 00 +  dta 0,0,0,0,0,0,0,0
    96 EF95 00 00 00 00 00 00 +  dta 0,0,0,0,0,0,0,0
    97
    98 EF9D 00 00 00 00 00 00 + czygrx dta d'        '
    99 EFA5 00 00 00 00 00 00 + pozwpt dta d'        '
   100 EFAD 00 00 00 00 00 00 + delay  dta d'        '
   101 EFB5 00 00 00 00 00 00 + numptr dta d'        '
   102 EFBD 00 00 00 00 00 00 + poddzw dta d'        '
   103 EFC5 00 00 00 00 00 00 + wysdzw dta d'        '
   104 EFCD 00 00 00 00 00 00 + znksz  dta d'        '
   105 EFD5 00 00 00 00 00 00 + frq    dta d'        '
   106 EFDD 00 00 00 00 00 00 + vol1ch dta d'        '
   107 EFE5 00 00 00 00 00 00 + vol2ch dta d'        '
   108 EFED 00 00 00 00 00 00 + adcvl1 dta d'        '
   109 EFF5 00 00 00 00 00 00 + adcvl2 dta d'        '
   110 EFFD 00 00 00 00 00 00 + adrsnl dta d'        '
   111 F005 00 00 00 00 00 00 + adrsnh dta d'        '
   112 F00D 00 00 00 00 00 00 + slupy  dta d'        '
   113 F015 00 00 00 00 00 00 + opad1  dta d'        '
   114 F01D 00 00 00 00 00 00 + opad2  dta d'        '
   115 F025 00 00 00 00 00 00 + lopad1 dta d'        '
   116 F02D 00 00 00 00 00 00 + lopad2 dta d'        '
   117 F035 00 00 00 00 00 00 + typ    dta d'        '
   118 F03D 00 00 00 00 00 00 + param  dta d'        '
   119 F045 00 00 00 00 00 00 + pomoc1 dta d'        '
   120 F04D 00 00 00 00 00 00 + pomoc2 dta d'        '
   121 F055 00 00 00 00 00 00 + czekaj dta d'        '
   122 F05D 00 00 00 00 00 00 + dtyp   dta d'        '
   123 F065 00 00 00 00 00 00 + ltyp   dta d'        '
   124 F06D 00 00 00 00 00 00 + ilperm dta d'        '
   125 F075 00 00 00 00 00 00 + aperm  dta d'        '
   126 F07D 00 00 00 00 00 00 + dperm  dta d'        '
   127 F085 00 00 00 00 00 00 + lperm  dta d'        '
   128 F08D 00 00 00 00 00 00 + kolejn dta d'        '
   129 F095 00			tempo  dta 0
   130 F096 00			ltempo dta 0
   131 F097 00			pozptr dta 0
   132 F098 00			czygrc dta 0
   133
   134 F099			przeci
   135 F099 04 05 06 07 00 01 +  dta 4,5,6,7,0,1,2,3
   136
   137 F0A1			audtb1
   138 F0A1 04 02 00 00 04 02 +  dta 4,2,0,0,4,2,0,0
   139
   140 F0A9			audtb2
   141 F0A9 00 10 00 08 00 10 +  dta 0,16,0,8,0,16,0,8
   142
   143 F0B1 AD 98 F0		play lda czygrc
   144 F0B4 F0 5E		 beq r1-3
   145 F0B6 AD 97 F0		 lda pozptr
   146 F0B9 C9 40		 cmp #64
   147 F0BB 90 5A		 bcc r1
   148 F0BD CE 96 F0		 dec ltempo
   149 F0C0 F0 03		 beq *+5
   150 F0C2 4C D0 F1		 jmp sound
   151
   152 F0C5 A2 07		 ldx #7
   153 F0C7 A9 00		 lda #0
   154 F0C9 9D A5 EF		p1 sta pozwpt,x
   155 F0CC 9D AD EF		 sta delay,x
   156 F0CF CA			 dex
   157 F0D0 10 F7		 bpl p1
   158 F0D2 8D 97 F0		 sta pozptr
   159 F0D5 AA			 tax
   160 F0D6 A0 0F		 ldy #15
   161 F0D8 B1 FE		p2 lda (adrsng),y
   162 F0DA 10 20		 bpl p3
   163 F0DC 88			 dey
   164 F0DD B1 FE		 lda (adrsng),y
   165 F0DF 10 03		 bpl *+5
   166 F0E1 4C 40 F6		 jmp stop
   167 F0E4 86 FC		 stx addr
   168 F0E6 0A			 asl @
   169 F0E7 0A			 asl @
   170 F0E8 26 FC		 rol addr
   171 F0EA 0A			 asl @
   172 F0EB 26 FC		 rol addr
   173 F0ED 0A			 asl @
   174 F0EE 26 FC		 rol addr
   175 F0F0 69 00		zm0 adc #0
   176 F0F2 85 FE		 sta adrsng
   177 F0F4 A5 FC		 lda addr
   178 F0F6 69 00		zm1 adc #0
   179 F0F8 85 FF		 sta adrsng+1
   180 F0FA 90 DA		 bcc p2-2
   181 F0FC 9D B5 EF		p3 sta numptr,x
   182 F0FF 88			 dey
   183 F100 B1 FE		 lda (adrsng),y
   184 F102 9D BD EF		 sta poddzw,x
   185 F105 E8			 inx
   186 F106 88			 dey
   187 F107 10 CF		 bpl p2
   188 F109 18			 clc
   189 F10A A5 FE		 lda adrsng
   190 F10C 69 10		 adc #16
   191 F10E 85 FE		 sta adrsng
   192 F110 90 02		 bcc *+4
   193 F112 E6 FF		 inc adrsng+1
   194 F114 4C D0 F1		 jmp sound
   195
   196 F117 CE 96 F0		r1 dec ltempo
   197 F11A 10 F8		 bpl r1-3
   198 F11C EE 97 F0		 inc pozptr
   199 F11F AD 95 F0		 lda tempo
   200 F122 8D 96 F0		 sta ltempo
   201 F125 A2 07		 ldx #7
   202 F127 DE AD EF		r2 dec delay,x
   203 F12A 30 03		 bmi *+5
   204 F12C 4C CA F1		 jmp r14
   205 F12F BC B5 EF		 ldy numptr,x
   206 F132 B9 FF FF		zm2 lda $ffff,y
   207 F135 85 FC		 sta addr
   208 F137 B9 FF FF		zm3 lda $ffff,y
   209 F13A 85 FD		 sta addr+1
   210 F13C BC A5 EF		 ldy pozwpt,x
   211 F13F B1 FC		r3 lda (addr),y
   212 F141 D0 06		 bne r4
   213 F143 20 4E F5		 jsr nparam
   214 F146 4C C7 F1		 jmp r13
   215 F149 C9 40		r4 cmp #$40
   216 F14B B0 12		 bcs r5
   217 F14D 7D BD EF		 adc poddzw,x
   218 F150 9D C5 EF		 sta wysdzw,x
   219 F153 20 4E F5		 jsr nparam
   220 F156 BC 0B ED		 ldy numdzw,x
   221 F159 20 9D F6		 jsr dzwiek
   222 F15C 4C C7 F1		 jmp r13
   223 F15F D0 22		r5 bne r8
   224 F161 C8			 iny
   225 F162 FE A5 EF		 inc pozwpt,x
   226 F165 B1 FC		 lda (addr),y
   227 F167 10 07		 bpl r6
   228 F169 85 FB		 sta bajt
   229 F16B 20 4E F5		 jsr nparam
   230 F16E A5 FB		 lda bajt
   231 F170 29 7F		r6 and #$7f
   232 F172 D0 07		 bne r7
   233 F174 A9 40		 lda #64
   234 F176 8D 97 F0		 sta pozptr
   235 F179 D0 4C		 bne r13
   236 F17B 8D 95 F0		r7 sta tempo
   237 F17E 8D 96 F0		 sta ltempo
   238 F181 D0 44		 bne r13
   239 F183 C9 80		r8 cmp #$80
   240 F185 B0 2B		 bcs r11
   241 F187 29 3F		 and #$3f
   242 F189 7D BD EF		 adc poddzw,x
   243 F18C 9D C5 EF		 sta wysdzw,x
   244 F18F C8			 iny
   245 F190 FE A5 EF		 inc pozwpt,x
   246 F193 B1 FC		 lda (addr),y
   247 F195 29 7F		 and #127
   248 F197 D0 07		 bne r9
   249 F199 A9 40		 lda #64
   250 F19B 8D 97 F0		 sta pozptr
   251 F19E D0 06		 bne r10
   252 F1A0 8D 95 F0		r9 sta tempo
   253 F1A3 8D 96 F0		 sta ltempo
   254 F1A6 20 4E F5		r10 jsr nparam
   255 F1A9 BC 0B ED		 ldy numdzw,x
   256 F1AC 20 9D F6		 jsr dzwiek
   257 F1AF 4C C7 F1		 jmp r13
   258 F1B2 C9 C0		r11 cmp #$c0
   259 F1B4 B0 0C		 bcs r12
   260 F1B6 29 3F		 and #$3f
   261 F1B8 9D 0B ED		 sta numdzw,x
   262 F1BB C8			 iny
   263 F1BC FE A5 EF		 inc pozwpt,x
   264 F1BF 4C 3F F1		 jmp r3
   265 F1C2 29 3F		r12 and #$3f
   266 F1C4 9D AD EF		 sta delay,x
   267 F1C7 FE A5 EF		r13 inc pozwpt,x
   268 F1CA CA			r14 dex
   269 F1CB 30 03		 bmi sound
   270 F1CD 4C 27 F1		 jmp r2
   271
   272 F1D0 A2 07		sound ldx #7
   273 F1D2 BD 9D EF		p5 lda czygrx,x
   274 F1D5 F0 21		 beq p6
   275 F1D7 20 0F F3		 jsr graj
   276 F1DA BD 13 ED		 lda audctl,x
   277 F1DD 3D A1 F0		 and audtb1,x
   278 F1E0 F0 16		 beq p6
   279 F1E2 A0 47		 ldy #71
   280 F1E4 B1 FC		 lda (addr),y
   281 F1E6 18			 clc
   282 F1E7 7D 03 ED		 adc aktwys,x
   283 F1EA 9D 05 ED		 sta aktwys+2,x
   284 F1ED A8			 tay
   285 F1EE B9 1D EE		 lda frqtab,y
   286 F1F1 38			 sec
   287 F1F2 7D 45 F0		 adc pomoc1,x
   288 F1F5 9D D7 EF		 sta frq+2,x
   289 F1F8 CA			p6 dex
   290 F1F9 10 D7		 bpl p5
   291
   292 F1FB 0E EA EC		 asl maxvol
   293 F1FE 0E EA EC		 asl maxvol
   294 F201 0E EA EC		 asl maxvol
   295 F204 0E EA EC		 asl maxvol
   296 F207 E8			 inx
   297 F208 86 FC		 stx addr
   298 F20A 86 FD		 stx addr+1
   299 F20C A2 07		 ldx #7
   300 F20E 8A			p9 txa
   301 F20F A8			 tay
   302 F210 B9 DD EF		 lda vol1ch,y
   303 F213 D0 0C		 bne p10
   304 F215 BC 99 F0		 ldy przeci,x
   305 F218 B9 E5 EF		 lda vol2ch,y
   306 F21B D0 04		 bne p10
   307 F21D 8A			 txa
   308 F21E A8			 tay
   309 F21F A9 00		 lda #0
   310 F221 85 FA		p10 sta byte
   311 F223 98			 tya
   312 F224 9D FB EC		 sta kanal,x
   313 F227 B9 D5 EF		 lda frq,y
   314 F22A 9D F3 EC		 sta freqen,x
   315 F22D B9 13 ED		 lda audctl,y
   316 F230 85 FB		 sta bajt
   317 F232 05 FD		 ora addr+1
   318 F234 85 FD		 sta addr+1
   319 F236 A5 FB		 lda bajt
   320 F238 3D A1 F0		 and audtb1,x
   321 F23B F0 06		 beq p11
   322 F23D B9 D7 EF		 lda frq+2,y
   323 F240 9D F5 EC		 sta freqen+2,x
   324 F243 A5 FB		p11 lda bajt
   325 F245 3D A9 F0		 and audtb2,x
   326 F248 F0 12		 beq p12
   327 F24A B9 03 ED		 lda aktwys,y
   328 F24D 29 3F		 and #$3f
   329 F24F A8			 tay
   330 F250 C8			 iny
   331 F251 84 FC		 sty addr
   332 F253 B9 5C EF		 lda basshi-1,y
   333 F256 9D F3 EC		 sta freqen,x
   334 F259 4C 6A F2		 jmp p13
   335 F25C A4 FC		p12 ldy addr
   336 F25E F0 0A		 beq p13
   337 F260 B9 1C EF		 lda basslo-1,y
   338 F263 9D F3 EC		 sta freqen,x
   339 F266 A9 00		 lda #0
   340 F268 85 FC		 sta addr
   341 F26A A5 FA		p13 lda byte
   342 F26C 0D EA EC		 ora maxvol
   343 F26F A8			 tay
   344 F270 B9 1D ED		 lda voltab,y
   345 F273 BC FB EC		 ldy kanal,x
   346 F276 19 CD EF		 ora znksz,y
   347 F279 9D EB EC		 sta volume,x
   348 F27C E0 04		 cpx #4
   349 F27E D0 09		 bne p14
   350 F280 A5 FD		 lda addr+1
   351 F282 8D 1C ED		 sta aud2
   352 F285 A9 00		 lda #0
   353 F287 85 FD		 sta addr+1
   354 F289 CA			p14 dex
   355 F28A 10 82		 bpl p9
   356 F28C 4E EA EC		 lsr maxvol
   357 F28F 4E EA EC		 lsr maxvol
   358 F292 4E EA EC		 lsr maxvol
   359 F295 4E EA EC		 lsr maxvol
   360 F298 A5 FD		 lda addr+1
   361 F29A A2 03		quit ldx #3
   362 F29C 8E 1F D2		 stx $d21f
   363 F29F 8E 0F D2		 stx $d20f
   364 F2A2 AE F7 EC		 ldx freqen+4
   365 F2A5 AC F3 EC		 ldy freqen
   366 F2A8 8E 10 D2		 stx $d210
   367 F2AB 8C 00 D2		 sty $d200
   368 F2AE AE EF EC		 ldx volume+4
   369 F2B1 AC EB EC		 ldy volume
   370 F2B4 8E 11 D2		 stx $d211
   371 F2B7 8C 01 D2		 sty $d201
   372 F2BA AE F8 EC		 ldx freqen+5
   373 F2BD AC F4 EC		 ldy freqen+1
   374 F2C0 8E 12 D2		 stx $d212
   375 F2C3 8C 02 D2		 sty $d202
   376 F2C6 AE F0 EC		 ldx volume+5
   377 F2C9 AC EC EC		 ldy volume+1
   378 F2CC 8E 13 D2		 stx $d213
   379 F2CF 8C 03 D2		 sty $d203
   380 F2D2 AE F9 EC		 ldx freqen+6
   381 F2D5 AC F5 EC		 ldy freqen+2
   382 F2D8 8E 14 D2		 stx $d214
   383 F2DB 8C 04 D2		 sty $d204
   384 F2DE AE F1 EC		 ldx volume+6
   385 F2E1 AC ED EC		 ldy volume+2
   386 F2E4 8E 15 D2		 stx $d215
   387 F2E7 8C 05 D2		 sty $d205
   388 F2EA AE FA EC		 ldx freqen+7
   389 F2ED AC F6 EC		 ldy freqen+3
   390 F2F0 8E 16 D2		 stx $d216
   391 F2F3 8C 06 D2		 sty $d206
   392 F2F6 AE F2 EC		 ldx volume+7
   393 F2F9 AC EE EC		 ldy volume+3
   394 F2FC 8E 17 D2		 stx $d217
   395 F2FF 8C 07 D2		 sty $d207
   396 F302 8D 1B ED		 sta aud1
   397 F305 AE 1C ED		 ldx aud2
   398 F308 8E 18 D2		 stx $d218
   399 F30B 8D 08 D2		 sta $d208
   400 F30E 60			 rts
   401
   402 F30F BD FD EF		graj lda adrsnl,x
   403 F312 85 FC		 sta addr
   404 F314 BD 05 F0		 lda adrsnh,x
   405 F317 85 FD		 sta addr+1
   406 F319 BC 0D F0		 ldy slupy,x
   407 F31C C0 3F		 cpy #63
   408 F31E F0 7B		 beq n6
   409 F320 FE 0D F0		 inc slupy,x
   410 F323 FE 0D F0		 inc slupy,x
   411 F326 FE 0D F0		 inc slupy,x
   412 F329 B1 FC		 lda (addr),y
   413 F32B 29 F0		 and #$f0
   414 F32D 9D CD EF		 sta znksz,x
   415 F330 B1 FC		 lda (addr),y
   416 F332 29 0F		 and #15
   417 F334 38			 sec
   418 F335 FD ED EF		 sbc adcvl1,x
   419 F338 10 02		 bpl n1
   420 F33A A9 00		 lda #0
   421 F33C 9D DD EF		n1 sta vol1ch,x
   422 F33F C8			 iny
   423 F340 B1 FC		 lda (addr),y
   424 F342 29 0F		 and #15
   425 F344 38			 sec
   426 F345 FD F5 EF		 sbc adcvl2,x
   427 F348 10 02		 bpl n2
   428 F34A A9 00		 lda #0
   429 F34C 9D E5 EF		n2 sta vol2ch,x
   430 F34F B1 FC		 lda (addr),y
   431 F351 29 F0		 and #$f0
   432 F353 F0 74		 beq n8
   433 F355 10 0B		 bpl n3
   434 F357 A0 49		 ldy #73
   435 F359 B1 FC		 lda (addr),y
   436 F35B BC 0D F0		 ldy slupy,x
   437 F35E 88			 dey
   438 F35F 88			 dey
   439 F360 10 02		 bpl n4
   440 F362 A9 00		n3 lda #0
   441 F364 9D 13 ED		n4 sta audctl,x
   442 F367 B1 FC		 lda (addr),y
   443 F369 29 70		 and #$70
   444 F36B F0 63		 beq n9
   445 F36D 4A			 lsr @
   446 F36E 4A			 lsr @
   447 F36F 8D 7B F3		 sta n5+1
   448 F372 A9 00		 lda #0
   449 F374 9D 45 F0		 sta pomoc1,x
   450 F377 C8			 iny
   451 F378 B1 FC		 lda (addr),y
   452 F37A 90 FE		n5 bcc *
   453 F37C EA			 nop
   454 F37D EA			 nop
   455 F37E EA			 nop
   456 F37F EA			 nop
   457 F380 4C 19 F5		 jmp a1
   458 F383 EA			 nop
   459 F384 4C 16 F5		 jmp a2
   460 F387 EA			 nop
   461 F388 4C 1D F5		 jmp a3
   462 F38B EA			 nop
   463 F38C 4C 2B F5		 jmp a4
   464 F38F EA			 nop
   465 F390 4C 35 F5		 jmp a5
   466 F393 EA			 nop
   467 F394 4C 40 F5		 jmp a6
   468 F397 EA			 nop
   469 F398 4C 32 F5		 jmp a7
   470 F39B BD 15 F0		n6 lda opad1,x
   471 F39E F0 12		 beq n7
   472 F3A0 DE 25 F0		 dec lopad1,x
   473 F3A3 D0 0D		 bne n7
   474 F3A5 9D 25 F0		 sta lopad1,x
   475 F3A8 BD DD EF		 lda vol1ch,x
   476 F3AB 29 0F		 and #15
   477 F3AD F0 03		 beq n7
   478 F3AF DE DD EF		 dec vol1ch,x
   479 F3B2 BD 1D F0		n7 lda opad2,x
   480 F3B5 F0 12		 beq n8
   481 F3B7 DE 2D F0		 dec lopad2,x
   482 F3BA D0 0D		 bne n8
   483 F3BC 9D 2D F0		 sta lopad2,x
   484 F3BF BD E5 EF		 lda vol2ch,x
   485 F3C2 29 0F		 and #15
   486 F3C4 F0 03		 beq n8
   487 F3C6 DE E5 EF		 dec vol2ch,x
   488 F3C9 A0 48		n8 ldy #72
   489 F3CB B1 FC		 lda (addr),y
   490 F3CD 9D 13 ED		 sta audctl,x
   491 F3D0 BD 75 F0		n9 lda aperm,x
   492 F3D3 18			 clc
   493 F3D4 69 3F		 adc #63
   494 F3D6 A8			 tay
   495 F3D7 B1 FC		 lda (addr),y
   496 F3D9 7D C5 EF		 adc wysdzw,x
   497 F3DC 9D 03 ED		 sta aktwys,x
   498 F3DF A8			 tay
   499 F3E0 B9 1D EE		 lda frqtab,y
   500 F3E3 9D D5 EF		 sta frq,x
   501 F3E6 DE 85 F0		 dec lperm,x
   502 F3E9 10 33		 bpl m1
   503 F3EB BD 7D F0		 lda dperm,x
   504 F3EE 9D 85 F0		 sta lperm,x
   505 F3F1 BD 8D F0		 lda kolejn,x
   506 F3F4 F0 18		 beq m6
   507 F3F6 18			 clc
   508 F3F7 7D 75 F0		 adc aperm,x
   509 F3FA 9D 75 F0		 sta aperm,x
   510 F3FD F0 07		 beq m7
   511 F3FF DD 6D F0		 cmp ilperm,x
   512 F402 D0 1A		 bne m1
   513 F404 A9 FE		 lda #$fe
   514 F406 18			m7 clc
   515 F407 69 01		 adc #1
   516 F409 9D 8D F0		 sta kolejn,x
   517 F40C D0 10		 bne m1
   518 F40E FE 75 F0		m6 inc aperm,x
   519 F411 BD 6D F0		 lda ilperm,x
   520 F414 DD 75 F0		 cmp aperm,x
   521 F417 B0 05		 bcs m1
   522 F419 A9 00		 lda #0
   523 F41B 9D 75 F0		 sta aperm,x
   524 F41E BD 55 F0		m1 lda czekaj,x
   525 F421 F0 04		 beq m2
   526 F423 DE 55 F0		 dec czekaj,x
   527 F426 60			 rts
   528 F427 BD 4D F0		m2 lda pomoc2,x
   529 F42A 85 FA		 sta byte
   530 F42C BD 3D F0		 lda param,x
   531 F42F 85 FB		 sta bajt
   532 F431 20 4A F4		 jsr m4
   533 F434 DE 65 F0		 dec ltyp,x
   534 F437 10 10		 bpl m4-1
   535 F439 A5 FA		 lda byte
   536 F43B 9D 4D F0		 sta pomoc2,x
   537 F43E A5 FB		 lda bajt
   538 F440 9D 3D F0		 sta param,x
   539 F443 BD 5D F0		 lda dtyp,x
   540 F446 9D 65 F0		 sta ltyp,x
   541 F449 60			 rts
   542 F44A BD 35 F0		m4 lda typ,x
   543 F44D 8D 51 F4		 sta m5+1
   544 F450 10 FE		m5 bpl *
   545 F452 4C 88 F4		 jmp typ0
   546 F455 EA			 nop
   547 F456 4C 71 F4		 jmp typ1
   548 F459 EA			 nop
   549 F45A 4C 8F F4		 jmp typ2
   550 F45D EA			 nop
   551 F45E 4C 95 F4		 jmp typ3
   552 F461 EA			 nop
   553 F462 4C 9F F4		 jmp typ4
   554 F465 EA			 nop
   555 F466 4C B3 F4		 jmp typ5
   556 F469 EA			 nop
   557 F46A 4C C3 F4		 jmp typ6
   558 F46D EA			 nop
   559 F46E 4C D5 F4		 jmp typ7
   560
   561 F471 A5 FA		typ1 lda byte
   562 F473 E6 FA		 inc byte
   563 F475 29 03		 and #3
   564 F477 4A			 lsr @
   565 F478 90 0F		 bcc t2
   566 F47A D0 47		 bne typ6
   567 F47C A5 FB		 lda bajt
   568 F47E 9D 45 F0		t1 sta pomoc1,x
   569 F481 18			 clc
   570 F482 7D D5 EF		 adc frq,x
   571 F485 9D D5 EF		 sta frq,x
   572 F488 60			typ0 rts
   573 F489 A9 00		t2 lda #0
   574 F48B 9D 45 F0		 sta pomoc1,x
   575 F48E 60			 rts
   576 F48F 20 FE F4		typ2 jsr t5
   577 F492 4C 7E F4		 jmp t1
   578 F495 20 FE F4		typ3 jsr t5
   579 F498 18			 clc
   580 F499 7D 03 ED		 adc aktwys,x
   581 F49C 4C 35 F5		 jmp a5
   582 F49F A5 FA		typ4 lda byte
   583 F4A1 9D 45 F0		 sta pomoc1,x
   584 F4A4 18			 clc
   585 F4A5 7D D5 EF		 adc frq,x
   586 F4A8 9D D5 EF		t3 sta frq,x
   587 F4AB A5 FA		 lda byte
   588 F4AD 18			 clc
   589 F4AE 65 FB		 adc bajt
   590 F4B0 85 FA		 sta byte
   591 F4B2 60			 rts
   592 F4B3 BD 03 ED		typ5 lda aktwys,x
   593 F4B6 38			 sec
   594 F4B7 E5 FA		 sbc byte
   595 F4B9 9D 03 ED		 sta aktwys,x
   596 F4BC A8			 tay
   597 F4BD B9 1D EE		 lda frqtab,y
   598 F4C0 4C A8 F4		 jmp t3
   599 F4C3 BD D5 EF		typ6 lda frq,x
   600 F4C6 38			 sec
   601 F4C7 E5 FB		 sbc bajt
   602 F4C9 9D D5 EF		 sta frq,x
   603 F4CC 38			 sec
   604 F4CD A9 00		 lda #0
   605 F4CF E5 FB		 sbc bajt
   606 F4D1 9D 45 F0		 sta pomoc1,x
   607 F4D4 60			 rts
   608 F4D5 BD 65 F0		typ7 lda ltyp,x
   609 F4D8 D0 AE		 bne typ0
   610 F4DA A5 FB		 lda bajt
   611 F4DC 10 10		 bpl t4
   612 F4DE BD E5 EF		 lda vol2ch,x
   613 F4E1 F0 A5		 beq typ0
   614 F4E3 BD DD EF		 lda vol1ch,x
   615 F4E6 C9 0F		 cmp #15
   616 F4E8 F0 9E		 beq typ0
   617 F4EA FE DD EF		 inc vol1ch,x
   618 F4ED 60			 rts
   619 F4EE BD DD EF		t4 lda vol1ch,x
   620 F4F1 F0 95		 beq typ0
   621 F4F3 BD E5 EF		 lda vol2ch,x
   622 F4F6 C9 0F		 cmp #15
   623 F4F8 F0 8E		 beq typ0
   624 F4FA FE E5 EF		 inc vol2ch,x
   625 F4FD 60			 rts
   626 F4FE A4 FA		t5 ldy byte
   627 F500 A5 FB		 lda bajt
   628 F502 30 02		 bmi t6
   629 F504 C8			 iny
   630 F505 C8			 iny
   631 F506 88			t6 dey
   632 F507 98			 tya
   633 F508 85 FA		 sta byte
   634 F50A C5 FB		 cmp bajt
   635 F50C D0 06		 bne t7
   636 F50E A5 FB		 lda bajt
   637 F510 49 FF		 eor #$ff
   638 F512 85 FB		 sta bajt
   639 F514 98			t7 tya
   640 F515 60			 rts
   641
   642 F516 7D D5 EF		a2 adc frq,x
   643 F519 9D D5 EF		a1 sta frq,x
   644 F51C 60			 rts
   645 F51D BC C5 EF		a3 ldy wysdzw,x
   646 F520 79 1D EE		 adc frqtab,y
   647 F523 9D D5 EF		 sta frq,x
   648 F526 98			 tya
   649 F527 9D 03 ED		 sta aktwys,x
   650 F52A 60			 rts
   651 F52B 2D 0A D2		a4 and $d20a
   652 F52E 9D D5 EF		 sta frq,x
   653 F531 60			 rts
   654 F532 7D C5 EF		a7 adc wysdzw,x
   655 F535 9D 03 ED		a5 sta aktwys,x
   656 F538 A8			 tay
   657 F539 B9 1D EE		 lda frqtab,y
   658 F53C 9D D5 EF		 sta frq,x
   659 F53F 60			 rts
   660 F540 9D 03 ED		a6 sta aktwys,x
   661 F543 A8			 tay
   662 F544 BD D5 EF		 lda frq,x
   663 F547 79 1D EE		 adc frqtab,y
   664 F54A 9D D5 EF		 sta frq,x
   665 F54D 60			 rts
   666
   667 F54E C8			nparam iny
   668 F54F FE A5 EF		 inc pozwpt,x
   669 F552 B1 FC		 lda (addr),y
   670 F554 4A			 lsr @
   671 F555 4A			 lsr @
   672 F556 4A			 lsr @
   673 F557 4A			 lsr @
   674 F558 9D ED EF		 sta adcvl1,x
   675 F55B B1 FC		 lda (addr),y
   676 F55D 29 0F		 and #15
   677 F55F 9D F5 EF		 sta adcvl2,x
   678 F562 60			 rts
   679
   680 F563 20 40 F6		songx jsr stop
   681 F566 A0 0F		 ldy #15
   682 F568 A9 00		zm4 lda #0
   683 F56A 85 FE		 sta adrsng
   684 F56C A9 00		zm5 lda #0
   685 F56E 85 FF		 sta adrsng+1
   686 F570 8A			d5 txa
   687 F571 F0 2E		 beq inic
   688 F573 B1 FE		d3 lda (adrsng),y
   689 F575 10 01		 bpl d4
   690 F577 CA			 dex
   691 F578 18			d4 clc
   692 F579 A5 FE		 lda adrsng
   693 F57B 69 10		 adc #16
   694 F57D 85 FE		 sta adrsng
   695 F57F 90 EF		 bcc d5
   696 F581 E6 FF		 inc adrsng+1
   697 F583 B0 EB		 bcs d5
   698
   699 F585 20 40 F6		playx jsr stop
   700 F588 A9 00		 lda #0
   701 F58A 85 FC		 sta addr
   702 F58C 8A			 txa
   703 F58D 0A			 asl @
   704 F58E 0A			 asl @
   705 F58F 26 FC		 rol addr
   706 F591 0A			 asl @
   707 F592 26 FC		 rol addr
   708 F594 0A			 asl @
   709 F595 26 FC		 rol addr
   710 F597 69 00		zm6 adc #0
   711 F599 85 FE		 sta adrsng
   712 F59B A5 FC		 lda addr
   713 F59D 69 00		zm7 adc #0
   714 F59F 85 FF		 sta adrsng+1
   715 F5A1 A9 40		inic lda #64
   716 F5A3 8D 97 F0		 sta pozptr
   717 F5A6 A9 01		 lda #1
   718 F5A8 8D 96 F0		 sta ltempo
   719 F5AB 8D 98 F0		 sta czygrc
   720 F5AE 60			 rts
   721
   722 F5AF C9 10		init cmp #$10
   723 F5B1 90 B0		 bcc songx
   724 F5B3 C9 20		 cmp #$20
   725 F5B5 90 CE		 bcc playx
   726 F5B7 C9 30		 cmp #$30
   727 F5B9 B0 03		 bcs *+5
   728 F5BB 4C 8F F6		 jmp d2
   729 F5BE C9 40		 cmp #$40
   730 F5C0 B0 09		 bcs i1
   731 F5C2 8A			 txa
   732 F5C3 29 0F		 and #15
   733 F5C5 F0 03		 beq i1-1
   734 F5C7 8D 95 F0		 sta tempo
   735 F5CA 60			 rts
   736 F5CB C9 50		i1 cmp #$50
   737 F5CD 90 71		 bcc stop
   738 F5CF C9 60		 cmp #$60
   739 F5D1 B0 06		 bcs i2
   740 F5D3 A9 00		 lda #0
   741 F5D5 8D 98 F0		i3 sta czygrc
   742 F5D8 60			 rts
   743 F5D9 C9 70		i2 cmp #$70
   744 F5DB 90 F8		 bcc i3
   745
   746 F5DD A9 01		 lda #1
   747 F5DF 8D 96 F0		 sta ltempo
   748 F5E2 A9 40		 lda #64
   749 F5E4 8D 97 F0		 sta pozptr
   750 F5E7 84 FC		 sty addr
   751 F5E9 86 FD		 stx addr+1
   752 F5EB A0 1E		 ldy #30
   753 F5ED B1 FC		 lda (addr),y
   754 F5EF 8D 95 F0		 sta tempo
   755 F5F2 A5 FC		 lda addr
   756 F5F4 18			 clc
   757 F5F5 69 20		 adc #32
   758 F5F7 8D A3 F6		 sta zm8+1
   759 F5FA 90 01		 bcc *+3
   760 F5FC E8			 inx
   761 F5FD 8E A4 F6		 stx zm8+2
   762 F600 18			 clc
   763 F601 69 40		 adc #$40
   764 F603 8D AB F6		 sta zm9+1
   765 F606 90 01		 bcc *+3
   766 F608 E8			 inx
   767 F609 8E AC F6		 stx zm9+2
   768 F60C 18			 clc
   769 F60D 69 40		 adc #$40
   770 F60F 8D 33 F1		 sta zm2+1
   771 F612 90 01		 bcc *+3
   772 F614 E8			 inx
   773 F615 8E 34 F1		 stx zm2+2
   774 F618 18			 clc
   775 F619 69 80		 adc #$80
   776 F61B 8D 38 F1		 sta zm3+1
   777 F61E 90 01		 bcc *+3
   778 F620 E8			 inx
   779 F621 8E 39 F1		 stx zm3+2
   780 F624 18			 clc
   781 F625 69 80		 adc #$80
   782 F627 85 FE		 sta adrsng
   783 F629 8D F1 F0		 sta zm0+1
   784 F62C 8D 69 F5		 sta zm4+1
   785 F62F 8D 98 F5		 sta zm6+1
   786 F632 90 01		 bcc *+3
   787 F634 E8			 inx
   788 F635 86 FF		 stx adrsng+1
   789 F637 8E F7 F0		 stx zm1+1
   790 F63A 8E 6D F5		 stx zm5+1
   791 F63D 8E 9E F5		 stx zm7+1
   792
   793 F640 A0 07		stop ldy #7
   794 F642 A9 00		 lda #0
   795 F644 8D 98 F0		 sta czygrc
   796 F647 99 00 D2		d9 sta $d200,y
   797 F64A 99 10 D2		 sta $d210,y
   798 F64D 99 EB EC		 sta volume,y
   799 F650 99 DD EF		 sta vol1ch,y
   800 F653 99 E5 EF		 sta vol2ch,y
   801 F656 99 13 ED		 sta audctl,y
   802 F659 99 9D EF		 sta czygrx,y
   803 F65C 88			 dey
   804 F65D 10 E8		 bpl d9
   805 F65F 8D 08 D2		 sta $d208
   806 F662 8D 18 D2		 sta $d218
   807 F665 8D 1B ED		 sta aud1
   808 F668 8D 1C ED		 sta aud2
   809 F66B 60			 rts
   810
   811 F66C 9D DD EF		d1 sta vol1ch,x
   812 F66F 9D E5 EF		 sta vol2ch,x
   813 F672 9D 13 ED		 sta audctl,x
   814 F675 BD C5 EF		 lda wysdzw,x
   815 F678 9D 03 ED		 sta aktwys,x
   816 F67B 60			 rts
   817 F67C 98			d0 tya
   818 F67D 49 F0		 eor #$f0
   819 F67F 4A			 lsr @
   820 F680 4A			 lsr @
   821 F681 4A			 lsr @
   822 F682 4A			 lsr @
   823 F683 9D ED EF		 sta adcvl1,x
   824 F686 98			 tya
   825 F687 29 0F		 and #15
   826 F689 49 0F		 eor #15
   827 F68B 9D F5 EF		 sta adcvl2,x
   828 F68E 60			 rts
   829 F68F 29 07		d2 and #7
   830 F691 85 FC		 sta addr
   831 F693 8A			 txa
   832 F694 A6 FC		 ldx addr
   833 F696 29 3F		 and #$3f
   834 F698 F0 E2		 beq d0
   835 F69A 9D C5 EF		 sta wysdzw,x
   836 F69D A9 00		dzwiek lda #0
   837 F69F 9D 9D EF		 sta czygrx,x
   838 F6A2 B9 FF FF		zm8 lda $ffff,y
   839 F6A5 9D FD EF		 sta adrsnl,x
   840 F6A8 85 FC		 sta addr
   841 F6AA B9 FF FF		zm9 lda $ffff,y
   842 F6AD 9D 05 F0		 sta adrsnh,x
   843 F6B0 85 FD		 sta addr+1
   844 F6B2 05 FC		 ora addr
   845 F6B4 F0 B6		 beq d1
   846 F6B6 A0 4A		 ldy #74
   847 F6B8 B1 FC		 lda (addr),y
   848 F6BA 9D 15 F0		 sta opad1,x
   849 F6BD 9D 25 F0		 sta lopad1,x
   850 F6C0 C8			 iny
   851 F6C1 B1 FC		 lda (addr),y
   852 F6C3 9D 1D F0		 sta opad2,x
   853 F6C6 9D 2D F0		 sta lopad2,x
   854 F6C9 C8			 iny
   855 F6CA B1 FC		 lda (addr),y
   856 F6CC 29 70		 and #$70
   857 F6CE 4A			 lsr @
   858 F6CF 4A			 lsr @
   859 F6D0 9D 35 F0		 sta typ,x
   860 F6D3 B1 FC		 lda (addr),y
   861 F6D5 29 0F		 and #15
   862 F6D7 9D 3D F0		 sta param,x
   863 F6DA B1 FC		 lda (addr),y
   864 F6DC 10 0B		 bpl d7
   865 F6DE BD 3D F0		 lda param,x
   866 F6E1 49 FF		 eor #$ff
   867 F6E3 18			 clc
   868 F6E4 69 01		 adc #1
   869 F6E6 9D 3D F0		 sta param,x
   870 F6E9 C8			d7 iny
   871 F6EA B1 FC		 lda (addr),y
   872 F6EC 9D 55 F0		 sta czekaj,x
   873 F6EF C8			 iny
   874 F6F0 B1 FC		 lda (addr),y
   875 F6F2 29 3F		 and #$3f
   876 F6F4 9D 5D F0		 sta dtyp,x
   877 F6F7 9D 65 F0		 sta ltyp,x
   878 F6FA C8			 iny
   879 F6FB B1 FC		 lda (addr),y
   880 F6FD 29 80		 and #$80
   881 F6FF F0 02		 beq d8
   882 F701 A9 01		 lda #1
   883 F703 9D 8D F0		d8 sta kolejn,x
   884 F706 B1 FC		 lda (addr),y
   885 F708 29 70		 and #$70
   886 F70A 4A			 lsr @
   887 F70B 4A			 lsr @
   888 F70C 4A			 lsr @
   889 F70D 4A			 lsr @
   890 F70E 9D 6D F0		 sta ilperm,x
   891 F711 D0 03		 bne d6
   892 F713 9D 8D F0		 sta kolejn,x
   893 F716 B1 FC		d6 lda (addr),y
   894 F718 29 0F		 and #15
   895 F71A 9D 7D F0		 sta dperm,x
   896 F71D 9D 85 F0		 sta lperm,x
   897 F720 88			 dey
   898 F721 B1 FC		 lda (addr),y
   899 F723 29 C0		 and #$c0
   900 F725 18			 clc
   901 F726 7D C5 EF		 adc wysdzw,x
   902 F729 9D C5 EF		 sta wysdzw,x
   903 F72C 9D 03 ED		 sta aktwys,x
   904 F72F A8			 tay
   905 F730 B9 1D EE		 lda frqtab,y
   906 F733 9D D5 EF		 sta frq,x
   907 F736 A9 00		 lda #0
   908 F738 9D 0D F0		 sta slupy,x
   909 F73B 9D 45 F0		 sta pomoc1,x
   910 F73E 9D 4D F0		 sta pomoc2,x
   911 F741 9D 75 F0		 sta aperm,x
   912 F744 A9 01		 lda #1
   913 F746 9D 9D EF		 sta czygrx,x
   914 F749 60			 rts
   915
   916 F74A			initialization
   917 F74A A9 70			lda #$70
   918 F74C A2 40			ldx >muza		; MUZA = $4000
   919 F74E A0 00			ldy <muza
   920 F750 20 AF F5			jsr tmc_player.init
   921
   922 F753 A2 00			ldx #0		;TMC
   923 F755 8A				txa
   924 F756 20 AF F5			jsr tmc_player.init
   925
   926 F759 A9 10			lda #$10
   927 F75B A2 00			ldx #0
   928 F75D 20 AF F5			jsr tmc_player.init
   929
   930 F760 60				rts
   931
   932 				.endp
  1054
  1055 F761			 icl 'mpt\mpt_player.asm'
Source: d:\Download\getris\mpt\mpt_player.asm
     1
     2 				/*
     3 				  Player MPT 2.4
     4 				  coded by Fox
     5 				  07,19,25,30/07/96
     6 				  original version by Jaskier/Taquart
     7 				*/
     7
     8
     9 F761			.proc   mpt_player
    10
    11 				;msx	equ $5000
    12 				;lenpat	equ $20
    13 				;speed	equ $03
    14
    15 = 4000			msx     equ $4000
    16
    17 = 0040			zp	equ $40		;12 bytes on page 0
    18
    19 = 0040			freq	equ zp		;(4)
    20 = 0044			slup	equ zp+4	;(4)
    21 = 0048			ad	equ zp+8	;(2)
    22 = 004A			aud	equ zp+10	;(1)
    23 = 004B			tp	equ zp+11	;(1)
    24
    25
    26 F761			play
    27 F761 A6 40		 ldx freq
    28 F763 A4 41		 ldy freq+1
    29 F765 A5 4A		 lda aud
    30 F767 8D 08 D2		 sta $d208
    31 F76A 8D 18 D2		 sta $d218
    32 F76D 29 10		 and #$10
    33 = F76E			v10 equ *-1
    34 F76F F0 0A		 beq w1
    35 F771 AC 3F FB		 ldy numdzw+1
    36 F774 BE 9F FA		 ldx bsfrql,y
    37 F777 B9 DE FA		 lda bsfrqh,y
    38 F77A A8			 tay
    39 F77B 8E 10 D2		w1 stx $d210
    40 F77E 8E 00 D2		 stx $d200
    41 F781 8C 12 D2		 sty $d212
    42 F784 8C 02 D2		 sty $d202
    43 F787 A5 42		 lda freq+2
    44 F789 8D 14 D2		 sta $d214
    45 F78C 8D 04 D2		 sta $d204
    46 F78F A5 43		 lda freq+3
    47 F791 8D 16 D2		 sta $d216
    48 F794 8D 06 D2		 sta $d206
    49 F797 AD 22 FB		 lda volume
    50 F79A 8D 11 D2		 sta $d211
    51 F79D 8D 01 D2		 sta $d201
    52 F7A0 AD 23 FB		 lda volume+1
    53 F7A3 8D 13 D2		 sta $d213
    54 F7A6 8D 03 D2		 sta $d203
    55 F7A9 AD 24 FB		 lda volume+2
    56 F7AC 8D 15 D2		 sta $d215
    57 F7AF 8D 05 D2		 sta $d205
    58 F7B2 AD 25 FB		 lda volume+3
    59 F7B5 8D 17 D2		 sta $d217
    60 F7B8 8D 07 D2		 sta $d207
    61
    62 F7BB A2 00		 ldx #0
    63 F7BD 86 4A		 stx aud
    64 F7BF EE 31 F9		 inc licz
    65 F7C2 A9 FF		 lda #$ff
    66 = F7C3			pozptr equ *-1
    67 F7C4 C9 40		l00 cmp #?lenpat
    68 F7C6 CE 66 FB		 dec zegar
    69 F7C9 90 55		 bcc r1
    70 F7CB F0 03		 beq *+5
    71 F7CD 4C 4F F8		 jmp r5
    72 F7D0 8E C3 F7		 stx pozptr
    73 F7D3 A9 FF		p2 lda #$ff
    74 F7D5 9D 46 FB		 sta ptrwsk,x
    75 F7D8 9D 4E FB		 sta licspc,x
    76 F7DB BD C0 41		m_01c0 lda msx+$1c0,x
    77 F7DE 85 48		 sta ad
    78 F7E0 BD C4 41		m_01c4 lda msx+$1c4,x
    79 F7E3 85 49		 sta ad+1
    80 F7E5 A0 00		 ldy #0
    81 = F7E6			pozsng equ *-1
    82 F7E7 B1 48		p3 lda (ad),y
    83 F7E9 C8			 iny
    84 F7EA C9 FE		 cmp #$fe
    85 F7EC 90 0D		 bcc p6
    86 F7EE F0 1F		 beq p4
    87 F7F0 B1 48		 lda (ad),y
    88 F7F2 30 1B		 bmi p4
    89 F7F4 0A			 asl @
    90 F7F5 A8			 tay
    91 F7F6 8D E6 F7		 sta pozsng
    92 F7F9 90 EC		 bcc p3
    93 F7FB 0A			p6 asl @
    94 F7FC 9D 42 FB		 sta numptr,x
    95 F7FF B1 48		 lda (ad),y
    96 F801 9D 32 FB		 sta poddzw,x
    97 F804 E8			p7 inx
    98 F805 E0 04		 cpx #4
    99 F807 90 CA		 bcc p2
   100 F809 C8			 iny
   101 F80A 8C E6 F7		 sty pozsng
   102 F80D B0 40		 bcs r5
   103 F80F A2 03		p4 ldx #3
   104 F811 A9 00		 lda #0
   105 F813 9D 22 FB		fin sta volume,x
   106 F816 CA			 dex
   107 F817 10 FA		 bpl fin
   108 F819 CE C3 F7		 dec pozptr
   109 F81C EE 66 FB		 inc zegar
   110 F81F 60			ret rts		;tutaj konczy player
   111
   112 F820 10 2D		r1 bpl r5
   113 F822 A2 03		 ldx #3
   114 F824 DE 4E FB		r2 dec licspc,x
   115 F827 10 1B		 bpl r4
   116 F829 BC 42 FB		 ldy numptr,x
   117 F82C B9 41 40		m_0041 lda msx+$41,y
   118 F82F F0 13		 beq r4
   119 F831 85 49		 sta ad+1
   120 F833 B9 40 40		m_0040 lda msx+$40,y
   121 F836 85 48		 sta ad
   122 F838 BC 46 FB		 ldy ptrwsk,x
   123 F83B 4C E7 F9		 jmp newdzw
   124 F83E BD 4A FB		r3 lda ilespc,x
   125 F841 9D 4E FB		 sta licspc,x
   126 F844 CA			r4 dex
   127 F845 10 DD		 bpl r2
   128 F847 A9 01		 lda #?speed-1
   129 = F848			tempo equ *-1
   130 F849 8D 66 FB		 sta zegar
   131 F84C EE C3 F7		 inc pozptr
   132
   133 F84F A2 03		r5 ldx #3
   134 F851 D0 29		 bne r6
   135
   136 F853 9D 22 FB		d0 sta volume,x
   137 F856 4C 79 F8		 jmp r9
   138
   139 F859 A0 23		r8 ldy #$23
   140 F85B B1 48		 lda (ad),y
   141 F85D 05 4A		 ora aud
   142 F85F 85 4A		 sta aud
   143 F861 B1 48		 lda (ad),y
   144 F863 3D 9C FA		 and filtry,x
   145 F866 F0 11		 beq r9
   146 F868 A0 28		 ldy #$28
   147 F86A B1 48		 lda (ad),y
   148 F86C 18			 clc
   149 F86D 7D 3E FB		 adc numdzw,x
   150 F870 20 C9 F9		 jsr czest
   151 F873 38			 sec
   152 F874 7D 5A FB		 adc p1pom,x
   153 F877 95 42		 sta freq+2,x
   154 F879 CA			r9 dex
   155 F87A 30 A3		 bmi ret
   156 F87C BD 3A FB		r6 lda adrinh,x
   157 F87F F0 D2		 beq d0
   158 F881 85 49		 sta ad+1
   159 F883 BD 36 FB		 lda adrinl,x
   160 F886 85 48		 sta ad
   161 F888 B4 44		 ldy slup,x
   162 F88A C0 20		 cpy #$20
   163 F88C B0 60		 bcs d3
   164 F88E B1 48		 lda (ad),y
   165 F890 7D 26 FB		 adc adcvol,x
   166 F893 2C 6E F7		 bit v10
   167 F896 F0 02		 beq d1
   168 F898 29 F0		 and #$f0
   169 F89A 9D 22 FB		d1 sta volume,x
   170 F89D C8			 iny
   171 F89E B1 48		 lda (ad),y
   172 F8A0 C8			 iny
   173 F8A1 94 44		 sty slup,x
   174 F8A3 85 4B		 sta tp
   175 F8A5 29 07		 and #7
   176 F8A7 F0 65		 beq d4
   177 F8A9 A8			 tay
   178 F8AA B9 88 FA		 lda akce-1,y
   179 F8AD 8D BE F8		 sta akbr+1
   180 F8B0 A5 4B		 lda tp
   181 F8B2 4A			 lsr @
   182 F8B3 4A			 lsr @
   183 F8B4 4A			 lsr @
   184 F8B5 4A			 lsr @
   185 F8B6 4A			 lsr @
   186 F8B7 09 28		 ora #$28
   187 F8B9 A8			 tay
   188 F8BA B1 48		 lda (ad),y
   189 F8BC 18			 clc
   190 F8BD 90 FE		akbr bcc *
   191 = F8BF			ak equ *
   192
   193 F8BF 75 40		a0 adc freq,x
   194 F8C1 95 40		a1 sta freq,x
   195 F8C3 4C 79 F8		 jmp r9
   196 F8C6 20 C3 F9		a2 jsr aczest
   197 F8C9 95 40		 sta freq,x
   198 F8CB 4C 79 F8		 jmp r9
   199 F8CE 95 40		a4 sta freq,x
   200 F8D0 BD 98 FA		 lda ndziel,x
   201 F8D3 10 0A		 bpl a7
   202 F8D5 95 40		a5 sta freq,x
   203 F8D7 A9 80		 lda #$80
   204 F8D9 D0 04		 bne a7
   205 F8DB 95 40		a6 sta freq,x
   206 F8DD A9 01		 lda #1
   207 F8DF 05 4A		a7 ora aud
   208 F8E1 85 4A		 sta aud
   209 F8E3 4C 79 F8		 jmp r9
   210 F8E6 2D 0A D2		a8 and $d20a
   211 F8E9 95 40		 sta freq,x
   212 F8EB 4C 79 F8		 jmp r9
   213
   214 F8EE C8			d3 iny
   215 F8EF C8			 iny
   216 F8F0 D0 02		 bne *+4
   217 F8F2 A0 20		 ldy #$20
   218 F8F4 94 44		 sty slup,x
   219 F8F6 BD 22 FB		 lda volume,x
   220 F8F9 29 0F		 and #$0f
   221 F8FB F0 11		 beq d4
   222 F8FD A0 22		 ldy #$22
   223 F8FF B1 48		 lda (ad),y
   224 F901 F0 0B		 beq d4
   225 F903 DE 62 FB		 dec p3lic,x
   226 F906 D0 06		 bne d4
   227 F908 9D 62 FB		 sta p3lic,x
   228 F90B DE 22 FB		 dec volume,x
   229 F90E B5 44		d4 lda slup,x
   230 F910 29 06		 and #6
   231 F912 4A			 lsr @
   232 F913 69 24		 adc #$24
   233 F915 A8			 tay
   234 F916 B1 48		 lda (ad),y
   235 F918 20 C3 F9		 jsr aczest
   236 F91B 95 40		 sta freq,x
   237 F91D BC 1E FB		 ldy branch,x
   238 F920 8C 27 F9		 sty typbr+1
   239 F923 BC 5E FB		 ldy p2lic,x
   240 F926 F0 FE		typbr beq *
   241 = F928			so equ *
   242 F928 DE 5E FB		 dec p2lic,x
   243 F92B 4C 59 F8		 jmp r8
   244
   245 F92E A9 02		s0 lda #2
   246 F930 29 00		 and #0
   247 = F931			licz equ *-1
   248 F932 F0 20		 beq t2
   249 F934 0A			 asl @
   250 F935 2D 31 F9		 and licz
   251 F938 D0 0D		 bne t0
   252 F93A BD 52 FB		 lda p1lsb,x
   253 F93D 9D 5A FB		t1 sta p1pom,x
   254 F940 75 40		 adc freq,x
   255 F942 95 40		 sta freq,x
   256 F944 4C 59 F8		 jmp r8
   257 F947 B5 40		t0 lda freq,x
   258 F949 38			s1 sec
   259 F94A FD 52 FB		 sbc p1lsb,x
   260 F94D 95 40		 sta freq,x
   261 F94F 98			 tya	; #0
   262 F950 38			 sec
   263 F951 FD 52 FB		 sbc p1lsb,x
   264 F954 9D 5A FB		t2 sta p1pom,x
   265 F957 4C 59 F8		 jmp r8
   266 F95A BD 56 FB		s2 lda p1lic,x
   267 F95D 9D 5A FB		t9 sta p1pom,x
   268 F960 18			 clc
   269 F961 75 40		 adc freq,x
   270 F963 95 40		t3 sta freq,x
   271 F965 18			 clc
   272 F966 BD 56 FB		 lda p1lic,x
   273 F969 7D 52 FB		 adc p1lsb,x
   274 F96C 9D 56 FB		 sta p1lic,x
   275 F96F 4C 59 F8		 jmp r8
   276 F972 BD 3E FB		s3 lda numdzw,x
   277 F975 38			 sec
   278 F976 FD 56 FB		 sbc p1lic,x
   279 F979 20 C6 F9		t4 jsr nczest
   280 F97C 4C 63 F9		 jmp t3
   281 F97F 98			s4 tya	; #0
   282 F980 38			 sec
   283 F981 FD 56 FB		 sbc p1lic,x
   284 F984 4C 5D F9		 jmp t9
   285 F987 BD 3E FB		s5 lda numdzw,x
   286 F98A 18			 clc
   287 F98B 7D 56 FB		 adc p1lic,x
   288 F98E 4C 79 F9		 jmp t4
   289 F991 20 A5 F9		s6 jsr t5
   290 F994 4C 3D F9		 jmp t1
   291 F997 20 A5 F9		s7 jsr t5
   292 F99A 7D 3E FB		 adc numdzw,x
   293 F99D 20 C6 F9		 jsr nczest
   294 F9A0 95 40		 sta freq,x
   295 F9A2 4C 59 F8		 jmp r8
   296 F9A5 BC 56 FB		t5 ldy p1lic,x
   297 F9A8 BD 52 FB		 lda p1lsb,x
   298 F9AB 30 02		 bmi *+4
   299 F9AD C8			 iny
   300 F9AE C8			 iny
   301 F9AF 88			 dey
   302 F9B0 98			 tya
   303 F9B1 9D 56 FB		 sta p1lic,x
   304 F9B4 DD 52 FB		 cmp p1lsb,x
   305 F9B7 D0 08		 bne t7
   306 F9B9 49 FF		 eor #$ff
   307 F9BB 9D 52 FB		 sta p1lsb,x
   308 F9BE BD 56 FB		 lda p1lic,x
   309 F9C1 18			t7 clc
   310 F9C2 60			 rts
   311 F9C3 7D 2E FB		aczest adc adcdzw,x
   312 F9C6 9D 3E FB		nczest sta numdzw,x
   313 F9C9 29 3F		czest and #$3f
   314 F9CB 1D 2A FB		 ora frqwsk,x
   315 F9CE A8			 tay
   316 F9CF B9 C0 40		m_00c0 lda msx+$c0,y
   317 F9D2 60			 rts
   318
   319 F9D3 84 4B		nins sty tp
   320 F9D5 29 1F		 and #$1f
   321 F9D7 0A			 asl @
   322 F9D8 A8			 tay
   323 F9D9 B9 00 40		m_0000 lda msx,y
   324 F9DC 9D 36 FB		 sta adrinl,x
   325 F9DF B9 01 40		m_0001 lda msx+1,y
   326 F9E2 9D 3A FB		 sta adrinh,x
   327 F9E5 A4 4B		 ldy tp
   328 F9E7 A9 00		newdzw lda #0
   329 F9E9 9D 26 FB		newavo sta adcvol,x
   330 F9EC C8			new iny
   331 F9ED B1 48		 lda (ad),y
   332 F9EF 10 30		 bpl q4
   333 F9F1 C9 FE		 cmp #$fe
   334 F9F3 D0 07		 bne q0
   335 F9F5 98			 tya
   336 F9F6 9D 46 FB		 sta ptrwsk,x
   337 F9F9 4C 3E F8		 jmp r3
   338 F9FC C9 C0		q0 cmp #$c0
   339 F9FE 90 1A		 bcc q3
   340 FA00 C9 E0		 cmp #$e0
   341 FA02 90 07		 bcc q1
   342 FA04 A9 40		l01 lda #?lenpat
   343 FA06 8D C3 F7		 sta pozptr
   344 FA09 B0 E1		 bcs new
   345 FA0B C9 D0		q1 cmp #$d0
   346 FA0D 90 07		 bcc q2
   347 FA0F 29 0F		 and #$0f
   348 FA11 8D 48 F8		 sta tempo
   349 FA14 10 D6		 bpl new
   350 FA16 69 31		q2 adc #$31
   351 FA18 50 CF		 bvc newavo
   352 FA1A 29 3F		q3 and #$3f
   353 FA1C 9D 4A FB		 sta ilespc,x
   354 FA1F 10 CB		 bpl new
   355 FA21 C9 40		q4 cmp #$40
   356 FA23 B0 AE		 bcs nins
   357
   358 FA25 7D 32 FB		 adc poddzw,x
   359 FA28 9D 2E FB		 sta adcdzw,x
   360 FA2B 98			 tya
   361 FA2C 9D 46 FB		 sta ptrwsk,x
   362 FA2F BD 3A FB		 lda adrinh,x
   363 FA32 F0 52		 beq qret
   364 FA34 85 49		 sta ad+1
   365 FA36 BD 36 FB		 lda adrinl,x
   366 FA39 85 48		 sta ad
   367 FA3B A0 20		 ldy #$20
   368 FA3D B1 48		 lda (ad),y
   369 FA3F 29 0F		 and #$0f
   370 FA41 9D 52 FB		 sta p1lsb,x
   371 FA44 B1 48		 lda (ad),y
   372 FA46 4A			 lsr @
   373 FA47 4A			 lsr @
   374 FA48 4A			 lsr @
   375 FA49 4A			 lsr @
   376 FA4A 29 07		 and #7
   377 FA4C A8			 tay
   378 FA4D B9 90 FA		 lda typy,y
   379 FA50 9D 1E FB		 sta branch,x
   380 FA53 A0 21		 ldy #$21
   381 FA55 B1 48		 lda (ad),y
   382 FA57 0A			 asl @
   383 FA58 0A			 asl @
   384 FA59 85 4B		 sta tp
   385 FA5B 29 3F		 and #$3f
   386 FA5D 9D 5E FB		 sta p2lic,x
   387 FA60 45 4B		 eor tp
   388 FA62 9D 2A FB		 sta frqwsk,x
   389 FA65 C8			 iny
   390 FA66 B1 48		 lda (ad),y
   391 FA68 9D 62 FB		 sta p3lic,x
   392 FA6B A9 00		 lda #0
   393 FA6D 95 44		 sta slup,x
   394 FA6F 9D 56 FB		 sta p1lic,x
   395 FA72 9D 5A FB		 sta p1pom,x
   396 FA75 BD 2E FB		 lda adcdzw,x
   397 				* (nczest)
   398 FA78 9D 3E FB		 sta numdzw,x
   399 FA7B 29 3F		 and #$3f
   400 FA7D 1D 2A FB		 ora frqwsk,x
   401 FA80 A8			 tay
   402 FA81 B9 C0 40		m_00c0_ lda msx+$c0,y
   403 FA84 95 40		 sta freq,x
   404 FA86 4C 3E F8		qret jmp r3
   405
   406 FA89			akce
   407 FA89 02 00 07		 dta b(a1-ak),b(a0-ak),b(a2-ak)
   408 FA8C 0F 16 1C 27		 dta b(a4-ak),b(a5-ak),b(a6-ak),b(a8-ak)
   409
   410 FA90			typy
   411 FA90 06 21 32 4A		 dta b(s0-so),b(s1-so),b(s2-so),b(s3-so)
   412 FA94 57 5F 69 6F		 dta b(s4-so),b(s5-so),b(s6-so),b(s7-so)
   413
   414 FA98 40 00 20 00		ndziel dta $40,$00,$20,$00
   415
   416 FA9C 04 02 00 00		filtry dta $04,$02,$00,$00
   417
   418 = FA9F			bsfrql equ *-1
   419 FAA0 F2 33 96 E2 38 8C +  dta $f2,$33,$96,$e2,$38,$8c,$00
   420 FAA7 6A E8 6A EF 80 08 +  dta $6a,$e8,$6a,$ef,$80,8,$ae,$46
   421 FAAF E6 95 41 F6 B0 6E +  dta $e6,$95,$41,$f6,$b0,$6e,$30,$f6
   422 FAB7 BB 84 52 22 F4 C8 +  dta $bb,$84,$52,$22,$f4,$c8,$a0,$7a
   423 FABF 55 34 14 F5 D8 BD +  dta $55,$34,$14,$f5,$d8,$bd,$a4,$8d
   424 FAC7 77 60 4E 38 27 15 +  dta $77,$60,$4e,$38,$27,$15,$06,$f7
   425 FACF E8 DB CF C3 B8 AC +  dta $e8,$db,$cf,$c3,$b8,$ac,$a2,$9a
   426 FAD7 90 88 7F 78 70 6A +  dta $90,$88,$7f,$78,$70,$6a,$64,$5e
   427
   428 = FADE			bsfrqh equ *-1
   429 FADF 0D 0D 0C 0B 0B 0A +  dta 13,13,12,11,11,10,10,9,8,8,7,7,7,6,6,5,5,5,4,4,4,4
   430 FAF5 03 03 03 03 03 02 +  dta 3,3,3,3,3,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1
   431 FB0D 00 00 00 00 00 00 +  dta 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
   432
   433 FB1E 00 00 00 00		branch dta d'    '
   434 FB22 00 00 00 00		volume dta d'    '
   435 FB26 00 00 00 00		adcvol dta d'    '
   436 FB2A 00 00 00 00		frqwsk dta d'    '
   437 FB2E 00 00 00 00		adcdzw dta d'    '
   438 FB32 00 00 00 00		poddzw dta d'    '
   439 FB36 00 00 00 00		adrinl dta d'    '
   440 FB3A 00 00 00 00		adrinh dta d'    '
   441 FB3E 00 00 00 00		numdzw dta d'    '
   442 FB42 00 00 00 00		numptr dta d'    '
   443 FB46 00 00 00 00		ptrwsk dta d'    '
   444 FB4A 00 00 00 00		ilespc dta d'    '
   445 FB4E 00 00 00 00		licspc dta d'    '
   446 FB52 00 00 00 00		p1lsb  dta d'    '
   447 FB56 00 00 00 00		p1lic  dta d'    '
   448 FB5A 00 00 00 00		p1pom  dta d'    '
   449 FB5E 00 00 00 00		p2lic  dta d'    '
   450 FB62 00 00 00 00		p3lic  dta d'    '
   451 FB66 01			zegar  dta 1
   452
   453 				/*
   454 				  regX - bank
   455 				  regA - address low byte
   456 				  regY - address high byte
   457 				*/
   457
   458 FB67			initialization
   459 FB67 8D 21 FC		 sta low+1
   460 FB6A 8C 25 FC		 sty hig+1
   461
   462 FB6D 20 00 EB		 jsr switch_bank 
   463
   464 FB70			 madr $0000 , m_0000
Macro: MADR [Source: d:\Download\getris\mpt\mpt_player.asm]
     1 FB70 A2 00		 ldx <$0000
     2 FB72 A0 00		 ldy >$0000
     3 FB74 20 1E FC		 jsr adr
     4 FB77 8E DA F9		 stx M_0000+1
     5 FB7A 8C DB F9		 sty M_0000+2
Source: d:\Download\getris\mpt\mpt_player.asm
   465 FB7D			 madr $0001 , m_0001
Macro: MADR [Source: d:\Download\getris\mpt\mpt_player.asm]
     1 FB7D A2 01		 ldx <$0001
     2 FB7F A0 00		 ldy >$0001
     3 FB81 20 1E FC		 jsr adr
     4 FB84 8E E0 F9		 stx M_0001+1
     5 FB87 8C E1 F9		 sty M_0001+2
Source: d:\Download\getris\mpt\mpt_player.asm
   466 FB8A			 madr $0040 , m_0040
Macro: MADR [Source: d:\Download\getris\mpt\mpt_player.asm]
     1 FB8A A2 40		 ldx <$0040
     2 FB8C A0 00		 ldy >$0040
     3 FB8E 20 1E FC		 jsr adr
     4 FB91 8E 34 F8		 stx M_0040+1
     5 FB94 8C 35 F8		 sty M_0040+2
Source: d:\Download\getris\mpt\mpt_player.asm
   467 FB97			 madr $0041 , m_0041
Macro: MADR [Source: d:\Download\getris\mpt\mpt_player.asm]
     1 FB97 A2 41		 ldx <$0041
     2 FB99 A0 00		 ldy >$0041
     3 FB9B 20 1E FC		 jsr adr
     4 FB9E 8E 2D F8		 stx M_0041+1
     5 FBA1 8C 2E F8		 sty M_0041+2
Source: d:\Download\getris\mpt\mpt_player.asm
   468 FBA4			 madr $01c0 , m_01c0
Macro: MADR [Source: d:\Download\getris\mpt\mpt_player.asm]
     1 FBA4 A2 C0		 ldx <$01C0
     2 FBA6 A0 01		 ldy >$01C0
     3 FBA8 20 1E FC		 jsr adr
     4 FBAB 8E DC F7		 stx M_01C0+1
     5 FBAE 8C DD F7		 sty M_01C0+2
Source: d:\Download\getris\mpt\mpt_player.asm
   469 FBB1			 madr $01c4 , m_01c4
Macro: MADR [Source: d:\Download\getris\mpt\mpt_player.asm]
     1 FBB1 A2 C4		 ldx <$01C4
     2 FBB3 A0 01		 ldy >$01C4
     3 FBB5 20 1E FC		 jsr adr
     4 FBB8 8E E1 F7		 stx M_01C4+1
     5 FBBB 8C E2 F7		 sty M_01C4+2
Source: d:\Download\getris\mpt\mpt_player.asm
   470 FBBE			 madr $00c0 , m_00c0
Macro: MADR [Source: d:\Download\getris\mpt\mpt_player.asm]
     1 FBBE A2 C0		 ldx <$00C0
     2 FBC0 A0 00		 ldy >$00C0
     3 FBC2 20 1E FC		 jsr adr
     4 FBC5 8E D0 F9		 stx M_00C0+1
     5 FBC8 8C D1 F9		 sty M_00C0+2
Source: d:\Download\getris\mpt\mpt_player.asm
   471 FBCB 8E 82 FA		 stx m_00c0_+1
   472 FBCE 8C 83 FA		 sty m_00c0_+2
   473
   474 FBD1 A2 C8		 ldx <$01c8
   475 FBD3 A0 01		 ldy >$01c8
   476 FBD5 20 1E FC		 jsr adr
   477 FBD8 86 48		 stx ad
   478 FBDA 84 49		 sty ad+1
   479
   480 FBDC A0 00		 ldy #0
   481 FBDE B1 48		 lda (ad),y
   482 				; lda msx+$1c8
   483 FBE0 8D C5 F7		 sta l00+1
   484 FBE3 8D 05 FA		 sta l01+1
   485
   486 FBE6 C8			 iny
   487 FBE7 B1 48		 lda (ad),y
   488 				; ldx msx+$1c9
   489 FBE9 AA			 tax
   490 FBEA CA			 dex
   491 FBEB 8E 48 F8		 stx tempo
   492
   493 FBEE A9 FF		 lda #$ff
   494 FBF0 8D C3 F7		 sta pozptr
   495
   496 FBF3 A9 00		 lda #0
   497 FBF5 85 4A		 sta aud
   498 FBF7 8D 31 F9		 sta licz
   499 FBFA 8D E6 F7		 sta pozsng
   500 FBFD 8D 08 D2		 sta $d208
   501 FC00 8D 18 D2		 sta $d218
   502
   503 FC03 A2 47		 ldx #71
   504 FC05			clr
   505 FC05 9D 1E FB		 sta branch,x
   506 FC08 CA			 dex
   507 FC09 10 FA		 bpl clr
   508
   509 FC0B A9 01		 lda #1
   510 FC0D 8D 66 FB		 sta zegar
   511
   512 FC10 A9 03		 lda #3
   513 FC12 8D 0F D2		 sta $d20f
   514 FC15 8D 1F D2		 sta $d21f
   515
   516 FC18 A9 FE		 lda #$fe
   517 FC1A 8D 01 D3		 sta $d301
   518 FC1D 60			 rts
   519
   520 FC1E			adr
   521 FC1E 8A			 txa
   522 FC1F 18			 clc
   523 FC20 69 00		low adc #0
   524 FC22 AA			 tax
   525 FC23 98			 tya
   526 FC24 69 00		hig adc #0
   527 FC26 A8			 tay
   528 FC27 60			 rts
   529 					
   530 				.endp
   531
   532
   533 				.macro madr
   534 				 ldx <:1
   535 				 ldy >:1
   536 				 jsr adr
   537 				 stx :2+1
   538 				 sty :2+2
   539 				.endm
  1056
  1057 FC28			 icl 'inflate.asm'
Source: d:\Download\getris\inflate.asm
     1 = 0040			zpage	equ	$40	; 11 bytes
     2
     3
     4 				* 'Inflate'
     5 				; Written by Piotr Fusik (a.k.a. Fox/Taquart)
     6 				; Purpose: to uncompress Deflate format compressed data on 6502-based system.
     7
     8 				* const
     9 				; Maximum length of a Huffman code
    10 = 000F			MAX_BITS      equ	15
    11 				; Index in bitsCount, bitsPointer_l and bitsPointer_h
    12 				; for temporary tree and literal/length tree
    13 = 0000			PRIMARY_TREE  equ	0
    14 				; Index in bitsCount, bitsPointer_l and bitsPointer_h for distance tree
    15 = 000F			DISTANCE_TREE equ	MAX_BITS
    16 				; Size of each of bitsCount, bitsPointer_l and bitsPointer_h
    17 = 001E			TREES_SIZE    equ	2*MAX_BITS
    18
    19 				* page zero
    20 				; (public) Pointer to compressed data
    21 = 0040			inputPointer            equ	zpage    ; 2 bytes
    22 				; (public) Pointer to uncompressed data
    23 = 0042			outputPointer           equ	zpage+2  ; 2 bytes
    24 				; Local variables
    25 = 004A			getBit_hold             equ	zpage+10 ; 1 byte
    26
    27 = 0044			inflateDynamicBlock_cnt equ	zpage+4  ; 1 byte
    28 = 0044			inflateCodes_src        equ	zpage+4  ; 2 bytes
    29 = 0044			buildHuffmanTree_src    equ	zpage+4  ; 2 bytes
    30 = 0044			getNextLength_last      equ	zpage+4  ; 1 byte
    31 = 0045			getNextLength_index     equ	zpage+5  ; 1 byte
    32
    33 = 0046			buildHuffmanTree_ptr    equ	zpage+6  ; 2 bytes
    34 = 0046			fetchCode_ptr           equ	zpage+6  ; 2 bytes
    35 = 0046			getBits_tmp             equ	zpage+6  ; 1 byte
    36
    37 = 0048			moveBlock_len           equ	zpage+8  ; 2 bytes
    38 = 0048			inflateDynamicBlock_np  equ	zpage+8  ; 1 byte
    39 = 0049			inflateDynamicBlock_nd  equ	zpage+9  ; 1 byte
    40
    41 				* code
    42 				*	org	inflate
    43 				* (public) inflate
    44 				; Decompress Deflate data pointed by inputPointer
    45 				; to memory at outputPointer
    46
    47 FC28			inflate
    48 FC28 A0 01 84 4A			mvy	#1	getBit_hold
    49 FC2C D0 03			bne	inflate_2
    50 FC2E			inflate_1
    51 FC2E 20 3B FC			jsr	inflate_3
    52 FC31			inflate_2
    53 				; Get a bit of EOF and two bits of block type
    54 FC31 A2 03			ldx	#3
    55 FC33 A9 00			lda	#0
    56 FC35 20 21 FE			jsr	getBits
    57 FC38 4A				lsr	@
    58 FC39 90 F3			bcc	inflate_1
    59 FC3B			inflate_3
    60 FC3B D0 3A			bne	inflateCompressedBlock
    61
    62 				* inflateCopyBlock
    63 				; Decompress 'stored' data block
    64 FC3D			inflateCopyBlock
    65 				; Ignore bits until byte boundary
    66 FC3D A0 01 84 4A			mvy	#1	getBit_hold
    67 				; Get 16-bit length
    68 FC41 A2 40			ldx	#inputPointer
    69 FC43 A1 00 85 48			mva	(0,x)	moveBlock_len
    70 FC47 B1 40 85 49			mva	(inputPointer),y	moveBlock_len+1
    71 				; Skip length and one's complement length
    72 FC4B A9 04			lda	#4
    73 FC4D 18 65 40 85 40		add:sta	inputPointer
    74 FC52 90 02 E6 41			scc:inc	inputPointer+1
    75
    76 				* moveBlock
    77 				; Copy block of length moveBlock_len from (0,x) to output
    78 FC56			moveBlock
    79 FC56 A4 48			ldy	moveBlock_len
    80 FC58 F0 04			beq	moveBlock_1
    81 FC5A A0 00			ldy	#0
    82 FC5C E6 49			inc	moveBlock_len+1
    83 FC5E			moveBlock_1
    84 FC5E A1 00 91 42			mva	(0,x)	(outputPointer),y
    85 FC62 F6 00 D0 02 F6 01		inw	0,x
    86 FC68 E6 42 D0 02 E6 43		inw	outputPointer
    87 FC6E C6 48			dec	moveBlock_len
    88 FC70 D0 EC			bne	moveBlock_1
    89 FC72 C6 49			dec	moveBlock_len+1
    90 FC74 D0 E8			bne	moveBlock_1
    91 FC76 60				rts
    92
    93 				* inflateCompressedBlock
    94 				; Decompress Huffman-coded data block
    95 				; A = 1: fixed, A = 2: dynamic
    96 FC77			inflateCompressedBlock
    97 FC77 4A				lsr	@
    98 FC78 D0 2C			bne	inflateDynamicBlock
    99
   100 				* inflateFixedBlock
   101 				; Decompress Huffman-coded data block with default Huffman trees:
   102 				; literalCodeLength	:144	dta 8
   103 				;			:112	dta 9
   104 				; endCodeLength		:24	dta 7
   105 				;			:6	dta 8
   106 				; distanceCodeLength	:30	dta 5+DISTANCE_TREE
   107 				;			:2	dta 8
   108 				; (two 8-bit codes from primary tree are not used)
   109 FC7A			inflateFixedBlock
   110 FC7A A2 9F			ldx	#159
   111 FC7C 8E 3E 03			stx	distanceCodeLength+32
   112 FC7F A9 08			lda	#8
   113 FC81			inflateFixedBlock_1
   114 FC81 9D FF 01			sta	literalCodeLength-1,x
   115 FC84 9D 9E 02 CA			sta	literalCodeLength+159-1,x-
   116 FC88 D0 F7			bne	inflateFixedBlock_1
   117 FC8A A2 70			ldx	#112
   118 FC8C FE 8F 02 CA D0 FA		inc:rne	literalCodeLength+144-1,x-
   119 FC92 A2 18			ldx	#24
   120 FC94 DE FF 02 CA D0 FA		dec:rne	endCodeLength-1,x-
   121 FC9A A2 1E			ldx	#30
   122 FC9C A9 14			lda	#5+DISTANCE_TREE
   123 FC9E 9D 1D 03 CA D0 FA		sta:rne	distanceCodeLength-1,x-
   124 FCA4 F0 71			beq	inflateCodes
   125
   126 				* inflateDynamicBlock
   127 				; Decompress Huffman-coded data block, reading Huffman trees first
   128 FCA6			inflateDynamicBlock
   129 				; numberOfPrimaryCodes = 257 + getBits(5)
   130 FCA6 A2 05			ldx	#5
   131 				;	lda	#1
   132 FCA8 20 21 FE			jsr	getBits
   133 FCAB 85 48			sta	inflateDynamicBlock_np
   134 				; numberOfDistanceCodes = 1 + getBits(5)
   135 FCAD A2 05			ldx	#5
   136 FCAF A9 1F			lda	#1+29+1
   137 FCB1 20 21 FE			jsr	getBits
   138 FCB4 85 49			sta	inflateDynamicBlock_nd
   139 				; numberOfTemporaryCodes = 4 + getBits(4)
   140 FCB6 A9 04 AA			lda:tax	#4
   141 FCB9 20 21 FE			jsr	getBits
   142 FCBC 85 44			sta	inflateDynamicBlock_cnt
   143 				; Get lengths of temporary codes in order stored in tempCodeLengthOrder
   144 FCBE A9 00 A8			lda:tay	#0
   145 FCC1			inflateDynamicBlock_1
   146 FCC1 A2 03			ldx	#3		; A = 0
   147 FCC3 20 21 FE			jsr	getBits		; does not change Y
   148 FCC6			inflateDynamicBlock_2
   149 FCC6 BE 56 FE			ldx	tempCodeLengthOrder,y
   150 FCC9 9D 00 02			sta	literalCodeLength,x
   151 FCCC A9 00			lda	#0
   152 FCCE C8				iny
   153 FCCF C4 44			cpy	inflateDynamicBlock_cnt
   154 FCD1 90 EE			bcc	inflateDynamicBlock_1
   155 FCD3 C0 13			cpy	#19
   156 FCD5 90 EF			bcc	inflateDynamicBlock_2
   157 FCD7 6E 13 02			ror	literalCodeLength+19
   158 				; Build tree for temporary codes
   159 FCDA 20 5B FD			jsr	buildHuffmanTree
   160
   161 				; Use temporary codes to get lengths for literal/length and distance codes
   162 FCDD A2 00			ldx	#0
   163 FCDF A0 01			ldy	#1
   164 FCE1 86 44			stx	getNextLength_last
   165 FCE3			inflateDynamicBlock_3
   166 FCE3 20 CC FD			jsr	getNextLength
   167 FCE6 9D 00 02 E8			sta	literalCodeLength,x+
   168 FCEA D0 F7			bne	inflateDynamicBlock_3
   169 FCEC			inflateDynamicBlock_4
   170 FCEC 20 CC FD			jsr	getNextLength
   171 FCEF 9D 00 03 E8			sta	endCodeLength,x+
   172 FCF3 E4 48			cpx	inflateDynamicBlock_np
   173 FCF5 90 F5			bcc	inflateDynamicBlock_4
   174 FCF7 A9 00			lda	#0
   175 FCF9 B0 04			bcs	inflateDynamicBlock_6
   176 FCFB			inflateDynamicBlock_5
   177 FCFB 9D 00 03 E8			sta	endCodeLength,x+
   178 FCFF			inflateDynamicBlock_6
   179 FCFF E0 1E			cpx	#1+29
   180 FD01 90 F8			bcc	inflateDynamicBlock_5
   181 FD03			inflateDynamicBlock_7
   182 FD03 20 CC FD			jsr	getNextLength
   183 FD06 C9 00			cmp	#0
   184 FD08 F0 02 69 0E			seq:adc	#DISTANCE_TREE-1
   185 FD0C 9D 00 03 E8			sta	endCodeLength,x+
   186 FD10 E4 49			cpx	inflateDynamicBlock_nd
   187 FD12 90 EF			bcc	inflateDynamicBlock_7
   188 FD14 7E 00 03			ror	endCodeLength,x
   189
   190 				* inflateCodes
   191 				; Decompress data block basing on given Huffman trees
   192 FD17			inflateCodes
   193 FD17 20 5B FD			jsr	buildHuffmanTree
   194 FD1A			inflateCodes_1
   195 FD1A 20 F2 FD			jsr	fetchPrimaryCode
   196 FD1D B0 0D			bcs	inflateCodes_2
   197 				; Literal code
   198 FD1F A0 00		        ldy     #0
   199 FD21 91 42			sta	(outputPointer),y
   200 FD23 E6 42			inc	outputPointer
   201 FD25 D0 F3			bne	inflateCodes_1
   202 FD27 E6 43			inc	outputPointer+1
   203 FD29 90 EF			bcc	inflateCodes_1
   204 				; End of block
   205 FD2B			inflateCodes_ret
   206 FD2B 60				rts
   207 FD2C			inflateCodes_2
   208 FD2C F0 FD			beq	inflateCodes_ret
   209 				; Repeat block
   210 FD2E 20 14 FE			jsr	getValue
   211 FD31 85 48			sta	moveBlock_len
   212 FD33 98				tya
   213 FD34 20 21 FE			jsr	getBits
   214 FD37 85 49			sta	moveBlock_len+1
   215 FD39 A2 0F			ldx	#DISTANCE_TREE
   216 FD3B 20 F4 FD			jsr	fetchCode
   217 FD3E 20 14 FE			jsr	getValue
   218 FD41 38				sec
   219 FD42 49 FF			eor	#$ff
   220 FD44 65 42			adc	outputPointer
   221 FD46 85 44			sta	inflateCodes_src
   222 FD48 08				php
   223 FD49 98				tya
   224 FD4A 20 21 FE			jsr	getBits
   225 FD4D 28				plp
   226 FD4E 49 FF			eor	#$ff
   227 FD50 65 43			adc	outputPointer+1
   228 FD52 85 45			sta	inflateCodes_src+1
   229 FD54 A2 44			ldx	#inflateCodes_src
   230 FD56 20 56 FC			jsr	moveBlock
   231 FD59 F0 BF			beq	inflateCodes_1
   232
   233 				* buildHuffmanTree
   234 				; Build Huffman trees basing on code lengths.
   235 				; Lengths (in bits) are stored in *CodeLength tables.
   236 				; A byte with highest bit set marks end of length table.
   237 FD5B			buildHuffmanTree
   238 FD5B A9 00 85 44 A9 02 + 	mwa	#literalCodeLength	buildHuffmanTree_src
   239 				; Clear bitsCount and bitsPointer_l
   240 FD63 A0 3D			ldy	#2*TREES_SIZE+1
   241 FD65 A9 00			lda	#0
   242 FD67 99 3E 03 88 D0 FA		sta:rne	bitsCount-1,y-
   243 FD6D F0 09			beq	buildHuffmanTree_3
   244 				; Count number of codes of each length
   245 FD6F			buildHuffmanTree_2
   246 FD6F AA				tax
   247 FD70 FE 5D 03			inc	bitsPointer_l,x
   248 FD73 C8				iny
   249 FD74 D0 02			bne	buildHuffmanTree_3
   250 FD76 E6 45			inc	buildHuffmanTree_src+1
   251 FD78			buildHuffmanTree_3
   252 FD78 B1 44			lda	(buildHuffmanTree_src),y
   253 FD7A 10 F3			bpl	buildHuffmanTree_2
   254 				; Calculate pointer for each length
   255 FD7C A2 00			ldx	#0
   256 FD7E A9 9A			lda	#<sortedCodes
   257 FD80 A0 03			ldy	#>sortedCodes
   258 FD82 18				clc
   259 FD83			buildHuffmanTree_4
   260 FD83 9D 5D 03			sta	bitsPointer_l,x
   261 FD86 98 9D 7C 03			tya:sta	bitsPointer_h,x
   262 FD8A BD 5E 03			lda	bitsPointer_l+1,x
   263 FD8D 7D 5D 03			adc	bitsPointer_l,x
   264 FD90 90 01 C8			scc:iny
   265 FD93 E8				inx
   266 FD94 E0 1E			cpx	#TREES_SIZE
   267 FD96 90 EB			bcc	buildHuffmanTree_4
   268 FD98 A9 02 85 45			mva	#>literalCodeLength	buildHuffmanTree_src+1
   269 FD9C A0 00			ldy	#0
   270 FD9E B0 27			bcs	buildHuffmanTree_9
   271 				; Put codes into their place in sorted table
   272 FDA0			buildHuffmanTree_6
   273 FDA0 F0 15			beq	buildHuffmanTree_7
   274 FDA2 AA				tax
   275 FDA3 BD 5C 03 85 46		mva	bitsPointer_l-1,x	buildHuffmanTree_ptr
   276 FDA8 BD 7B 03 85 47		mva	bitsPointer_h-1,x	buildHuffmanTree_ptr+1
   277 FDAD 98				tya
   278 FDAE BC 3E 03 FE 3E 03		ldy:inc	bitsCount-1,x
   279 FDB4 91 46			sta	(buildHuffmanTree_ptr),y
   280 FDB6 A8				tay
   281 FDB7			buildHuffmanTree_7
   282 FDB7 C8				iny
   283 FDB8 D0 0D			bne	buildHuffmanTree_9
   284 FDBA E6 45			inc	buildHuffmanTree_src+1
   285 FDBC A2 0E			ldx	#MAX_BITS-1
   286 FDBE BD 3F 03 9D 00 02 + 	mva:rpl	bitsCount,x	literalCount,x-
   287 FDC7			buildHuffmanTree_9
   288 FDC7 B1 44			lda	(buildHuffmanTree_src),y
   289 FDC9 10 D5			bpl	buildHuffmanTree_6
   290 FDCB 60				rts
   291
   292 				* getNextLength
   293 				; Get next code length basing on temporary codes
   294 FDCC			getNextLength
   295 FDCC 86 45			stx	getNextLength_index
   296 FDCE 88				dey
   297 FDCF D0 1A			bne	getNextLength_1
   298 				; Fetch a temporary code
   299 FDD1 20 F2 FD			jsr	fetchPrimaryCode
   300 				; Temporary code 0..15: put this length
   301 FDD4 A0 01			ldy	#1
   302 FDD6 C9 10			cmp	#16
   303 FDD8 90 13			bcc	getNextLength_2
   304 				; Temporary code 16: repeat last length 3 + getBits(2) times
   305 				; Temporary code 17: put zero length 3 + getBits(3) times
   306 				; Temporary code 18: put zero length 11 + getBits(7) times
   307 FDDA A8				tay
   308 FDDB BE 5C FE			ldx	tempExtraBits-16,y
   309 FDDE B9 59 FE			lda	tempBaseValue-16,y
   310 FDE1 20 21 FE			jsr	getBits
   311 FDE4 C0 11			cpy	#17
   312 FDE6 A8				tay
   313 FDE7 A9 00			lda	#0
   314 FDE9 B0 02			bcs	getNextLength_2
   315 FDEB			getNextLength_1
   316 FDEB A5 44			lda	getNextLength_last
   317 FDED			getNextLength_2
   318 FDED 85 44			sta	getNextLength_last
   319 FDEF A6 45			ldx	getNextLength_index
   320 FDF1 60				rts
   321
   322 				* fetchPrimaryCode
   323 				; Read code basing on primary tree
   324 FDF2			fetchPrimaryCode
   325 FDF2 A2 00			ldx	#PRIMARY_TREE
   326
   327 				* fetchCode
   328 				; Read code from input stream basing on tree given in X.
   329 				; Return low byte of code in A.
   330 				; For literal/length tree C is set if non-literal code.
   331 FDF4			fetchCode
   332 FDF4 A9 00			lda	#0
   333 FDF6			fetchCode_1
   334 FDF6 20 3E FE			jsr	getBit
   335 FDF9 2A				rol	@
   336 FDFA E8				inx
   337 FDFB 38 FD 3E 03			sub	bitsCount-1,x
   338 FDFF B0 F5			bcs	fetchCode_1
   339 FE01 7D 3E 03			adc	bitsCount-1,x
   340 FE04 DD FF 01			cmp	literalCount-1,x
   341 FE07 85 46			sta	fetchCode_ptr
   342 FE09 BC 5C 03			ldy	bitsPointer_l-1,x
   343 FE0C BD 7B 03 85 47		mva	bitsPointer_h-1,x	fetchCode_ptr+1
   344 FE11 B1 46			lda	(fetchCode_ptr),y
   345 FE13 60				rts
   346
   347 				* getValue
   348 				; Read low byte of value (length or distance), basing on code A
   349 FE14			getValue
   350 FE14 A8				tay
   351 FE15 BE E4 FE			ldx	lengthExtraBits-1,y
   352 FE18 B9 6E FE 48			lda:pha	lengthBaseValue_l-1,y
   353 FE1C B9 A9 FE A8			lda:tay	lengthBaseValue_h-1,y
   354 FE20 68				pla
   355
   356 				* getBits
   357 				; Read X-bit number from input stream and add it to A.
   358 				; In case of carry, Y is incremented.
   359 				; If X > 8, only 8 bits are read.
   360 				; On return X holds number of unread bits: X = (X > 8 ? X - 8 : 0);
   361 FE21			getBits
   362 FE21 E0 00			cpx	#0
   363 FE23 F0 18			beq	getBits_ret
   364 FE25 48				pha
   365 FE26 A9 01 85 46			mva	#1	getBits_tmp
   366 FE2A 68				pla
   367 FE2B			getBits_1
   368 FE2B 20 3E FE			jsr	getBit
   369 FE2E 90 06			bcc	getBits_2
   370 FE30 18 65 46			add	getBits_tmp
   371 FE33 90 01 C8			scc:iny
   372 FE36			getBits_2
   373 FE36 CA				dex
   374 FE37 F0 04			beq	getBits_ret
   375 FE39 06 46			asl	getBits_tmp
   376 FE3B 90 EE			bcc	getBits_1
   377 FE3D			getBits_ret
   378 FE3D 60				rts
   379
   380 				* getBit
   381 				; Read single bit from input stream, returns it in C flag
   382 FE3E			getBit
   383 FE3E 46 4A			lsr	getBit_hold
   384 FE40 D0 13			bne	getBit_ret
   385 FE42 48				pha
   386 FE43 98 48			tya:pha
   387 FE45 A0 00			ldy     #0
   388 FE47 B1 40			lda	(inputPointer),y
   389 FE49 E6 40 D0 02 E6 41		inw	inputPointer
   390 FE4F 6A				ror	@
   391 FE50 85 4A			sta	getBit_hold
   392 FE52 68 A8			pla:tay
   393 FE54 68				pla
   394 FE55			getBit_ret
   395 				;	inc $d01a
   396 FE55 60				rts
   397
   398 				* Tables for temporary codes
   399 				; Value is BaseValue + getBits(ExtraBits)
   400
   401 				; Order, in which lengths of temporary codes are stored
   402 FE56			tempCodeLengthOrder
   403 FE56 10 11 12 00 08 07 + 	dta	b(16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15)
   404
   405 				; Base values
   406 FE69			tempBaseValue
   407 FE69 03 03 0B			dta	b(3,3,11)
   408
   409 				; Number of extra bits to read
   410 FE6C			tempExtraBits
   411 FE6C 02 03 07			dta	b(2,3,7)
   412
   413 				* Tables for length and distance codes
   414 				; Value is BaseValue + getBits(ExtraBits)
   415
   416 				; Base values
   417 FE6F			lengthBaseValue_l
   418 FE6F 03 04 05 06 07 08 + 	dta	l(3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43)
   419 FE81 33 3B 43 53 63 73 + 	dta	l(51,59,67,83,99,115,131,163,195,227,258)
   420 FE8C			distanceBaseValue_l
   421 FE8C 01 02 03 04 05 07 + 	dta	l(1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385)
   422 FE9E 01 01 01 01 01 01 + 	dta	l(513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577)
   423 FEAA			lengthBaseValue_h
   424 FEAA 00 00 00 00 00 00 + 	dta	h(3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43)
   425 FEBC 00 00 00 00 00 00 + 	dta	h(51,59,67,83,99,115,131,163,195,227,258)
   426 FEC7			distanceBaseValue_h
   427 FEC7 00 00 00 00 00 00 + 	dta	h(1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385)
   428 FED9 02 03 04 06 08 0C + 	dta	h(513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577)
   429
   430 				; Number of extra bits to read
   431 FEE5			lengthExtraBits
   432 FEE5 00 00 00 00 00 00 + 	dta	b(0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4)
   433 FEFB 04 04 05 05 05 05 + 	dta	b(4,4,5,5,5,5,0)
   434 FF02			distanceExtraBits
   435 FF02 00 00 00 00 01 01 + 	dta	b(0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10)
   436 FF1A 0B 0B 0C 0C 0D 0D		dta	b(11,11,12,12,13,13)
   437
   438
   439 = 0200			literalCount 		equ buf
   440 = 0200			literalCodeLength	equ literalCount
   441 = 0300			endCodeLength		equ literalCodeLength+256
   442 = 0301			lengthCodeLength	equ endCodeLength+1
   443 = 031E			distanceCodeLength	equ lengthCodeLength+29
   444 = 033F			bitsCount		equ distanceCodeLength+33
   445 = 035D			bitsPointer_l		equ bitsCount+TREES_SIZE
   446 = 037C			bitsPointer_h		equ bitsPointer_l+TREES_SIZE+1
   447 = 039A			sortedCodes		equ bitsPointer_h+TREES_SIZE
   448
   449 				*	org	*+256+1+29+30+2
  1058
  1059
  1060 				 .print 'ROM: $EB00..',*
  1060 				ROM: $EB00..$FF20
  1061
  1062
  1063 				;---
  1064 FF20			 org $8000
  1065 8000-AFFF> 00 00 00 00 + fnt1 ins 'ekran1.fnt'
  1066 9800 00 00 00 00 00 00 + fnt2 ins 'ekran2.fnt'
  1067
  1068
  1069 B000			 org intro.fade_out+3			; wylaczamy ekran, aby nie widac bylo logosow GETRIS
  1070 				; jsr intro.fade_out
  1071 B003-B00B> A9 00		 lda #0
  1072 B005 8D 2F 02		 sta 559
  1073 B008 8D 00 D4		 sta $d400
  1074 B00B 60			 rts
  1075
  1076 02E2-02E3> 00 B0		 ini intro.fade_out
  1077
  1078
  1079 B00C			 org $b000
  1080 				 
  1081 B000-B561> 00 00 00 00 + text1_null :40 brk              ; $B000
  1082 B028 81 82 83 84 85 06 + text1 ins 'ekran1.scr',40
  1083
  1084 B4B0			klocSCR_fazy
  1085 B4B0			 get_klocSCR """'klocek_fazy.scr'+klocek_char,0"""
Macro: GET_KLOCSCR [Source: d:\Download\getris\getris2.asm]
     1 B4B0 6B			 ins 'klocek_fazy.scr'+klocek_char,0+0,1
     2 B4B1 73			 ins 'klocek_fazy.scr'+klocek_char,0+0+32,1
     3 B4B2 73			 ins 'klocek_fazy.scr'+klocek_char,0+0+64,1
     4 B4B3 73			 ins 'klocek_fazy.scr'+klocek_char,0+0+96,1
Source: d:\Download\getris\getris2.asm
     1 B4B4 6C			 ins 'klocek_fazy.scr'+klocek_char,0+1,1
     2 B4B5 73			 ins 'klocek_fazy.scr'+klocek_char,0+1+32,1
     3 B4B6 73			 ins 'klocek_fazy.scr'+klocek_char,0+1+64,1
     4 B4B7 73			 ins 'klocek_fazy.scr'+klocek_char,0+1+96,1
Source: d:\Download\getris\getris2.asm
     1 B4B8 6D			 ins 'klocek_fazy.scr'+klocek_char,0+2,1
     2 B4B9 74			 ins 'klocek_fazy.scr'+klocek_char,0+2+32,1
     3 B4BA 73			 ins 'klocek_fazy.scr'+klocek_char,0+2+64,1
     4 B4BB 73			 ins 'klocek_fazy.scr'+klocek_char,0+2+96,1
Source: d:\Download\getris\getris2.asm
     1 B4BC 6E			 ins 'klocek_fazy.scr'+klocek_char,0+3,1
     2 B4BD 75			 ins 'klocek_fazy.scr'+klocek_char,0+3+32,1
     3 B4BE 73			 ins 'klocek_fazy.scr'+klocek_char,0+3+64,1
     4 B4BF 73			 ins 'klocek_fazy.scr'+klocek_char,0+3+96,1
Source: d:\Download\getris\getris2.asm
     1 B4C0 6F			 ins 'klocek_fazy.scr'+klocek_char,0+4,1
     2 B4C1 76			 ins 'klocek_fazy.scr'+klocek_char,0+4+32,1
     3 B4C2 73			 ins 'klocek_fazy.scr'+klocek_char,0+4+64,1
     4 B4C3 73			 ins 'klocek_fazy.scr'+klocek_char,0+4+96,1
Source: d:\Download\getris\getris2.asm
     1 B4C4 70			 ins 'klocek_fazy.scr'+klocek_char,0+5,1
     2 B4C5 77			 ins 'klocek_fazy.scr'+klocek_char,0+5+32,1
     3 B4C6 73			 ins 'klocek_fazy.scr'+klocek_char,0+5+64,1
     4 B4C7 73			 ins 'klocek_fazy.scr'+klocek_char,0+5+96,1
Source: d:\Download\getris\getris2.asm
     1 B4C8 71			 ins 'klocek_fazy.scr'+klocek_char,0+6,1
     2 B4C9 78			 ins 'klocek_fazy.scr'+klocek_char,0+6+32,1
     3 B4CA 73			 ins 'klocek_fazy.scr'+klocek_char,0+6+64,1
     4 B4CB 73			 ins 'klocek_fazy.scr'+klocek_char,0+6+96,1
Source: d:\Download\getris\getris2.asm
     1 B4CC 72			 ins 'klocek_fazy.scr'+klocek_char,0+7,1
     2 B4CD 79			 ins 'klocek_fazy.scr'+klocek_char,0+7+32,1
     3 B4CE 73			 ins 'klocek_fazy.scr'+klocek_char,0+7+64,1
     4 B4CF 73			 ins 'klocek_fazy.scr'+klocek_char,0+7+96,1
Source: d:\Download\getris\getris2.asm
     1 B4D0 73			 ins 'klocek_fazy.scr'+klocek_char,0+8,1
     2 B4D1 6B			 ins 'klocek_fazy.scr'+klocek_char,0+8+32,1
     3 B4D2 73			 ins 'klocek_fazy.scr'+klocek_char,0+8+64,1
     4 B4D3 73			 ins 'klocek_fazy.scr'+klocek_char,0+8+96,1
Source: d:\Download\getris\getris2.asm
Source: d:\Download\getris\getris2.asm
  1086 B4D4			 get_klocSCR """'klocek_fazy.scr'+klocek_char,4*32"""
Macro: GET_KLOCSCR [Source: d:\Download\getris\getris2.asm]
     1 B4D4 6B			 ins 'klocek_fazy.scr'+klocek_char,4*32+0,1
     2 B4D5 6B			 ins 'klocek_fazy.scr'+klocek_char,4*32+0+32,1
     3 B4D6 73			 ins 'klocek_fazy.scr'+klocek_char,4*32+0+64,1
     4 B4D7 73			 ins 'klocek_fazy.scr'+klocek_char,4*32+0+96,1
Source: d:\Download\getris\getris2.asm
     1 B4D8 6C			 ins 'klocek_fazy.scr'+klocek_char,4*32+1,1
     2 B4D9 6C			 ins 'klocek_fazy.scr'+klocek_char,4*32+1+32,1
     3 B4DA 73			 ins 'klocek_fazy.scr'+klocek_char,4*32+1+64,1
     4 B4DB 73			 ins 'klocek_fazy.scr'+klocek_char,4*32+1+96,1
Source: d:\Download\getris\getris2.asm
     1 B4DC 6D			 ins 'klocek_fazy.scr'+klocek_char,4*32+2,1
     2 B4DD 7A			 ins 'klocek_fazy.scr'+klocek_char,4*32+2+32,1
     3 B4DE 74			 ins 'klocek_fazy.scr'+klocek_char,4*32+2+64,1
     4 B4DF 73			 ins 'klocek_fazy.scr'+klocek_char,4*32+2+96,1
Source: d:\Download\getris\getris2.asm
     1 B4E0 6E			 ins 'klocek_fazy.scr'+klocek_char,4*32+3,1
     2 B4E1 7B			 ins 'klocek_fazy.scr'+klocek_char,4*32+3+32,1
     3 B4E2 75			 ins 'klocek_fazy.scr'+klocek_char,4*32+3+64,1
     4 B4E3 73			 ins 'klocek_fazy.scr'+klocek_char,4*32+3+96,1
Source: d:\Download\getris\getris2.asm
     1 B4E4 6F			 ins 'klocek_fazy.scr'+klocek_char,4*32+4,1
     2 B4E5 7C			 ins 'klocek_fazy.scr'+klocek_char,4*32+4+32,1
     3 B4E6 76			 ins 'klocek_fazy.scr'+klocek_char,4*32+4+64,1
     4 B4E7 73			 ins 'klocek_fazy.scr'+klocek_char,4*32+4+96,1
Source: d:\Download\getris\getris2.asm
     1 B4E8 70			 ins 'klocek_fazy.scr'+klocek_char,4*32+5,1
     2 B4E9 7D			 ins 'klocek_fazy.scr'+klocek_char,4*32+5+32,1
     3 B4EA 77			 ins 'klocek_fazy.scr'+klocek_char,4*32+5+64,1
     4 B4EB 73			 ins 'klocek_fazy.scr'+klocek_char,4*32+5+96,1
Source: d:\Download\getris\getris2.asm
     1 B4EC 71			 ins 'klocek_fazy.scr'+klocek_char,4*32+6,1
     2 B4ED 7E			 ins 'klocek_fazy.scr'+klocek_char,4*32+6+32,1
     3 B4EE 78			 ins 'klocek_fazy.scr'+klocek_char,4*32+6+64,1
     4 B4EF 73			 ins 'klocek_fazy.scr'+klocek_char,4*32+6+96,1
Source: d:\Download\getris\getris2.asm
     1 B4F0 72			 ins 'klocek_fazy.scr'+klocek_char,4*32+7,1
     2 B4F1 7F			 ins 'klocek_fazy.scr'+klocek_char,4*32+7+32,1
     3 B4F2 79			 ins 'klocek_fazy.scr'+klocek_char,4*32+7+64,1
     4 B4F3 73			 ins 'klocek_fazy.scr'+klocek_char,4*32+7+96,1
Source: d:\Download\getris\getris2.asm
     1 B4F4 73			 ins 'klocek_fazy.scr'+klocek_char,4*32+8,1
     2 B4F5 6B			 ins 'klocek_fazy.scr'+klocek_char,4*32+8+32,1
     3 B4F6 6B			 ins 'klocek_fazy.scr'+klocek_char,4*32+8+64,1
     4 B4F7 73			 ins 'klocek_fazy.scr'+klocek_char,4*32+8+96,1
Source: d:\Download\getris\getris2.asm
Source: d:\Download\getris\getris2.asm
  1087 B4F8			 get_klocSCR """'klocek_fazy.scr'+klocek_char,8*32"""
Macro: GET_KLOCSCR [Source: d:\Download\getris\getris2.asm]
     1 B4F8 6B			 ins 'klocek_fazy.scr'+klocek_char,8*32+0,1
     2 B4F9 6B			 ins 'klocek_fazy.scr'+klocek_char,8*32+0+32,1
     3 B4FA 6B			 ins 'klocek_fazy.scr'+klocek_char,8*32+0+64,1
     4 B4FB 73			 ins 'klocek_fazy.scr'+klocek_char,8*32+0+96,1
Source: d:\Download\getris\getris2.asm
     1 B4FC 6C			 ins 'klocek_fazy.scr'+klocek_char,8*32+1,1
     2 B4FD 6C			 ins 'klocek_fazy.scr'+klocek_char,8*32+1+32,1
     3 B4FE 6C			 ins 'klocek_fazy.scr'+klocek_char,8*32+1+64,1
     4 B4FF 73			 ins 'klocek_fazy.scr'+klocek_char,8*32+1+96,1
Source: d:\Download\getris\getris2.asm
     1 B500 6D			 ins 'klocek_fazy.scr'+klocek_char,8*32+2,1
     2 B501 7A			 ins 'klocek_fazy.scr'+klocek_char,8*32+2+32,1
     3 B502 7A			 ins 'klocek_fazy.scr'+klocek_char,8*32+2+64,1
     4 B503 74			 ins 'klocek_fazy.scr'+klocek_char,8*32+2+96,1
Source: d:\Download\getris\getris2.asm
     1 B504 6E			 ins 'klocek_fazy.scr'+klocek_char,8*32+3,1
     2 B505 7B			 ins 'klocek_fazy.scr'+klocek_char,8*32+3+32,1
     3 B506 7B			 ins 'klocek_fazy.scr'+klocek_char,8*32+3+64,1
     4 B507 75			 ins 'klocek_fazy.scr'+klocek_char,8*32+3+96,1
Source: d:\Download\getris\getris2.asm
     1 B508 6F			 ins 'klocek_fazy.scr'+klocek_char,8*32+4,1
     2 B509 7C			 ins 'klocek_fazy.scr'+klocek_char,8*32+4+32,1
     3 B50A 7C			 ins 'klocek_fazy.scr'+klocek_char,8*32+4+64,1
     4 B50B 76			 ins 'klocek_fazy.scr'+klocek_char,8*32+4+96,1
Source: d:\Download\getris\getris2.asm
     1 B50C 70			 ins 'klocek_fazy.scr'+klocek_char,8*32+5,1
     2 B50D 7D			 ins 'klocek_fazy.scr'+klocek_char,8*32+5+32,1
     3 B50E 7D			 ins 'klocek_fazy.scr'+klocek_char,8*32+5+64,1
     4 B50F 77			 ins 'klocek_fazy.scr'+klocek_char,8*32+5+96,1
Source: d:\Download\getris\getris2.asm
     1 B510 71			 ins 'klocek_fazy.scr'+klocek_char,8*32+6,1
     2 B511 7E			 ins 'klocek_fazy.scr'+klocek_char,8*32+6+32,1
     3 B512 7E			 ins 'klocek_fazy.scr'+klocek_char,8*32+6+64,1
     4 B513 78			 ins 'klocek_fazy.scr'+klocek_char,8*32+6+96,1
Source: d:\Download\getris\getris2.asm
     1 B514 72			 ins 'klocek_fazy.scr'+klocek_char,8*32+7,1
     2 B515 7F			 ins 'klocek_fazy.scr'+klocek_char,8*32+7+32,1
     3 B516 7F			 ins 'klocek_fazy.scr'+klocek_char,8*32+7+64,1
     4 B517 79			 ins 'klocek_fazy.scr'+klocek_char,8*32+7+96,1
Source: d:\Download\getris\getris2.asm
     1 B518 73			 ins 'klocek_fazy.scr'+klocek_char,8*32+8,1
     2 B519 6B			 ins 'klocek_fazy.scr'+klocek_char,8*32+8+32,1
     3 B51A 6B			 ins 'klocek_fazy.scr'+klocek_char,8*32+8+64,1
     4 B51B 6B			 ins 'klocek_fazy.scr'+klocek_char,8*32+8+96,1
Source: d:\Download\getris\getris2.asm
Source: d:\Download\getris\getris2.asm
  1088 B51C 73 73 73 73 73 73 +  :36 dta puste_char
  1089
  1090
  1091 B540 20 F0 44		ant dta [ofset-1]*$10,$f0,$44
  1092 B543 28 B0		adr dta a(text1)
  1093 B545 04 04 84 84 84 04 +  dta 4,4,$84,$84,$84,4,4,$84,4,4,4,$84,4,4,4,$84,4,4,4,$84,$84,4,4,4,4,4
  1094 B55F 41 40 B5		 dta $41,a(ant)
  1095
  1096
  1097 B562			 ALIGN 0
Macro: ALIGN [Source: d:\Download\getris\getris2.asm]
     3 B562			   org >[*+$100]*$100+0
Source: d:\Download\getris\getris2.asm
  1098
  1099 B600-BFEC> 00 00 00 00 + text2_null :40 brk
  1100 B628 81 82 83 84 85 06 + text2 ins 'ekran2.scr',40
  1101
  1102
  1103 BAB0			scren_lcol
  1104 BAB0 E2 15 25 2A 34 39 +  dta l(ekran1.c0,ekran1.c9,nmi.c0,nmi.c1,nmi.c2,nmi.c3,nmi.c4) 
  1105 BAB7 F9 4F 70 A7 B8 02 +  dta l(ekran1.c10,ekran1.c11,ekran1.c12,ekran1.c13,ekran1.c14,ekran1.c15,ekran1.c16,ekran1.c17,ekran1.c18,ekran1.c19)
  1106 BAC1 DA 0B FC 00 2C 1D +  dta l(ekran1.c20,ekran1.c21,ekran1.c22,ekran1.c23,ekran1.c24,ekran1.c25,ekran1.c26,ekran1.c27,ekran1.c28,ekran1.c29)
  1107 BACB FD 04 39 69 97 21 +  dta l(ekran1.c30,ekran1.c31,ekran1.c32,ekran1.c33,ekran1.c34,ekran1.c35,ekran1.c36,ekran1.c37,ekran1.c38,ekran1.c39)
  1108 BAD5 F5 FA 82 87 2D 32 +  dta l(ekran1.c40,ekran1.c41,ekran1.c42,ekran1.c43,ekran1.c44,ekran1.c45,ekran1.c46,ekran1.c47,ekran1.c48,ekran1.c49)
  1109 BADF 9B A0 CB D0 EF F4 +  dta l(ekran1.c50,ekran1.c51,ekran1.c52,ekran1.c53,ekran1.c54,ekran1.c55,ekran1.c56,ekran1.c57,ekran1.c58,ekran1.c59)
  1110 BAE9 4C 51 6B 70 8A 8F +  dta l(ekran1.c60,ekran1.c61,ekran1.c62,ekran1.c63,ekran1.c64,ekran1.c65,ekran1.c66,ekran1.c67,ekran1.c68,ekran1.c69)
  1111 BAF3 0E 13 2D 32 4C 51 +  dta l(ekran1.c70,ekran1.c71,ekran1.c72,ekran1.c73,ekran1.c74,ekran1.c75,ekran1.c76,ekran1.c77,ekran1.c78,ekran1.c79)
  1112 BAFD BA BF EF F4 1F 24 +  dta l(ekran1.c80,ekran1.c81,ekran1.c82,ekran1.c83,ekran1.c84,ekran1.c85,ekran1.c86,ekran1.c87,ekran1.c88,ekran1.c89)
  1113 BB07 7F 89 9F A9 BF C9 +  dta l(ekran1.c90,ekran1.c91,ekran1.c92,ekran1.c93,ekran1.c94,ekran1.c95,ekran1.c96,ekran1.c97,ekran1.c98,ekran1.c99)
  1114 BB11 45 4A 4C 64 69 6B +  dta l(ekran1.c100,ekran1.c101,ekran1.c102,ekran1.c103,ekran1.c104,ekran1.c105,ekran1.c106,ekran1.c107,ekran1.c108,ekran1.c109)
  1115 BB1B A7 A9 C1 C6 C8 E0 +  dta l(ekran1.c110,ekran1.c111,ekran1.c112,ekran1.c113,ekran1.c114,ekran1.c115,ekran1.c116,ekran1.c117,ekran1.c118,ekran1.c119)
  1116 BB25 06 45 4A 4C 64 69 +  dta l(ekran1.c120,ekran1.c121,ekran1.c122,ekran1.c123,ekran1.c124,ekran1.c125,ekran1.c126,ekran1.c127,ekran1.c128,ekran1.c129)
  1117 BB2F A2 A7 A9 C1 C6 C8 +  dta l(ekran1.c130,ekran1.c131,ekran1.c132,ekran1.c133,ekran1.c134,ekran1.c135,ekran1.c136,ekran1.c137,ekran1.c138,ekran1.c139)
  1118 BB39 04 06 45 4A 4C 64 +  dta l(ekran1.c140,ekran1.c141,ekran1.c142,ekran1.c143,ekran1.c144,ekran1.c145,ekran1.c146,ekran1.c147,ekran1.c148,ekran1.c149)
  1119 BB43 8A A2 A7 A9 48 4D +  dta l(ekran1.c150,ekran1.c151,ekran1.c152,ekran1.c153,ekran1.c154,ekran1.c155,ekran1.c156,ekran1.c157,ekran1.c158,ekran1.c159)
  1120 BB4D 97 9C 9E C7 CC CE +  dta l(ekran1.c160,ekran1.c161,ekran1.c162,ekran1.c163,ekran1.c164,ekran1.c165,ekran1.c166,ekran1.c167,ekran1.c168,ekran1.c169)
  1121 BB57 20 22 4B 50 52 7B +  dta l(ekran1.c170,ekran1.c171,ekran1.c172,ekran1.c173,ekran1.c174,ekran1.c175,ekran1.c176,ekran1.c177,ekran1.c178,ekran1.c179)
  1122 BB61 B2			 dta l(ekran1.c180)
  1123
  1124
  1125 BB62 9B DE		 dta l(ekran2.c0,ekran2.c9)
  1126 BB64 4F 9E 16 A9 CA E2 +  dta l(ekran2.c10,ekran2.c11,ekran2.c12,ekran2.c13,ekran2.c14,ekran2.c15,ekran2.c16,ekran2.c17,ekran2.c18,ekran2.c19)
  1127 BB6E F3 7E B2 2B 41 51 +  dta l(ekran2.c20,ekran2.c21,ekran2.c22,ekran2.c23,ekran2.c24,ekran2.c25,ekran2.c26,ekran2.c27,ekran2.c28,ekran2.c29)
  1128 BB78 BD C1 DF 13 82 F5 +  dta l(ekran2.c30,ekran2.c31,ekran2.c32,ekran2.c33,ekran2.c34,ekran2.c35,ekran2.c36,ekran2.c37,ekran2.c38,ekran2.c39)
  1129 BB82 17 3F 56 58 BF C4 +  dta l(ekran2.c40,ekran2.c41,ekran2.c42,ekran2.c43,ekran2.c44,ekran2.c45,ekran2.c46,ekran2.c47,ekran2.c48,ekran2.c49)
  1130 BB8C 30 35 61 66 81 86 +  dta l(ekran2.c50,ekran2.c51,ekran2.c52,ekran2.c53,ekran2.c54,ekran2.c55,ekran2.c56,ekran2.c57,ekran2.c58,ekran2.c59)
  1131 BB96 F7 FC 28 2D 48 4D +  dta l(ekran2.c60,ekran2.c61,ekran2.c62,ekran2.c63,ekran2.c64,ekran2.c65,ekran2.c66,ekran2.c67,ekran2.c68,ekran2.c69)
  1132 BBA0 CF D4 EF F4 0F 14 +  dta l(ekran2.c70,ekran2.c71,ekran2.c72,ekran2.c73,ekran2.c74,ekran2.c75,ekran2.c76,ekran2.c77,ekran2.c78,ekran2.c79)
  1133 BBAA 6F 74 8F 94 6E 73 +  dta l(ekran2.c80,ekran2.c81,ekran2.c82,ekran2.c83,ekran2.c84,ekran2.c85,ekran2.c86,ekran2.c87,ekran2.c88,ekran2.c89)
  1134 BBB4 D1 D6 08 0D 29 2E +  dta l(ekran2.c90,ekran2.c91,ekran2.c92,ekran2.c93,ekran2.c94,ekran2.c95,ekran2.c96,ekran2.c97,ekran2.c98,ekran2.c99)
  1135 BBBE 9D A2 BE C3 62 67 +  dta l(ekran2.c100,ekran2.c101,ekran2.c102,ekran2.c103,ekran2.c104,ekran2.c105,ekran2.c106,ekran2.c107,ekran2.c108,ekran2.c109)
  1136 BBC8 E1 E6 00 05 46 4B +  dta l(ekran2.c110,ekran2.c111,ekran2.c112,ekran2.c113,ekran2.c114,ekran2.c115,ekran2.c116,ekran2.c117,ekran2.c118,ekran2.c119)
  1137 BBD2 B4 B9 D3 D8 03 08 +  dta l(ekran2.c120,ekran2.c121,ekran2.c122,ekran2.c123,ekran2.c124,ekran2.c125,ekran2.c126,ekran2.c127,ekran2.c128,ekran2.c129)
  1138 BBDC 98 9D B7 BC D6 DB +  dta l(ekran2.c130,ekran2.c131,ekran2.c132,ekran2.c133,ekran2.c134,ekran2.c135,ekran2.c136,ekran2.c137,ekran2.c138,ekran2.c139)
  1139 BBE6 44 49 79 7E A9 AE +  dta l(ekran2.c140,ekran2.c141,ekran2.c142,ekran2.c143,ekran2.c144,ekran2.c145,ekran2.c146,ekran2.c147,ekran2.c148,ekran2.c149)
  1140 BBF0 0A 19 2B 3A 4C 5B +  dta l(ekran2.c150,ekran2.c151,ekran2.c152,ekran2.c153,ekran2.c154,ekran2.c155,ekran2.c156,ekran2.c157,ekran2.c158,ekran2.c159)
  1141 BBFA D6 DB F4 F9 12 17 +  dta l(ekran2.c160,ekran2.c161,ekran2.c162,ekran2.c163,ekran2.c164,ekran2.c165,ekran2.c166,ekran2.c167,ekran2.c168,ekran2.c169)
  1142 BC04 6C 71 8A 8F AD B2 +  dta l(ekran2.c170,ekran2.c171,ekran2.c172,ekran2.c173,ekran2.c174,ekran2.c175,ekran2.c176,ekran2.c177,ekran2.c178,ekran2.c179)
  1143 BC0E 07 0C 25 2A 43 48 +  dta l(ekran2.c180,ekran2.c181,ekran2.c182,ekran2.c183,ekran2.c184,ekran2.c185,ekran2.c186,ekran2.c187,ekran2.c188,ekran2.c189)
  1144 BC18 A2 A7 C0 C5 DE E3 +  dta l(ekran2.c190,ekran2.c191,ekran2.c192,ekran2.c193,ekran2.c194,ekran2.c195,ekran2.c196,ekran2.c197,ekran2.c198,ekran2.c199)
  1145 BC22 4E 5D 6F 7E 90 9F +  dta l(ekran2.c200,ekran2.c201,ekran2.c202,ekran2.c203,ekran2.c204,ekran2.c205,ekran2.c206,ekran2.c207,ekran2.c208,ekran2.c209)
  1146 BC2C F9 FB 25 2A 2C 45 +  dta l(ekran2.c210,ekran2.c211,ekran2.c212,ekran2.c213,ekran2.c214,ekran2.c215,ekran2.c216,ekran2.c217,ekran2.c218,ekran2.c219)
  1147 BC36 6C 96 9B 9D B6 BB +  dta l(ekran2.c220,ekran2.c221,ekran2.c222,ekran2.c223,ekran2.c224,ekran2.c225,ekran2.c226,ekran2.c227,ekran2.c228,ekran2.c229)
  1148 BC40 1D 22 24 3D 42 44 +  dta l(ekran2.c230,ekran2.c231,ekran2.c232,ekran2.c233,ekran2.c234,ekran2.c235,ekran2.c236,ekran2.c237,ekran2.c238,ekran2.c239)
  1149 BC4A 93 95 AE B3 B5 CE +  dta l(ekran2.c240,ekran2.c241,ekran2.c242,ekran2.c243,ekran2.c244,ekran2.c245,ekran2.c246,ekran2.c247,ekran2.c248,ekran2.c249)
  1150 BC54 F5 24 29 2B 44 49 +  dta l(ekran2.c250,ekran2.c251,ekran2.c252,ekran2.c253,ekran2.c254,ekran2.c255,ekran2.c256,ekran2.c257,ekran2.c258,ekran2.c259)
  1151 BC5E 84 89 8B A4 A9 AB +  dta l(ekran2.c260,ekran2.c261,ekran2.c262,ekran2.c263,ekran2.c264,ekran2.c265,ekran2.c266,ekran2.c267,ekran2.c268,ekran2.c269)
  1152 BC68 E9 EB		 dta l(ekran2.c270,ekran2.c271)
  1153
  1154
  1155 BC6A			scren_hcol
  1156 BC6A 22 23 EC EC EC EC +  dta h(ekran1.c0,ekran1.c9,nmi.c0,nmi.c1,nmi.c2,nmi.c3,nmi.c4) 
  1157 BC71 23 24 24 24 24 25 +  dta h(ekran1.c10,ekran1.c11,ekran1.c12,ekran1.c13,ekran1.c14,ekran1.c15,ekran1.c16,ekran1.c17,ekran1.c18,ekran1.c19)
  1158 BC7B 27 28 28 29 29 2A +  dta h(ekran1.c20,ekran1.c21,ekran1.c22,ekran1.c23,ekran1.c24,ekran1.c25,ekran1.c26,ekran1.c27,ekran1.c28,ekran1.c29)
  1159 BC85 2B 2D 2D 2D 2D 2E +  dta h(ekran1.c30,ekran1.c31,ekran1.c32,ekran1.c33,ekran1.c34,ekran1.c35,ekran1.c36,ekran1.c37,ekran1.c38,ekran1.c39)
  1160 BC8F 22 22 24 24 25 25 +  dta h(ekran1.c40,ekran1.c41,ekran1.c42,ekran1.c43,ekran1.c44,ekran1.c45,ekran1.c46,ekran1.c47,ekran1.c48,ekran1.c49)
  1161 BC99 25 25 25 25 25 25 +  dta h(ekran1.c50,ekran1.c51,ekran1.c52,ekran1.c53,ekran1.c54,ekran1.c55,ekran1.c56,ekran1.c57,ekran1.c58,ekran1.c59)
  1162 BCA3 26 26 26 26 26 26 +  dta h(ekran1.c60,ekran1.c61,ekran1.c62,ekran1.c63,ekran1.c64,ekran1.c65,ekran1.c66,ekran1.c67,ekran1.c68,ekran1.c69)
  1163 BCAD 27 27 27 27 27 27 +  dta h(ekran1.c70,ekran1.c71,ekran1.c72,ekran1.c73,ekran1.c74,ekran1.c75,ekran1.c76,ekran1.c77,ekran1.c78,ekran1.c79)
  1164 BCB7 27 27 27 27 28 28 +  dta h(ekran1.c80,ekran1.c81,ekran1.c82,ekran1.c83,ekran1.c84,ekran1.c85,ekran1.c86,ekran1.c87,ekran1.c88,ekran1.c89)
  1165 BCC1 28 28 28 28 28 28 +  dta h(ekran1.c90,ekran1.c91,ekran1.c92,ekran1.c93,ekran1.c94,ekran1.c95,ekran1.c96,ekran1.c97,ekran1.c98,ekran1.c99)
  1166 BCCB 29 29 29 29 29 29 +  dta h(ekran1.c100,ekran1.c101,ekran1.c102,ekran1.c103,ekran1.c104,ekran1.c105,ekran1.c106,ekran1.c107,ekran1.c108,ekran1.c109)
  1167 BCD5 29 29 29 29 29 29 +  dta h(ekran1.c110,ekran1.c111,ekran1.c112,ekran1.c113,ekran1.c114,ekran1.c115,ekran1.c116,ekran1.c117,ekran1.c118,ekran1.c119)
  1168 BCDF 2A 2A 2A 2A 2A 2A +  dta h(ekran1.c120,ekran1.c121,ekran1.c122,ekran1.c123,ekran1.c124,ekran1.c125,ekran1.c126,ekran1.c127,ekran1.c128,ekran1.c129)
  1169 BCE9 2A 2A 2A 2A 2A 2A +  dta h(ekran1.c130,ekran1.c131,ekran1.c132,ekran1.c133,ekran1.c134,ekran1.c135,ekran1.c136,ekran1.c137,ekran1.c138,ekran1.c139)
  1170 BCF3 2B 2B 2B 2B 2B 2B +  dta h(ekran1.c140,ekran1.c141,ekran1.c142,ekran1.c143,ekran1.c144,ekran1.c145,ekran1.c146,ekran1.c147,ekran1.c148,ekran1.c149)
  1171 BCFD 2B 2B 2B 2B 2C 2C +  dta h(ekran1.c150,ekran1.c151,ekran1.c152,ekran1.c153,ekran1.c154,ekran1.c155,ekran1.c156,ekran1.c157,ekran1.c158,ekran1.c159)
  1172 BD07 2C 2C 2C 2C 2C 2C +  dta h(ekran1.c160,ekran1.c161,ekran1.c162,ekran1.c163,ekran1.c164,ekran1.c165,ekran1.c166,ekran1.c167,ekran1.c168,ekran1.c169)
  1173 BD11 2D 2D 2D 2D 2D 2D +  dta h(ekran1.c170,ekran1.c171,ekran1.c172,ekran1.c173,ekran1.c174,ekran1.c175,ekran1.c176,ekran1.c177,ekran1.c178,ekran1.c179)
  1174 BD1B 2D			 dta h(ekran1.c180)
  1175
  1176
  1177 BD1C 2E 2E		 dta h(ekran2.c0,ekran2.c9)
  1178 BD1E 2F 2F 30 30 31 31 +  dta h(ekran2.c10,ekran2.c11,ekran2.c12,ekran2.c13,ekran2.c14,ekran2.c15,ekran2.c16,ekran2.c17,ekran2.c18,ekran2.c19)
  1179 BD28 33 34 34 35 35 36 +  dta h(ekran2.c20,ekran2.c21,ekran2.c22,ekran2.c23,ekran2.c24,ekran2.c25,ekran2.c26,ekran2.c27,ekran2.c28,ekran2.c29)
  1180 BD32 38 38 3B 3C 3C 3C +  dta h(ekran2.c30,ekran2.c31,ekran2.c32,ekran2.c33,ekran2.c34,ekran2.c35,ekran2.c36,ekran2.c37,ekran2.c38,ekran2.c39)
  1181 BD3C 3F 3F 3F 3F 2E 2E +  dta h(ekran2.c40,ekran2.c41,ekran2.c42,ekran2.c43,ekran2.c44,ekran2.c45,ekran2.c46,ekran2.c47,ekran2.c48,ekran2.c49)
  1182 BD46 2F 2F 2F 2F 2F 2F +  dta h(ekran2.c50,ekran2.c51,ekran2.c52,ekran2.c53,ekran2.c54,ekran2.c55,ekran2.c56,ekran2.c57,ekran2.c58,ekran2.c59)
  1183 BD50 2F 2F 30 30 30 30 +  dta h(ekran2.c60,ekran2.c61,ekran2.c62,ekran2.c63,ekran2.c64,ekran2.c65,ekran2.c66,ekran2.c67,ekran2.c68,ekran2.c69)
  1184 BD5A 30 30 30 30 31 31 +  dta h(ekran2.c70,ekran2.c71,ekran2.c72,ekran2.c73,ekran2.c74,ekran2.c75,ekran2.c76,ekran2.c77,ekran2.c78,ekran2.c79)
  1185 BD64 31 31 31 31 32 32 +  dta h(ekran2.c80,ekran2.c81,ekran2.c82,ekran2.c83,ekran2.c84,ekran2.c85,ekran2.c86,ekran2.c87,ekran2.c88,ekran2.c89)
  1186 BD6E 32 32 33 33 33 33 +  dta h(ekran2.c90,ekran2.c91,ekran2.c92,ekran2.c93,ekran2.c94,ekran2.c95,ekran2.c96,ekran2.c97,ekran2.c98,ekran2.c99)
  1187 BD78 33 33 33 33 34 34 +  dta h(ekran2.c100,ekran2.c101,ekran2.c102,ekran2.c103,ekran2.c104,ekran2.c105,ekran2.c106,ekran2.c107,ekran2.c108,ekran2.c109)
  1188 BD82 34 34 35 35 35 35 +  dta h(ekran2.c110,ekran2.c111,ekran2.c112,ekran2.c113,ekran2.c114,ekran2.c115,ekran2.c116,ekran2.c117,ekran2.c118,ekran2.c119)
  1189 BD8C 35 35 35 35 36 36 +  dta h(ekran2.c120,ekran2.c121,ekran2.c122,ekran2.c123,ekran2.c124,ekran2.c125,ekran2.c126,ekran2.c127,ekran2.c128,ekran2.c129)
  1190 BD96 36 36 36 36 36 36 +  dta h(ekran2.c130,ekran2.c131,ekran2.c132,ekran2.c133,ekran2.c134,ekran2.c135,ekran2.c136,ekran2.c137,ekran2.c138,ekran2.c139)
  1191 BDA0 37 37 37 37 37 37 +  dta h(ekran2.c140,ekran2.c141,ekran2.c142,ekran2.c143,ekran2.c144,ekran2.c145,ekran2.c146,ekran2.c147,ekran2.c148,ekran2.c149)
  1192 BDAA 38 38 38 38 38 38 +  dta h(ekran2.c150,ekran2.c151,ekran2.c152,ekran2.c153,ekran2.c154,ekran2.c155,ekran2.c156,ekran2.c157,ekran2.c158,ekran2.c159)
  1193 BDB4 38 38 38 38 39 39 +  dta h(ekran2.c160,ekran2.c161,ekran2.c162,ekran2.c163,ekran2.c164,ekran2.c165,ekran2.c166,ekran2.c167,ekran2.c168,ekran2.c169)
  1194 BDBE 39 39 39 39 39 39 +  dta h(ekran2.c170,ekran2.c171,ekran2.c172,ekran2.c173,ekran2.c174,ekran2.c175,ekran2.c176,ekran2.c177,ekran2.c178,ekran2.c179)
  1195 BDC8 3A 3A 3A 3A 3A 3A +  dta h(ekran2.c180,ekran2.c181,ekran2.c182,ekran2.c183,ekran2.c184,ekran2.c185,ekran2.c186,ekran2.c187,ekran2.c188,ekran2.c189)
  1196 BDD2 3A 3A 3A 3A 3A 3A +  dta h(ekran2.c190,ekran2.c191,ekran2.c192,ekran2.c193,ekran2.c194,ekran2.c195,ekran2.c196,ekran2.c197,ekran2.c198,ekran2.c199)
  1197 BDDC 3B 3B 3B 3B 3B 3B +  dta h(ekran2.c200,ekran2.c201,ekran2.c202,ekran2.c203,ekran2.c204,ekran2.c205,ekran2.c206,ekran2.c207,ekran2.c208,ekran2.c209)
  1198 BDE6 3B 3B 3C 3C 3C 3C +  dta h(ekran2.c210,ekran2.c211,ekran2.c212,ekran2.c213,ekran2.c214,ekran2.c215,ekran2.c216,ekran2.c217,ekran2.c218,ekran2.c219)
  1199 BDF0 3C 3C 3C 3C 3C 3C +  dta h(ekran2.c220,ekran2.c221,ekran2.c222,ekran2.c223,ekran2.c224,ekran2.c225,ekran2.c226,ekran2.c227,ekran2.c228,ekran2.c229)
  1200 BDFA 3D 3D 3D 3D 3D 3D +  dta h(ekran2.c230,ekran2.c231,ekran2.c232,ekran2.c233,ekran2.c234,ekran2.c235,ekran2.c236,ekran2.c237,ekran2.c238,ekran2.c239)
  1201 BE04 3D 3D 3D 3D 3D 3D +  dta h(ekran2.c240,ekran2.c241,ekran2.c242,ekran2.c243,ekran2.c244,ekran2.c245,ekran2.c246,ekran2.c247,ekran2.c248,ekran2.c249)
  1202 BE0E 3D 3E 3E 3E 3E 3E +  dta h(ekran2.c250,ekran2.c251,ekran2.c252,ekran2.c253,ekran2.c254,ekran2.c255,ekran2.c256,ekran2.c257,ekran2.c258,ekran2.c259)
  1203 BE18 3E 3E 3E 3E 3E 3E +  dta h(ekran2.c260,ekran2.c261,ekran2.c262,ekran2.c263,ekran2.c264,ekran2.c265,ekran2.c266,ekran2.c267,ekran2.c268,ekran2.c269)
  1204 BE22 3E 3E		 dta h(ekran2.c270,ekran2.c271)
  1205
  1206 = 01BA			color_nr equ scren_hcol-scren_lcol
  1207
  1208
  1209 BE24			pmg_highScore
  1210 BE24 1C 00 2F 03 03 C3 +  ins 'pmg\pm_high_score.rle'
  1211
  1212 BF94			pmg_wellDone
  1213 BF94 E6 00 05 20 10 10 +  ins 'pmg\pm_well_done.rle'
  1214
  1215
  1216 				 .print "Free: ",*,"..$C000 = ",$C000-*
  1216 				Free: $BFED..$C000 = $0013
  1217 				 
  1218 				 ert *>$BFFF
  1219
  1220 02E2-02E3> 00 20		 ini $2000
  1221
  1222
  1223 				/******************************************************************/
  1224
  1225 				/******************************************************************/
  1226
  1227 				/******************************************************************/
  1228
  1229
  1230 				/*
  1231 				  Fonty dla grafiki napisow 'well done', 'pause', 'game over'
  1232 				  Pamiec obrazu dla tych napisow
  1233 				*/
  1233
  1234 BFED			 org fnt_txt1           ; $1400
  1235 1000-1F6B> 00 00 00 00 +  ins 'over.fnt',0,1024
  1236 				 
  1237 1400 00 00 00 00 00 00 +  ins 'texts_all.fnt'    ; $1800
  1238
  1239 = 17E0			text_wellDone equ *-32  ; wykorzystamy 32 bajty z konca zestawu znakow TEXTS_ALL.FNT
  1240 				// :32 brk
  1241 1800 00 00 00 00 00 00 +  ins 'texts_all.scr',4,32
  1242 1820 00 00 00 00 00 00 +  ins 'texts_all.scr',40+4,32
  1243 1840 00 00 00 00 00 00 +  ins 'texts_all.scr',40*2+4,32
  1244 1860 00 00 00 00 00 00 +  ins 'texts_all.scr',40*3+4,32
  1245 1880 00 00 00 00 00 00 +  ins 'texts_all.scr',40*4+4,32
  1246 18A0 00 00 00 00 00 00 +  ins 'texts_all.scr',40*5+4,32
  1247 18C0 00 00 00 00 00 00 +  ins 'texts_all.scr',40*6+4,32
  1248 18E0 00 00 00 00 00 00 +  ins 'texts_all.scr',40*7+4,32
  1249
  1250 1900			text_over
  1251 1900 00 00 00 00 00 00 +  ins 'Over.scr',6*40,12*40
  1252 1AE0 00 00 32 33 34 35 +  ins 'texts_all.scr',8*40,4*40
  1253
  1254 1B80			text_pause
  1255 1B80 00 00 00 00 00 00 +  ins 'texts_all.scr',12*40+4,32
  1256 1BA0 00 00 00 00 00 00 +  ins 'texts_all.scr',13*40+4,32
  1257 1BC0 00 00 00 00 00 00 +  ins 'texts_all.scr',14*40+4,32
  1258 1BE0 00 00 00 00 00 00 +  ins 'texts_all.scr',15*40+4,32 
  1259
  1260 1C00			pmg_pause
  1261 1C00 DE 00 09 10 20 30 +  ins 'pmg\pm_pause.rle'
  1262
  1263 1C48			pmg_over
  1264 1C48 76 00 01 20 14 00 +  ins 'pmg\pm_over.rle'
  1265
  1266 1D32			pm1
  1267 1D32 24 00 03 0E 06 14 +  ins 'pmg\pm1.rle'
  1268
  1269 1E82			pm2
  1270 1E82 24 00 03 0A 0E 08 +  ins 'pmg\pm2.rle'
  1271
  1272 1F64 36 00 36 0B		game_msx_l dta l(game_msx2 , game_msx , game_msx2 , game_msx3)
  1273 1F68 4C 40 4C 58		game_msx_h dta h(game_msx2 , game_msx , game_msx2 , game_msx3)
  1274
  1275
  1276 				 .print "Free: ",*,"..$2000 = ",$2000-*
  1276 				Free: $1F6C..$2000 = $0094
  1277
  1278
  1279 1F6C			 org $2000
  1280
  1281 				/*
  1282 				  Program DLI dla ekranu GAME OVER  (koniecznie ponizej adresu $4000)
  1283 				*/
  1283
  1284 2000			.local game_over
  1285 2000			 icl 'over_add.asm'
Source: d:\Download\getris\over_add.asm
     1
     2 = 1000			fnt     equ fnt_txt1
     3 = 1900			text    equ text_over
     4
     5 = 1C48			pmg     equ pmg_over
     6
     7 = 000E			color_nr equ 14
     8
     9
    10 2000-22AB> 70 70 70 70 + ant dta d'pppppp'
    11 2006 44 00 19		 dta $44,a(text)
    12 2009 84 04 84 04 84 84 +  dta $84,4,$84,4,$84,$84,4,$84,4,4,$84,4,4,4,4
    13 2018 41 00 20		 dta $41,a(ant)
    14
    15
    16 201B			main
    17
    18 201B			 hax #pmg-1
Macro: HAX [Source: d:\Download\getris\getris2.asm]
     1 201B A9 1C		 lda >PMG-1
     2 201D A2 47		 ldx <PMG-1
Source: d:\Download\getris\over_add.asm
    19 201F 20 AD 7A		 jsr decode
    20
    21 				;-- init PMG
    22 2022 A9 CB 8D 07 D4	 mva >pmBase_Text $d407	;PMCTL - wyswietlac duchy i pociski
    23 2027 A9 03 8D 1D D0	 mva #3 $d01d		;PMCTL - show PMG
    24
    25 202C A9 5C 8D FE 21 A9 +  mwa #dli1 dliv+1
    26
    27 2036 A9 F2 8D FA FF A9 +  mwa #nmi $fffa		;nasza nowa obsluga przerwania NMI
    28
    29 2040 A9 C0 8D 0E D4	 mva #$c0 $d40e		;wlaczenie NMI z przerwaniami DLI
    30
    31
    32 2045 20 06 4C		 jsr logo.fade_in
    33
    34 2048 A2 01		 ldx #=over_msx
    35 204A 20 00 EB		 jsr switch_bank
    36
    37 204D 20 FD 43		 jsr $4400-3
    38
    39 2050 A9 FE		 lda #$fe
    40 2052 8D 01 D3		 sta $d301
    41 				 
    42 2055 20 4F 4C		 jsr logo.fade_out
    43
    44 2058 20 CB EB		 jsr default_nmi
    45 205B 60			 rts
    46
    47
    48 				;--
    49 				;-- dli program
    50
    51 205C			dli1
    52 205C A9 83		 lda #$83
    53 205E 8D 0A D4		 sta $d40a                   ;line=64
    54 2061 8D 06 D0		 sta Missile2_PositionX
    55 2064 8D 0A D4		 sta $d40a                   ;line=65
    56 2067 8D 0A D4		 sta $d40a                   ;line=66
    57 206A 8D 0A D4		 sta $d40a                   ;line=67
    58 206D A9 6E		 lda #$6E
    59 206F 8D 0A D4		 sta $d40a                   ;line=68
    60 2072 8D 06 D0		 sta Missile2_PositionX
    61 				; sta $d40a                   ;line=69
    62 				; sta $d40a                   ;line=70
    63 				; sta $d40a                   ;line=71
    64
    65 2075			 max #dli1_2
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 2075 A9 7C		 lda <DLI1_2
     2 2077 A2 20		 ldx >DLI1_2
Source: d:\Download\getris\over_add.asm
    66 2079 4C 83 22		 jmp nmiQ
    67 				 
    68 				 
    69 207C			dli1_2
    70 				; sta $d40a                   ;line=72
    71 				; sta $d40a                   ;line=73
    72 				; sta $d40a                   ;line=74
    73 				; sta $d40a                   ;line=75
    74 				; sta $d40a                   ;line=76
    75 				; sta $d40a                   ;line=77
    76 				; sta $d40a                   ;line=78
    77 				; sta $d40a                   ;line=79
    78 207C A9 83		 lda #$83
    79 207E 8D 0A D4		 sta $d40a                   ;line=80
    80 2081 8D 06 D0		 sta Missile2_PositionX
    81 2084 8D 0A D4		 sta $d40a                   ;line=81
    82 2087 A9 7A		 lda #$7A
    83 2089 A2 6F		 ldx #$6F
    84 208B 8D 0A D4		 sta $d40a                   ;line=82
    85 208E 8D 01 D0		 sta Player1_PositionX
    86 2091 8E 06 D0		 stx Missile2_PositionX
    87 2094 8D 0A D4		 sta $d40a                   ;line=83
    88 2097 8D 0A D4		 sta $d40a                   ;line=84
    89 209A A9 01		 lda #$01
    90 209C A2 84		 ldx #$84
    91 209E 8D 0A D4		 sta $d40a                   ;line=85
    92 20A1 8D 09 D0		 sta Player1_Size
    93 20A4 8E 01 D0		 stx Player1_PositionX
    94 				; sta $d40a                   ;line=86
    95 				; sta $d40a                   ;line=87
    96
    97 20A7			 max #dli1_3
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 20A7 A9 AE		 lda <DLI1_3
     2 20A9 A2 20		 ldx >DLI1_3
Source: d:\Download\getris\over_add.asm
    98 20AB 4C 83 22		 jmp nmiQ
    99
   100
   101 20AE			dli1_3 
   102 				; sta $d40a                   ;line=88
   103 				; sta $d40a                   ;line=89
   104 				; sta $d40a                   ;line=90
   105 				; sta $d40a                   ;line=91
   106 				; sta $d40a                   ;line=92
   107 				; sta $d40a                   ;line=93
   108 				; sta $d40a                   ;line=94
   109 				; sta $d40a                   ;line=95
   110 20AE 8D 0A D4		 sta $d40a                   ;line=96
   111 20B1 8D 0A D4		 sta $d40a                   ;line=97
   112 20B4 8D 0A D4		 sta $d40a                   ;line=98
   113 20B7 8D 0A D4		 sta $d40a                   ;line=99
   114 20BA A9 70		 lda #$70
   115 20BC 8D 0A D4		 sta $d40a                   ;line=100
   116 20BF 8D 06 D0		 sta Missile2_PositionX
   117 				; sta $d40a                   ;line=101
   118 				; sta $d40a                   ;line=102
   119 				; sta $d40a                   ;line=103
   120
   121 20C2			 max #dli1_4
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 20C2 A9 C9		 lda <DLI1_4
     2 20C4 A2 20		 ldx >DLI1_4
Source: d:\Download\getris\over_add.asm
   122 20C6 4C 83 22		 jmp nmiQ
   123 				 
   124 				 
   125 20C9			dli1_4
   126
   127 20C9 8D 0A D4		 sta $d40a                   ;line=104
   128 20CC A9 6D		 lda #$6D
   129 20CE 8D 0A D4		 sta $d40a                   ;line=105
   130 20D1 8D 06 D0		 sta Missile2_PositionX
   131 				; sta $d40a                   ;line=106
   132 				; sta $d40a                   ;line=107
   133 				; sta $d40a                   ;line=108
   134 				; sta $d40a                   ;line=109
   135 				; sta $d40a                   ;line=110
   136 				; sta $d40a                   ;line=111
   137
   138 20D4			 max #dli1_5
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 20D4 A9 DB		 lda <DLI1_5
     2 20D6 A2 20		 ldx >DLI1_5
Source: d:\Download\getris\over_add.asm
   139 20D8 4C 83 22		 jmp nmiQ
   140
   141
   142 20DB			dli1_5
   143
   144 				; sta $d40a                   ;line=112
   145 				; sta $d40a                   ;line=113
   146 				; sta $d40a                   ;line=114
   147 				; sta $d40a                   ;line=115
   148 				; sta $d40a                   ;line=116
   149 				; sta $d40a                   ;line=117
   150 				; sta $d40a                   ;line=118
   151 				; sta $d40a                   ;line=119
   152 20DB 8D 0A D4		 sta $d40a                   ;line=120
   153 20DE 8D 0A D4		 sta $d40a                   ;line=121
   154 20E1 8D 0A D4		 sta $d40a                   ;line=122
   155 20E4 8D 0A D4		 sta $d40a                   ;line=123
   156 20E7 8D 0A D4		 sta $d40a                   ;line=124
   157 20EA A9 39		 lda #$39
   158 20EC A2 0C		c8 ldx #$0C
   159 20EE 8D 0A D4		 sta $d40a                   ;line=125
   160 20F1 8D 02 D0		 sta Player2_PositionX
   161 20F4 8E 14 D0		 stx Player2_Missile2_Color2_PM2
   162 20F7 8D 0A D4		 sta $d40a                   ;line=126
   163 20FA 8D 0A D4		 sta $d40a                   ;line=127
   164
   165
   166 20FD 8D 0A D4		 sta $d40a                   ;line=128
   167 2100 A9 9D		 lda #$9D
   168 2102 8D 0A D4		 sta $d40a                   ;line=129
   169 2105 8D 07 D0		 sta Missile3_PositionX
   170 2108 8D 0A D4		 sta $d40a                   ;line=130
   171 210B 8D 0A D4		 sta $d40a                   ;line=131
   172 210E A9 03		 lda #$03
   173 2110 A2 0C		c9 ldx #$0C
   174 2112 8D 0A D4		 sta $d40a                   ;line=132
   175 2115 8D 09 D0		 sta Player1_Size
   176 2118 8E 13 D0		 stx Player1_Missile1_Color1_PM1
   177 211B 8D 0A D4		 sta $d40a                   ;line=133
   178 211E 8D 0A D4		 sta $d40a                   ;line=134
   179 2121 8D 0A D4		 sta $d40a                   ;line=135
   180 2124 A9 0C		c10 lda #$0C
   181 2126 8D 0A D4		 sta $d40a                   ;line=136
   182 2129 8D 15 D0		 sta Player3_Missile3_Color3_PM3
   183 212C 8D 0A D4		 sta $d40a                   ;line=137
   184 212F A9 03		 lda #$03
   185 2131 A2 A9		 ldx #$A9
   186 2133 A0 89		 ldy #$89
   187 2135 8D 0A D4		 sta $d40a                   ;line=138
   188 2138 8D 0B D0		 sta Player3_Size
   189 213B 8E 01 D0		 stx Player1_PositionX
   190 213E 8C 03 D0		 sty Player3_PositionX
   191 				 
   192 2141			 max #dli2
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 2141 A9 48		 lda <DLI2
     2 2143 A2 21		 ldx >DLI2
Source: d:\Download\getris\over_add.asm
   193 2145 4C 83 22		 jmp nmiQ
   194
   195
   196
   197 2148			dli2
   198
   199 2148 A9 14		 lda >fnt+$400*$01
   200 214A A2 6A		c11 ldx #$6A
   201 214C A0 84		c12 ldy #$84
   202 214E 8D 0A D4		 sta $d40a                   ;line=144
   203 2151 8D 09 D4		 sta CHARBASE
   204 2154 8E 16 D0		 stx Playfield_Color0_PF0
   205 2157 8C 17 D0		 sty Playfield_Color1_PF1
   206 215A A9 78		c13 lda #$78
   207 215C 8D 18 D0		 sta Playfield_Color2_PF2
   208 215F 8D 0A D4		 sta $d40a                   ;line=145
   209 2162 8D 0A D4		 sta $d40a                   ;line=146
   210 2165 8D 0A D4		 sta $d40a                   ;line=147
   211 2168 A9 58		 lda #$58
   212 216A A2 A8		 ldx #$A8
   213 216C A0 38		 ldy #$38
   214 216E 8D 0A D4		 sta $d40a                   ;line=148
   215 2171 8D 00 D0		 sta Player0_PositionX
   216 2174 8E 01 D0		 stx Player1_PositionX
   217 2177 8C 02 D0		 sty Player2_PositionX
   218 217A A9 88		 lda #$88
   219 217C 8D 03 D0		 sta Player3_PositionX
   220 217F 8D 0A D4		 sta $d40a                   ;line=149
   221 2182 8D 0A D4		 sta $d40a                   ;line=150
   222 2185 8D 0A D4		 sta $d40a                   ;line=151
   223
   224
   225 2188 8D 0A D4		 sta $d40a                   ;line=152
   226 218B 8D 0A D4		 sta $d40a                   ;line=153
   227 218E 8D 0A D4		 sta $d40a                   ;line=154
   228 2191 8D 0A D4		 sta $d40a                   ;line=155
   229 2194 A9 87		 lda #$87
   230 2196 A2 5F		 ldx #$5F
   231 2198 A0 64		 ldy #$64
   232 219A 8D 0A D4		 sta $d40a                   ;line=156
   233 219D 8D 03 D0		 sta Player3_PositionX
   234 21A0 8E 04 D0		 stx Missile0_PositionX
   235 21A3 8C 07 D0		 sty Missile3_PositionX
   236 21A6 8D 0A D4		 sta $d40a                   ;line=157
   237 21A9 8D 0A D4		 sta $d40a                   ;line=158
   238 21AC A9 54		 lda #$54
   239 21AE 8D 0A D4		 sta $d40a                   ;line=159
   240 21B1 8D 06 D0		 sta Missile2_PositionX
   241
   242 				 
   243 21B4 8D 0A D4		 sta $d40a                   ;line=160
   244 21B7 8D 0A D4		 sta $d40a                   ;line=161
   245 21BA A9 A0		 lda #$A0
   246 21BC 8D 0A D4		 sta $d40a                   ;line=162
   247 21BF 8D 06 D0		 sta Missile2_PositionX
   248 21C2 A9 60		 lda #$60
   249 21C4 8D 0A D4		 sta $d40a                   ;line=163
   250 21C7 8D 04 D0		 sta Missile0_PositionX
   251 21CA A9 39		 lda #$39
   252 21CC 8D 0A D4		 sta $d40a                   ;line=164
   253 21CF 8D 02 D0		 sta Player2_PositionX
   254 21D2 8D 0A D4		 sta $d40a                   ;line=165
   255 21D5 8D 0A D4		 sta $d40a                   ;line=166
   256 21D8 8D 0A D4		 sta $d40a                   ;line=167
   257 21DB A9 37		 lda #$37
   258 21DD 8D 0A D4		 sta $d40a                   ;line=168
   259 21E0 8D 02 D0		 sta Player2_PositionX
   260 21E3 A9 C4		 lda #$C4
   261 21E5 8D 0A D4		 sta $d40a                   ;line=169
   262 21E8 8D 06 D0		 sta Missile2_PositionX
   263 				 
   264 21EB			 max #dli1
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 21EB A9 5C		 lda <DLI1
     2 21ED A2 20		 ldx >DLI1
Source: d:\Download\getris\over_add.asm
   265 21EF 4C 83 22		 jmp nmiQ
   266
   267
   268
   269 				;--
   270
   271 21F2			nmi
   272 21F2 85 80		 sta rejA
   273 21F4 86 81		 stx rejX
   274 21F6 84 82		 sty rejY
   275
   276 21F8 2C 0F D4		 bit $d40f
   277 21FB 10 03		 bpl vbl
   278
   279 21FD 4C 5C 20		dliv jmp dli1
   280
   281 2200			vbl
   282 2200 8D 0F D4		 sta $d40f		;reset znacznika przerwania $d40f
   283
   284 2203 A9 00 8D 02 D4 A9 +  mwa #ant $d402		;adres programu ANTICA ($d402,$d403)
   285 220D A9 3E 8D 00 D4	 mva #scr40 $d400	;ustawienie szerokosci obrazu $d400
   286 				 
   287 2212 E6 14		 inc $14
   288
   289 				;-- init pierwszej linii
   290
   291 2214 A9 10		 lda >fnt+$400*$00
   292 2216 8D 09 D4		 sta CHARBASE
   293 2219 A9 00		c0 lda #$00
   294 221B 8D 1A D0		 sta Background_BAK
   295 221E A9 1A		c1 lda #$1A
   296 2220 8D 16 D0		 sta Playfield_Color0_PF0
   297 2223 A9 E4		c2 lda #$E4
   298 2225 8D 17 D0		 sta Playfield_Color1_PF1
   299 2228 A9 F8		c3 lda #$F8
   300 222A 8D 18 D0		 sta Playfield_Color2_PF2
   301 222D A9 14		c4 lda #$14
   302 222F 8D 19 D0		 sta Playfield_Color3_PF3
   303 				 
   304 2232 A9 04		 lda #$04
   305 2234 8D 1B D0		 sta PRIOR_GTIACTL
   306
   307 2237 A9 03		 lda #$03
   308 2239 8D 08 D0		 sta Player0_Size
   309 223C 8D 0A D0		 sta Player2_Size
   310 				 
   311 223F A9 00		 lda #$00
   312 2241 8D 0B D0		 sta Player3_Size
   313 2244 8D 0C D0		 sta Missiles_Size
   314 2247 8D 09 D0		 sta Player1_Size
   315 				  
   316 224A A9 59		 lda #$59
   317 224C 8D 00 D0		 sta Player0_PositionX
   318 224F A9 91		 lda #$91
   319 2251 8D 01 D0		 sta Player1_PositionX
   320 2254 A9 67		 lda #$67
   321 2256 8D 02 D0		 sta Player2_PositionX
   322 2259 A9 79		 lda #$79
   323 225B 8D 03 D0		 sta Player3_PositionX
   324 225E A9 5C		 lda #$5C
   325 2260 8D 04 D0		 sta Missile0_PositionX
   326 2263 A9 7F		 lda #$7F
   327 2265 8D 06 D0		 sta Missile2_PositionX
   328 2268 A9 72		 lda #$72
   329 226A 8D 07 D0		 sta Missile3_PositionX
   330 				 
   331 226D A9 0C		c5 lda #$0C
   332 226F 8D 12 D0		 sta Player0_Missile0_Color0_PM0
   333 2272 A9 1C		c6 lda #$1C
   334 2274 8D 13 D0		 sta Player1_Missile1_Color1_PM1
   335 2277 8D 14 D0		 sta Player2_Missile2_Color2_PM2
   336 227A A9 14		c7 lda #$14
   337 227C 8D 15 D0		 sta Player3_Missile3_Color3_PM3
   338
   339 227F			 max #dli1              ;DLI ustawiamy na poczatek
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 227F A9 5C		 lda <DLI1
     2 2281 A2 20		 ldx >DLI1
Source: d:\Download\getris\over_add.asm
   340
   341 2283			nmiQ
   342 2283 8D FE 21		 sta dliv+1
   343 2286 8E FF 21		 stx dliv+2 
   344
   345 2289 A5 80		 lda rejA
   346 228B A6 81		 ldx rejX
   347 228D A4 82		 ldy rejY
   348 228F 40			 rti
   349
   350 				;--
   351
   352 2290			l_tcol
   353 2290 19 1E 23 28 2D 6D +  dta l(c0,c1,c2,c3,c4,c5,c6,c7,c8,c9)
   354 229A 24 4A 4C 5A		 dta l(c10,c11,c12,c13)
   355
   356 229E			h_tcol
   357 229E 22 22 22 22 22 22 +  dta h(c0,c1,c2,c3,c4,c5,c6,c7,c8,c9)
   358 22A8 21 21 21 21		 dta h(c10,c11,c12,c13)
   359
   360 = 22AC			t_satur .ds color_nr
   361 = 22BA			t_color .ds color_nr
  1286 				.endl
  1287
  1288
  1289 				/*
  1290 				  Programy DLI dla glownego ekranu rozgrywki GETRIS'a (interlace)
  1291 				  Ekran1
  1292 				  Ekran2
  1293 				*/
  1293
  1294 22C8			.local ekran1
  1295 22C8			 icl 'ekran1.asm'
Source: d:\Download\getris\ekran1.asm
     1
     2 = 22C8			  ?old_dli = *
     3
     4 22C8			dli
     5 22C8-415B> CD FF FF CD +  :5 cmp $ffff
     6 22D7 CD FF FF		 cmp $ffff
     7
     8 22DA A9 80		 lda >fnt+$400*$00
     9 				; ldx #$00
    10 				; ldy #$00
    11 22DC 8D 0A D4		 sta $d40a
    12 22DF 8D 09 D4		 sta CHARBASE
    13 22E2 A9 08		c0 lda #$08
    14 22E4 8D 14 D0		 sta Player2_Missile2_Color2_PM2
    15 22E7 8D 15 D0		 sta Player3_Missile3_Color3_PM3
    16 				; sta $d01e
    17 22EA C5 00		 cmp $00
    18
    19 				; line=9
    20
    21 22EC 20 D8 EC		 jsr wait60cycle
    22
    23 				; line=10
    24
    25 22EF 20 D8 EC		 jsr wait60cycle
    26
    27 				; line=11
    28
    29 22F2 20 E5 EC		 jsr wait24cycle
    30 22F5 A9 78		c40 lda #$78
    31 22F7 8D 17 D0		 sta $d017
    32 22FA A2 18		c41 ldx #$18
    33 22FC 8E 17 D0		 stx $d017
    34 22FF EA EA		 :2 nop
    35 2301 EA			 nop
    36 2302 EA			 nop
    37 2303 8D 17 D0		 sta $d017
    38 2306 A9 00		 lda #$00
    39 2308 8D 1E D0		 sta $d01e
    40 230B A9 00		 lda #$00
    41 230D 8D 1E D0		 sta $d01e
    42
    43 				; line=12
    44
    45 2310 20 D8 EC		 jsr wait60cycle
    46
    47 				; line=13
    48
    49 2313 A9 46		 lda #$46
    50 2315 A2 18		c9 ldx #$18
    51 2317 A0 00		 ldy #$00
    52 2319 8D 01 D0		 sta Player1_PositionX
    53 231C 8E 13 D0		 stx Player1_Missile1_Color1_PM1
    54 231F 8C 1E D0		 sty $d01e
    55 2322 A9 00		 lda #$00
    56 2324 8D 1E D0		 sta $d01e
    57 2327 20 E2 EC		 jsr wait36cycle
    58
    59 				; line=14
    60
    61 232A 20 D8 EC		 jsr wait60cycle
    62
    63 				; line=15
    64
    65 232D A9 45		 lda #$45
    66 232F A2 00		 ldx #$00
    67 2331 A0 00		 ldy #$00
    68 2333 8D 01 D0		 sta Player1_PositionX
    69 2336 8E 1E D0		 stx $d01e
    70 2339 8C 1E D0		 sty $d01e
    71 233C A9 00		 lda #$00
    72 233E 8D 1E D0		 sta $d01e
    73 2341 20 E2 EC		 jsr wait36cycle
    74
    75 				; line=16
    76
    77 2344 20 E5 EC		 jsr wait24cycle
    78 2347 C5 00		 cmp $00
    79
    80 				; line=17
    81
    82 2349 20 D8 EC		 jsr wait60cycle
    83
    84 				; line=18
    85
    86 234C 20 D8 EC		 jsr wait60cycle
    87
    88 				; line=19
    89
    90 234F 20 D8 EC		 jsr wait60cycle
    91
    92 				; line=20
    93
    94 2352 20 D8 EC		 jsr wait60cycle
    95
    96 				; line=21
    97
    98 2355 20 D8 EC		 jsr wait60cycle
    99
   100 				; line=22
   101
   102 2358 A9 44		 lda #$44
   103 235A A2 00		 ldx #$00
   104 235C A0 00		 ldy #$00
   105 235E 8D 01 D0		 sta Player1_PositionX
   106 2361 8E 1E D0		 stx $d01e
   107 2364 8C 1E D0		 sty $d01e
   108 2367 A9 00		 lda #$00
   109 2369 8D 1E D0		 sta $d01e
   110 236C 20 E2 EC		 jsr wait36cycle
   111
   112 				; line=23
   113
   114 236F 20 D8 EC		 jsr wait60cycle
   115
   116 				; line=24
   117
   118 2372 A9 F7		 lda #$F7
   119 2374 A2 4B		 ldx #$4B
   120 2376 A0 00		 ldy #$00
   121 2378 8D 0C D0		 sta Missiles_Size
   122 237B 8E 05 D0		 stx Missile1_PositionX
   123 237E 8C 1E D0		 sty $d01e
   124 2381 A9 00		 lda #$00
   125 2383 8D 1E D0		 sta $d01e
   126 2386 C5 00		 cmp $00
   127
   128 				; line=25
   129
   130 2388 20 D8 EC		 jsr wait60cycle
   131
   132 				; line=26
   133
   134 238B A9 4C		 lda #$4C
   135 238D A2 00		 ldx #$00
   136 238F A0 00		 ldy #$00
   137 2391 8D 05 D0		 sta Missile1_PositionX
   138 2394 8E 1E D0		 stx $d01e
   139 2397 8C 1E D0		 sty $d01e
   140 239A A9 00		 lda #$00
   141 239C 8D 1E D0		 sta $d01e
   142 239F 20 E2 EC		 jsr wait36cycle
   143
   144 				; line=27
   145 				; jsr wait60cycle
   146 				; line=28
   147 				; jsr wait60cycle
   148 				; line=29
   149 				; jsr wait60cycle
   150 				; line=30
   151 				; jsr wait60cycle
   152 				; line=31
   153 				; jsr wait60cycle
   154
   155 23A2 A9 45		 lda #$45
   156 23A4 8D 01 D0		 sta Player1_PositionX
   157 				 
   158 23A7			 dli_quit dli1_2
Macro: DLI_QUIT [Source: d:\Download\getris\getris2.asm]
     5 23A7 A9 B4 8D EA EB A9 +    mwa #DLI1_2 nmi.vdli
     8 23B1 4C BB EC		  jmp nmi.quit
    10 = 23B4			  .def ?old_dli
Source: d:\Download\getris\ekran1.asm
   159
   160
   161
   162 				; line=40
   163 23B4			dli1_2
   164 				 
   165 23B4 A9 84		 lda >fnt+$400*$01
   166 23B6 A2 00		 ldx #$00
   167 23B8 A0 00		 ldy #$00
   168 23BA 8D 0A D4		 sta $d40a
   169 23BD 8D 09 D4		 sta CHARBASE
   170 23C0 8E 1E D0		 stx $d01e
   171 23C3 8C 1E D0		 sty $d01e
   172 23C6 A9 00		 lda #$00
   173 				; sta $d01e
   174 23C8 C5 00		 cmp $00
   175
   176 				; line=41
   177
   178 23CA 20 D8 EC		 jsr wait60cycle
   179
   180 				; line=42
   181
   182 23CD A9 46		 lda #$46
   183 				; ldx #$00
   184 				; ldy #$00
   185 23CF 8D 01 D0		 sta Player1_PositionX
   186 				; stx $d01e
   187 				; sty $d01e
   188 				; lda #$00
   189 				; sta $d01e
   190 				; jsr wait36cycle
   191
   192 				; line=43
   193 				; jsr wait60cycle
   194
   195 				; line=44
   196 				; jsr wait60cycle
   197
   198 				; line=45
   199 				; jsr wait60cycle
   200
   201 				; line=46
   202 				; jsr wait60cycle
   203
   204 				; line=47
   205 				; jsr wait60cycle
   206
   207 23D2			 dli_quit dli1_48
Macro: DLI_QUIT [Source: d:\Download\getris\getris2.asm]
     3 23D2 A9 DA 8D EA EB	   mva <DLI1_48 nmi.vdli
     8 23D7 4C BB EC		  jmp nmi.quit
    10 = 23DA			  .def ?old_dli
Source: d:\Download\getris\ekran1.asm
   208
   209
   210
   211 23DA			dli1_48
   212
   213 				; line=48
   214
   215 23DA A9 00		 lda #$00
   216 23DC A2 00		 ldx #$00
   217 23DE A0 00		 ldy #$00
   218 23E0 8D 0A D4		 sta $d40a
   219 23E3 8D 1E D0		 sta $d01e
   220 23E6 8E 1E D0		 stx $d01e
   221 23E9 8C 1E D0		 sty $d01e
   222 23EC A9 00		 lda #$00
   223 				; sta $d01e
   224 23EE C5 00		 cmp $00
   225
   226 				; line=49
   227
   228 23F0 20 D8 EC		 jsr wait60cycle
   229
   230 				; line=50
   231
   232 23F3 20 D8 EC		 jsr wait60cycle
   233
   234 				; line=51
   235
   236 23F6 20 D8 EC		 jsr wait60cycle
   237
   238 				; line=52
   239
   240 23F9 A9 D8		c10 lda #$D8
   241 23FB A2 45		 ldx #$45
   242 				; ldy #$00
   243 23FD 8D 17 D0		 sta Playfield_Color1_PF1
   244 2400 8E 01 D0		 stx Player1_PositionX
   245 				; sty $d01e
   246 				; lda #$00
   247 				; sta $d01e
   248 				; jsr wait36cycle
   249
   250 				; line=53
   251 				; jsr wait60cycle
   252
   253 				; line=54
   254 				; jsr wait60cycle
   255
   256 				; line=55
   257 				; jsr wait60cycle
   258
   259 2403			 dli_quit dli1_56
Macro: DLI_QUIT [Source: d:\Download\getris\getris2.asm]
     5 2403 A9 10 8D EA EB A9 +    mwa #DLI1_56 nmi.vdli
     8 240D 4C BB EC		  jmp nmi.quit
    10 = 2410			  .def ?old_dli
Source: d:\Download\getris\ekran1.asm
   260
   261
   262 2410			dli1_56
   263
   264 				; line=56
   265 2410 A9 00		 lda #$00
   266 2412 A2 00		 ldx #$00
   267 2414 A0 00		 ldy #$00
   268 2416 8D 0A D4		 sta $d40a
   269 2419 8D 1E D0		 sta $d01e
   270 241C 8E 1E D0		 stx $d01e
   271 241F 8C 1E D0		 sty $d01e
   272 2422 A9 00		 lda #$00
   273 				; sta $d01e
   274 2424 C5 00		 cmp $00
   275
   276 				; line=57
   277
   278 2426 20 D8 EC		 jsr wait60cycle
   279
   280 				; line=58
   281
   282 2429 A9 F3		 lda #$F3
   283 242B A2 44		 ldx #$44
   284 242D A0 00		 ldy #$00
   285 242F 8D 0C D0		 sta Missiles_Size
   286 2432 8E 01 D0		 stx Player1_PositionX
   287 2435 8C 1E D0		 sty $d01e
   288 2438 A9 00		 lda #$00
   289 243A 8D 1E D0		 sta $d01e
   290 243D 20 E2 EC		 jsr wait36cycle
   291
   292 				; line=59
   293
   294 2440 20 D8 EC		 jsr wait60cycle
   295
   296 				; line=60
   297
   298 2443 20 D8 EC		 jsr wait60cycle
   299
   300 				; line=61
   301
   302 2446 20 D8 EC		 jsr wait60cycle
   303
   304 				; line=62
   305
   306 2449 20 D8 EC		 jsr wait60cycle
   307
   308 				; line=63
   309
   310 244C 20 D8 EC		 jsr wait60cycle
   311
   312 				; line=64
   313
   314 244F A9 B4		c11 lda #$B4
   315 2451 A2 00		 ldx #$00
   316 2453 A0 00		 ldy #$00
   317 2455 8D 19 D0		 sta Playfield_Color3_PF3
   318 2458 8E 1E D0		 stx $d01e
   319 245B 8C 1E D0		 sty $d01e
   320 245E A9 00		 lda #$00
   321 2460 8D 1E D0		 sta $d01e
   322 2463 C5 00		 cmp $00
   323
   324 				; line=65
   325
   326 2465 20 D8 EC		 jsr wait60cycle
   327
   328 				; line=66
   329
   330 2468 20 D8 EC		 jsr wait60cycle
   331
   332 				; line=67
   333
   334 246B 20 D8 EC		 jsr wait60cycle
   335
   336 				; line=68
   337
   338 246E A9 60		 lda #$60
   339 2470 A2 54		c12 ldx #$54
   340 2472 A0 00		 ldy #$00
   341 2474 8D 05 D0		 sta Missile1_PositionX
   342 2477 8E 13 D0		 stx Player1_Missile1_Color1_PM1
   343 247A 8C 1E D0		 sty $d01e
   344 247D A9 00		 lda #$00
   345 247F 8D 1E D0		 sta $d01e
   346 2482 A9 D8		c42 lda #$D8
   347 2484 8D 17 D0		 sta $d017
   348 2487 A0 18		c43 ldy #$18
   349 2489 8C 17 D0		 sty $d017
   350 248C EA EA		 :2 nop
   351 248E 8D 17 D0		 sta $d017
   352 2491 A9 00		 lda #$00
   353 2493 EA			 nop
   354 2494 A9 00		 lda #$00
   355 2496 8D 1E D0		 sta $d01e
   356 2499 A9 00		 lda #$00
   357 249B 8D 1E D0		 sta $d01e
   358
   359 				; line=69
   360
   361 249E 20 D8 EC		 jsr wait60cycle
   362
   363 				; line=70
   364
   365 24A1 20 D8 EC		 jsr wait60cycle
   366
   367 				; line=71
   368
   369 24A4 20 D8 EC		 jsr wait60cycle
   370
   371 				; line=72
   372
   373 24A7 A9 54		c13 lda #$54
   374 				; ldx #$00
   375 				; ldy #$00
   376 24A9 8D 19 D0		 sta Playfield_Color3_PF3
   377 				; stx $d01e
   378 				; sty $d01e
   379 				; lda #$00
   380 				; sta $d01e
   381 				; cmp $00
   382
   383 				; line=73
   384 				; jsr wait60cycle
   385
   386 				; line=74
   387 				; jsr wait60cycle
   388
   389 				; line=75
   390 				; jsr wait60cycle
   391
   392 				; line=76
   393 				; jsr wait60cycle
   394
   395 				; line=77
   396 				; jsr wait60cycle
   397
   398 				; line=78
   399 				; jsr wait60cycle
   400
   401 				; line=79
   402 				; jsr wait60cycle
   403
   404 				/*
   405 				 lda #$47
   406 				c14 ldx #$18
   407 				 ldy #$00
   408 				 sta Player1_PositionX
   409 				 stx Player1_Missile1_Color1_PM1
   410 				 sty $d01e
   411 				 lda #$00
   412 				 sta $d01e
   413 				 jsr wait36cycle
   414 				*/
   414
   415
   416 24AC			 dli_quit dli1_80
Macro: DLI_QUIT [Source: d:\Download\getris\getris2.asm]
     3 24AC A9 B4 8D EA EB	   mva <DLI1_80 nmi.vdli
     8 24B1 4C BB EC		  jmp nmi.quit
    10 = 24B4			  .def ?old_dli
Source: d:\Download\getris\ekran1.asm
   417
   418
   419 24B4			dli1_80
   420
   421 				; line=80
   422
   423 24B4 A9 88		 lda >fnt+$400*$02
   424 24B6 A2 47		 ldx #$47
   425 24B8 A0 18		c14 ldy #$18
   426 24BA 8D 0A D4		 sta $d40a
   427 24BD 8D 09 D4		 sta CHARBASE
   428 24C0 8E 01 D0		 stx Player1_PositionX
   429 24C3 8C 13 D0		 sty Player1_Missile1_Color1_PM1
   430 24C6 A9 00		 lda #$00
   431 				; sta $d01e
   432 24C8 C5 00		 cmp $00
   433
   434 				; line=81
   435
   436 24CA 20 D8 EC		 jsr wait60cycle
   437
   438 				; line=82
   439
   440 24CD 20 D8 EC		 jsr wait60cycle
   441
   442 				; line=83
   443
   444 24D0 20 D8 EC		 jsr wait60cycle
   445
   446 				; line=84
   447
   448 24D3 20 D8 EC		 jsr wait60cycle
   449
   450 				; line=85
   451
   452 24D6 20 D8 EC		 jsr wait60cycle
   453
   454 				; line=86
   455
   456 24D9 20 D8 EC		 jsr wait60cycle
   457
   458 				; line=87
   459
   460 24DC A9 43		 lda #$43
   461 				; ldx #$00
   462 				; ldy #$00
   463 24DE 8D 01 D0		 sta Player1_PositionX
   464 				; stx $d01e
   465 				; sty $d01e
   466 				; lda #$00
   467 				; sta $d01e
   468 				; jsr wait36cycle
   469
   470 				; line=88
   471
   472 				; jsr wait24cycle
   473 				; cmp $00
   474 				 
   475 24E1			 dli_quit dli1_3
Macro: DLI_QUIT [Source: d:\Download\getris\getris2.asm]
     3 24E1 A9 E9 8D EA EB	   mva <DLI1_3 nmi.vdli
     8 24E6 4C BB EC		  jmp nmi.quit
    10 = 24E9			  .def ?old_dli
Source: d:\Download\getris\ekran1.asm
   476
   477
   478 				; line=112
   479 24E9			dli1_3
   480
   481 24E9 A9 00		 lda #$00
   482 24EB A2 00		 ldx #$00
   483 24ED A0 00		 ldy #$00
   484 24EF 8D 0A D4		 sta $d40a
   485 24F2 8D 1E D0		 sta $d01e
   486 24F5 8E 1E D0		 stx $d01e
   487 24F8 8C 1E D0		 sty $d01e
   488 24FB A9 00		 lda #$00
   489 				; sta $d01e
   490 24FD C5 00		 cmp $00
   491
   492 				; line=113
   493
   494 24FF 20 D8 EC		 jsr wait60cycle
   495
   496 				; line=114
   497
   498 2502 A9 54		c15 lda #$54
   499 2504 A2 00		 ldx #$00
   500 2506 A0 00		 ldy #$00
   501 2508 8D 13 D0		 sta Player1_Missile1_Color1_PM1
   502 250B 8E 1E D0		 stx $d01e
   503 250E 8C 1E D0		 sty $d01e
   504 2511 A9 00		 lda #$00
   505 2513 8D 1E D0		 sta $d01e
   506 2516 20 E2 EC		 jsr wait36cycle
   507
   508 				; line=115
   509
   510 2519 A9 30		 lda #$30
   511 251B A2 00		 ldx #$00
   512 251D A0 00		 ldy #$00
   513 251F 8D 01 D0		 sta Player1_PositionX
   514 2522 8E 1E D0		 stx $d01e
   515 2525 8C 1E D0		 sty $d01e
   516 2528 A9 00		 lda #$00
   517 252A 8D 1E D0		 sta $d01e
   518 252D A9 D8		c44 lda #$D8
   519 252F 8D 17 D0		 sta $d017
   520 2532 A0 18		c45 ldy #$18
   521 2534 8C 17 D0		 sty $d017
   522 2537 EA EA		 :2 nop
   523 2539 8D 17 D0		 sta $d017
   524 253C A9 00		 lda #$00
   525 253E EA			 nop
   526 253F A9 00		 lda #$00
   527 2541 8D 1E D0		 sta $d01e
   528 2544 A9 00		 lda #$00
   529 2546 8D 1E D0		 sta $d01e
   530
   531 				; line=116
   532
   533 2549 A9 34		c16 lda #$34
   534 254B A2 00		 ldx #$00
   535 254D A0 00		 ldy #$00
   536 254F 8D 19 D0		 sta Playfield_Color3_PF3
   537 2552 8E 1E D0		 stx $d01e
   538 2555 8C 1E D0		 sty $d01e
   539 2558 A9 00		 lda #$00
   540 255A 8D 1E D0		 sta $d01e
   541 255D A9 D8		c46 lda #$D8
   542 255F 8D 17 D0		 sta $d017
   543 2562 A0 18		c47 ldy #$18
   544 2564 8C 17 D0		 sty $d017
   545 2567 EA EA		 :2 nop
   546 2569 8D 17 D0		 sta $d017
   547 256C A9 00		 lda #$00
   548 256E EA			 nop
   549 256F A9 00		 lda #$00
   550 2571 8D 1E D0		 sta $d01e
   551 2574 A9 00		 lda #$00
   552 2576 8D 1E D0		 sta $d01e
   553
   554 				; line=117
   555
   556 2579 20 E5 EC		 jsr wait24cycle
   557 257C A9 D8		c48 lda #$D8
   558 257E 8D 17 D0		 sta $d017
   559 2581 A0 18		c49 ldy #$18
   560 2583 8C 17 D0		 sty $d017
   561 2586 EA EA		 :2 nop
   562 2588 8D 17 D0		 sta $d017
   563 258B A9 00		 lda #$00
   564 258D EA			 nop
   565 258E A9 00		 lda #$00
   566 2590 8D 1E D0		 sta $d01e
   567 2593 A9 00		 lda #$00
   568 2595 8D 1E D0		 sta $d01e
   569
   570 				; line=118
   571
   572 2598 20 E5 EC		 jsr wait24cycle
   573 259B A9 D8		c50 lda #$D8
   574 259D 8D 17 D0		 sta $d017
   575 25A0 A0 18		c51 ldy #$18
   576 25A2 8C 17 D0		 sty $d017
   577 25A5 EA EA		 :2 nop
   578 25A7 8D 17 D0		 sta $d017
   579 25AA A9 00		 lda #$00
   580 25AC EA			 nop
   581 25AD A9 00		 lda #$00
   582 25AF 8D 1E D0		 sta $d01e
   583 25B2 A9 00		 lda #$00
   584 25B4 8D 1E D0		 sta $d01e
   585
   586 				; line=119
   587
   588 25B7 A9 01		 lda #$01
   589 25B9 A2 42		 ldx #$42
   590 25BB A0 18		c17 ldy #$18
   591 25BD 8D 09 D0		 sta Player1_Size
   592 25C0 8E 01 D0		 stx Player1_PositionX
   593 25C3 8C 13 D0		 sty Player1_Missile1_Color1_PM1
   594 25C6 A9 00		 lda #$00
   595 25C8 8D 1E D0		 sta $d01e
   596 25CB A9 D8		c52 lda #$D8
   597 25CD 8D 17 D0		 sta $d017
   598 25D0 A0 18		c53 ldy #$18
   599 25D2 8C 17 D0		 sty $d017
   600 25D5 EA EA		 :2 nop
   601 25D7 8D 17 D0		 sta $d017
   602 25DA A9 00		 lda #$00
   603 25DC EA			 nop
   604 25DD A9 00		 lda #$00
   605 25DF 8D 1E D0		 sta $d01e
   606 25E2 A9 00		 lda #$00
   607 25E4 8D 1E D0		 sta $d01e
   608
   609 				; line=120
   610
   611 25E7 20 E5 EC		 jsr wait24cycle
   612 25EA C5 00		 cmp $00
   613
   614 				; line=121
   615
   616 25EC 20 E5 EC		 jsr wait24cycle
   617 25EF A9 D8		c54 lda #$D8
   618 25F1 8D 17 D0		 sta $d017
   619 25F4 A0 18		c55 ldy #$18
   620 25F6 8C 17 D0		 sty $d017
   621 25F9 EA EA		 :2 nop
   622 25FB 8D 17 D0		 sta $d017
   623 25FE A9 00		 lda #$00
   624 2600 EA			 nop
   625 2601 A9 00		 lda #$00
   626 2603 8D 1E D0		 sta $d01e
   627 2606 A9 00		 lda #$00
   628 2608 8D 1E D0		 sta $d01e
   629
   630 				; line=122
   631
   632 260B 20 E5 EC		 jsr wait24cycle
   633 260E A9 D8		c56 lda #$D8
   634 2610 8D 17 D0		 sta $d017
   635 2613 A0 18		c57 ldy #$18
   636 2615 8C 17 D0		 sty $d017
   637 2618 EA EA		 :2 nop
   638 261A 8D 17 D0		 sta $d017
   639 261D A9 00		 lda #$00
   640 261F EA			 nop
   641 2620 A9 00		 lda #$00
   642 2622 8D 1E D0		 sta $d01e
   643 2625 A9 00		 lda #$00
   644 2627 8D 1E D0		 sta $d01e
   645
   646 				; line=123
   647
   648 262A 20 E5 EC		 jsr wait24cycle
   649 262D A9 D8		c58 lda #$D8
   650 262F 8D 17 D0		 sta $d017
   651 2632 A0 18		c59 ldy #$18
   652 2634 8C 17 D0		 sty $d017
   653 2637 EA EA		 :2 nop
   654 2639 8D 17 D0		 sta $d017
   655 263C A9 00		 lda #$00
   656 263E EA			 nop
   657 263F A9 00		 lda #$00
   658 2641 8D 1E D0		 sta $d01e
   659 2644 A9 00		 lda #$00
   660 2646 8D 1E D0		 sta $d01e
   661
   662 				; line=124
   663
   664 2649 20 E5 EC		 jsr wait24cycle
   665 264C A9 D8		c60 lda #$D8
   666 264E 8D 17 D0		 sta $d017
   667 2651 A0 18		c61 ldy #$18
   668 2653 8C 17 D0		 sty $d017
   669 2656 EA EA		 :2 nop
   670 2658 8D 17 D0		 sta $d017
   671 265B A9 00		 lda #$00
   672 265D EA			 nop
   673 265E A9 00		 lda #$00
   674 2660 8D 1E D0		 sta $d01e
   675 2663 A9 00		 lda #$00
   676 2665 8D 1E D0		 sta $d01e
   677
   678 				; line=125
   679
   680 2668 20 E5 EC		 jsr wait24cycle
   681 266B A9 D8		c62 lda #$D8
   682 266D 8D 17 D0		 sta $d017
   683 2670 A0 18		c63 ldy #$18
   684 2672 8C 17 D0		 sty $d017
   685 2675 EA EA		 :2 nop
   686 2677 8D 17 D0		 sta $d017
   687 267A A9 00		 lda #$00
   688 267C EA			 nop
   689 267D A9 00		 lda #$00
   690 267F 8D 1E D0		 sta $d01e
   691 2682 A9 00		 lda #$00
   692 2684 8D 1E D0		 sta $d01e
   693
   694 				; line=126
   695
   696 2687 20 E5 EC		 jsr wait24cycle
   697 268A A9 D8		c64 lda #$D8
   698 268C 8D 17 D0		 sta $d017
   699 268F A0 18		c65 ldy #$18
   700 2691 8C 17 D0		 sty $d017
   701 2694 EA EA		 :2 nop
   702 2696 8D 17 D0		 sta $d017
   703 2699 A9 00		 lda #$00
   704 269B EA			 nop
   705 269C A9 00		 lda #$00
   706 269E 8D 1E D0		 sta $d01e
   707 26A1 A9 00		 lda #$00
   708 26A3 8D 1E D0		 sta $d01e
   709
   710 				; line=127
   711
   712 26A6 20 E5 EC		 jsr wait24cycle
   713 26A9 A9 D8		c66 lda #$D8
   714 26AB 8D 17 D0		 sta $d017
   715 26AE A0 18		c67 ldy #$18
   716 26B0 8C 17 D0		 sty $d017
   717 26B3 EA EA		 :2 nop
   718 26B5 8D 17 D0		 sta $d017
   719 26B8 A9 00		 lda #$00
   720 26BA EA			 nop
   721 26BB A9 00		 lda #$00
   722 26BD 8D 1E D0		 sta $d01e
   723 26C0 A9 00		 lda #$00
   724 26C2 8D 1E D0		 sta $d01e
   725
   726 				; line=128
   727
   728 26C5 A9 8C		 lda >fnt+$400*$03
   729 26C7 A2 00		 ldx #$00
   730 26C9 A0 00		 ldy #$00
   731 26CB 8D 09 D4		 sta CHARBASE
   732 26CE 8E 1E D0		 stx $d01e
   733 26D1 8C 1E D0		 sty $d01e
   734 26D4 A9 00		 lda #$00
   735 26D6 8D 1E D0		 sta $d01e
   736 26D9 C5 00		 cmp $00
   737
   738 				; line=129
   739
   740 26DB A9 3C		 lda #$3C
   741 26DD A2 54		c18 ldx #$54
   742 26DF A0 00		 ldy #$00
   743 26E1 8D 05 D0		 sta Missile1_PositionX
   744 26E4 8E 13 D0		 stx Player1_Missile1_Color1_PM1
   745 26E7 8C 1E D0		 sty $d01e
   746 26EA A9 00		 lda #$00
   747 26EC 8D 1E D0		 sta $d01e
   748 26EF A9 D8		c68 lda #$D8
   749 26F1 8D 17 D0		 sta $d017
   750 26F4 A0 18		c69 ldy #$18
   751 26F6 8C 17 D0		 sty $d017
   752 26F9 EA EA		 :2 nop
   753 26FB 8D 17 D0		 sta $d017
   754 26FE A9 00		 lda #$00
   755 2700 EA			 nop
   756 2701 A9 00		 lda #$00
   757 2703 8D 1E D0		 sta $d01e
   758 2706 A9 00		 lda #$00
   759 2708 8D 1E D0		 sta $d01e
   760
   761 				; line=130
   762
   763 270B 20 E5 EC		 jsr wait24cycle
   764 270E A9 D8		c70 lda #$D8
   765 2710 8D 17 D0		 sta $d017
   766 2713 A0 18		c71 ldy #$18
   767 2715 8C 17 D0		 sty $d017
   768 2718 EA EA		 :2 nop
   769 271A 8D 17 D0		 sta $d017
   770 271D A9 00		 lda #$00
   771 271F EA			 nop
   772 2720 A9 00		 lda #$00
   773 2722 8D 1E D0		 sta $d01e
   774 2725 A9 00		 lda #$00
   775 2727 8D 1E D0		 sta $d01e
   776
   777 				; line=131
   778
   779 272A 20 E5 EC		 jsr wait24cycle
   780 272D A9 D8		c72 lda #$D8
   781 272F 8D 17 D0		 sta $d017
   782 2732 A0 18		c73 ldy #$18
   783 2734 8C 17 D0		 sty $d017
   784 2737 EA EA		 :2 nop
   785 2739 8D 17 D0		 sta $d017
   786 273C A9 00		 lda #$00
   787 273E EA			 nop
   788 273F A9 00		 lda #$00
   789 2741 8D 1E D0		 sta $d01e
   790 2744 A9 00		 lda #$00
   791 2746 8D 1E D0		 sta $d01e
   792
   793 				; line=132
   794
   795 2749 20 E5 EC		 jsr wait24cycle
   796 274C A9 D8		c74 lda #$D8
   797 274E 8D 17 D0		 sta $d017
   798 2751 A0 18		c75 ldy #$18
   799 2753 8C 17 D0		 sty $d017
   800 2756 EA EA		 :2 nop
   801 2758 8D 17 D0		 sta $d017
   802 275B A9 00		 lda #$00
   803 275D EA			 nop
   804 275E A9 00		 lda #$00
   805 2760 8D 1E D0		 sta $d01e
   806 2763 A9 00		 lda #$00
   807 2765 8D 1E D0		 sta $d01e
   808
   809 				; line=133
   810
   811 2768 20 E5 EC		 jsr wait24cycle
   812 276B A9 D8		c76 lda #$D8
   813 276D 8D 17 D0		 sta $d017
   814 2770 A0 18		c77 ldy #$18
   815 2772 8C 17 D0		 sty $d017
   816 2775 EA EA		 :2 nop
   817 2777 8D 17 D0		 sta $d017
   818 277A A9 00		 lda #$00
   819 277C EA			 nop
   820 277D A9 00		 lda #$00
   821 277F 8D 1E D0		 sta $d01e
   822 2782 A9 00		 lda #$00
   823 2784 8D 1E D0		 sta $d01e
   824
   825 				; line=134
   826
   827 2787 20 E5 EC		 jsr wait24cycle
   828 278A A9 D8		c78 lda #$D8
   829 278C 8D 17 D0		 sta $d017
   830 278F A0 18		c79 ldy #$18
   831 2791 8C 17 D0		 sty $d017
   832 2794 EA EA		 :2 nop
   833 2796 8D 17 D0		 sta $d017
   834 2799 A9 00		 lda #$00
   835 279B EA			 nop
   836 279C A9 00		 lda #$00
   837 279E 8D 1E D0		 sta $d01e
   838 27A1 A9 00		 lda #$00
   839 27A3 8D 1E D0		 sta $d01e
   840
   841 				; line=135
   842
   843 27A6 A9 54		c19 lda #$54
   844 27A8 A2 00		 ldx #$00
   845 27AA A0 00		 ldy #$00
   846 27AC 8D 19 D0		 sta Playfield_Color3_PF3
   847 27AF 8E 1E D0		 stx $d01e
   848 27B2 8C 1E D0		 sty $d01e
   849 27B5 A9 00		 lda #$00
   850 27B7 8D 1E D0		 sta $d01e
   851 27BA A9 D8		c80 lda #$D8
   852 27BC 8D 17 D0		 sta $d017
   853 27BF A0 18		c81 ldy #$18
   854 27C1 8C 17 D0		 sty $d017
   855 27C4 EA EA		 :2 nop
   856 27C6 8D 17 D0		 sta $d017
   857 27C9 A9 00		 lda #$00
   858 27CB EA			 nop
   859 27CC A9 00		 lda #$00
   860 27CE 8D 1E D0		 sta $d01e
   861 27D1 A9 00		 lda #$00
   862 27D3 8D 1E D0		 sta $d01e
   863
   864 				; line=136
   865
   866 27D6 A9 00		 lda #$00
   867 27D8 A2 43		 ldx #$43
   868 27DA A0 18		c20 ldy #$18
   869 27DC 8D 09 D0		 sta Player1_Size
   870 27DF 8E 01 D0		 stx Player1_PositionX
   871 27E2 8C 13 D0		 sty Player1_Missile1_Color1_PM1
   872 27E5 A9 00		 lda #$00
   873 27E7 8D 1E D0		 sta $d01e
   874 27EA C5 00		 cmp $00
   875
   876 				; line=137
   877
   878 27EC 20 E5 EC		 jsr wait24cycle
   879 27EF A9 D8		c82 lda #$D8
   880 27F1 8D 17 D0		 sta $d017
   881 27F4 A0 18		c83 ldy #$18
   882 27F6 8C 17 D0		 sty $d017
   883 27F9 EA EA		 :2 nop
   884 27FB 8D 17 D0		 sta $d017
   885 27FE A9 00		 lda #$00
   886 2800 EA			 nop
   887 2801 A9 00		 lda #$00
   888 2803 8D 1E D0		 sta $d01e
   889 2806 A9 00		 lda #$00
   890 2808 8D 1E D0		 sta $d01e
   891
   892 				; line=138
   893
   894 280B A9 F8		c21 lda #$F8
   895 280D A2 00		 ldx #$00
   896 280F A0 00		 ldy #$00
   897 2811 8D 17 D0		 sta Playfield_Color1_PF1
   898 2814 8E 1E D0		 stx $d01e
   899 2817 8C 1E D0		 sty $d01e
   900 281A A9 00		 lda #$00
   901 281C 8D 1E D0		 sta $d01e
   902 281F A9 D8		c84 lda #$D8
   903 2821 8D 17 D0		 sta $d017
   904 2824 A0 18		c85 ldy #$18
   905 2826 8C 17 D0		 sty $d017
   906 2829 EA EA		 :2 nop
   907 282B 8D 17 D0		 sta $d017
   908 282E A9 00		c86 lda #$00
   909 2830 EA			 nop
   910 2831 A9 F8		c87 lda #$F8
   911 2833 8D 17 D0		 sta $d017
   912 				; lda #$00
   913 				; sta $d01e
   914
   915 				; line=139
   916 				; jsr wait60cycle
   917
   918 				; line=140
   919 				; jsr wait60cycle
   920
   921 				; line=141
   922 				; jsr wait60cycle
   923
   924 				; line=142
   925 				; jsr wait60cycle
   926
   927 				; line=143
   928 				; jsr wait60cycle
   929
   930 2836			 dli_quit dli1_144
Macro: DLI_QUIT [Source: d:\Download\getris\getris2.asm]
     5 2836 A9 43 8D EA EB A9 +    mwa #DLI1_144 nmi.vdli
     8 2840 4C BB EC		  jmp nmi.quit
    10 = 2843			  .def ?old_dli
Source: d:\Download\getris\ekran1.asm
   931
   932
   933
   934 2843			dli1_144
   935 				; line=144
   936 				; jsr wait24cycle
   937 				; cmp $00
   938
   939 2843 A9 00		 lda #$00
   940 2845 A2 00		 ldx #$00
   941 2847 A0 00		 ldy #$00
   942 2849 8D 0A D4		 sta $d40a
   943 284C 8D 1E D0		 sta $d01e
   944 284F 8E 1E D0		 stx $d01e
   945 2852 8C 1E D0		 sty $d01e
   946 2855 A9 00		 lda #$00
   947 				; sta $d01e
   948 2857 C5 00		 cmp $00
   949
   950 				; line=145
   951
   952 2859 20 D8 EC		 jsr wait60cycle
   953
   954 				; line=146
   955
   956 285C 20 E5 EC		 jsr wait24cycle
   957 285F A9 54		c88 lda #$54
   958 2861 8D 19 D0		 sta $d019
   959 2864 A9 00		 lda #$00
   960 2866 8D 1E D0		 sta $d01e
   961 2869 A2 74		c89 ldx #$74
   962 286B EA EA		 :2 nop
   963 286D A9 00		 lda #$00
   964 286F 8D 1E D0		 sta $d01e
   965 2872 A9 00		 lda #$00
   966 2874 8E 19 D0		 stx $d019
   967 2877 A9 00		 lda #$00
   968 2879 8D 1E D0		 sta $d01e
   969
   970 				; line=147
   971
   972 287C 20 E5 EC		 jsr wait24cycle
   973 287F A9 54		c90 lda #$54
   974 2881 8D 19 D0		 sta $d019
   975 2884 A9 00		 lda #$00
   976 2886 8D 1E D0		 sta $d01e
   977 2889 A2 74		c91 ldx #$74
   978 288B EA EA		 :2 nop
   979 288D A9 00		 lda #$00
   980 288F 8D 1E D0		 sta $d01e
   981 2892 A9 00		 lda #$00
   982 2894 8E 19 D0		 stx $d019
   983 2897 A9 00		 lda #$00
   984 2899 8D 1E D0		 sta $d01e
   985
   986 				; line=148
   987
   988 289C 20 E5 EC		 jsr wait24cycle
   989 289F A9 54		c92 lda #$54
   990 28A1 8D 19 D0		 sta $d019
   991 28A4 A9 00		 lda #$00
   992 28A6 8D 1E D0		 sta $d01e
   993 28A9 A2 74		c93 ldx #$74
   994 28AB EA EA		 :2 nop
   995 28AD A9 00		 lda #$00
   996 28AF 8D 1E D0		 sta $d01e
   997 28B2 A9 00		 lda #$00
   998 28B4 8E 19 D0		 stx $d019
   999 28B7 A9 00		 lda #$00
  1000 28B9 8D 1E D0		 sta $d01e
  1001
  1002 				; line=149
  1003
  1004 28BC 20 E5 EC		 jsr wait24cycle
  1005 28BF A9 54		c94 lda #$54
  1006 28C1 8D 19 D0		 sta $d019
  1007 28C4 A9 00		 lda #$00
  1008 28C6 8D 1E D0		 sta $d01e
  1009 28C9 A2 74		c95 ldx #$74
  1010 28CB EA EA		 :2 nop
  1011 28CD A9 00		 lda #$00
  1012 28CF 8D 1E D0		 sta $d01e
  1013 28D2 A9 00		 lda #$00
  1014 28D4 8E 19 D0		 stx $d019
  1015 28D7 A9 00		 lda #$00
  1016 28D9 8D 1E D0		 sta $d01e
  1017
  1018 				; line=150
  1019
  1020 28DC 20 E5 EC		 jsr wait24cycle
  1021 28DF A9 54		c96 lda #$54
  1022 28E1 8D 19 D0		 sta $d019
  1023 28E4 A9 00		 lda #$00
  1024 28E6 8D 1E D0		 sta $d01e
  1025 28E9 A2 74		c97 ldx #$74
  1026 28EB EA EA		 :2 nop
  1027 28ED A9 00		 lda #$00
  1028 28EF 8D 1E D0		 sta $d01e
  1029 28F2 A9 00		 lda #$00
  1030 28F4 8E 19 D0		 stx $d019
  1031 28F7 A9 00		 lda #$00
  1032 28F9 8D 1E D0		 sta $d01e
  1033
  1034 				; line=151
  1035
  1036 28FC A9 56		c22 lda #$56
  1037 28FE A2 5B		 ldx #$5B
  1038 2900 A0 78		c23 ldy #$78
  1039 2902 8D 19 D0		 sta Playfield_Color3_PF3
  1040 2905 8E 01 D0		 stx Player1_PositionX
  1041 2908 8C 13 D0		 sty Player1_Missile1_Color1_PM1
  1042 290B A9 00		 lda #$00
  1043 290D 8D 1E D0		 sta $d01e
  1044 2910 A9 54		c98 lda #$54
  1045 2912 8D 19 D0		 sta $d019
  1046 2915 A9 00		 lda #$00
  1047 2917 8D 1E D0		 sta $d01e
  1048 291A A2 74		c99 ldx #$74
  1049 291C EA EA		 :2 nop
  1050 291E A9 00		 lda #$00
  1051 2920 8D 1E D0		 sta $d01e
  1052 2923 A9 00		 lda #$00
  1053 2925 8E 19 D0		 stx $d019
  1054 2928 A9 54		 lda #$54
  1055 292A EA EA		 :2 nop
  1056
  1057 				; line=152
  1058
  1059 292C A9 54		c24 lda #$54
  1060 292E A2 00		 ldx #$00
  1061 2930 A0 00		 ldy #$00
  1062 2932 8D 19 D0		 sta Playfield_Color3_PF3
  1063 2935 8E 1E D0		 stx $d01e
  1064 2938 8C 1E D0		 sty $d01e
  1065 293B A9 00		 lda #$00
  1066 293D 8D 1E D0		 sta $d01e
  1067 2940 C5 00		 cmp $00
  1068
  1069 				; line=153
  1070
  1071 2942 20 E5 EC		 jsr wait24cycle
  1072 2945 A9 18		c100 lda #$18
  1073 2947 8D 17 D0		 sta $d017
  1074 294A A0 78		c101 ldy #$78
  1075 294C A2 F8		c102 ldx #$F8
  1076 294E EA EA		 :2 nop
  1077 2950 8C 17 D0		 sty $d017
  1078 2953 8E 17 D0		 stx $d017
  1079 2956 EA			 nop
  1080 2957 A9 00		 lda #$00
  1081 2959 8D 1E D0		 sta $d01e
  1082 295C A9 00		 lda #$00
  1083 295E 8D 1E D0		 sta $d01e
  1084
  1085 				; line=154
  1086
  1087 2961 20 E5 EC		 jsr wait24cycle
  1088 2964 A9 18		c103 lda #$18
  1089 2966 8D 17 D0		 sta $d017
  1090 2969 A0 78		c104 ldy #$78
  1091 296B A2 F8		c105 ldx #$F8
  1092 296D EA EA		 :2 nop
  1093 296F 8C 17 D0		 sty $d017
  1094 2972 8E 17 D0		 stx $d017
  1095 2975 EA			 nop
  1096 2976 A9 00		 lda #$00
  1097 2978 8D 1E D0		 sta $d01e
  1098 297B A9 00		 lda #$00
  1099 297D 8D 1E D0		 sta $d01e
  1100
  1101 				; line=155
  1102
  1103 2980 20 E5 EC		 jsr wait24cycle
  1104 2983 A9 18		c106 lda #$18
  1105 2985 8D 17 D0		 sta $d017
  1106 2988 A0 78		c107 ldy #$78
  1107 298A A2 F8		c108 ldx #$F8
  1108 298C EA EA		 :2 nop
  1109 298E 8C 17 D0		 sty $d017
  1110 2991 8E 17 D0		 stx $d017
  1111 2994 EA			 nop
  1112 2995 A9 00		 lda #$00
  1113 2997 8D 1E D0		 sta $d01e
  1114 299A A9 00		 lda #$00
  1115 299C 8D 1E D0		 sta $d01e
  1116
  1117 				; line=156
  1118
  1119 299F 20 E5 EC		 jsr wait24cycle
  1120 29A2 A9 18		c109 lda #$18
  1121 29A4 8D 17 D0		 sta $d017
  1122 29A7 A0 78		c110 ldy #$78
  1123 29A9 A2 F8		c111 ldx #$F8
  1124 29AB EA EA		 :2 nop
  1125 29AD 8C 17 D0		 sty $d017
  1126 29B0 8E 17 D0		 stx $d017
  1127 29B3 EA			 nop
  1128 29B4 A9 00		 lda #$00
  1129 29B6 8D 1E D0		 sta $d01e
  1130 29B9 A9 00		 lda #$00
  1131 29BB 8D 1E D0		 sta $d01e
  1132
  1133 				; line=157
  1134
  1135 29BE 20 E5 EC		 jsr wait24cycle
  1136 29C1 A9 18		c112 lda #$18
  1137 29C3 8D 17 D0		 sta $d017
  1138 29C6 A0 78		c113 ldy #$78
  1139 29C8 A2 F8		c114 ldx #$F8
  1140 29CA EA EA		 :2 nop
  1141 29CC 8C 17 D0		 sty $d017
  1142 29CF 8E 17 D0		 stx $d017
  1143 29D2 EA			 nop
  1144 29D3 A9 00		 lda #$00
  1145 29D5 8D 1E D0		 sta $d01e
  1146 29D8 A9 00		 lda #$00
  1147 29DA 8D 1E D0		 sta $d01e
  1148
  1149 				; line=158
  1150
  1151 29DD 20 E5 EC		 jsr wait24cycle
  1152 29E0 A9 18		c115 lda #$18
  1153 29E2 8D 17 D0		 sta $d017
  1154 29E5 A0 78		c116 ldy #$78
  1155 29E7 A2 F8		c117 ldx #$F8
  1156 29E9 EA EA		 :2 nop
  1157 29EB 8C 17 D0		 sty $d017
  1158 29EE 8E 17 D0		 stx $d017
  1159 29F1 EA			 nop
  1160 29F2 A9 00		 lda #$00
  1161 29F4 8D 1E D0		 sta $d01e
  1162 29F7 A9 00		 lda #$00
  1163 29F9 8D 1E D0		 sta $d01e
  1164
  1165 				; line=159
  1166
  1167 29FC 20 E5 EC		 jsr wait24cycle
  1168 29FF A9 18		c118 lda #$18
  1169 2A01 8D 17 D0		 sta $d017
  1170 2A04 A0 78		c119 ldy #$78
  1171 2A06 A2 F8		c120 ldx #$F8
  1172 2A08 EA EA		 :2 nop
  1173 2A0A 8C 17 D0		 sty $d017
  1174 2A0D 8E 17 D0		 stx $d017
  1175 2A10 EA			 nop
  1176 2A11 A9 00		 lda #$00
  1177 2A13 8D 1E D0		 sta $d01e
  1178 2A16 A9 00		 lda #$00
  1179 2A18 8D 1E D0		 sta $d01e
  1180
  1181 				; line=160
  1182
  1183 2A1B A9 44		 lda #$44
  1184 2A1D A2 18		c25 ldx #$18
  1185 2A1F A0 00		 ldy #$00
  1186 2A21 8D 01 D0		 sta Player1_PositionX
  1187 2A24 8E 13 D0		 stx Player1_Missile1_Color1_PM1
  1188 2A27 8C 1E D0		 sty $d01e
  1189 2A2A A9 00		 lda #$00
  1190 2A2C 8D 1E D0		 sta $d01e
  1191 2A2F C5 00		 cmp $00
  1192
  1193 				; line=161
  1194
  1195 2A31 A9 5B		 lda #$5B
  1196 2A33 A2 78		c26 ldx #$78
  1197 2A35 A0 00		 ldy #$00
  1198 2A37 8D 01 D0		 sta Player1_PositionX
  1199 2A3A 8E 13 D0		 stx Player1_Missile1_Color1_PM1
  1200 2A3D 8C 1E D0		 sty $d01e
  1201 2A40 A9 00		 lda #$00
  1202 2A42 8D 1E D0		 sta $d01e
  1203 2A45 A9 18		c121 lda #$18
  1204 2A47 8D 17 D0		 sta $d017
  1205 2A4A A0 78		c122 ldy #$78
  1206 2A4C A2 F8		c123 ldx #$F8
  1207 2A4E EA EA		 :2 nop
  1208 2A50 8C 17 D0		 sty $d017
  1209 2A53 8E 17 D0		 stx $d017
  1210 2A56 EA			 nop
  1211 2A57 A9 00		 lda #$00
  1212 2A59 8D 1E D0		 sta $d01e
  1213 2A5C A9 00		 lda #$00
  1214 2A5E 8D 1E D0		 sta $d01e
  1215
  1216 				; line=162
  1217
  1218 2A61 20 E5 EC		 jsr wait24cycle
  1219 2A64 A9 18		c124 lda #$18
  1220 2A66 8D 17 D0		 sta $d017
  1221 2A69 A0 78		c125 ldy #$78
  1222 2A6B A2 F8		c126 ldx #$F8
  1223 2A6D EA EA		 :2 nop
  1224 2A6F 8C 17 D0		 sty $d017
  1225 2A72 8E 17 D0		 stx $d017
  1226 2A75 EA			 nop
  1227 2A76 A9 00		 lda #$00
  1228 2A78 8D 1E D0		 sta $d01e
  1229 2A7B A9 00		 lda #$00
  1230 2A7D 8D 1E D0		 sta $d01e
  1231
  1232 				; line=163
  1233
  1234 2A80 20 E5 EC		 jsr wait24cycle
  1235 2A83 A9 18		c127 lda #$18
  1236 2A85 8D 17 D0		 sta $d017
  1237 2A88 A0 78		c128 ldy #$78
  1238 2A8A A2 F8		c129 ldx #$F8
  1239 2A8C EA EA		 :2 nop
  1240 2A8E 8C 17 D0		 sty $d017
  1241 2A91 8E 17 D0		 stx $d017
  1242 2A94 EA			 nop
  1243 2A95 A9 00		 lda #$00
  1244 2A97 8D 1E D0		 sta $d01e
  1245 2A9A A9 00		 lda #$00
  1246 2A9C 8D 1E D0		 sta $d01e
  1247
  1248 				; line=164
  1249
  1250 2A9F 20 E5 EC		 jsr wait24cycle
  1251 2AA2 A9 18		c130 lda #$18
  1252 2AA4 8D 17 D0		 sta $d017
  1253 2AA7 A0 78		c131 ldy #$78
  1254 2AA9 A2 F8		c132 ldx #$F8
  1255 2AAB EA EA		 :2 nop
  1256 2AAD 8C 17 D0		 sty $d017
  1257 2AB0 8E 17 D0		 stx $d017
  1258 2AB3 EA			 nop
  1259 2AB4 A9 00		 lda #$00
  1260 2AB6 8D 1E D0		 sta $d01e
  1261 2AB9 A9 00		 lda #$00
  1262 2ABB 8D 1E D0		 sta $d01e
  1263
  1264 				; line=165
  1265
  1266 2ABE 20 E5 EC		 jsr wait24cycle
  1267 2AC1 A9 18		c133 lda #$18
  1268 2AC3 8D 17 D0		 sta $d017
  1269 2AC6 A0 78		c134 ldy #$78
  1270 2AC8 A2 F8		c135 ldx #$F8
  1271 2ACA EA EA		 :2 nop
  1272 2ACC 8C 17 D0		 sty $d017
  1273 2ACF 8E 17 D0		 stx $d017
  1274 2AD2 EA			 nop
  1275 2AD3 A9 00		 lda #$00
  1276 2AD5 8D 1E D0		 sta $d01e
  1277 2AD8 A9 00		 lda #$00
  1278 2ADA 8D 1E D0		 sta $d01e
  1279
  1280 				; line=166
  1281
  1282 2ADD 20 E5 EC		 jsr wait24cycle
  1283 2AE0 A9 18		c136 lda #$18
  1284 2AE2 8D 17 D0		 sta $d017
  1285 2AE5 A0 78		c137 ldy #$78
  1286 2AE7 A2 F8		c138 ldx #$F8
  1287 2AE9 EA EA		 :2 nop
  1288 2AEB 8C 17 D0		 sty $d017
  1289 2AEE 8E 17 D0		 stx $d017
  1290 2AF1 EA			 nop
  1291 2AF2 A9 00		 lda #$00
  1292 2AF4 8D 1E D0		 sta $d01e
  1293 2AF7 A9 00		 lda #$00
  1294 2AF9 8D 1E D0		 sta $d01e
  1295
  1296 				; line=167
  1297
  1298 2AFC 20 E5 EC		 jsr wait24cycle
  1299 2AFF A9 18		c139 lda #$18
  1300 2B01 8D 17 D0		 sta $d017
  1301 2B04 A0 78		c140 ldy #$78
  1302 2B06 A2 F8		c141 ldx #$F8
  1303 2B08 EA EA		 :2 nop
  1304 2B0A 8C 17 D0		 sty $d017
  1305 2B0D 8E 17 D0		 stx $d017
  1306 2B10 EA			 nop
  1307 2B11 A9 00		 lda #$00
  1308 2B13 8D 1E D0		 sta $d01e
  1309 2B16 A9 00		 lda #$00
  1310 2B18 8D 1E D0		 sta $d01e
  1311
  1312 				; line=168
  1313
  1314 2B1B A9 42		 lda #$42
  1315 2B1D A2 18		c27 ldx #$18
  1316 2B1F A0 00		 ldy #$00
  1317 2B21 8D 01 D0		 sta Player1_PositionX
  1318 2B24 8E 13 D0		 stx Player1_Missile1_Color1_PM1
  1319 2B27 8C 1E D0		 sty $d01e
  1320 2B2A A9 00		 lda #$00
  1321 2B2C 8D 1E D0		 sta $d01e
  1322 2B2F C5 00		 cmp $00
  1323
  1324 				; line=169
  1325
  1326 2B31 A9 5B		 lda #$5B
  1327 2B33 A2 78		c28 ldx #$78
  1328 2B35 A0 00		 ldy #$00
  1329 2B37 8D 01 D0		 sta Player1_PositionX
  1330 2B3A 8E 13 D0		 stx Player1_Missile1_Color1_PM1
  1331 2B3D 8C 1E D0		 sty $d01e
  1332 2B40 A9 00		 lda #$00
  1333 2B42 8D 1E D0		 sta $d01e
  1334 2B45 A9 18		c142 lda #$18
  1335 2B47 8D 17 D0		 sta $d017
  1336 2B4A A0 78		c143 ldy #$78
  1337 2B4C A2 F8		c144 ldx #$F8
  1338 2B4E EA EA		 :2 nop
  1339 2B50 8C 17 D0		 sty $d017
  1340 2B53 8E 17 D0		 stx $d017
  1341 2B56 EA			 nop
  1342 2B57 A9 00		 lda #$00
  1343 2B59 8D 1E D0		 sta $d01e
  1344 2B5C A9 00		 lda #$00
  1345 2B5E 8D 1E D0		 sta $d01e
  1346
  1347 				; line=170
  1348
  1349 2B61 20 E5 EC		 jsr wait24cycle
  1350 2B64 A9 18		c145 lda #$18
  1351 2B66 8D 17 D0		 sta $d017
  1352 2B69 A0 78		c146 ldy #$78
  1353 2B6B A2 F8		c147 ldx #$F8
  1354 2B6D EA EA		 :2 nop
  1355 2B6F 8C 17 D0		 sty $d017
  1356 2B72 8E 17 D0		 stx $d017
  1357 2B75 EA			 nop
  1358 2B76 A9 00		 lda #$00
  1359 2B78 8D 1E D0		 sta $d01e
  1360 2B7B A9 00		 lda #$00
  1361 2B7D 8D 1E D0		 sta $d01e
  1362
  1363 				; line=171
  1364
  1365 2B80 20 E5 EC		 jsr wait24cycle
  1366 2B83 A9 18		c148 lda #$18
  1367 2B85 8D 17 D0		 sta $d017
  1368 2B88 A0 78		c149 ldy #$78
  1369 2B8A A2 F8		c150 ldx #$F8
  1370 2B8C EA EA		 :2 nop
  1371 2B8E 8C 17 D0		 sty $d017
  1372 2B91 8E 17 D0		 stx $d017
  1373 2B94 EA			 nop
  1374 2B95 A9 00		 lda #$00
  1375 2B97 8D 1E D0		 sta $d01e
  1376 2B9A A9 00		 lda #$00
  1377 2B9C 8D 1E D0		 sta $d01e
  1378
  1379 				; line=172
  1380
  1381 2B9F 20 E5 EC		 jsr wait24cycle
  1382 2BA2 A9 18		c151 lda #$18
  1383 2BA4 8D 17 D0		 sta $d017
  1384 2BA7 A0 78		c152 ldy #$78
  1385 2BA9 A2 F8		c153 ldx #$F8
  1386 2BAB EA EA		 :2 nop
  1387 2BAD 8C 17 D0		 sty $d017
  1388 2BB0 8E 17 D0		 stx $d017
  1389 				; nop
  1390 				; lda #$00
  1391 				; sta $d01e
  1392 				; lda #$00
  1393 				; sta $d01e
  1394
  1395 				; line=173
  1396 				; jsr wait60cycle
  1397
  1398 				; line=174
  1399 				; jsr wait60cycle
  1400
  1401 				; line=175
  1402 				; jsr wait60cycle
  1403
  1404 2BB3			 dli_quit dli1_176
Macro: DLI_QUIT [Source: d:\Download\getris\getris2.asm]
     5 2BB3 A9 C0 8D EA EB A9 +    mwa #DLI1_176 nmi.vdli
     8 2BBD 4C BB EC		  jmp nmi.quit
    10 = 2BC0			  .def ?old_dli
Source: d:\Download\getris\ekran1.asm
  1405
  1406
  1407
  1408 2BC0			dli1_176
  1409 				; line=176
  1410
  1411 2BC0 A9 90		 lda >fnt+$400*$04
  1412 2BC2 A2 00		 ldx #$00
  1413 2BC4 A0 00		 ldy #$00
  1414 2BC6 8D 0A D4		 sta $d40a
  1415 2BC9 8D 09 D4		 sta CHARBASE
  1416 2BCC 8E 1E D0		 stx $d01e
  1417 2BCF 8C 1E D0		 sty $d01e
  1418 2BD2 A9 00		 lda #$00
  1419 				; sta $d01e
  1420 2BD4 C5 00		 cmp $00
  1421
  1422 				; line=177
  1423
  1424 2BD6 A9 B0		 lda #$B0
  1425 2BD8 A2 B9		 ldx #$B9
  1426 2BDA A0 0A		c29 ldy #$0A
  1427 2BDC 8D 01 D0		 sta Player1_PositionX
  1428 2BDF 8E 05 D0		 stx Missile1_PositionX
  1429 2BE2 8C 13 D0		 sty Player1_Missile1_Color1_PM1
  1430 2BE5 A9 00		 lda #$00
  1431 2BE7 8D 1E D0		 sta $d01e
  1432 2BEA 20 E2 EC		 jsr wait36cycle
  1433
  1434 				; line=178
  1435
  1436 2BED 20 D8 EC		 jsr wait60cycle
  1437
  1438 				; line=179
  1439
  1440 2BF0 20 D8 EC		 jsr wait60cycle
  1441
  1442 				; line=180
  1443
  1444 2BF3 20 D8 EC		 jsr wait60cycle
  1445
  1446 				; line=181
  1447
  1448 2BF6 20 D8 EC		 jsr wait60cycle
  1449
  1450 				; line=182
  1451
  1452 2BF9 A9 B2		 lda #$B2
  1453 2BFB A2 4E		 ldx #$4E
  1454 2BFD A0 54		c30 ldy #$54
  1455 2BFF 8D 01 D0		 sta Player1_PositionX
  1456 2C02 8E 05 D0		 stx Missile1_PositionX
  1457 2C05 8C 13 D0		 sty Player1_Missile1_Color1_PM1
  1458 				; lda #$00
  1459 				; sta $d01e
  1460 				; jsr wait36cycle
  1461
  1462 				; line=183
  1463 				; jsr wait60cycle
  1464
  1465 2C08			 dli_quit dli1_184
Macro: DLI_QUIT [Source: d:\Download\getris\getris2.asm]
     5 2C08 A9 15 8D EA EB A9 +    mwa #DLI1_184 nmi.vdli
     8 2C12 4C BB EC		  jmp nmi.quit
    10 = 2C15			  .def ?old_dli
Source: d:\Download\getris\ekran1.asm
  1466
  1467
  1468
  1469 2C15			dli1_184
  1470
  1471 				; line=184
  1472
  1473 2C15 A9 43		 lda #$43
  1474 2C17 A2 00		 ldx #$00
  1475 2C19 A0 00		 ldy #$00
  1476 2C1B 8D 0A D4		 sta $d40a
  1477 2C1E 8D 01 D0		 sta Player1_PositionX
  1478 2C21 8E 1E D0		 stx $d01e
  1479 2C24 8C 1E D0		 sty $d01e
  1480 2C27 A9 00		 lda #$00
  1481 				; sta $d01e
  1482 2C29 C5 00		 cmp $00
  1483
  1484 				; line=185
  1485
  1486 2C2B 20 D8 EC		 jsr wait60cycle
  1487
  1488 				; line=186
  1489
  1490 2C2E A9 44		 lda #$44
  1491 2C30 A2 00		 ldx #$00
  1492 2C32 A0 00		 ldy #$00
  1493 2C34 8D 05 D0		 sta Missile1_PositionX
  1494 2C37 8E 1E D0		 stx $d01e
  1495 2C3A 8C 1E D0		 sty $d01e
  1496 2C3D A9 00		 lda #$00
  1497 2C3F 8D 1E D0		 sta $d01e
  1498 2C42 20 E2 EC		 jsr wait36cycle
  1499
  1500 				; line=187
  1501
  1502 2C45 20 E5 EC		 jsr wait24cycle
  1503 2C48 A9 18		c154 lda #$18
  1504 2C4A 8D 17 D0		 sta $d017
  1505 2C4D A0 78		c155 ldy #$78
  1506 2C4F A2 F8		c156 ldx #$F8
  1507 2C51 EA EA		 :2 nop
  1508 2C53 8C 17 D0		 sty $d017
  1509 2C56 8E 17 D0		 stx $d017
  1510 2C59 EA			 nop
  1511 2C5A A9 00		 lda #$00
  1512 2C5C 8D 1E D0		 sta $d01e
  1513 2C5F A9 00		 lda #$00
  1514 2C61 8D 1E D0		 sta $d01e
  1515
  1516 				; line=188
  1517
  1518 2C64 A9 B2		 lda #$B2
  1519 2C66 A2 00		 ldx #$00
  1520 2C68 A0 00		 ldy #$00
  1521 2C6A 8D 01 D0		 sta Player1_PositionX
  1522 2C6D 8E 1E D0		 stx $d01e
  1523 2C70 8C 1E D0		 sty $d01e
  1524 2C73 A9 00		 lda #$00
  1525 2C75 8D 1E D0		 sta $d01e
  1526 2C78 A9 18		c157 lda #$18
  1527 2C7A 8D 17 D0		 sta $d017
  1528 2C7D A0 78		c158 ldy #$78
  1529 2C7F A2 F8		c159 ldx #$F8
  1530 2C81 EA EA		 :2 nop
  1531 2C83 8C 17 D0		 sty $d017
  1532 2C86 8E 17 D0		 stx $d017
  1533 2C89 EA			 nop
  1534 2C8A A9 00		 lda #$00
  1535 2C8C 8D 1E D0		 sta $d01e
  1536 2C8F A9 00		 lda #$00
  1537 2C91 8D 1E D0		 sta $d01e
  1538
  1539 				; line=189
  1540
  1541 2C94 20 E5 EC		 jsr wait24cycle
  1542 2C97 A9 18		c160 lda #$18
  1543 2C99 8D 17 D0		 sta $d017
  1544 2C9C A0 78		c161 ldy #$78
  1545 2C9E A2 F8		c162 ldx #$F8
  1546 2CA0 EA EA		 :2 nop
  1547 2CA2 8C 17 D0		 sty $d017
  1548 2CA5 8E 17 D0		 stx $d017
  1549 2CA8 EA			 nop
  1550 2CA9 A9 00		 lda #$00
  1551 2CAB 8D 1E D0		 sta $d01e
  1552 2CAE A9 00		 lda #$00
  1553 2CB0 8D 1E D0		 sta $d01e
  1554
  1555 				; line=190
  1556
  1557 2CB3 A9 4E		 lda #$4E
  1558 2CB5 A2 00		 ldx #$00
  1559 2CB7 A0 00		 ldy #$00
  1560 2CB9 8D 05 D0		 sta Missile1_PositionX
  1561 2CBC 8E 1E D0		 stx $d01e
  1562 2CBF 8C 1E D0		 sty $d01e
  1563 2CC2 A9 00		 lda #$00
  1564 2CC4 8D 1E D0		 sta $d01e
  1565 2CC7 A9 18		c163 lda #$18
  1566 2CC9 8D 17 D0		 sta $d017
  1567 2CCC A0 78		c164 ldy #$78
  1568 2CCE A2 F8		c165 ldx #$F8
  1569 2CD0 EA EA		 :2 nop
  1570 2CD2 8C 17 D0		 sty $d017
  1571 2CD5 8E 17 D0		 stx $d017
  1572 2CD8 EA			 nop
  1573 2CD9 A9 00		 lda #$00
  1574 2CDB 8D 1E D0		 sta $d01e
  1575 2CDE A9 00		 lda #$00
  1576 2CE0 8D 1E D0		 sta $d01e
  1577
  1578 				; line=191
  1579
  1580 2CE3 20 E5 EC		 jsr wait24cycle
  1581 2CE6 A9 18		c166 lda #$18
  1582 2CE8 8D 17 D0		 sta $d017
  1583 2CEB A0 78		c167 ldy #$78
  1584 2CED A2 F8		c168 ldx #$F8
  1585 2CEF EA EA		 :2 nop
  1586 2CF1 8C 17 D0		 sty $d017
  1587 2CF4 8E 17 D0		 stx $d017
  1588 2CF7 EA			 nop
  1589 2CF8 A9 00		 lda #$00
  1590 2CFA 8D 1E D0		 sta $d01e
  1591 2CFD A9 00		 lda #$00
  1592 2CFF 8D 1E D0		 sta $d01e
  1593
  1594 				; line=192
  1595
  1596 2D02 A9 43		 lda #$43
  1597 2D04 A2 18		c31 ldx #$18
  1598 2D06 A0 00		 ldy #$00
  1599 2D08 8D 01 D0		 sta Player1_PositionX
  1600 2D0B 8E 13 D0		 stx Player1_Missile1_Color1_PM1
  1601 2D0E 8C 1E D0		 sty $d01e
  1602 2D11 A9 00		 lda #$00
  1603 2D13 8D 1E D0		 sta $d01e
  1604 2D16 C5 00		 cmp $00
  1605
  1606 				; line=193
  1607
  1608 2D18 20 E5 EC		 jsr wait24cycle
  1609 2D1B A9 18		c169 lda #$18
  1610 2D1D 8D 17 D0		 sta $d017
  1611 2D20 A0 78		c170 ldy #$78
  1612 2D22 A2 F8		c171 ldx #$F8
  1613 2D24 EA EA		 :2 nop
  1614 2D26 8C 17 D0		 sty $d017
  1615 2D29 8E 17 D0		 stx $d017
  1616 2D2C EA			 nop
  1617 2D2D A9 00		 lda #$00
  1618 2D2F 8D 1E D0		 sta $d01e
  1619 2D32 A9 00		 lda #$00
  1620 2D34 8D 1E D0		 sta $d01e
  1621
  1622 				; line=194
  1623
  1624 2D37 A9 4B		 lda #$4B
  1625 2D39 A2 54		c32 ldx #$54
  1626 2D3B A0 00		 ldy #$00
  1627 2D3D 8D 05 D0		 sta Missile1_PositionX
  1628 2D40 8E 13 D0		 stx Player1_Missile1_Color1_PM1
  1629 2D43 8C 1E D0		 sty $d01e
  1630 2D46 A9 00		 lda #$00
  1631 2D48 8D 1E D0		 sta $d01e
  1632 2D4B A9 18		c172 lda #$18
  1633 2D4D 8D 17 D0		 sta $d017
  1634 2D50 A0 78		c173 ldy #$78
  1635 2D52 A2 F8		c174 ldx #$F8
  1636 2D54 EA EA		 :2 nop
  1637 2D56 8C 17 D0		 sty $d017
  1638 2D59 8E 17 D0		 stx $d017
  1639 2D5C EA			 nop
  1640 2D5D A9 00		 lda #$00
  1641 2D5F 8D 1E D0		 sta $d01e
  1642 2D62 A9 00		 lda #$00
  1643 2D64 8D 1E D0		 sta $d01e
  1644
  1645 				; line=195
  1646
  1647 2D67 A9 57		 lda #$57
  1648 2D69 A2 78		c33 ldx #$78
  1649 2D6B A0 00		 ldy #$00
  1650 2D6D 8D 01 D0		 sta Player1_PositionX
  1651 2D70 8E 13 D0		 stx Player1_Missile1_Color1_PM1
  1652 2D73 8C 1E D0		 sty $d01e
  1653 2D76 A9 00		 lda #$00
  1654 2D78 8D 1E D0		 sta $d01e
  1655 2D7B A9 18		c175 lda #$18
  1656 2D7D 8D 17 D0		 sta $d017
  1657 2D80 A0 78		c176 ldy #$78
  1658 2D82 A2 F8		c177 ldx #$F8
  1659 2D84 EA EA		 :2 nop
  1660 2D86 8C 17 D0		 sty $d017
  1661 2D89 8E 17 D0		 stx $d017
  1662 2D8C EA			 nop
  1663 2D8D A9 00		 lda #$00
  1664 2D8F 8D 1E D0		 sta $d01e
  1665 2D92 A9 00		 lda #$00
  1666 2D94 8D 1E D0		 sta $d01e
  1667
  1668 				; line=196
  1669
  1670 2D97 A9 18		c34 lda #$18
  1671 2D99 A2 00		 ldx #$00
  1672 2D9B A0 00		 ldy #$00
  1673 2D9D 8D 17 D0		 sta Playfield_Color1_PF1
  1674 2DA0 8E 1E D0		 stx $d01e
  1675 2DA3 8C 1E D0		 sty $d01e
  1676 2DA6 A9 00		 lda #$00
  1677 2DA8 8D 1E D0		 sta $d01e
  1678 2DAB A9 18		c178 lda #$18
  1679 2DAD 8D 17 D0		 sta $d017
  1680 2DB0 A0 78		c179 ldy #$78
  1681 2DB2 A2 18		c180 ldx #$18
  1682 2DB4 EA EA		 :2 nop
  1683 2DB6 8C 17 D0		 sty $d017
  1684 2DB9 8E 17 D0		 stx $d017
  1685 2DBC EA			 nop
  1686 2DBD A9 00		 lda #$00
  1687 2DBF 8D 1E D0		 sta $d01e
  1688 2DC2 A9 00		 lda #$00
  1689 2DC4 8D 1E D0		 sta $d01e
  1690
  1691 				; line=197
  1692
  1693 2DC7 A9 57		 lda #$57
  1694 2DC9 A2 00		 ldx #$00
  1695 2DCB A0 00		 ldy #$00
  1696 2DCD 8D 05 D0		 sta Missile1_PositionX
  1697 2DD0 8E 1E D0		 stx $d01e
  1698 2DD3 8C 1E D0		 sty $d01e
  1699 2DD6 A9 00		 lda #$00
  1700 2DD8 8D 1E D0		 sta $d01e
  1701 2DDB 20 E2 EC		 jsr wait36cycle
  1702
  1703 				; line=198
  1704
  1705 2DDE A9 01		 lda #$01
  1706 2DE0 A2 30		 ldx #$30
  1707 2DE2 A0 00		 ldy #$00
  1708 2DE4 8D 09 D0		 sta Player1_Size
  1709 2DE7 8E 01 D0		 stx Player1_PositionX
  1710 2DEA 8C 1E D0		 sty $d01e
  1711 2DED A9 00		 lda #$00
  1712 2DEF 8D 1E D0		 sta $d01e
  1713 2DF2 20 E2 EC		 jsr wait36cycle
  1714
  1715 				; line=199
  1716
  1717 2DF5 20 D8 EC		 jsr wait60cycle
  1718
  1719 				; line=200
  1720
  1721 2DF8 20 E5 EC		 jsr wait24cycle
  1722 2DFB C5 00		 cmp $00
  1723
  1724 				; line=201
  1725
  1726 2DFD 20 D8 EC		 jsr wait60cycle
  1727
  1728 				; line=202
  1729
  1730 2E00 20 D8 EC		 jsr wait60cycle
  1731
  1732 				; line=203
  1733
  1734 2E03 20 D8 EC		 jsr wait60cycle
  1735
  1736 				; line=204
  1737
  1738 2E06 20 D8 EC		 jsr wait60cycle
  1739
  1740 				; line=205
  1741
  1742 2E09 20 D8 EC		 jsr wait60cycle
  1743
  1744 				; line=206
  1745
  1746 2E0C 20 D8 EC		 jsr wait60cycle
  1747
  1748 				; line=207
  1749
  1750 2E0F 20 D8 EC		 jsr wait60cycle
  1751
  1752 				; line=208
  1753
  1754 2E12 A9 94		 lda >fnt+$400*$05
  1755 2E14 A2 00		 ldx #$00
  1756 2E16 A0 37		 ldy #$37
  1757 2E18 8D 09 D4		 sta CHARBASE
  1758 2E1B 8E 09 D0		 stx Player1_Size
  1759 2E1E 8C 01 D0		 sty Player1_PositionX
  1760 2E21 A9 48		c35 lda #$48
  1761 2E23 8D 14 D0		 sta Player2_Missile2_Color2_PM2
  1762 2E26 C5 00		 cmp $00
  1763
  1764 				; line=209
  1765
  1766 2E28 A9 34		c36 lda #$34
  1767 2E2A A2 00		 ldx #$00
  1768 2E2C A0 00		 ldy #$00
  1769 2E2E 8D 17 D0		 sta Playfield_Color1_PF1
  1770 2E31 8E 1E D0		 stx $d01e
  1771 2E34 8C 1E D0		 sty $d01e
  1772 2E37 A9 00		 lda #$00
  1773 2E39 8D 1E D0		 sta $d01e
  1774 2E3C 20 E2 EC		 jsr wait36cycle
  1775
  1776 				; line=210
  1777
  1778 2E3F A9 3F		 lda #$3F
  1779 2E41 A2 00		 ldx #$00
  1780 2E43 A0 00		 ldy #$00
  1781 2E45 8D 01 D0		 sta Player1_PositionX
  1782 2E48 8E 1E D0		 stx $d01e
  1783 2E4B 8C 1E D0		 sty $d01e
  1784 2E4E A9 00		 lda #$00
  1785 2E50 8D 1E D0		 sta $d01e
  1786 2E53 20 E2 EC		 jsr wait36cycle
  1787
  1788 				; line=211
  1789
  1790 2E56 20 D8 EC		 jsr wait60cycle
  1791
  1792 				; line=212
  1793
  1794 2E59 20 D8 EC		 jsr wait60cycle
  1795
  1796 				; line=213
  1797
  1798 2E5C 20 D8 EC		 jsr wait60cycle
  1799
  1800 				; line=214
  1801
  1802 2E5F 20 D8 EC		 jsr wait60cycle
  1803
  1804 				; line=215
  1805
  1806 2E62 20 D8 EC		 jsr wait60cycle
  1807
  1808 				; line=216
  1809
  1810 2E65 A9 28		c37 lda #$28
  1811 2E67 A2 3A		c38 ldx #$3A
  1812 2E69 A0 14		c39 ldy #$14
  1813 2E6B 8D 16 D0		 sta Playfield_Color0_PF0
  1814 2E6E 8E 18 D0		 stx Playfield_Color2_PF2
  1815 2E71 8C 13 D0		 sty Player1_Missile1_Color1_PM1
  1816 				; lda #$00
  1817 				; sta $d01e
  1818 				; cmp $00
  1819 				 
  1820 				; jsr wait60cycle
  1821 				 
  1822 2E74			 dli_quit ekran2.dli
Macro: DLI_QUIT [Source: d:\Download\getris\getris2.asm]
     5 2E74 A9 81 8D EA EB A9 +    mwa #EKRAN2.DLI nmi.vdli
     8 2E7E 4C BB EC		  jmp nmi.quit
    10 = 2E81			  .def ?old_dli
Source: d:\Download\getris\ekran1.asm
  1823
  1824 				;-- tutaj nasze tablice (pliki) z programu Graph2Font
  1825
  1826 = B028			text equ text1
  1827 = 8000			fnt  equ fnt1
  1296 				.endl
  1297
  1298 2E81			.local ekran2
  1299 2E81			 icl 'ekran2.asm'
Source: d:\Download\getris\ekran2.asm
     1
     2 = 2E81			  ?old_dli = *
     3
     4 2E81			dli
     5 2E81 CD FF FF CD FF FF +  :5 cmp $ffff
     6 2E90 EE E9 EC		 inc raster
     7
     8 2E93 A9 98		 lda >fnt+$400*$00
     9 				; ldx #$00
    10 				; ldy #$00
    11 2E95 8D 0A D4		 sta $d40a
    12 2E98 8D 09 D4		 sta CHARBASE
    13 2E9B A9 08		c0 lda #$08
    14 2E9D 8D 14 D0		 sta Player2_Missile2_Color2_PM2
    15 2EA0 8D 15 D0		 sta Player3_Missile3_Color3_PM3
    16 				; sta $d01e
    17 2EA3 C5 00		 cmp $00
    18
    19 				; line=9
    20
    21 2EA5 A9 4E		 lda #$4E
    22 2EA7 A2 00		 ldx #$00
    23 2EA9 A0 00		 ldy #$00
    24 2EAB 8D 05 D0		 sta Missile1_PositionX
    25 2EAE 8E 1E D0		 stx $d01e
    26 2EB1 8C 1E D0		 sty $d01e
    27 2EB4 A9 00		 lda #$00
    28 2EB6 8D 1E D0		 sta $d01e
    29 2EB9 20 E2 EC		 jsr wait36cycle
    30
    31 				; line=10
    32
    33 2EBC 20 E5 EC		 jsr wait24cycle
    34 2EBF A9 78		c44 lda #$78
    35 2EC1 8D 17 D0		 sta $d017
    36 2EC4 A2 18		c45 ldx #$18
    37 2EC6 8E 17 D0		 stx $d017
    38 2EC9 8D 17 D0		 sta $d017
    39 2ECC EA			 nop
    40 2ECD A9 00		 lda #$00
    41 2ECF 8D 1E D0		 sta $d01e
    42 2ED2 A9 00		 lda #$00
    43 2ED4 8D 1E D0		 sta $d01e
    44 2ED7 A9 00		 lda #$00
    45 2ED9 8D 1E D0		 sta $d01e
    46
    47 				; line=11
    48
    49 2EDC A9 36		 lda #$36
    50 2EDE A2 78		c9 ldx #$78
    51 2EE0 A0 00		 ldy #$00
    52 2EE2 8D 01 D0		 sta Player1_PositionX
    53 2EE5 8E 13 D0		 stx Player1_Missile1_Color1_PM1
    54 2EE8 8C 1E D0		 sty $d01e
    55 2EEB A9 00		 lda #$00
    56 2EED 8D 1E D0		 sta $d01e
    57 2EF0 A9 78		c46 lda #$78
    58 2EF2 8D 17 D0		 sta $d017
    59 2EF5 A2 18		c47 ldx #$18
    60 2EF7 8E 17 D0		 stx $d017
    61 2EFA 8D 17 D0		 sta $d017
    62 2EFD EA			 nop
    63 2EFE A9 00		 lda #$00
    64 2F00 8D 1E D0		 sta $d01e
    65 2F03 A9 00		 lda #$00
    66 2F05 8D 1E D0		 sta $d01e
    67 2F08 A9 00		 lda #$00
    68 2F0A 8D 1E D0		 sta $d01e
    69
    70 				; line=12
    71
    72 2F0D 20 E5 EC		 jsr wait24cycle
    73 2F10 A9 78		c48 lda #$78
    74 2F12 8D 17 D0		 sta $d017
    75 2F15 A2 18		c49 ldx #$18
    76 2F17 8E 17 D0		 stx $d017
    77 2F1A 8D 17 D0		 sta $d017
    78 2F1D EA			 nop
    79 2F1E A9 00		 lda #$00
    80 2F20 8D 1E D0		 sta $d01e
    81 2F23 A9 00		 lda #$00
    82 2F25 8D 1E D0		 sta $d01e
    83 2F28 A9 00		 lda #$00
    84 2F2A 8D 1E D0		 sta $d01e
    85
    86 				; line=13
    87
    88 2F2D 20 E5 EC		 jsr wait24cycle
    89 2F30 A9 78		c50 lda #$78
    90 2F32 8D 17 D0		 sta $d017
    91 2F35 A2 18		c51 ldx #$18
    92 2F37 8E 17 D0		 stx $d017
    93 2F3A 8D 17 D0		 sta $d017
    94 2F3D EA			 nop
    95 2F3E A9 00		 lda #$00
    96 2F40 8D 1E D0		 sta $d01e
    97 2F43 A9 00		 lda #$00
    98 2F45 8D 1E D0		 sta $d01e
    99 2F48 A9 00		 lda #$00
   100 2F4A 8D 1E D0		 sta $d01e
   101
   102 				; line=14
   103
   104 2F4D A9 44		 lda #$44
   105 2F4F A2 54		c10 ldx #$54
   106 2F51 A0 00		 ldy #$00
   107 2F53 8D 01 D0		 sta Player1_PositionX
   108 2F56 8E 13 D0		 stx Player1_Missile1_Color1_PM1
   109 2F59 8C 1E D0		 sty $d01e
   110 2F5C A9 00		 lda #$00
   111 2F5E 8D 1E D0		 sta $d01e
   112 2F61 A9 78		c52 lda #$78
   113 2F63 8D 17 D0		 sta $d017
   114 2F66 A2 18		c53 ldx #$18
   115 2F68 8E 17 D0		 stx $d017
   116 2F6B 8D 17 D0		 sta $d017
   117 2F6E EA			 nop
   118 2F6F A9 00		 lda #$00
   119 2F71 8D 1E D0		 sta $d01e
   120 2F74 A9 00		 lda #$00
   121 2F76 8D 1E D0		 sta $d01e
   122 2F79 A9 00		 lda #$00
   123 2F7B 8D 1E D0		 sta $d01e
   124
   125 				; line=15
   126
   127 2F7E 20 E5 EC		 jsr wait24cycle
   128 2F81 A9 78		c54 lda #$78
   129 2F83 8D 17 D0		 sta $d017
   130 2F86 A2 18		c55 ldx #$18
   131 2F88 8E 17 D0		 stx $d017
   132 2F8B 8D 17 D0		 sta $d017
   133 2F8E EA			 nop
   134 2F8F A9 00		 lda #$00
   135 2F91 8D 1E D0		 sta $d01e
   136 2F94 A9 00		 lda #$00
   137 2F96 8D 1E D0		 sta $d01e
   138 2F99 A9 00		 lda #$00
   139 2F9B 8D 1E D0		 sta $d01e
   140
   141 				; line=16
   142
   143 2F9E A9 18		c11 lda #$18
   144 2FA0 A2 00		 ldx #$00
   145 2FA2 A0 00		 ldy #$00
   146 2FA4 8D 13 D0		 sta Player1_Missile1_Color1_PM1
   147 2FA7 8E 1E D0		 stx $d01e
   148 2FAA 8C 1E D0		 sty $d01e
   149 2FAD A9 00		 lda #$00
   150 2FAF 8D 1E D0		 sta $d01e
   151 2FB2 C5 00		 cmp $00
   152
   153 				; line=17
   154
   155 2FB4 20 E5 EC		 jsr wait24cycle
   156 2FB7 A9 78		c56 lda #$78
   157 2FB9 8D 17 D0		 sta $d017
   158 2FBC A2 18		c57 ldx #$18
   159 2FBE 8E 17 D0		 stx $d017
   160 2FC1 8D 17 D0		 sta $d017
   161 2FC4 EA			 nop
   162 2FC5 A9 00		 lda #$00
   163 2FC7 8D 1E D0		 sta $d01e
   164 2FCA A9 00		 lda #$00
   165 2FCC 8D 1E D0		 sta $d01e
   166 2FCF A9 00		 lda #$00
   167 2FD1 8D 1E D0		 sta $d01e
   168
   169 				; line=18
   170
   171 2FD4 20 E5 EC		 jsr wait24cycle
   172 2FD7 A9 78		c58 lda #$78
   173 2FD9 8D 17 D0		 sta $d017
   174 2FDC A2 18		c59 ldx #$18
   175 2FDE 8E 17 D0		 stx $d017
   176 2FE1 8D 17 D0		 sta $d017
   177 2FE4 EA			 nop
   178 2FE5 A9 00		 lda #$00
   179 2FE7 8D 1E D0		 sta $d01e
   180 2FEA A9 00		 lda #$00
   181 2FEC 8D 1E D0		 sta $d01e
   182 2FEF A9 00		 lda #$00
   183 2FF1 8D 1E D0		 sta $d01e
   184
   185 				; line=19
   186
   187 2FF4 20 E5 EC		 jsr wait24cycle
   188 2FF7 A9 78		c60 lda #$78
   189 2FF9 8D 17 D0		 sta $d017
   190 2FFC A2 18		c61 ldx #$18
   191 2FFE 8E 17 D0		 stx $d017
   192 3001 8D 17 D0		 sta $d017
   193 3004 EA			 nop
   194 3005 A9 00		 lda #$00
   195 3007 8D 1E D0		 sta $d01e
   196 300A A9 00		 lda #$00
   197 300C 8D 1E D0		 sta $d01e
   198 300F A9 00		 lda #$00
   199 3011 8D 1E D0		 sta $d01e
   200
   201 				; line=20
   202
   203 3014 A9 4C		 lda #$4C
   204 3016 A2 78		c12 ldx #$78
   205 3018 A0 00		 ldy #$00
   206 301A 8D 01 D0		 sta Player1_PositionX
   207 301D 8E 13 D0		 stx Player1_Missile1_Color1_PM1
   208 3020 8C 1E D0		 sty $d01e
   209 3023 A9 00		 lda #$00
   210 3025 8D 1E D0		 sta $d01e
   211 3028 A9 78		c62 lda #$78
   212 302A 8D 17 D0		 sta $d017
   213 302D A2 18		c63 ldx #$18
   214 302F 8E 17 D0		 stx $d017
   215 3032 8D 17 D0		 sta $d017
   216 3035 EA			 nop
   217 3036 A9 00		 lda #$00
   218 3038 8D 1E D0		 sta $d01e
   219 303B A9 00		 lda #$00
   220 303D 8D 1E D0		 sta $d01e
   221 3040 A9 00		 lda #$00
   222 3042 8D 1E D0		 sta $d01e
   223
   224 				; line=21
   225
   226 3045 20 E5 EC		 jsr wait24cycle
   227 3048 A9 78		c64 lda #$78
   228 304A 8D 17 D0		 sta $d017
   229 304D A2 18		c65 ldx #$18
   230 304F 8E 17 D0		 stx $d017
   231 3052 8D 17 D0		 sta $d017
   232 3055 EA			 nop
   233 3056 A9 00		 lda #$00
   234 3058 8D 1E D0		 sta $d01e
   235 305B A9 00		 lda #$00
   236 305D 8D 1E D0		 sta $d01e
   237 3060 A9 00		 lda #$00
   238 3062 8D 1E D0		 sta $d01e
   239
   240 				; line=22
   241
   242 3065 20 E5 EC		 jsr wait24cycle
   243 3068 A9 78		c66 lda #$78
   244 306A 8D 17 D0		 sta $d017
   245 306D A2 18		c67 ldx #$18
   246 306F 8E 17 D0		 stx $d017
   247 3072 8D 17 D0		 sta $d017
   248 3075 EA			 nop
   249 3076 A9 00		 lda #$00
   250 3078 8D 1E D0		 sta $d01e
   251 307B A9 00		 lda #$00
   252 307D 8D 1E D0		 sta $d01e
   253 3080 A9 00		 lda #$00
   254 3082 8D 1E D0		 sta $d01e
   255
   256 				; line=23
   257
   258 3085 20 E5 EC		 jsr wait24cycle
   259 3088 A9 78		c68 lda #$78
   260 308A 8D 17 D0		 sta $d017
   261 308D A2 18		c69 ldx #$18
   262 308F 8E 17 D0		 stx $d017
   263 3092 8D 17 D0		 sta $d017
   264 3095 EA			 nop
   265 3096 A9 00		 lda #$00
   266 3098 8D 1E D0		 sta $d01e
   267 309B A9 00		 lda #$00
   268 309D 8D 1E D0		 sta $d01e
   269 30A0 A9 00		 lda #$00
   270 30A2 8D 1E D0		 sta $d01e
   271
   272 				; line=24
   273
   274 30A5 A9 01		 lda #$01
   275 30A7 A2 42		 ldx #$42
   276 30A9 A0 18		c13 ldy #$18
   277 30AB 8D 09 D0		 sta Player1_Size
   278 30AE 8E 01 D0		 stx Player1_PositionX
   279 30B1 8C 13 D0		 sty Player1_Missile1_Color1_PM1
   280 30B4 A9 00		 lda #$00
   281 30B6 8D 1E D0		 sta $d01e
   282 30B9 C5 00		 cmp $00
   283
   284 				; line=25
   285
   286 30BB A9 00		 lda #$00
   287 30BD A2 44		 ldx #$44
   288 30BF A0 00		 ldy #$00
   289 30C1 8D 09 D0		 sta Player1_Size
   290 30C4 8E 01 D0		 stx Player1_PositionX
   291 30C7 8C 1E D0		 sty $d01e
   292 30CA A9 00		 lda #$00
   293 30CC 8D 1E D0		 sta $d01e
   294 30CF A9 78		c70 lda #$78
   295 30D1 8D 17 D0		 sta $d017
   296 30D4 A2 18		c71 ldx #$18
   297 30D6 8E 17 D0		 stx $d017
   298 30D9 8D 17 D0		 sta $d017
   299 30DC EA			 nop
   300 30DD A9 00		 lda #$00
   301 30DF 8D 1E D0		 sta $d01e
   302 30E2 A9 00		 lda #$00
   303 30E4 8D 1E D0		 sta $d01e
   304 30E7 A9 00		 lda #$00
   305 30E9 8D 1E D0		 sta $d01e
   306
   307 				; line=26
   308
   309 30EC 20 E5 EC		 jsr wait24cycle
   310 30EF A9 78		c72 lda #$78
   311 30F1 8D 17 D0		 sta $d017
   312 30F4 A2 18		c73 ldx #$18
   313 30F6 8E 17 D0		 stx $d017
   314 30F9 8D 17 D0		 sta $d017
   315 30FC EA			 nop
   316 30FD A9 00		 lda #$00
   317 30FF 8D 1E D0		 sta $d01e
   318 3102 A9 00		 lda #$00
   319 3104 8D 1E D0		 sta $d01e
   320 3107 A9 00		 lda #$00
   321 3109 8D 1E D0		 sta $d01e
   322
   323 				; line=27
   324
   325 310C 20 E5 EC		 jsr wait24cycle
   326 310F A9 78		c74 lda #$78
   327 3111 8D 17 D0		 sta $d017
   328 3114 A2 18		c75 ldx #$18
   329 3116 8E 17 D0		 stx $d017
   330 3119 8D 17 D0		 sta $d017
   331 311C EA			 nop
   332 311D A9 00		 lda #$00
   333 311F 8D 1E D0		 sta $d01e
   334 3122 A9 00		 lda #$00
   335 3124 8D 1E D0		 sta $d01e
   336 3127 A9 00		 lda #$00
   337 3129 8D 1E D0		 sta $d01e
   338
   339 				; line=28
   340
   341 312C 20 E5 EC		 jsr wait24cycle
   342 312F A9 78		c76 lda #$78
   343 3131 8D 17 D0		 sta $d017
   344 3134 A2 18		c77 ldx #$18
   345 3136 8E 17 D0		 stx $d017
   346 3139 8D 17 D0		 sta $d017
   347 313C EA			 nop
   348 313D A9 00		 lda #$00
   349 313F 8D 1E D0		 sta $d01e
   350 3142 A9 00		 lda #$00
   351 3144 8D 1E D0		 sta $d01e
   352 3147 A9 00		 lda #$00
   353 3149 8D 1E D0		 sta $d01e
   354
   355 				; line=29
   356
   357 314C 20 E5 EC		 jsr wait24cycle
   358 314F A9 78		c78 lda #$78
   359 3151 8D 17 D0		 sta $d017
   360 3154 A2 18		c79 ldx #$18
   361 3156 8E 17 D0		 stx $d017
   362 3159 8D 17 D0		 sta $d017
   363 315C EA			 nop
   364 315D A9 00		 lda #$00
   365 315F 8D 1E D0		 sta $d01e
   366 3162 A9 00		 lda #$00
   367 3164 8D 1E D0		 sta $d01e
   368 3167 A9 00		 lda #$00
   369 3169 8D 1E D0		 sta $d01e
   370
   371 				; line=30
   372
   373 316C 20 E5 EC		 jsr wait24cycle
   374 316F A9 78		c80 lda #$78
   375 3171 8D 17 D0		 sta $d017
   376 3174 A2 18		c81 ldx #$18
   377 3176 8E 17 D0		 stx $d017
   378 3179 8D 17 D0		 sta $d017
   379 317C EA			 nop
   380 317D A9 00		 lda #$00
   381 317F 8D 1E D0		 sta $d01e
   382 3182 A9 00		 lda #$00
   383 3184 8D 1E D0		 sta $d01e
   384 3187 A9 00		 lda #$00
   385 3189 8D 1E D0		 sta $d01e
   386
   387 				; line=31
   388
   389 318C 20 E5 EC		 jsr wait24cycle
   390 318F A9 78		c82 lda #$78
   391 3191 8D 17 D0		 sta $d017
   392 3194 A2 18		c83 ldx #$18
   393 3196 8E 17 D0		 stx $d017
   394 3199 8D 17 D0		 sta $d017
   395 				; nop
   396 				; lda #$00
   397 				; sta $d01e
   398 				; lda #$00
   399 				; sta $d01e
   400 				; lda #$00
   401 				; sta $d01e
   402 				 
   403 319C			 dli_quit dli2_2
Macro: DLI_QUIT [Source: d:\Download\getris\getris2.asm]
     5 319C A9 A9 8D EA EB A9 +    mwa #DLI2_2 nmi.vdli
     8 31A6 4C BB EC		  jmp nmi.quit
    10 = 31A9			  .def ?old_dli
Source: d:\Download\getris\ekran2.asm
   404
   405
   406 				; line=40
   407 31A9			dli2_2
   408
   409 31A9 A9 9C		 lda >fnt+$400*$01
   410 31AB A2 00		 ldx #$00
   411 31AD A0 00		 ldy #$00
   412 31AF 8D 0A D4		 sta $d40a
   413 31B2 8D 09 D4		 sta CHARBASE
   414 31B5 8E 1E D0		 stx $d01e
   415 31B8 8C 1E D0		 sty $d01e
   416 31BB A9 00		 lda #$00
   417 				; sta $d01e
   418 31BD C5 00		 cmp $00
   419
   420 				; line=41
   421
   422 31BF 20 D8 EC		 jsr wait60cycle
   423
   424 				; line=42
   425
   426 31C2 20 D8 EC		 jsr wait60cycle
   427
   428 				; line=43
   429
   430 31C5 20 D8 EC		 jsr wait60cycle
   431
   432 				; line=44
   433
   434 31C8 A9 47		 lda #$47
   435 31CA A2 0A		c14 ldx #$0A
   436 31CC A0 00		 ldy #$00
   437 31CE 8D 01 D0		 sta Player1_PositionX
   438 31D1 8E 13 D0		 stx Player1_Missile1_Color1_PM1
   439 31D4 8C 1E D0		 sty $d01e
   440 31D7 A9 00		 lda #$00
   441 31D9 8D 1E D0		 sta $d01e
   442 31DC 20 E2 EC		 jsr wait36cycle
   443
   444 				; line=45
   445
   446 31DF 20 D8 EC		 jsr wait60cycle
   447
   448 				; line=46
   449
   450 31E2 A9 18		c15 lda #$18
   451 				; ldx #$00
   452 				; ldy #$00
   453 31E4 8D 13 D0		 sta Player1_Missile1_Color1_PM1
   454 				; stx $d01e
   455 				; sty $d01e
   456 				; lda #$00
   457 				; sta $d01e
   458 				; jsr wait36cycle
   459
   460 				; line=47
   461 				; jsr wait60cycle
   462
   463 31E7			 dli_quit dli2_48
Macro: DLI_QUIT [Source: d:\Download\getris\getris2.asm]
     3 31E7 A9 EF 8D EA EB	   mva <DLI2_48 nmi.vdli
     8 31EC 4C BB EC		  jmp nmi.quit
    10 = 31EF			  .def ?old_dli
Source: d:\Download\getris\ekran2.asm
   464
   465
   466
   467 31EF			dli2_48
   468
   469 				; line=48
   470
   471 31EF A9 00		 lda #$00
   472 31F1 A2 00		 ldx #$00
   473 31F3 A0 00		 ldy #$00
   474 31F5 8D 0A D4		 sta $d40a
   475 31F8 8D 1E D0		 sta $d01e
   476 31FB 8E 1E D0		 stx $d01e
   477 31FE 8C 1E D0		 sty $d01e
   478 3201 A9 00		 lda #$00
   479 				; sta $d01e
   480 3203 C5 00		 cmp $00
   481
   482 				; line=49
   483
   484 3205 20 D8 EC		 jsr wait60cycle
   485
   486 				; line=50
   487
   488 3208 A9 46		 lda #$46
   489 320A A2 00		 ldx #$00
   490 320C A0 00		 ldy #$00
   491 320E 8D 01 D0		 sta Player1_PositionX
   492 3211 8E 1E D0		 stx $d01e
   493 3214 8C 1E D0		 sty $d01e
   494 3217 A9 00		 lda #$00
   495 3219 8D 1E D0		 sta $d01e
   496 321C 20 E2 EC		 jsr wait36cycle
   497
   498 				; line=51
   499
   500 321F 20 D8 EC		 jsr wait60cycle
   501
   502 				; line=52
   503
   504 3222 A9 D8		c16 lda #$D8
   505 3224 A2 00		 ldx #$00
   506 3226 A0 00		 ldy #$00
   507 3228 8D 17 D0		 sta Playfield_Color1_PF1
   508 322B 8E 1E D0		 stx $d01e
   509 322E 8C 1E D0		 sty $d01e
   510 3231 A9 00		 lda #$00
   511 3233 8D 1E D0		 sta $d01e
   512 3236 20 E2 EC		 jsr wait36cycle
   513
   514 				; line=53
   515
   516 3239 A9 45		 lda #$45
   517 				; ldx #$00
   518 				; ldy #$00
   519 323B 8D 01 D0		 sta Player1_PositionX
   520 				; stx $d01e
   521 				; sty $d01e
   522 				; lda #$00
   523 				; sta $d01e
   524 				; jsr wait36cycle
   525
   526 				; line=54
   527 				; jsr wait60cycle
   528
   529 				; line=55
   530 				; jsr wait60cycle
   531 				 
   532 323E			 dli_quit dli2_56
Macro: DLI_QUIT [Source: d:\Download\getris\getris2.asm]
     5 323E A9 4B 8D EA EB A9 +    mwa #DLI2_56 nmi.vdli
     8 3248 4C BB EC		  jmp nmi.quit
    10 = 324B			  .def ?old_dli
Source: d:\Download\getris\ekran2.asm
   533
   534
   535 				 
   536 324B			dli2_56
   537 				; line=56
   538 324B A9 00		 lda #0
   539 324D A2 00		 ldx #$00
   540 324F A0 00		 ldy #$00
   541 3251 8D 0A D4		 sta $d40a
   542 3254 8D 1E D0		 sta $d01e
   543 3257 8E 1E D0		 stx $d01e
   544 325A 8C 1E D0		 sty $d01e
   545 325D A9 00		 lda #$00
   546 325F 8D 1E D0		 sta $d01e
   547
   548 				; line=57
   549
   550 3262 20 D8 EC		 jsr wait60cycle
   551
   552 				; line=58
   553
   554 3265 20 D8 EC		 jsr wait60cycle
   555
   556 				; line=59
   557
   558 3268 20 D8 EC		 jsr wait60cycle
   559
   560 				; line=60
   561
   562 326B 20 E5 EC		 jsr wait24cycle
   563 326E A9 18		c84 lda #$18
   564 3270 8D 17 D0		 sta $d017
   565 3273 A2 D8		c85 ldx #$D8
   566 3275 8D 1E D0		 sta $d01e
   567 3278 A9 00		 lda #$00
   568 327A 8E 17 D0		 stx $d017
   569 327D A9 00		 lda #$00
   570 327F 8D 1E D0		 sta $d01e
   571 3282 A9 00		 lda #$00
   572 3284 8D 1E D0		 sta $d01e
   573 3287 A9 00		 lda #$00
   574 3289 8D 1E D0		 sta $d01e
   575
   576 				; line=61
   577
   578 328C 20 E5 EC		 jsr wait24cycle
   579 328F A9 18		c86 lda #$18
   580 3291 8D 17 D0		 sta $d017
   581 3294 A2 D8		c87 ldx #$D8
   582 3296 8D 1E D0		 sta $d01e
   583 3299 A9 00		 lda #$00
   584 329B 8E 17 D0		 stx $d017
   585 329E A9 00		 lda #$00
   586 32A0 8D 1E D0		 sta $d01e
   587 32A3 A9 00		 lda #$00
   588 32A5 8D 1E D0		 sta $d01e
   589 32A8 A9 00		 lda #$00
   590 32AA 8D 1E D0		 sta $d01e
   591
   592 				; line=62
   593
   594 32AD 20 E5 EC		 jsr wait24cycle
   595 32B0 A9 18		c88 lda #$18
   596 32B2 8D 17 D0		 sta $d017
   597 32B5 A2 D8		c89 ldx #$D8
   598 32B7 8D 1E D0		 sta $d01e
   599 32BA A9 00		 lda #$00
   600 32BC 8E 17 D0		 stx $d017
   601 32BF A9 00		 lda #$00
   602 32C1 8D 1E D0		 sta $d01e
   603 32C4 A9 00		 lda #$00
   604 32C6 8D 1E D0		 sta $d01e
   605 32C9 A9 00		 lda #$00
   606 32CB 8D 1E D0		 sta $d01e
   607
   608 				; line=63
   609
   610 32CE 20 E5 EC		 jsr wait24cycle
   611 32D1 A9 18		c90 lda #$18
   612 32D3 8D 17 D0		 sta $d017
   613 32D6 A2 D8		c91 ldx #$D8
   614 32D8 8D 1E D0		 sta $d01e
   615 32DB A9 00		 lda #$00
   616 32DD 8E 17 D0		 stx $d017
   617 32E0 A9 00		 lda #$00
   618 32E2 8D 1E D0		 sta $d01e
   619 32E5 A9 00		 lda #$00
   620 32E7 8D 1E D0		 sta $d01e
   621 32EA A9 00		 lda #$00
   622 32EC 8D 1E D0		 sta $d01e
   623
   624 				; line=64
   625
   626 32EF A9 B4		c17 lda #$B4
   627 32F1 A2 00		 ldx #$00
   628 32F3 A0 00		 ldy #$00
   629 32F5 8D 19 D0		 sta Playfield_Color3_PF3
   630 32F8 8E 1E D0		 stx $d01e
   631 32FB 8C 1E D0		 sty $d01e
   632 32FE A9 00		 lda #$00
   633 3300 8D 1E D0		 sta $d01e
   634 3303 C5 00		 cmp $00
   635
   636 				; line=65
   637
   638 3305 20 E5 EC		 jsr wait24cycle
   639 3308 A9 18		c92 lda #$18
   640 330A 8D 17 D0		 sta $d017
   641 330D A2 D8		c93 ldx #$D8
   642 330F 8D 1E D0		 sta $d01e
   643 3312 A9 00		 lda #$00
   644 3314 8E 17 D0		 stx $d017
   645 3317 A9 00		 lda #$00
   646 3319 8D 1E D0		 sta $d01e
   647 331C A9 00		 lda #$00
   648 331E 8D 1E D0		 sta $d01e
   649 3321 A9 00		 lda #$00
   650 3323 8D 1E D0		 sta $d01e
   651
   652 				; line=66
   653
   654 3326 20 E5 EC		 jsr wait24cycle
   655 3329 A9 18		c94 lda #$18
   656 332B 8D 17 D0		 sta $d017
   657 332E A2 D8		c95 ldx #$D8
   658 3330 8D 1E D0		 sta $d01e
   659 3333 A9 00		 lda #$00
   660 3335 8E 17 D0		 stx $d017
   661 3338 A9 00		 lda #$00
   662 333A 8D 1E D0		 sta $d01e
   663 333D A9 00		 lda #$00
   664 333F 8D 1E D0		 sta $d01e
   665 3342 A9 00		 lda #$00
   666 3344 8D 1E D0		 sta $d01e
   667
   668 				; line=67
   669
   670 3347 A9 5B		 lda #$5B
   671 3349 A2 54		c18 ldx #$54
   672 334B A0 00		 ldy #$00
   673 334D 8D 01 D0		 sta Player1_PositionX
   674 3350 8E 13 D0		 stx Player1_Missile1_Color1_PM1
   675 3353 8C 1E D0		 sty $d01e
   676 3356 A9 00		 lda #$00
   677 3358 8D 1E D0		 sta $d01e
   678 335B A9 18		c96 lda #$18
   679 335D 8D 17 D0		 sta $d017
   680 3360 A2 D8		c97 ldx #$D8
   681 3362 8D 1E D0		 sta $d01e
   682 3365 A9 00		 lda #$00
   683 3367 8E 17 D0		 stx $d017
   684 336A A9 00		 lda #$00
   685 336C 8D 1E D0		 sta $d01e
   686 336F A9 00		 lda #$00
   687 3371 8D 1E D0		 sta $d01e
   688 3374 A9 00		 lda #$00
   689 3376 8D 1E D0		 sta $d01e
   690
   691 				; line=68
   692
   693 3379 20 E5 EC		 jsr wait24cycle
   694 337C A9 18		c98 lda #$18
   695 337E 8D 17 D0		 sta $d017
   696 3381 A2 D8		c99 ldx #$D8
   697 3383 8D 1E D0		 sta $d01e
   698 3386 A9 00		 lda #$00
   699 3388 8E 17 D0		 stx $d017
   700 338B A9 00		 lda #$00
   701 338D 8D 1E D0		 sta $d01e
   702 3390 A9 00		 lda #$00
   703 3392 8D 1E D0		 sta $d01e
   704 3395 A9 00		 lda #$00
   705 3397 8D 1E D0		 sta $d01e
   706
   707 				; line=69
   708
   709 339A 20 E5 EC		 jsr wait24cycle
   710 339D A9 18		c100 lda #$18
   711 339F 8D 17 D0		 sta $d017
   712 33A2 A2 D8		c101 ldx #$D8
   713 33A4 8D 1E D0		 sta $d01e
   714 33A7 A9 00		 lda #$00
   715 33A9 8E 17 D0		 stx $d017
   716 33AC A9 00		 lda #$00
   717 33AE 8D 1E D0		 sta $d01e
   718 33B1 A9 00		 lda #$00
   719 33B3 8D 1E D0		 sta $d01e
   720 33B6 A9 00		 lda #$00
   721 33B8 8D 1E D0		 sta $d01e
   722
   723 				; line=70
   724
   725 33BB 20 E5 EC		 jsr wait24cycle
   726 33BE A9 18		c102 lda #$18
   727 33C0 8D 17 D0		 sta $d017
   728 33C3 A2 D8		c103 ldx #$D8
   729 33C5 8D 1E D0		 sta $d01e
   730 33C8 A9 00		 lda #$00
   731 33CA 8E 17 D0		 stx $d017
   732 33CD A9 00		 lda #$00
   733 33CF 8D 1E D0		 sta $d01e
   734 33D2 A9 00		 lda #$00
   735 33D4 8D 1E D0		 sta $d01e
   736 33D7 A9 00		 lda #$00
   737 33D9 8D 1E D0		 sta $d01e
   738
   739 				; line=71
   740
   741 33DC 20 D8 EC		 jsr wait60cycle
   742
   743 				; line=72
   744
   745 33DF A9 54		c19 lda #$54
   746 				; ldx #$00
   747 				; ldy #$00
   748 33E1 8D 19 D0		 sta Playfield_Color3_PF3
   749 				; stx $d01e
   750 				; sty $d01e
   751 				; lda #$00
   752 				; sta $d01e
   753 				; cmp $00
   754
   755 				; line=73
   756 				; jsr wait60cycle
   757
   758 				; line=74
   759 				; jsr wait60cycle
   760
   761 				; line=75
   762 				; jsr wait60cycle
   763
   764 				; line=76
   765 				; jsr wait60cycle
   766
   767 				; line=77
   768 				; jsr wait60cycle
   769
   770 				; line=78
   771 				; jsr wait60cycle
   772
   773 				; line=79
   774 				; jsr wait60cycle
   775
   776 33E4			 dli_quit dli2_80
Macro: DLI_QUIT [Source: d:\Download\getris\getris2.asm]
     5 33E4 A9 F1 8D EA EB A9 +    mwa #DLI2_80 nmi.vdli
     8 33EE 4C BB EC		  jmp nmi.quit
    10 = 33F1			  .def ?old_dli
Source: d:\Download\getris\ekran2.asm
   777
   778
   779 33F1			dli2_80
   780 				; line=80
   781
   782 33F1 A9 46		 lda #$46
   783 33F3 A2 18		c20 ldx #$18
   784 33F5 A0 00		 ldy #$00
   785 33F7 8D 0A D4		 sta $d40a
   786 33FA 8D 01 D0		 sta Player1_PositionX
   787 33FD 8E 13 D0		 stx Player1_Missile1_Color1_PM1
   788 3400 8C 1E D0		 sty $d01e
   789 3403 A9 00		 lda #$00
   790 				; sta $d01e
   791 3405 C5 00		 cmp $00
   792
   793 				; line=81
   794
   795 3407 20 D8 EC		 jsr wait60cycle
   796
   797 				; line=82
   798
   799 340A 20 D8 EC		 jsr wait60cycle
   800
   801 				; line=83
   802
   803 340D 20 D8 EC		 jsr wait60cycle
   804
   805 				; line=84
   806
   807 3410 20 D8 EC		 jsr wait60cycle
   808
   809 				; line=85
   810
   811 3413 20 D8 EC		 jsr wait60cycle
   812
   813 				; line=86
   814
   815 3416 A9 44		 lda #$44
   816 3418 A2 00		 ldx #$00
   817 341A A0 00		 ldy #$00
   818 341C 8D 01 D0		 sta Player1_PositionX
   819 341F 8E 1E D0		 stx $d01e
   820 3422 8C 1E D0		 sty $d01e
   821 3425 A9 00		 lda #$00
   822 3427 8D 1E D0		 sta $d01e
   823 342A 20 E2 EC		 jsr wait36cycle
   824
   825 				; line=87
   826
   827 342D 20 D8 EC		 jsr wait60cycle
   828
   829 				; line=88
   830
   831 3430 A9 A0		 lda >fnt+$400*$02
   832 				; ldx #$00
   833 				; ldy #$00
   834 3432 8D 09 D4		 sta CHARBASE
   835 				; stx $d01e
   836 				; sty $d01e
   837 				; lda #$00
   838 				; sta $d01e
   839 				; cmp $00
   840
   841 3435			 dli_quit dli2_3
Macro: DLI_QUIT [Source: d:\Download\getris\getris2.asm]
     5 3435 A9 42 8D EA EB A9 +    mwa #DLI2_3 nmi.vdli
     8 343F 4C BB EC		  jmp nmi.quit
    10 = 3442			  .def ?old_dli
Source: d:\Download\getris\ekran2.asm
   842
   843
   844 				; line=112
   845 3442			dli2_3
   846
   847 3442 A9 00		 lda #0
   848 3444 A2 00		 ldx #$00
   849 3446 A0 00		 ldy #$00
   850 3448 8D 0A D4		 sta $d40a
   851 344B 8D 1E D0		 sta $d01e
   852 344E 8E 1E D0		 stx $d01e
   853 3451 8C 1E D0		 sty $d01e
   854 3454 A9 00		 lda #$00
   855 3456 8D 1E D0		 sta $d01e
   856
   857 				; line=113
   858
   859 3459 20 D8 EC		 jsr wait60cycle
   860
   861 				; line=114
   862
   863 345C 20 D8 EC		 jsr wait60cycle
   864
   865 				; line=115
   866
   867 345F 20 E5 EC		 jsr wait24cycle
   868 3462 A9 D8		c104 lda #$D8
   869 3464 8D 17 D0		 sta $d017
   870 3467 A0 18		c105 ldy #$18
   871 3469 8C 17 D0		 sty $d017
   872 346C EA EA		 :2 nop
   873 346E 8D 17 D0		 sta $d017
   874 3471 A9 00		 lda #$00
   875 3473 EA			 nop
   876 3474 A9 00		 lda #$00
   877 3476 8D 1E D0		 sta $d01e
   878 3479 A9 00		 lda #$00
   879 347B 8D 1E D0		 sta $d01e
   880
   881 				; line=116
   882
   883 347E A9 34		c21 lda #$34
   884 3480 A2 00		 ldx #$00
   885 3482 A0 00		 ldy #$00
   886 3484 8D 19 D0		 sta Playfield_Color3_PF3
   887 3487 8E 1E D0		 stx $d01e
   888 348A 8C 1E D0		 sty $d01e
   889 348D A9 00		 lda #$00
   890 348F 8D 1E D0		 sta $d01e
   891 3492 A9 D8		c106 lda #$D8
   892 3494 8D 17 D0		 sta $d017
   893 3497 A0 18		c107 ldy #$18
   894 3499 8C 17 D0		 sty $d017
   895 349C EA EA		 :2 nop
   896 349E 8D 17 D0		 sta $d017
   897 34A1 A9 00		 lda #$00
   898 34A3 EA			 nop
   899 34A4 A9 00		 lda #$00
   900 34A6 8D 1E D0		 sta $d01e
   901 34A9 A9 00		 lda #$00
   902 34AB 8D 1E D0		 sta $d01e
   903
   904 				; line=117
   905
   906 34AE A9 5C		 lda #$5C
   907 34B0 A2 30		 ldx #$30
   908 34B2 A0 54		c22 ldy #$54
   909 34B4 8D 01 D0		 sta Player1_PositionX
   910 34B7 8E 05 D0		 stx Missile1_PositionX
   911 34BA 8C 13 D0		 sty Player1_Missile1_Color1_PM1
   912 34BD A9 00		 lda #$00
   913 34BF 8D 1E D0		 sta $d01e
   914 34C2 A9 D8		c108 lda #$D8
   915 34C4 8D 17 D0		 sta $d017
   916 34C7 A0 18		c109 ldy #$18
   917 34C9 8C 17 D0		 sty $d017
   918 34CC EA EA		 :2 nop
   919 34CE 8D 17 D0		 sta $d017
   920 34D1 A9 00		 lda #$00
   921 34D3 EA			 nop
   922 34D4 A9 00		 lda #$00
   923 34D6 8D 1E D0		 sta $d01e
   924 34D9 A9 00		 lda #$00
   925 34DB 8D 1E D0		 sta $d01e
   926
   927 				; line=118
   928
   929 34DE 20 E5 EC		 jsr wait24cycle
   930 34E1 A9 D8		c110 lda #$D8
   931 34E3 8D 17 D0		 sta $d017
   932 34E6 A0 18		c111 ldy #$18
   933 34E8 8C 17 D0		 sty $d017
   934 34EB EA EA		 :2 nop
   935 34ED 8D 17 D0		 sta $d017
   936 34F0 A9 00		 lda #$00
   937 34F2 EA			 nop
   938 34F3 A9 00		 lda #$00
   939 34F5 8D 1E D0		 sta $d01e
   940 34F8 A9 00		 lda #$00
   941 34FA 8D 1E D0		 sta $d01e
   942
   943 				; line=119
   944
   945 34FD 20 E5 EC		 jsr wait24cycle
   946 3500 A9 D8		c112 lda #$D8
   947 3502 8D 17 D0		 sta $d017
   948 3505 A0 18		c113 ldy #$18
   949 3507 8C 17 D0		 sty $d017
   950 350A EA EA		 :2 nop
   951 350C 8D 17 D0		 sta $d017
   952 350F A9 00		 lda #$00
   953 3511 EA			 nop
   954 3512 A9 00		 lda #$00
   955 3514 8D 1E D0		 sta $d01e
   956 3517 A9 00		 lda #$00
   957 3519 8D 1E D0		 sta $d01e
   958
   959 				; line=120
   960
   961 351C A9 01		 lda #$01
   962 351E A2 3F		 ldx #$3F
   963 3520 A0 4E		 ldy #$4E
   964 3522 8D 09 D0		 sta Player1_Size
   965 3525 8E 01 D0		 stx Player1_PositionX
   966 3528 8C 05 D0		 sty Missile1_PositionX
   967 352B A9 18		c23 lda #$18
   968 352D 8D 13 D0		 sta Player1_Missile1_Color1_PM1
   969 3530 C5 00		 cmp $00
   970
   971 				; line=121
   972
   973 3532 A9 00		 lda #$00
   974 3534 A2 5C		 ldx #$5C
   975 3536 A0 30		 ldy #$30
   976 3538 8D 09 D0		 sta Player1_Size
   977 353B 8E 01 D0		 stx Player1_PositionX
   978 353E 8C 05 D0		 sty Missile1_PositionX
   979 3541 A9 54		c24 lda #$54
   980 3543 8D 13 D0		 sta Player1_Missile1_Color1_PM1
   981 3546 A9 D8		c114 lda #$D8
   982 3548 8D 17 D0		 sta $d017
   983 354B A0 18		c115 ldy #$18
   984 354D 8C 17 D0		 sty $d017
   985 3550 EA EA		 :2 nop
   986 3552 8D 17 D0		 sta $d017
   987 3555 A9 00		 lda #$00
   988 3557 EA			 nop
   989 3558 A9 00		 lda #$00
   990 355A 8D 1E D0		 sta $d01e
   991 355D A9 00		 lda #$00
   992 355F 8D 1E D0		 sta $d01e
   993
   994 				; line=122
   995
   996 3562 20 E5 EC		 jsr wait24cycle
   997 3565 A9 D8		c116 lda #$D8
   998 3567 8D 17 D0		 sta $d017
   999 356A A0 18		c117 ldy #$18
  1000 356C 8C 17 D0		 sty $d017
  1001 356F EA EA		 :2 nop
  1002 3571 8D 17 D0		 sta $d017
  1003 3574 A9 00		 lda #$00
  1004 3576 EA			 nop
  1005 3577 A9 00		 lda #$00
  1006 3579 8D 1E D0		 sta $d01e
  1007 357C A9 00		 lda #$00
  1008 357E 8D 1E D0		 sta $d01e
  1009
  1010 				; line=123
  1011
  1012 3581 A9 3F		 lda #$3F
  1013 3583 A2 00		 ldx #$00
  1014 3585 A0 00		 ldy #$00
  1015 3587 8D 01 D0		 sta Player1_PositionX
  1016 358A 8E 1E D0		 stx $d01e
  1017 358D 8C 1E D0		 sty $d01e
  1018 3590 A9 00		 lda #$00
  1019 3592 8D 1E D0		 sta $d01e
  1020 3595 A9 D8		c118 lda #$D8
  1021 3597 8D 17 D0		 sta $d017
  1022 359A A0 18		c119 ldy #$18
  1023 359C 8C 17 D0		 sty $d017
  1024 359F EA EA		 :2 nop
  1025 35A1 8D 17 D0		 sta $d017
  1026 35A4 A9 00		 lda #$00
  1027 35A6 EA			 nop
  1028 35A7 A9 00		 lda #$00
  1029 35A9 8D 1E D0		 sta $d01e
  1030 35AC A9 00		 lda #$00
  1031 35AE 8D 1E D0		 sta $d01e
  1032
  1033 				; line=124
  1034
  1035 35B1 20 E5 EC		 jsr wait24cycle
  1036 35B4 A9 D8		c120 lda #$D8
  1037 35B6 8D 17 D0		 sta $d017
  1038 35B9 A0 18		c121 ldy #$18
  1039 35BB 8C 17 D0		 sty $d017
  1040 35BE EA EA		 :2 nop
  1041 35C0 8D 17 D0		 sta $d017
  1042 35C3 A9 00		 lda #$00
  1043 35C5 EA			 nop
  1044 35C6 A9 00		 lda #$00
  1045 35C8 8D 1E D0		 sta $d01e
  1046 35CB A9 00		 lda #$00
  1047 35CD 8D 1E D0		 sta $d01e
  1048
  1049 				; line=125
  1050
  1051 35D0 20 E5 EC		 jsr wait24cycle
  1052 35D3 A9 D8		c122 lda #$D8
  1053 35D5 8D 17 D0		 sta $d017
  1054 35D8 A0 18		c123 ldy #$18
  1055 35DA 8C 17 D0		 sty $d017
  1056 35DD EA EA		 :2 nop
  1057 35DF 8D 17 D0		 sta $d017
  1058 35E2 A9 00		 lda #$00
  1059 35E4 EA			 nop
  1060 35E5 A9 00		 lda #$00
  1061 35E7 8D 1E D0		 sta $d01e
  1062 35EA A9 00		 lda #$00
  1063 35EC 8D 1E D0		 sta $d01e
  1064
  1065 				; line=126
  1066
  1067 35EF A9 5C		 lda #$5C
  1068 35F1 A2 00		 ldx #$00
  1069 35F3 A0 00		 ldy #$00
  1070 35F5 8D 01 D0		 sta Player1_PositionX
  1071 35F8 8E 1E D0		 stx $d01e
  1072 35FB 8C 1E D0		 sty $d01e
  1073 35FE A9 00		 lda #$00
  1074 3600 8D 1E D0		 sta $d01e
  1075 3603 A9 D8		c124 lda #$D8
  1076 3605 8D 17 D0		 sta $d017
  1077 3608 A0 18		c125 ldy #$18
  1078 360A 8C 17 D0		 sty $d017
  1079 360D EA EA		 :2 nop
  1080 360F 8D 17 D0		 sta $d017
  1081 3612 A9 00		 lda #$00
  1082 3614 EA			 nop
  1083 3615 A9 00		 lda #$00
  1084 3617 8D 1E D0		 sta $d01e
  1085 361A A9 00		 lda #$00
  1086 361C 8D 1E D0		 sta $d01e
  1087
  1088 				; line=127
  1089
  1090 361F A9 3E		 lda #$3E
  1091 3621 A2 00		 ldx #$00
  1092 3623 A0 00		 ldy #$00
  1093 3625 8D 05 D0		 sta Missile1_PositionX
  1094 3628 8E 1E D0		 stx $d01e
  1095 362B 8C 1E D0		 sty $d01e
  1096 362E A9 00		 lda #$00
  1097 3630 8D 1E D0		 sta $d01e
  1098 3633 A9 D8		c126 lda #$D8
  1099 3635 8D 17 D0		 sta $d017
  1100 3638 A0 18		c127 ldy #$18
  1101 363A 8C 17 D0		 sty $d017
  1102 363D EA EA		 :2 nop
  1103 363F 8D 17 D0		 sta $d017
  1104 3642 A9 00		 lda #$00
  1105 3644 EA			 nop
  1106 3645 A9 00		 lda #$00
  1107 3647 8D 1E D0		 sta $d01e
  1108 364A A9 00		 lda #$00
  1109 364C 8D 1E D0		 sta $d01e
  1110
  1111 				; line=128
  1112
  1113 364F A9 43		 lda #$43
  1114 3651 A2 18		c25 ldx #$18
  1115 3653 A0 00		 ldy #$00
  1116 3655 8D 01 D0		 sta Player1_PositionX
  1117 3658 8E 13 D0		 stx Player1_Missile1_Color1_PM1
  1118 365B 8C 1E D0		 sty $d01e
  1119 365E A9 00		 lda #$00
  1120 3660 8D 1E D0		 sta $d01e
  1121 3663 C5 00		 cmp $00
  1122
  1123 				; line=129
  1124
  1125 3665 A9 5C		 lda #$5C
  1126 3667 A2 54		c26 ldx #$54
  1127 3669 A0 00		 ldy #$00
  1128 366B 8D 01 D0		 sta Player1_PositionX
  1129 366E 8E 13 D0		 stx Player1_Missile1_Color1_PM1
  1130 3671 8C 1E D0		 sty $d01e
  1131 3674 A9 00		 lda #$00
  1132 3676 8D 1E D0		 sta $d01e
  1133 3679 A9 D8		c128 lda #$D8
  1134 367B 8D 17 D0		 sta $d017
  1135 367E A0 18		c129 ldy #$18
  1136 3680 8C 17 D0		 sty $d017
  1137 3683 EA EA		 :2 nop
  1138 3685 8D 17 D0		 sta $d017
  1139 3688 A9 00		 lda #$00
  1140 368A EA			 nop
  1141 368B A9 00		 lda #$00
  1142 368D 8D 1E D0		 sta $d01e
  1143 3690 A9 00		 lda #$00
  1144 3692 8D 1E D0		 sta $d01e
  1145
  1146 				; line=130
  1147
  1148 3695 20 E5 EC		 jsr wait24cycle
  1149 3698 A9 D8		c130 lda #$D8
  1150 369A 8D 17 D0		 sta $d017
  1151 369D A0 18		c131 ldy #$18
  1152 369F 8C 17 D0		 sty $d017
  1153 36A2 EA EA		 :2 nop
  1154 36A4 8D 17 D0		 sta $d017
  1155 36A7 A9 00		 lda #$00
  1156 36A9 EA			 nop
  1157 36AA A9 00		 lda #$00
  1158 36AC 8D 1E D0		 sta $d01e
  1159 36AF A9 00		 lda #$00
  1160 36B1 8D 1E D0		 sta $d01e
  1161
  1162 				; line=131
  1163
  1164 36B4 20 E5 EC		 jsr wait24cycle
  1165 36B7 A9 D8		c132 lda #$D8
  1166 36B9 8D 17 D0		 sta $d017
  1167 36BC A0 18		c133 ldy #$18
  1168 36BE 8C 17 D0		 sty $d017
  1169 36C1 EA EA		 :2 nop
  1170 36C3 8D 17 D0		 sta $d017
  1171 36C6 A9 00		 lda #$00
  1172 36C8 EA			 nop
  1173 36C9 A9 00		 lda #$00
  1174 36CB 8D 1E D0		 sta $d01e
  1175 36CE A9 00		 lda #$00
  1176 36D0 8D 1E D0		 sta $d01e
  1177
  1178 				; line=132
  1179
  1180 36D3 20 E5 EC		 jsr wait24cycle
  1181 36D6 A9 D8		c134 lda #$D8
  1182 36D8 8D 17 D0		 sta $d017
  1183 36DB A0 18		c135 ldy #$18
  1184 36DD 8C 17 D0		 sty $d017
  1185 36E0 EA EA		 :2 nop
  1186 36E2 8D 17 D0		 sta $d017
  1187 36E5 A9 00		 lda #$00
  1188 36E7 EA			 nop
  1189 36E8 A9 00		 lda #$00
  1190 36EA 8D 1E D0		 sta $d01e
  1191 36ED A9 00		 lda #$00
  1192 36EF 8D 1E D0		 sta $d01e
  1193
  1194 				; line=133
  1195
  1196 36F2 20 E5 EC		 jsr wait24cycle
  1197 36F5 A9 D8		c136 lda #$D8
  1198 36F7 8D 17 D0		 sta $d017
  1199 36FA A0 18		c137 ldy #$18
  1200 36FC 8C 17 D0		 sty $d017
  1201 36FF EA EA		 :2 nop
  1202 3701 8D 17 D0		 sta $d017
  1203 3704 A9 00		 lda #$00
  1204 3706 EA			 nop
  1205 3707 A9 00		 lda #$00
  1206 3709 8D 1E D0		 sta $d01e
  1207 370C A9 00		 lda #$00
  1208 370E 8D 1E D0		 sta $d01e
  1209
  1210 				; line=134
  1211
  1212 3711 20 E5 EC		 jsr wait24cycle
  1213 3714 A9 D8		c138 lda #$D8
  1214 3716 8D 17 D0		 sta $d017
  1215 3719 A0 18		c139 ldy #$18
  1216 371B 8C 17 D0		 sty $d017
  1217 371E EA EA		 :2 nop
  1218 3720 8D 17 D0		 sta $d017
  1219 3723 A9 00		 lda #$00
  1220 3725 EA			 nop
  1221 3726 A9 00		 lda #$00
  1222 3728 8D 1E D0		 sta $d01e
  1223 372B A9 00		 lda #$00
  1224 372D 8D 1E D0		 sta $d01e
  1225
  1226 				; line=135
  1227
  1228 3730 A9 54		c27 lda #$54
  1229 3732 A2 00		 ldx #$00
  1230 3734 A0 00		 ldy #$00
  1231 3736 8D 19 D0		 sta Playfield_Color3_PF3
  1232 3739 8E 1E D0		 stx $d01e
  1233 373C 8C 1E D0		 sty $d01e
  1234 373F A9 00		 lda #$00
  1235 3741 8D 1E D0		 sta $d01e
  1236 3744 A9 D8		c140 lda #$D8
  1237 3746 8D 17 D0		 sta $d017
  1238 3749 A0 18		c141 ldy #$18
  1239 374B 8C 17 D0		 sty $d017
  1240 374E EA EA		 :2 nop
  1241 3750 8D 17 D0		 sta $d017
  1242 3753 A9 00		 lda #$00
  1243 3755 EA			 nop
  1244 3756 A9 00		 lda #$00
  1245 3758 8D 1E D0		 sta $d01e
  1246 375B A9 00		 lda #$00
  1247 375D 8D 1E D0		 sta $d01e
  1248
  1249 				; line=136
  1250
  1251 3760 A9 A4		 lda >fnt+$400*$03
  1252 3762 A2 00		 ldx #$00
  1253 3764 A0 00		 ldy #$00
  1254 3766 8D 09 D4		 sta CHARBASE
  1255 3769 8E 1E D0		 stx $d01e
  1256 376C 8C 1E D0		 sty $d01e
  1257 376F A9 00		 lda #$00
  1258 3771 8D 1E D0		 sta $d01e
  1259 3774 C5 00		 cmp $00
  1260
  1261 				; line=137
  1262
  1263 3776 20 E5 EC		 jsr wait24cycle
  1264 3779 A9 D8		c142 lda #$D8
  1265 377B 8D 17 D0		 sta $d017
  1266 377E A0 18		c143 ldy #$18
  1267 3780 8C 17 D0		 sty $d017
  1268 3783 EA EA		 :2 nop
  1269 3785 8D 17 D0		 sta $d017
  1270 3788 A9 00		 lda #$00
  1271 378A EA			 nop
  1272 378B A9 00		 lda #$00
  1273 378D 8D 1E D0		 sta $d01e
  1274 3790 A9 00		 lda #$00
  1275 3792 8D 1E D0		 sta $d01e
  1276
  1277 				; line=138
  1278
  1279 3795 A9 F8		c28 lda #$F8
  1280 3797 A2 00		 ldx #$00
  1281 3799 A0 00		 ldy #$00
  1282 379B 8D 17 D0		 sta Playfield_Color1_PF1
  1283 379E 8E 1E D0		 stx $d01e
  1284 37A1 8C 1E D0		 sty $d01e
  1285 37A4 A9 00		 lda #$00
  1286 37A6 8D 1E D0		 sta $d01e
  1287 37A9 A9 D8		c144 lda #$D8
  1288 37AB 8D 17 D0		 sta $d017
  1289 37AE A0 18		c145 ldy #$18
  1290 37B0 8C 17 D0		 sty $d017
  1291 37B3 EA EA		 :2 nop
  1292 37B5 8D 17 D0		 sta $d017
  1293 37B8 A9 00		c146 lda #$00
  1294 37BA EA			 nop
  1295 37BB A9 F8		c147 lda #$F8
  1296 37BD 8D 17 D0		 sta $d017
  1297 				; lda #$00
  1298 				; sta $d01e
  1299
  1300 				; line=139
  1301 				; jsr wait60cycle
  1302
  1303 				; line=140
  1304 				; jsr wait60cycle
  1305
  1306 				; line=141
  1307 				; jsr wait60cycle
  1308
  1309 				; line=142
  1310 				; jsr wait60cycle
  1311
  1312 				; line=143
  1313 				; jsr wait60cycle
  1314
  1315 37C0			 dli_quit dli2_144
Macro: DLI_QUIT [Source: d:\Download\getris\getris2.asm]
     5 37C0 A9 CD 8D EA EB A9 +    mwa #DLI2_144 nmi.vdli
     8 37CA 4C BB EC		  jmp nmi.quit
    10 = 37CD			  .def ?old_dli
Source: d:\Download\getris\ekran2.asm
  1316
  1317
  1318 37CD			dli2_144
  1319 				; line=144
  1320 				; jsr wait24cycle
  1321 				; cmp $00
  1322
  1323 37CD A9 00		 lda #$00
  1324 37CF A2 00		 ldx #$00
  1325 37D1 A0 00		 ldy #$00
  1326 37D3 8D 0A D4		 sta $d40a
  1327 37D6 8D 1E D0		 sta $d01e
  1328 37D9 8E 1E D0		 stx $d01e
  1329 37DC 8C 1E D0		 sty $d01e
  1330 37DF A9 00		 lda #$00
  1331 				; sta $d01e
  1332 37E1 C5 00		 cmp $00
  1333
  1334 				; line=145
  1335
  1336 37E3 20 D8 EC		 jsr wait60cycle
  1337
  1338 				; line=146
  1339
  1340 37E6 20 E5 EC		 jsr wait24cycle
  1341 37E9 A9 54		c148 lda #$54
  1342 37EB 8D 19 D0		 sta $d019
  1343 37EE A9 00		 lda #$00
  1344 37F0 8D 1E D0		 sta $d01e
  1345 37F3 A9 00		 lda #$00
  1346 37F5 8D 1E D0		 sta $d01e
  1347 37F8 A9 74		c149 lda #$74
  1348 37FA 8D 19 D0		 sta $d019
  1349 37FD A9 00		 lda #$00
  1350 37FF 8D 1E D0		 sta $d01e
  1351 3802 A9 00		 lda #$00
  1352 3804 8D 1E D0		 sta $d01e
  1353
  1354 				; line=147
  1355
  1356 3807 20 E5 EC		 jsr wait24cycle
  1357 380A A9 54		c150 lda #$54
  1358 380C 8D 19 D0		 sta $d019
  1359 380F A9 00		 lda #$00
  1360 3811 8D 1E D0		 sta $d01e
  1361 3814 A9 00		 lda #$00
  1362 3816 8D 1E D0		 sta $d01e
  1363 3819 A9 74		c151 lda #$74
  1364 381B 8D 19 D0		 sta $d019
  1365 381E A9 00		 lda #$00
  1366 3820 8D 1E D0		 sta $d01e
  1367 3823 A9 00		 lda #$00
  1368 3825 8D 1E D0		 sta $d01e
  1369
  1370 				; line=148
  1371
  1372 3828 20 E5 EC		 jsr wait24cycle
  1373 382B A9 54		c152 lda #$54
  1374 382D 8D 19 D0		 sta $d019
  1375 3830 A9 00		 lda #$00
  1376 3832 8D 1E D0		 sta $d01e
  1377 3835 A9 00		 lda #$00
  1378 3837 8D 1E D0		 sta $d01e
  1379 383A A9 74		c153 lda #$74
  1380 383C 8D 19 D0		 sta $d019
  1381 383F A9 00		 lda #$00
  1382 3841 8D 1E D0		 sta $d01e
  1383 3844 A9 00		 lda #$00
  1384 3846 8D 1E D0		 sta $d01e
  1385
  1386 				; line=149
  1387
  1388 3849 20 E5 EC		 jsr wait24cycle
  1389 384C A9 54		c154 lda #$54
  1390 384E 8D 19 D0		 sta $d019
  1391 3851 A9 00		 lda #$00
  1392 3853 8D 1E D0		 sta $d01e
  1393 3856 A9 00		 lda #$00
  1394 3858 8D 1E D0		 sta $d01e
  1395 385B A9 74		c155 lda #$74
  1396 385D 8D 19 D0		 sta $d019
  1397 3860 A9 00		 lda #$00
  1398 3862 8D 1E D0		 sta $d01e
  1399 3865 A9 00		 lda #$00
  1400 3867 8D 1E D0		 sta $d01e
  1401
  1402 				; line=150
  1403
  1404 386A 20 E5 EC		 jsr wait24cycle
  1405 386D A9 54		c156 lda #$54
  1406 386F 8D 19 D0		 sta $d019
  1407 3872 A9 00		 lda #$00
  1408 3874 8D 1E D0		 sta $d01e
  1409 3877 A9 00		 lda #$00
  1410 3879 8D 1E D0		 sta $d01e
  1411 387C A9 74		c157 lda #$74
  1412 387E 8D 19 D0		 sta $d019
  1413 3881 A9 00		 lda #$00
  1414 3883 8D 1E D0		 sta $d01e
  1415 3886 A9 00		 lda #$00
  1416 3888 8D 1E D0		 sta $d01e
  1417
  1418 				; line=151
  1419
  1420 388B A9 56		c29 lda #$56
  1421 388D A2 00		 ldx #$00
  1422 388F A0 00		 ldy #$00
  1423 3891 8D 19 D0		 sta Playfield_Color3_PF3
  1424 3894 8E 1E D0		 stx $d01e
  1425 3897 8C 1E D0		 sty $d01e
  1426 389A A9 00		 lda #$00
  1427 389C 8D 1E D0		 sta $d01e
  1428 389F A9 54		c158 lda #$54
  1429 38A1 8D 19 D0		 sta $d019
  1430 38A4 A9 00		 lda #$00
  1431 38A6 8D 1E D0		 sta $d01e
  1432 38A9 A9 00		 lda #$00
  1433 38AB 8D 1E D0		 sta $d01e
  1434 38AE A9 74		c159 lda #$74
  1435 38B0 8D 19 D0		 sta $d019
  1436 38B3 A9 00		 lda #$00
  1437 38B5 8D 1E D0		 sta $d01e
  1438 38B8 A9 00		 lda #$00
  1439 38BA 8D 1E D0		 sta $d01e
  1440
  1441 				; line=152
  1442
  1443 38BD A9 54		c30 lda #$54
  1444 38BF A2 43		 ldx #$43
  1445 38C1 A0 18		c31 ldy #$18
  1446 38C3 8D 19 D0		 sta Playfield_Color3_PF3
  1447 38C6 8E 01 D0		 stx Player1_PositionX
  1448 38C9 8C 13 D0		 sty Player1_Missile1_Color1_PM1
  1449 38CC A9 00		 lda #$00
  1450 38CE 8D 1E D0		 sta $d01e
  1451 38D1 C5 00		 cmp $00
  1452
  1453 				; line=153
  1454
  1455 38D3 20 E5 EC		 jsr wait24cycle
  1456 38D6 A9 78		c160 lda #$78
  1457 38D8 8D 17 D0		 sta $d017
  1458 38DB A0 F8		c161 ldy #$F8
  1459 38DD C5 00		 cmp $00
  1460 38DF EA EA		 :2 nop
  1461 38E1 8C 17 D0		 sty $d017
  1462 38E4 C5 00		 cmp $00
  1463 38E6 EA			 nop
  1464 38E7 A9 00		 lda #$00
  1465 38E9 8D 1E D0		 sta $d01e
  1466 38EC A9 00		 lda #$00
  1467 38EE 8D 1E D0		 sta $d01e
  1468
  1469 				; line=154
  1470
  1471 38F1 20 E5 EC		 jsr wait24cycle
  1472 38F4 A9 78		c162 lda #$78
  1473 38F6 8D 17 D0		 sta $d017
  1474 38F9 A0 F8		c163 ldy #$F8
  1475 38FB C5 00		 cmp $00
  1476 38FD EA EA		 :2 nop
  1477 38FF 8C 17 D0		 sty $d017
  1478 3902 C5 00		 cmp $00
  1479 3904 EA			 nop
  1480 3905 A9 00		 lda #$00
  1481 3907 8D 1E D0		 sta $d01e
  1482 390A A9 00		 lda #$00
  1483 390C 8D 1E D0		 sta $d01e
  1484
  1485 				; line=155
  1486
  1487 390F 20 E5 EC		 jsr wait24cycle
  1488 3912 A9 78		c164 lda #$78
  1489 3914 8D 17 D0		 sta $d017
  1490 3917 A0 F8		c165 ldy #$F8
  1491 3919 C5 00		 cmp $00
  1492 391B EA EA		 :2 nop
  1493 391D 8C 17 D0		 sty $d017
  1494 3920 C5 00		 cmp $00
  1495 3922 EA			 nop
  1496 3923 A9 00		 lda #$00
  1497 3925 8D 1E D0		 sta $d01e
  1498 3928 A9 00		 lda #$00
  1499 392A 8D 1E D0		 sta $d01e
  1500
  1501 				; line=156
  1502
  1503 392D 20 E5 EC		 jsr wait24cycle
  1504 3930 A9 78		c166 lda #$78
  1505 3932 8D 17 D0		 sta $d017
  1506 3935 A0 F8		c167 ldy #$F8
  1507 3937 C5 00		 cmp $00
  1508 3939 EA EA		 :2 nop
  1509 393B 8C 17 D0		 sty $d017
  1510 393E C5 00		 cmp $00
  1511 3940 EA			 nop
  1512 3941 A9 00		 lda #$00
  1513 3943 8D 1E D0		 sta $d01e
  1514 3946 A9 00		 lda #$00
  1515 3948 8D 1E D0		 sta $d01e
  1516
  1517 				; line=157
  1518
  1519 394B 20 E5 EC		 jsr wait24cycle
  1520 394E A9 78		c168 lda #$78
  1521 3950 8D 17 D0		 sta $d017
  1522 3953 A0 F8		c169 ldy #$F8
  1523 3955 C5 00		 cmp $00
  1524 3957 EA EA		 :2 nop
  1525 3959 8C 17 D0		 sty $d017
  1526 395C C5 00		 cmp $00
  1527 395E EA			 nop
  1528 395F A9 00		 lda #$00
  1529 3961 8D 1E D0		 sta $d01e
  1530 3964 A9 00		 lda #$00
  1531 3966 8D 1E D0		 sta $d01e
  1532
  1533 				; line=158
  1534
  1535 3969 20 E5 EC		 jsr wait24cycle
  1536 396C A9 78		c170 lda #$78
  1537 396E 8D 17 D0		 sta $d017
  1538 3971 A0 F8		c171 ldy #$F8
  1539 3973 C5 00		 cmp $00
  1540 3975 EA EA		 :2 nop
  1541 3977 8C 17 D0		 sty $d017
  1542 397A C5 00		 cmp $00
  1543 397C EA			 nop
  1544 397D A9 00		 lda #$00
  1545 397F 8D 1E D0		 sta $d01e
  1546 3982 A9 00		 lda #$00
  1547 3984 8D 1E D0		 sta $d01e
  1548
  1549 				; line=159
  1550
  1551 3987 20 E5 EC		 jsr wait24cycle
  1552 398A A9 78		c172 lda #$78
  1553 398C 8D 17 D0		 sta $d017
  1554 398F A0 F8		c173 ldy #$F8
  1555 3991 C5 00		 cmp $00
  1556 3993 EA EA		 :2 nop
  1557 3995 8C 17 D0		 sty $d017
  1558 3998 C5 00		 cmp $00
  1559 399A EA			 nop
  1560 399B A9 00		 lda #$00
  1561 399D 8D 1E D0		 sta $d01e
  1562 39A0 A9 00		 lda #$00
  1563 39A2 8D 1E D0		 sta $d01e
  1564
  1565 				; line=160
  1566
  1567 39A5 20 E5 EC		 jsr wait24cycle
  1568 39A8 C5 00		 cmp $00
  1569
  1570 				; line=161
  1571
  1572 39AA 20 E5 EC		 jsr wait24cycle
  1573 39AD A9 78		c174 lda #$78
  1574 39AF 8D 17 D0		 sta $d017
  1575 39B2 A0 F8		c175 ldy #$F8
  1576 39B4 C5 00		 cmp $00
  1577 39B6 EA EA		 :2 nop
  1578 39B8 8C 17 D0		 sty $d017
  1579 39BB C5 00		 cmp $00
  1580 39BD EA			 nop
  1581 39BE A9 00		 lda #$00
  1582 39C0 8D 1E D0		 sta $d01e
  1583 39C3 A9 00		 lda #$00
  1584 39C5 8D 1E D0		 sta $d01e
  1585
  1586 				; line=162
  1587
  1588 39C8 20 E5 EC		 jsr wait24cycle
  1589 39CB A9 78		c176 lda #$78
  1590 39CD 8D 17 D0		 sta $d017
  1591 39D0 A0 F8		c177 ldy #$F8
  1592 39D2 C5 00		 cmp $00
  1593 39D4 EA EA		 :2 nop
  1594 39D6 8C 17 D0		 sty $d017
  1595 39D9 C5 00		 cmp $00
  1596 39DB EA			 nop
  1597 39DC A9 00		 lda #$00
  1598 39DE 8D 1E D0		 sta $d01e
  1599 39E1 A9 00		 lda #$00
  1600 39E3 8D 1E D0		 sta $d01e
  1601
  1602 				; line=163
  1603
  1604 39E6 20 E5 EC		 jsr wait24cycle
  1605 39E9 A9 78		c178 lda #$78
  1606 39EB 8D 17 D0		 sta $d017
  1607 39EE A0 F8		c179 ldy #$F8
  1608 39F0 C5 00		 cmp $00
  1609 39F2 EA EA		 :2 nop
  1610 39F4 8C 17 D0		 sty $d017
  1611 39F7 C5 00		 cmp $00
  1612 39F9 EA			 nop
  1613 39FA A9 00		 lda #$00
  1614 39FC 8D 1E D0		 sta $d01e
  1615 39FF A9 00		 lda #$00
  1616 3A01 8D 1E D0		 sta $d01e
  1617
  1618 				; line=164
  1619
  1620 3A04 20 E5 EC		 jsr wait24cycle
  1621 3A07 A9 78		c180 lda #$78
  1622 3A09 8D 17 D0		 sta $d017
  1623 3A0C A0 F8		c181 ldy #$F8
  1624 3A0E C5 00		 cmp $00
  1625 3A10 EA EA		 :2 nop
  1626 3A12 8C 17 D0		 sty $d017
  1627 3A15 C5 00		 cmp $00
  1628 3A17 EA			 nop
  1629 3A18 A9 00		 lda #$00
  1630 3A1A 8D 1E D0		 sta $d01e
  1631 3A1D A9 00		 lda #$00
  1632 3A1F 8D 1E D0		 sta $d01e
  1633
  1634 				; line=165
  1635
  1636 3A22 20 E5 EC		 jsr wait24cycle
  1637 3A25 A9 78		c182 lda #$78
  1638 3A27 8D 17 D0		 sta $d017
  1639 3A2A A0 F8		c183 ldy #$F8
  1640 3A2C C5 00		 cmp $00
  1641 3A2E EA EA		 :2 nop
  1642 3A30 8C 17 D0		 sty $d017
  1643 3A33 C5 00		 cmp $00
  1644 3A35 EA			 nop
  1645 3A36 A9 00		 lda #$00
  1646 3A38 8D 1E D0		 sta $d01e
  1647 3A3B A9 00		 lda #$00
  1648 3A3D 8D 1E D0		 sta $d01e
  1649
  1650 				; line=166
  1651
  1652 3A40 20 E5 EC		 jsr wait24cycle
  1653 3A43 A9 78		c184 lda #$78
  1654 3A45 8D 17 D0		 sta $d017
  1655 3A48 A0 F8		c185 ldy #$F8
  1656 3A4A C5 00		 cmp $00
  1657 3A4C EA EA		 :2 nop
  1658 3A4E 8C 17 D0		 sty $d017
  1659 3A51 C5 00		 cmp $00
  1660 3A53 EA			 nop
  1661 3A54 A9 00		 lda #$00
  1662 3A56 8D 1E D0		 sta $d01e
  1663 3A59 A9 00		 lda #$00
  1664 3A5B 8D 1E D0		 sta $d01e
  1665
  1666 				; line=167
  1667
  1668 3A5E 20 E5 EC		 jsr wait24cycle
  1669 3A61 A9 78		c186 lda #$78
  1670 3A63 8D 17 D0		 sta $d017
  1671 3A66 A0 F8		c187 ldy #$F8
  1672 3A68 C5 00		 cmp $00
  1673 3A6A EA EA		 :2 nop
  1674 3A6C 8C 17 D0		 sty $d017
  1675 3A6F C5 00		 cmp $00
  1676 3A71 EA			 nop
  1677 3A72 A9 00		 lda #$00
  1678 3A74 8D 1E D0		 sta $d01e
  1679 3A77 A9 00		 lda #$00
  1680 3A79 8D 1E D0		 sta $d01e
  1681
  1682 				; line=168
  1683
  1684 3A7C 20 E5 EC		 jsr wait24cycle
  1685 3A7F C5 00		 cmp $00
  1686
  1687 				; line=169
  1688
  1689 3A81 20 E5 EC		 jsr wait24cycle
  1690 3A84 A9 78		c188 lda #$78
  1691 3A86 8D 17 D0		 sta $d017
  1692 3A89 A0 F8		c189 ldy #$F8
  1693 3A8B C5 00		 cmp $00
  1694 3A8D EA EA		 :2 nop
  1695 3A8F 8C 17 D0		 sty $d017
  1696 3A92 C5 00		 cmp $00
  1697 3A94 EA			 nop
  1698 3A95 A9 00		 lda #$00
  1699 3A97 8D 1E D0		 sta $d01e
  1700 3A9A A9 00		 lda #$00
  1701 3A9C 8D 1E D0		 sta $d01e
  1702
  1703 				; line=170
  1704
  1705 3A9F 20 E5 EC		 jsr wait24cycle
  1706 3AA2 A9 78		c190 lda #$78
  1707 3AA4 8D 17 D0		 sta $d017
  1708 3AA7 A0 F8		c191 ldy #$F8
  1709 3AA9 C5 00		 cmp $00
  1710 3AAB EA EA		 :2 nop
  1711 3AAD 8C 17 D0		 sty $d017
  1712 3AB0 C5 00		 cmp $00
  1713 3AB2 EA			 nop
  1714 3AB3 A9 00		 lda #$00
  1715 3AB5 8D 1E D0		 sta $d01e
  1716 3AB8 A9 00		 lda #$00
  1717 3ABA 8D 1E D0		 sta $d01e
  1718
  1719 				; line=171
  1720
  1721 3ABD 20 E5 EC		 jsr wait24cycle
  1722 3AC0 A9 78		c192 lda #$78
  1723 3AC2 8D 17 D0		 sta $d017
  1724 3AC5 A0 F8		c193 ldy #$F8
  1725 3AC7 C5 00		 cmp $00
  1726 3AC9 EA EA		 :2 nop
  1727 3ACB 8C 17 D0		 sty $d017
  1728 3ACE C5 00		 cmp $00
  1729 3AD0 EA			 nop
  1730 3AD1 A9 00		 lda #$00
  1731 3AD3 8D 1E D0		 sta $d01e
  1732 3AD6 A9 00		 lda #$00
  1733 3AD8 8D 1E D0		 sta $d01e
  1734
  1735 				; line=172
  1736
  1737 3ADB 20 E5 EC		 jsr wait24cycle
  1738 3ADE A9 78		c194 lda #$78
  1739 3AE0 8D 17 D0		 sta $d017
  1740 3AE3 A0 F8		c195 ldy #$F8
  1741 3AE5 C5 00		 cmp $00
  1742 3AE7 EA EA		 :2 nop
  1743 3AE9 8C 17 D0		 sty $d017
  1744 3AEC C5 00		 cmp $00
  1745 3AEE EA			 nop
  1746 3AEF A9 00		 lda #$00
  1747 3AF1 8D 1E D0		 sta $d01e
  1748 3AF4 A9 00		 lda #$00
  1749 3AF6 8D 1E D0		 sta $d01e
  1750
  1751 				; line=173
  1752
  1753 3AF9 20 E5 EC		 jsr wait24cycle
  1754 3AFC A9 78		c196 lda #$78
  1755 3AFE 8D 17 D0		 sta $d017
  1756 3B01 A0 F8		c197 ldy #$F8
  1757 3B03 C5 00		 cmp $00
  1758 3B05 EA EA		 :2 nop
  1759 3B07 8C 17 D0		 sty $d017
  1760 3B0A C5 00		 cmp $00
  1761 3B0C EA			 nop
  1762 3B0D A9 00		 lda #$00
  1763 3B0F 8D 1E D0		 sta $d01e
  1764 3B12 A9 00		 lda #$00
  1765 3B14 8D 1E D0		 sta $d01e
  1766
  1767 				; line=174
  1768
  1769 3B17 20 E5 EC		 jsr wait24cycle
  1770 3B1A A9 78		c198 lda #$78
  1771 3B1C 8D 17 D0		 sta $d017
  1772 3B1F A0 F8		c199 ldy #$F8
  1773 3B21 C5 00		 cmp $00
  1774 3B23 EA EA		 :2 nop
  1775 3B25 8C 17 D0		 sty $d017
  1776 				; cmp $00
  1777 				; nop
  1778 				; lda #$00
  1779 				; sta $d01e
  1780 				; lda #$00
  1781 				; sta $d01e
  1782
  1783 				; line=175
  1784 				; jsr wait60cycle
  1785
  1786 3B28			 dli_quit dli2_176
Macro: DLI_QUIT [Source: d:\Download\getris\getris2.asm]
     5 3B28 A9 35 8D EA EB A9 +    mwa #DLI2_176 nmi.vdli
     8 3B32 4C BB EC		  jmp nmi.quit
    10 = 3B35			  .def ?old_dli
Source: d:\Download\getris\ekran2.asm
  1787
  1788
  1789
  1790 3B35			dli2_176
  1791 				; line=176
  1792
  1793 3B35 A9 00		 lda #$00
  1794 3B37 A2 00		 ldx #$00
  1795 3B39 A0 00		 ldy #$00
  1796 3B3B 8D 0A D4		 sta $d40a
  1797 3B3E 8D 1E D0		 sta $d01e
  1798 3B41 8E 1E D0		 stx $d01e
  1799 3B44 8C 1E D0		 sty $d01e
  1800 3B47 A9 00		 lda #$00
  1801 				; sta $d01e
  1802 3B49 C5 00		 cmp $00
  1803
  1804 				; line=177
  1805
  1806 3B4B 20 E5 EC		 jsr wait24cycle
  1807 3B4E A9 54		c200 lda #$54
  1808 3B50 8D 19 D0		 sta $d019
  1809 3B53 A9 00		 lda #$00
  1810 3B55 8D 1E D0		 sta $d01e
  1811 3B58 A9 00		 lda #$00
  1812 3B5A 8D 1E D0		 sta $d01e
  1813 3B5D A9 0A		c201 lda #$0A
  1814 3B5F 8D 19 D0		 sta $d019
  1815 3B62 A9 00		 lda #$00
  1816 3B64 8D 1E D0		 sta $d01e
  1817 3B67 A9 00		 lda #$00
  1818 3B69 8D 1E D0		 sta $d01e
  1819
  1820 				; line=178
  1821
  1822 3B6C 20 E5 EC		 jsr wait24cycle
  1823 3B6F A9 54		c202 lda #$54
  1824 3B71 8D 19 D0		 sta $d019
  1825 3B74 A9 00		 lda #$00
  1826 3B76 8D 1E D0		 sta $d01e
  1827 3B79 A9 00		 lda #$00
  1828 3B7B 8D 1E D0		 sta $d01e
  1829 3B7E A9 0A		c203 lda #$0A
  1830 3B80 8D 19 D0		 sta $d019
  1831 3B83 A9 00		 lda #$00
  1832 3B85 8D 1E D0		 sta $d01e
  1833 3B88 A9 00		 lda #$00
  1834 3B8A 8D 1E D0		 sta $d01e
  1835
  1836 				; line=179
  1837
  1838 3B8D 20 E5 EC		 jsr wait24cycle
  1839 3B90 A9 54		c204 lda #$54
  1840 3B92 8D 19 D0		 sta $d019
  1841 3B95 A9 00		 lda #$00
  1842 3B97 8D 1E D0		 sta $d01e
  1843 3B9A A9 00		 lda #$00
  1844 3B9C 8D 1E D0		 sta $d01e
  1845 3B9F A9 0A		c205 lda #$0A
  1846 3BA1 8D 19 D0		 sta $d019
  1847 3BA4 A9 00		 lda #$00
  1848 3BA6 8D 1E D0		 sta $d01e
  1849 3BA9 A9 00		 lda #$00
  1850 3BAB 8D 1E D0		 sta $d01e
  1851
  1852 				; line=180
  1853
  1854 3BAE 20 E5 EC		 jsr wait24cycle
  1855 3BB1 A9 54		c206 lda #$54
  1856 3BB3 8D 19 D0		 sta $d019
  1857 3BB6 A9 00		 lda #$00
  1858 3BB8 8D 1E D0		 sta $d01e
  1859 3BBB A9 00		 lda #$00
  1860 3BBD 8D 1E D0		 sta $d01e
  1861 3BC0 A9 0A		c207 lda #$0A
  1862 3BC2 8D 19 D0		 sta $d019
  1863 3BC5 A9 54		 lda #$54
  1864 3BC7 EA EA		 :2 nop
  1865 3BC9 A9 00		 lda #$00
  1866 3BCB 8D 1E D0		 sta $d01e
  1867
  1868 				; line=181
  1869
  1870 				; jsr wait24cycle
  1871 3BCE A9 54		c208 lda #$54
  1872 3BD0 8D 19 D0		 sta $d019
  1873 				; lda #$00
  1874 				; sta $d01e
  1875 				; lda #$00
  1876 				; sta $d01e
  1877 				; lda #$00
  1878 				; sta $d01e
  1879 				; lda #$00
  1880 				; sta $d01e
  1881 				; lda #$00
  1882 				; sta $d01e
  1883
  1884 				; line=182
  1885 				; jsr wait60cycle
  1886
  1887 				; line=183
  1888 				; jsr wait60cycle
  1889
  1890 3BD3			 dli_quit dli2_184
Macro: DLI_QUIT [Source: d:\Download\getris\getris2.asm]
     3 3BD3 A9 DB 8D EA EB	   mva <DLI2_184 nmi.vdli
     8 3BD8 4C BB EC		  jmp nmi.quit
    10 = 3BDB			  .def ?old_dli
Source: d:\Download\getris\ekran2.asm
  1891
  1892
  1893
  1894 3BDB			dli2_184
  1895
  1896 				; line=184
  1897
  1898 3BDB A9 A8		 lda >fnt+$400*$04
  1899 3BDD A2 47		 ldx #$47
  1900 3BDF A0 54		c32 ldy #$54
  1901 3BE1 8D 0A D4		 sta $d40a
  1902 3BE4 8D 09 D4		 sta CHARBASE
  1903 3BE7 8E 01 D0		 stx Player1_PositionX
  1904 3BEA 8C 13 D0		 sty Player1_Missile1_Color1_PM1
  1905 3BED A9 00		 lda #$00
  1906 				; sta $d01e
  1907 3BEF C5 00		 cmp $00
  1908
  1909 				; line=185
  1910
  1911 3BF1 20 E5 EC		 jsr wait24cycle
  1912 3BF4 A9 78		c209 lda #$78
  1913 3BF6 8D 17 D0		 sta $d017
  1914 3BF9 A2 18		c210 ldx #$18
  1915 3BFB A0 F8		c211 ldy #$F8
  1916 3BFD 8E 17 D0		 stx $d017
  1917 3C00 8D 17 D0		 sta $d017
  1918 3C03 8C 17 D0		 sty $d017
  1919 3C06 EA			 nop
  1920 3C07 A9 00		 lda #$00
  1921 3C09 8D 1E D0		 sta $d01e
  1922 3C0C A9 00		 lda #$00
  1923 3C0E 8D 1E D0		 sta $d01e
  1924
  1925 				; line=186
  1926
  1927 3C11 A9 43		 lda #$43
  1928 3C13 A2 18		c33 ldx #$18
  1929 3C15 A0 00		 ldy #$00
  1930 3C17 8D 01 D0		 sta Player1_PositionX
  1931 3C1A 8E 13 D0		 stx Player1_Missile1_Color1_PM1
  1932 3C1D 8C 1E D0		 sty $d01e
  1933 3C20 A9 00		 lda #$00
  1934 3C22 8D 1E D0		 sta $d01e
  1935 3C25 A9 78		c212 lda #$78
  1936 3C27 8D 17 D0		 sta $d017
  1937 3C2A A2 18		c213 ldx #$18
  1938 3C2C A0 F8		c214 ldy #$F8
  1939 3C2E 8E 17 D0		 stx $d017
  1940 3C31 8D 17 D0		 sta $d017
  1941 3C34 8C 17 D0		 sty $d017
  1942 3C37 EA			 nop
  1943 3C38 A9 00		 lda #$00
  1944 3C3A 8D 1E D0		 sta $d01e
  1945 3C3D A9 00		 lda #$00
  1946 3C3F 8D 1E D0		 sta $d01e
  1947
  1948 				; line=187
  1949
  1950 3C42 20 E5 EC		 jsr wait24cycle
  1951 3C45 A9 78		c215 lda #$78
  1952 3C47 8D 17 D0		 sta $d017
  1953 3C4A A2 18		c216 ldx #$18
  1954 3C4C A0 F8		c217 ldy #$F8
  1955 3C4E 8E 17 D0		 stx $d017
  1956 3C51 8D 17 D0		 sta $d017
  1957 3C54 8C 17 D0		 sty $d017
  1958 3C57 EA			 nop
  1959 3C58 A9 00		 lda #$00
  1960 3C5A 8D 1E D0		 sta $d01e
  1961 3C5D A9 00		 lda #$00
  1962 3C5F 8D 1E D0		 sta $d01e
  1963
  1964 				; line=188
  1965
  1966 3C62 20 E5 EC		 jsr wait24cycle
  1967 3C65 A9 78		c218 lda #$78
  1968 3C67 8D 17 D0		 sta $d017
  1969 3C6A A2 18		c219 ldx #$18
  1970 3C6C A0 F8		c220 ldy #$F8
  1971 3C6E 8E 17 D0		 stx $d017
  1972 3C71 8D 17 D0		 sta $d017
  1973 3C74 8C 17 D0		 sty $d017
  1974 3C77 EA			 nop
  1975 3C78 A9 00		 lda #$00
  1976 3C7A 8D 1E D0		 sta $d01e
  1977 3C7D A9 00		 lda #$00
  1978 3C7F 8D 1E D0		 sta $d01e
  1979
  1980 				; line=189
  1981
  1982 3C82 A9 0A		c34 lda #$0A
  1983 3C84 A2 00		 ldx #$00
  1984 3C86 A0 00		 ldy #$00
  1985 3C88 8D 13 D0		 sta Player1_Missile1_Color1_PM1
  1986 3C8B 8E 1E D0		 stx $d01e
  1987 3C8E 8C 1E D0		 sty $d01e
  1988 3C91 A9 00		 lda #$00
  1989 3C93 8D 1E D0		 sta $d01e
  1990 3C96 A9 78		c221 lda #$78
  1991 3C98 8D 17 D0		 sta $d017
  1992 3C9B A2 18		c222 ldx #$18
  1993 3C9D A0 F8		c223 ldy #$F8
  1994 3C9F 8E 17 D0		 stx $d017
  1995 3CA2 8D 17 D0		 sta $d017
  1996 3CA5 8C 17 D0		 sty $d017
  1997 3CA8 EA			 nop
  1998 3CA9 A9 00		 lda #$00
  1999 3CAB 8D 1E D0		 sta $d01e
  2000 3CAE A9 00		 lda #$00
  2001 3CB0 8D 1E D0		 sta $d01e
  2002
  2003 				; line=190
  2004
  2005 3CB3 20 E5 EC		 jsr wait24cycle
  2006 3CB6 A9 78		c224 lda #$78
  2007 3CB8 8D 17 D0		 sta $d017
  2008 3CBB A2 18		c225 ldx #$18
  2009 3CBD A0 F8		c226 ldy #$F8
  2010 3CBF 8E 17 D0		 stx $d017
  2011 3CC2 8D 17 D0		 sta $d017
  2012 3CC5 8C 17 D0		 sty $d017
  2013 3CC8 EA			 nop
  2014 3CC9 A9 00		 lda #$00
  2015 3CCB 8D 1E D0		 sta $d01e
  2016 3CCE A9 00		 lda #$00
  2017 3CD0 8D 1E D0		 sta $d01e
  2018
  2019 				; line=191
  2020
  2021 3CD3 20 E5 EC		 jsr wait24cycle
  2022 3CD6 A9 78		c227 lda #$78
  2023 3CD8 8D 17 D0		 sta $d017
  2024 3CDB A2 18		c228 ldx #$18
  2025 3CDD A0 F8		c229 ldy #$F8
  2026 3CDF 8E 17 D0		 stx $d017
  2027 3CE2 8D 17 D0		 sta $d017
  2028 3CE5 8C 17 D0		 sty $d017
  2029 3CE8 EA			 nop
  2030 3CE9 A9 00		 lda #$00
  2031 3CEB 8D 1E D0		 sta $d01e
  2032 3CEE A9 00		 lda #$00
  2033 3CF0 8D 1E D0		 sta $d01e
  2034
  2035 				; line=192
  2036
  2037 3CF3 A9 45		 lda #$45
  2038 3CF5 A2 18		c35 ldx #$18
  2039 3CF7 A0 00		 ldy #$00
  2040 3CF9 8D 01 D0		 sta Player1_PositionX
  2041 3CFC 8E 13 D0		 stx Player1_Missile1_Color1_PM1
  2042 3CFF 8C 1E D0		 sty $d01e
  2043 3D02 A9 00		 lda #$00
  2044 3D04 8D 1E D0		 sta $d01e
  2045 3D07 C5 00		 cmp $00
  2046
  2047 				; line=193
  2048
  2049 3D09 A9 58		 lda #$58
  2050 3D0B A2 78		c36 ldx #$78
  2051 3D0D A0 00		 ldy #$00
  2052 3D0F 8D 01 D0		 sta Player1_PositionX
  2053 3D12 8E 13 D0		 stx Player1_Missile1_Color1_PM1
  2054 3D15 8C 1E D0		 sty $d01e
  2055 3D18 A9 00		 lda #$00
  2056 3D1A 8D 1E D0		 sta $d01e
  2057 3D1D A9 78		c230 lda #$78
  2058 3D1F 8D 17 D0		 sta $d017
  2059 3D22 A2 18		c231 ldx #$18
  2060 3D24 A0 F8		c232 ldy #$F8
  2061 3D26 8E 17 D0		 stx $d017
  2062 3D29 8D 17 D0		 sta $d017
  2063 3D2C 8C 17 D0		 sty $d017
  2064 3D2F EA			 nop
  2065 3D30 A9 00		 lda #$00
  2066 3D32 8D 1E D0		 sta $d01e
  2067 3D35 A9 00		 lda #$00
  2068 3D37 8D 1E D0		 sta $d01e
  2069
  2070 				; line=194
  2071
  2072 3D3A 20 E5 EC		 jsr wait24cycle
  2073 3D3D A9 78		c233 lda #$78
  2074 3D3F 8D 17 D0		 sta $d017
  2075 3D42 A2 18		c234 ldx #$18
  2076 3D44 A0 F8		c235 ldy #$F8
  2077 3D46 8E 17 D0		 stx $d017
  2078 3D49 8D 17 D0		 sta $d017
  2079 3D4C 8C 17 D0		 sty $d017
  2080 3D4F EA			 nop
  2081 3D50 A9 00		 lda #$00
  2082 3D52 8D 1E D0		 sta $d01e
  2083 3D55 A9 00		 lda #$00
  2084 3D57 8D 1E D0		 sta $d01e
  2085
  2086 				; line=195
  2087
  2088 3D5A 20 E5 EC		 jsr wait24cycle
  2089 3D5D A9 78		c236 lda #$78
  2090 3D5F 8D 17 D0		 sta $d017
  2091 3D62 A2 18		c237 ldx #$18
  2092 3D64 A0 F8		c238 ldy #$F8
  2093 3D66 8E 17 D0		 stx $d017
  2094 3D69 8D 17 D0		 sta $d017
  2095 3D6C 8C 17 D0		 sty $d017
  2096 3D6F EA			 nop
  2097 3D70 A9 00		 lda #$00
  2098 3D72 8D 1E D0		 sta $d01e
  2099 3D75 A9 00		 lda #$00
  2100 3D77 8D 1E D0		 sta $d01e
  2101
  2102 				; line=196
  2103
  2104 3D7A A9 18		c37 lda #$18
  2105 3D7C A2 00		 ldx #$00
  2106 3D7E A0 00		 ldy #$00
  2107 3D80 8D 17 D0		 sta Playfield_Color1_PF1
  2108 3D83 8E 1E D0		 stx $d01e
  2109 3D86 8C 1E D0		 sty $d01e
  2110 3D89 A9 00		 lda #$00
  2111 3D8B 8D 1E D0		 sta $d01e
  2112 3D8E A9 78		c239 lda #$78
  2113 3D90 8D 17 D0		 sta $d017
  2114 3D93 A2 18		c240 ldx #$18
  2115 3D95 A0 F8		c241 ldy #$F8
  2116 3D97 8E 17 D0		 stx $d017
  2117 3D9A 8D 17 D0		 sta $d017
  2118 3D9D 8C 17 D0		 sty $d017
  2119 3DA0 EA			 nop
  2120 3DA1 A9 00		 lda #$00
  2121 3DA3 8D 1E D0		 sta $d01e
  2122 3DA6 A9 00		 lda #$00
  2123 3DA8 8D 1E D0		 sta $d01e
  2124
  2125 				; line=197
  2126
  2127 3DAB 20 E5 EC		 jsr wait24cycle
  2128 3DAE A9 78		c242 lda #$78
  2129 3DB0 8D 17 D0		 sta $d017
  2130 3DB3 A2 18		c243 ldx #$18
  2131 3DB5 A0 F8		c244 ldy #$F8
  2132 3DB7 8E 17 D0		 stx $d017
  2133 3DBA 8D 17 D0		 sta $d017
  2134 3DBD 8C 17 D0		 sty $d017
  2135 3DC0 EA			 nop
  2136 3DC1 A9 00		 lda #$00
  2137 3DC3 8D 1E D0		 sta $d01e
  2138 3DC6 A9 00		 lda #$00
  2139 3DC8 8D 1E D0		 sta $d01e
  2140
  2141 				; line=198
  2142
  2143 3DCB 20 E5 EC		 jsr wait24cycle
  2144 3DCE A9 78		c245 lda #$78
  2145 3DD0 8D 17 D0		 sta $d017
  2146 3DD3 A2 18		c246 ldx #$18
  2147 3DD5 A0 F8		c247 ldy #$F8
  2148 3DD7 8E 17 D0		 stx $d017
  2149 3DDA 8D 17 D0		 sta $d017
  2150 3DDD 8C 17 D0		 sty $d017
  2151 3DE0 EA			 nop
  2152 3DE1 A9 00		 lda #$00
  2153 3DE3 8D 1E D0		 sta $d01e
  2154 3DE6 A9 00		 lda #$00
  2155 3DE8 8D 1E D0		 sta $d01e
  2156
  2157 				; line=199
  2158
  2159 3DEB 20 E5 EC		 jsr wait24cycle
  2160 3DEE A9 78		c248 lda #$78
  2161 3DF0 8D 17 D0		 sta $d017
  2162 3DF3 A2 18		c249 ldx #$18
  2163 3DF5 A0 F8		c250 ldy #$F8
  2164 3DF7 8E 17 D0		 stx $d017
  2165 3DFA 8D 17 D0		 sta $d017
  2166 3DFD 8C 17 D0		 sty $d017
  2167 3E00 EA			 nop
  2168 3E01 A9 00		 lda #$00
  2169 3E03 8D 1E D0		 sta $d01e
  2170 3E06 A9 00		 lda #$00
  2171 3E08 8D 1E D0		 sta $d01e
  2172
  2173 				; line=200
  2174
  2175 3E0B A9 43		 lda #$43
  2176 3E0D A2 18		c38 ldx #$18
  2177 3E0F A0 00		 ldy #$00
  2178 3E11 8D 01 D0		 sta Player1_PositionX
  2179 3E14 8E 13 D0		 stx Player1_Missile1_Color1_PM1
  2180 3E17 8C 1E D0		 sty $d01e
  2181 3E1A A9 00		 lda #$00
  2182 3E1C 8D 1E D0		 sta $d01e
  2183 3E1F C5 00		 cmp $00
  2184
  2185 				; line=201
  2186
  2187 3E21 20 E5 EC		 jsr wait24cycle
  2188 3E24 A9 78		c251 lda #$78
  2189 3E26 8D 17 D0		 sta $d017
  2190 3E29 A2 18		c252 ldx #$18
  2191 3E2B A0 F8		c253 ldy #$F8
  2192 3E2D 8E 17 D0		 stx $d017
  2193 3E30 8D 17 D0		 sta $d017
  2194 3E33 8C 17 D0		 sty $d017
  2195 3E36 EA			 nop
  2196 3E37 A9 00		 lda #$00
  2197 3E39 8D 1E D0		 sta $d01e
  2198 3E3C A9 00		 lda #$00
  2199 3E3E 8D 1E D0		 sta $d01e
  2200
  2201 				; line=202
  2202
  2203 3E41 20 E5 EC		 jsr wait24cycle
  2204 3E44 A9 78		c254 lda #$78
  2205 3E46 8D 17 D0		 sta $d017
  2206 3E49 A2 18		c255 ldx #$18
  2207 3E4B A0 F8		c256 ldy #$F8
  2208 3E4D 8E 17 D0		 stx $d017
  2209 3E50 8D 17 D0		 sta $d017
  2210 3E53 8C 17 D0		 sty $d017
  2211 3E56 EA			 nop
  2212 3E57 A9 00		 lda #$00
  2213 3E59 8D 1E D0		 sta $d01e
  2214 3E5C A9 00		 lda #$00
  2215 3E5E 8D 1E D0		 sta $d01e
  2216
  2217 				; line=203
  2218
  2219 3E61 20 E5 EC		 jsr wait24cycle
  2220 3E64 A9 78		c257 lda #$78
  2221 3E66 8D 17 D0		 sta $d017
  2222 3E69 A2 18		c258 ldx #$18
  2223 3E6B A0 F8		c259 ldy #$F8
  2224 3E6D 8E 17 D0		 stx $d017
  2225 3E70 8D 17 D0		 sta $d017
  2226 3E73 8C 17 D0		 sty $d017
  2227 3E76 EA			 nop
  2228 3E77 A9 00		 lda #$00
  2229 3E79 8D 1E D0		 sta $d01e
  2230 3E7C A9 00		 lda #$00
  2231 3E7E 8D 1E D0		 sta $d01e
  2232
  2233 				; line=204
  2234
  2235 3E81 20 E5 EC		 jsr wait24cycle
  2236 3E84 A9 78		c260 lda #$78
  2237 3E86 8D 17 D0		 sta $d017
  2238 3E89 A2 18		c261 ldx #$18
  2239 3E8B A0 F8		c262 ldy #$F8
  2240 3E8D 8E 17 D0		 stx $d017
  2241 3E90 8D 17 D0		 sta $d017
  2242 3E93 8C 17 D0		 sty $d017
  2243 3E96 EA			 nop
  2244 3E97 A9 00		 lda #$00
  2245 3E99 8D 1E D0		 sta $d01e
  2246 3E9C A9 00		 lda #$00
  2247 3E9E 8D 1E D0		 sta $d01e
  2248
  2249 				; line=205
  2250
  2251 3EA1 20 E5 EC		 jsr wait24cycle
  2252 3EA4 A9 78		c263 lda #$78
  2253 3EA6 8D 17 D0		 sta $d017
  2254 3EA9 A2 18		c264 ldx #$18
  2255 3EAB A0 F8		c265 ldy #$F8
  2256 3EAD 8E 17 D0		 stx $d017
  2257 3EB0 8D 17 D0		 sta $d017
  2258 3EB3 8C 17 D0		 sty $d017
  2259 3EB6 EA			 nop
  2260 3EB7 A9 00		 lda #$00
  2261 3EB9 8D 1E D0		 sta $d01e
  2262 3EBC A9 00		 lda #$00
  2263 3EBE 8D 1E D0		 sta $d01e
  2264
  2265 				; line=206
  2266
  2267 3EC1 20 E5 EC		 jsr wait24cycle
  2268 3EC4 A9 78		c266 lda #$78
  2269 3EC6 8D 17 D0		 sta $d017
  2270 3EC9 A2 18		c267 ldx #$18
  2271 3ECB A0 F8		c268 ldy #$F8
  2272 3ECD 8E 17 D0		 stx $d017
  2273 3ED0 8D 17 D0		 sta $d017
  2274 3ED3 8C 17 D0		 sty $d017
  2275 3ED6 EA			 nop
  2276 3ED7 A9 00		 lda #$00
  2277 3ED9 8D 1E D0		 sta $d01e
  2278 3EDC A9 00		 lda #$00
  2279 3EDE 8D 1E D0		 sta $d01e
  2280
  2281 				; line=207
  2282
  2283 3EE1 20 E5 EC		 jsr wait24cycle
  2284 3EE4 A9 78		c269 lda #$78
  2285 3EE6 8D 17 D0		 sta $d017
  2286 3EE9 A2 18		c270 ldx #$18
  2287 3EEB A0 F8		c271 ldy #$F8
  2288 3EED 8E 17 D0		 stx $d017
  2289 3EF0 8D 17 D0		 sta $d017
  2290 3EF3 8C 17 D0		 sty $d017
  2291 3EF6 EA			 nop
  2292 3EF7 A9 00		 lda #$00
  2293 3EF9 8D 1E D0		 sta $d01e
  2294 3EFC A9 00		 lda #$00
  2295 3EFE 8D 1E D0		 sta $d01e
  2296
  2297 				; line=208
  2298 				 
  2299 3F01 A9 68		 lda #$68
  2300 3F03 A2 48		c39 ldx #$48
  2301 3F05 A0 00		 ldy #$00
  2302 3F07 8D 03 D0		 sta Player3_PositionX
  2303 3F0A 8E 15 D0		 stx Player3_Missile3_Color3_PM3
  2304 3F0D 8C 1E D0		 sty $d01e
  2305 3F10 A9 00		 lda #$00
  2306 3F12 8D 1E D0		 sta $d01e
  2307 3F15 C5 00		 cmp $00
  2308
  2309 				; line=209
  2310
  2311 3F17 A9 34		c40 lda #$34
  2312 3F19 A2 42		 ldx #$42
  2313 3F1B A0 00		 ldy #$00
  2314 3F1D 8D 17 D0		 sta Playfield_Color1_PF1
  2315 3F20 8E 01 D0		 stx Player1_PositionX
  2316 3F23 8C 1E D0		 sty $d01e
  2317 3F26 A9 00		 lda #$00
  2318 3F28 8D 1E D0		 sta $d01e
  2319 3F2B 20 E2 EC		 jsr wait36cycle
  2320
  2321 				; line=210
  2322
  2323 3F2E 20 D8 EC		 jsr wait60cycle
  2324
  2325 				; line=211
  2326
  2327 3F31 20 D8 EC		 jsr wait60cycle
  2328
  2329 				; line=212
  2330
  2331 3F34 20 D8 EC		 jsr wait60cycle
  2332
  2333 				; line=213
  2334
  2335 3F37 20 D8 EC		 jsr wait60cycle
  2336
  2337 				; line=214
  2338
  2339 3F3A 20 D8 EC		 jsr wait60cycle
  2340
  2341 				; line=215
  2342
  2343 3F3D A9 40		 lda #$40
  2344 3F3F A2 14		c41 ldx #$14
  2345 3F41 A0 00		 ldy #$00
  2346 3F43 8D 01 D0		 sta Player1_PositionX
  2347 3F46 8E 13 D0		 stx Player1_Missile1_Color1_PM1
  2348 3F49 8C 1E D0		 sty $d01e
  2349 3F4C A9 00		 lda #$00
  2350 3F4E 8D 1E D0		 sta $d01e
  2351 3F51 20 E2 EC		 jsr wait36cycle
  2352
  2353 				; line=216
  2354
  2355 3F54 A9 AC		 lda >fnt+$400*$05
  2356 3F56 A2 28		c42 ldx #$28
  2357 3F58 A0 3A		c43 ldy #$3A
  2358 3F5A 8D 09 D4		 sta CHARBASE
  2359 3F5D 8E 16 D0		 stx Playfield_Color0_PF0
  2360 3F60 8C 18 D0		 sty Playfield_Color2_PF2
  2361 				; lda #$00
  2362 				; sta $d01e
  2363 				; cmp $00
  2364
  2365 				; jsr wait60cycle
  2366
  2367 3F63			 dli_quit ekran1.dli
Macro: DLI_QUIT [Source: d:\Download\getris\getris2.asm]
     5 3F63 A9 C8 8D EA EB A9 +    mwa #EKRAN1.DLI nmi.vdli
     8 3F6D 4C BB EC		  jmp nmi.quit
    10 = 3F70			  .def ?old_dli
Source: d:\Download\getris\ekran2.asm
  2368
  2369 				;-- tutaj nasze tablice (pliki) z programu Graph2Font
  2370
  2371 = 9800			fnt  equ fnt2
  2372 = B628			text equ text2
  1300 				.endl
  1301
  1302
  1303 				/*
  1304 				  Program DLI dla ekranu WELL DONE
  1305 				*/
  1305
  1306 3F70			.local well
  1307 3F70			 icl 'well_done_add.asm'
Source: d:\Download\getris\well_done_add.asm
     1
     2 = 17E0			text equ text_wellDone
     3 = BF94			pmg  equ pmg_wellDone
     4 = 1400			fnt  equ fnt_txt2
     5
     6 = 0007			color_nr equ 7
     7
     8
     9 3F70 44 E0 17 70 70 70 + ant dta $44,a(text),d'ppppppppp',$f0
    10 3F7D 04 04 84 04 04 04 +  dta 4,4,$84,4,4,4,4,4
    11 3F85 41 70 3F		 dta $41,a(ant)
    12
    13
    14 3F88			main
    15
    16 3F88			 hax #pmg-1
Macro: HAX [Source: d:\Download\getris\getris2.asm]
     1 3F88 A9 BF		 lda >PMG-1
     2 3F8A A2 93		 ldx <PMG-1
Source: d:\Download\getris\well_done_add.asm
    17 3F8C 20 AD 7A		 jsr decode
    18
    19
    20 				;-- init PMG
    21 3F8F A9 CB 8D 07 D4	 mva >pmBase_Text $d407	;PMCTL - wyswietlac duchy i pociski
    22 3F94 A9 03 8D 1D D0	 mva #3 $d01d		;PMCTL - show PMG
    23
    24 3F99 A9 C1 8D E0 40 A9 +  mwa #dli1 dliv+1
    25 				 
    26 3FA3 A9 D4 8D FA FF A9 +  mwa #nmi $fffa		;nasza nowa obsluga przerwania NMI
    27
    28 3FAD A9 C0 8D 0E D4	 mva #$c0 $d40e		;wlaczenie NMI z przerwaniami DLI
    29
    30
    31 3FB2 20 06 4C		 jsr logo.fade_in
    32
    33 3FB5 AD 10 D0 D0 FB	 lda:rne $d010
    34 				 
    35 3FBA 20 4F 4C		 jsr logo.fade_out
    36
    37 3FBD 20 CB EB		 jsr default_nmi
    38 3FC0 60			 rts
    39
    40
    41 				;--
    42
    43 3FC1			dli1
    44
    45 3FC1 8D 0A D4		 sta $d40a                   ;line=88
    46 3FC4 A9 61		 lda #$61
    47 3FC6 8D 0A D4		 sta $d40a                   ;line=89
    48 3FC9 8D 02 D0		 sta Player2_PositionX
    49 3FCC A9 81		 lda #$81
    50 3FCE 8D 0A D4		 sta $d40a                   ;line=90
    51 3FD1 8D 03 D0		 sta Player3_PositionX
    52 3FD4 8D 0A D4		 sta $d40a                   ;line=91
    53 3FD7 A9 5F		 lda #$5F
    54 3FD9 A2 80		 ldx #$80
    55 3FDB 8D 0A D4		 sta $d40a                   ;line=92
    56 3FDE 8D 02 D0		 sta Player2_PositionX
    57 3FE1 8E 03 D0		 stx Player3_PositionX
    58 3FE4 A9 61		 lda #$61
    59 3FE6 8D 0A D4		 sta $d40a                   ;line=93
    60 3FE9 8D 02 D0		 sta Player2_PositionX
    61 3FEC 8D 0A D4		 sta $d40a                   ;line=94
    62 3FEF 8D 0A D4		 sta $d40a                   ;line=95
    63 3FF2 A9 60		 lda #$60
    64 3FF4 8D 0A D4		 sta $d40a                   ;line=96
    65 3FF7 8D 02 D0		 sta Player2_PositionX
    66 3FFA A9 61		 lda #$61
    67 3FFC 8D 0A D4		 sta $d40a                   ;line=97
    68 3FFF 8D 02 D0		 sta Player2_PositionX
    69 4002 A9 60		 lda #$60
    70 4004 8D 0A D4		 sta $d40a                   ;line=98
    71 4007 8D 02 D0		 sta Player2_PositionX
    72 400A A9 61		 lda #$61
    73 400C 8D 0A D4		 sta $d40a                   ;line=99
    74 400F 8D 02 D0		 sta Player2_PositionX
    75 				; sta $d40a                   ;line=100
    76 				; sta $d40a                   ;line=101
    77 				; sta $d40a                   ;line=102
    78 				; sta $d40a                   ;line=103
    79
    80 4012			 max #dli1_2
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 4012 A9 19		 lda <DLI1_2
     2 4014 A2 40		 ldx >DLI1_2
Source: d:\Download\getris\well_done_add.asm
    81 4016 4C 41 41		 jmp nmiQ
    82
    83
    84 4019			dli1_2
    85
    86 				; sta $d40a                   ;line=104
    87 				; sta $d40a                   ;line=105
    88 				; sta $d40a                   ;line=106
    89 				; sta $d40a                   ;line=107
    90 				; sta $d40a                   ;line=108
    91 				; sta $d40a                   ;line=109
    92 				; sta $d40a                   ;line=110
    93 				; sta $d40a                   ;line=111
    94 				 
    95 4019 8D 0A D4		 sta $d40a                   ;line=112
    96 401C 8D 0A D4		 sta $d40a                   ;line=113
    97 401F 8D 0A D4		 sta $d40a                   ;line=114
    98 4022 8D 0A D4		 sta $d40a                   ;line=115
    99 4025 8D 0A D4		 sta $d40a                   ;line=116
   100 4028 8D 0A D4		 sta $d40a                   ;line=117
   101 402B 8D 0A D4		 sta $d40a                   ;line=118
   102 402E A9 8C		 lda #$8C
   103 4030 8D 0A D4		 sta $d40a                   ;line=119
   104 4033 8D 06 D0		 sta Missile2_PositionX
   105 4036 A9 7F		 lda #$7F
   106 4038 8D 0A D4		 sta $d40a                   ;line=120
   107 403B 8D 03 D0		 sta Player3_PositionX
   108 403E A9 81		 lda #$81
   109 4040 8D 0A D4		 sta $d40a                   ;line=121
   110 4043 8D 03 D0		 sta Player3_PositionX
   111 4046 8D 0A D4		 sta $d40a                   ;line=122
   112 4049 A9 80		 lda #$80
   113 404B 8D 0A D4		 sta $d40a                   ;line=123
   114 404E 8D 03 D0		 sta Player3_PositionX
   115 4051 A9 60		 lda #$60
   116 4053 8D 0A D4		 sta $d40a                   ;line=124
   117 4056 8D 02 D0		 sta Player2_PositionX
   118 4059 A9 61		 lda #$61
   119 405B 8D 0A D4		 sta $d40a                   ;line=125
   120 405E 8D 02 D0		 sta Player2_PositionX
   121 4061 8D 0A D4		 sta $d40a                   ;line=126
   122 4064 8D 0A D4		 sta $d40a                   ;line=127
   123 				 
   124 4067 8D 0A D4		 sta $d40a                   ;line=128
   125 406A 8D 0A D4		 sta $d40a                   ;line=129
   126 406D A9 60		 lda #$60
   127 406F 8D 0A D4		 sta $d40a                   ;line=130
   128 4072 8D 02 D0		 sta Player2_PositionX
   129 4075 A9 61		 lda #$61
   130 4077 8D 0A D4		 sta $d40a                   ;line=131
   131 407A 8D 02 D0		 sta Player2_PositionX
   132 407D 8D 0A D4		 sta $d40a                   ;line=132
   133 4080 8D 0A D4		 sta $d40a                   ;line=133
   134 4083 8D 0A D4		 sta $d40a                   ;line=134
   135 4086 8D 0A D4		 sta $d40a                   ;line=135
   136 				 
   137 4089 8D 0A D4		 sta $d40a                   ;line=136
   138 408C 8D 0A D4		 sta $d40a                   ;line=137
   139 408F 8D 0A D4		 sta $d40a                   ;line=138
   140 4092 8D 0A D4		 sta $d40a                   ;line=139
   141 4095 A9 88		 lda #$88
   142 4097 8D 0A D4		 sta $d40a                   ;line=140
   143 409A 8D 06 D0		 sta Missile2_PositionX
   144 409D 8D 0A D4		 sta $d40a                   ;line=141
   145 40A0 8D 0A D4		 sta $d40a                   ;line=142
   146 40A3 8D 0A D4		 sta $d40a                   ;line=143
   147 				 
   148 40A6 8D 0A D4		 sta $d40a                   ;line=144
   149 40A9 8D 0A D4		 sta $d40a                   ;line=145
   150 40AC 8D 0A D4		 sta $d40a                   ;line=146
   151 40AF 8D 0A D4		 sta $d40a                   ;line=147
   152 40B2 8D 0A D4		 sta $d40a                   ;line=148
   153 40B5 A9 68		 lda #$68
   154 40B7 8D 0A D4		 sta $d40a                   ;line=149
   155 40BA 8D 06 D0		 sta Missile2_PositionX
   156 40BD A9 7F		 lda #$7F
   157 40BF 8D 0A D4		 sta $d40a                   ;line=150
   158 40C2 8D 03 D0		 sta Player3_PositionX
   159 40C5 A9 0E		c6 lda #$0E
   160 40C7 8D 0A D4		 sta $d40a                   ;line=151
   161 40CA 8D 15 D0		 sta Player3_Missile3_Color3_PM3
   162
   163 40CD			 max #dli1
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 40CD A9 C1		 lda <DLI1
     2 40CF A2 3F		 ldx >DLI1
Source: d:\Download\getris\well_done_add.asm
   164 40D1 4C 41 41		 jmp nmiQ
   165
   166 				;--
   167
   168 40D4			nmi
   169 40D4 85 80		 sta rejA
   170 40D6 86 81		 stx rejX
   171 40D8 84 82		 sty rejY
   172
   173 40DA 2C 0F D4		 bit $d40f
   174 40DD 10 03		 bpl vbl
   175
   176 40DF 4C C1 3F		dliv jmp dli1
   177
   178 40E2			vbl
   179 40E2 8D 0F D4		 sta $d40f		;reset znacznika przerwania $d40f
   180
   181 40E5 A9 70 8D 02 D4 A9 +  mwa #ant $d402		;adres programu ANTICA ($d402,$d403)
   182 40EF A9 3D 8D 00 D4	 mva #scr32 $d400	;ustawienie szerokosci obrazu $d400
   183
   184 40F4 E6 14		 inc $14
   185
   186 				;-- init pierwszej linii
   187
   188 40F6 A9 14		 lda >fnt+$400*$00
   189 40F8 8D 09 D4		 sta CHARBASE
   190 40FB A9 00		c0 lda #$00
   191 40FD 8D 1A D0		 sta Background_BAK
   192 4100 A9 C8		c1 lda #$C8
   193 4102 8D 16 D0		 sta Playfield_Color0_PF0
   194 4105 A9 B4		c2 lda #$B4
   195 4107 8D 17 D0		 sta Playfield_Color1_PF1
   196 410A A9 EA		c3 lda #$EA
   197 410C 8D 18 D0		 sta Playfield_Color2_PF2
   198 410F A9 00		c4 lda #$00
   199 4111 8D 19 D0		 sta Playfield_Color3_PF3
   200 4114 A9 04		 lda #$04
   201 4116 8D 1B D0		 sta PRIOR_GTIACTL
   202 4119 A9 03		 lda #$03
   203 411B 8D 0A D0		 sta Player2_Size
   204 411E 8D 0B D0		 sta Player3_Size
   205 4121 A9 00		 lda #$00
   206 4123 8D 0C D0		 sta Missiles_Size
   207 4126 A9 5F		 lda #$5F
   208 4128 8D 02 D0		 sta Player2_PositionX
   209 412B A9 7F		 lda #$7F
   210 412D 8D 03 D0		 sta Player3_PositionX
   211 4130 A9 68		 lda #$68
   212 4132 8D 06 D0		 sta Missile2_PositionX
   213 4135 A9 0C		c5 lda #$0C
   214 4137 8D 14 D0		 sta Player2_Missile2_Color2_PM2
   215 413A 8D 15 D0		 sta Player3_Missile3_Color3_PM3
   216
   217 413D			 max #dli1	; pierwszy program DLI
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 413D A9 C1		 lda <DLI1
     2 413F A2 3F		 ldx >DLI1
Source: d:\Download\getris\well_done_add.asm
   218
   219 4141			nmiQ
   220 4141 8D E0 40		 sta dliv+1
   221 4144 8E E1 40		 stx dliv+2
   222 				 
   223 4147 A5 80		 lda reja
   224 4149 A6 81		 ldx rejX
   225 414B A4 82		 ldy rejY
   226 414D 40			 rti
   227
   228 				;--
   229
   230 414E			l_tcol
   231 414E FB 00 05 0A 0F 35 +  dta l(c0,c1,c2,c3,c4,c5,c6)
   232
   233 4155			h_tcol
   234 4155 40 41 41 41 41 41 +  dta h(c0,c1,c2,c3,c4,c5,c6)
   235
   236 = 415C			t_satur .ds color_nr
   237 = 4163			t_color .ds color_nr
  1308 				.endl
  1309
  1310
  1311 				/*
  1312 				  Program DLI dla ekranu PAUSE
  1313 				*/
  1313
  1314 416A			.local pau
  1315 416A			 icl 'pause_add.asm'
Source: d:\Download\getris\pause_add.asm
     1
     2 = 1400			fnt   equ fnt_txt2
     3 = 1C00			pmg   equ pmg_pause
     4 = 1B80			text  equ text_pause
     5
     6
     7 = 0006			color_nr equ 6
     8
     9
    10 416A			ant
    11 416A-430C> 70 70 70 70 +  dta d'pppppppppppp',$f0,$44,a(text),4,4,4
    12 417D 41 6A 41		 dta $41,a(ant)
    13
    14
    15 4180			main
    16
    17 4180			 hax #pmg-1
Macro: HAX [Source: d:\Download\getris\getris2.asm]
     1 4180 A9 1B		 lda >PMG-1
     2 4182 A2 FF		 ldx <PMG-1
Source: d:\Download\getris\pause_add.asm
    18 4184 20 AD 7A		 jsr decode
    19
    20 				;-- init PMG
    21 4187 A9 CB 8D 07 D4	 mva >pmBase_Text $d407	;PMCTL - wyswietlac duchy i pociski
    22 418C A9 03 8D 1D D0	 mva #3 $d01d		;PMCTL - show PMG
    23
    24 4191 A9 C8 8D 8E 42 A9 +  mwa #dli1 dliv+1
    25 				 
    26 419B A9 82 8D FA FF A9 +  mwa #nmi $fffa		;nasza nowa obsluga przerwania NMI
    27
    28 41A5 A9 C0 8D 0E D4	 mva #$c0 $d40e		;wlaczenie NMI z przerwaniami DLI
    29
    30
    31 41AA 20 06 4C		 jsr logo.fade_in
    32
    33 41AD			_w
    34 41AD 20 A6 7A		 jsr wajt
    35
    36 41B0 AD 0F D2		 lda $d20f
    37 41B3 29 04		 and #4
    38 41B5 D0 07		 bne _no_key
    39
    40 41B7 AD 09 D2		 lda $d209
    41 41BA C9 21		 cmp #33
    42 41BC F0 03		 beq _q
    43
    44 41BE			_no_key
    45 41BE 4C AD 41		 jmp _w
    46
    47 41C1			_q
    48 41C1 20 4F 4C		 jsr logo.fade_out
    49 				 
    50 41C4 20 CB EB		 jsr default_nmi
    51 41C7 60			 rts
    52
    53
    54 				;--
    55
    56 41C8			dli1
    57
    58 41C8 8D 0A D4		 sta $d40a                   ;line=104
    59 41CB A9 59		 lda #$59
    60 41CD 8D 0A D4		 sta $d40a                   ;line=105
    61 41D0 8D 03 D0		 sta Player3_PositionX
    62 41D3 A9 79		 lda #$79
    63 41D5 8D 0A D4		 sta $d40a                   ;line=106
    64 41D8 8D 02 D0		 sta Player2_PositionX
    65 41DB A9 77		 lda #$77
    66 41DD A2 58		 ldx #$58
    67 41DF 8D 0A D4		 sta $d40a                   ;line=107
    68 41E2 8D 02 D0		 sta Player2_PositionX
    69 41E5 8E 03 D0		 stx Player3_PositionX
    70 41E8 A9 98		 lda #$98
    71 41EA 8D 0A D4		 sta $d40a                   ;line=108
    72 41ED 8D 06 D0		 sta Missile2_PositionX
    73 41F0 8D 0A D4		 sta $d40a                   ;line=109
    74 41F3 8D 0A D4		 sta $d40a                   ;line=110
    75 41F6 8D 0A D4		 sta $d40a                   ;line=111
    76 41F9 A9 78		 lda #$78
    77 41FB 8D 0A D4		 sta $d40a                   ;line=112
    78 41FE 8D 02 D0		 sta Player2_PositionX
    79 4201 8D 0A D4		 sta $d40a                   ;line=113
    80 4204 8D 0A D4		 sta $d40a                   ;line=114
    81 4207 A9 77		 lda #$77
    82 4209 8D 0A D4		 sta $d40a                   ;line=115
    83 420C 8D 02 D0		 sta Player2_PositionX
    84 420F A9 99		 lda #$99
    85 4211 8D 0A D4		 sta $d40a                   ;line=116
    86 4214 8D 06 D0		 sta Missile2_PositionX
    87 4217 8D 0A D4		 sta $d40a                   ;line=117
    88 421A 8D 0A D4		 sta $d40a                   ;line=118
    89 421D A9 56		 lda #$56
    90 421F 8D 0A D4		 sta $d40a                   ;line=119
    91 4222 8D 03 D0		 sta Player3_PositionX
    92 4225 8D 0A D4		 sta $d40a                   ;line=120
    93 4228 A9 58		 lda #$58
    94 422A 8D 0A D4		 sta $d40a                   ;line=121
    95 422D 8D 03 D0		 sta Player3_PositionX
    96 4230 8D 0A D4		 sta $d40a                   ;line=122
    97 4233 8D 0A D4		 sta $d40a                   ;line=123
    98 4236 8D 0A D4		 sta $d40a                   ;line=124
    99 4239 8D 0A D4		 sta $d40a                   ;line=125
   100 423C 8D 0A D4		 sta $d40a                   ;line=126
   101 423F 8D 0A D4		 sta $d40a                   ;line=127
   102 4242 A9 57		 lda #$57
   103 4244 8D 0A D4		 sta $d40a                   ;line=128
   104 4247 8D 03 D0		 sta Player3_PositionX
   105 424A 8D 0A D4		 sta $d40a                   ;line=129
   106 424D A9 58		 lda #$58
   107 424F 8D 0A D4		 sta $d40a                   ;line=130
   108 4252 8D 03 D0		 sta Player3_PositionX
   109 4255 8D 0A D4		 sta $d40a                   ;line=131
   110 4258 8D 0A D4		 sta $d40a                   ;line=132
   111 425B 8D 0A D4		 sta $d40a                   ;line=133
   112 425E 8D 0A D4		 sta $d40a                   ;line=134
   113 4261 8D 0A D4		 sta $d40a                   ;line=135
   114 4264 A9 57		 lda #$57
   115 4266 A2 38		 ldx #$38
   116 4268 A0 79		 ldy #$79
   117 426A 8D 0A D4		 sta $d40a                   ;line=136
   118 426D 8D 02 D0		 sta Player2_PositionX
   119 4270 8E 03 D0		 stx Player3_PositionX
   120 4273 8C 06 D0		 sty Missile2_PositionX
   121 4276 A9 75		 lda #$75
   122 4278 8D 07 D0		 sta Missile3_PositionX
   123 				 
   124 427B			 max #dli1
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 427B A9 C8		 lda <DLI1
     2 427D A2 41		 ldx >DLI1
Source: d:\Download\getris\pause_add.asm
   125 427F 4C F4 42		 jmp nmiQ
   126 				 
   127 				;--
   128
   129 4282			nmi
   130 4282 85 80		 sta rejA
   131 4284 86 81		 stx rejX
   132 4286 84 82		 sty rejY
   133
   134 4288 2C 0F D4		 bit $d40f
   135 428B 10 03		 bpl vbl
   136
   137 428D 4C C8 41		dliv jmp dli1
   138
   139 4290			vbl
   140 4290 8D 0F D4		 sta $d40f		;reset znacznika przerwania $d40f
   141
   142 4293 A9 6A 8D 02 D4 A9 +  mwa #ant $d402		;adres programu ANTICA ($d402,$d403)
   143 429D A9 3D 8D 00 D4	 mva #scr32 $d400	;ustawienie szerokosci obrazu $d400
   144 				 
   145 42A2 E6 14		 inc $14
   146
   147 				;-- init pierwszej linii
   148
   149 42A4 A9 14		 lda >fnt+$400*$00
   150 42A6 8D 09 D4		 sta CHARBASE
   151 42A9 A9 00		c0 lda #$00
   152 42AB 8D 1A D0		 sta Background_BAK
   153 42AE A9 38		c1 lda #$38
   154 42B0 8D 16 D0		 sta Playfield_Color0_PF0
   155 42B3 A9 24		c2 lda #$24
   156 42B5 8D 17 D0		 sta Playfield_Color1_PF1
   157 42B8 A9 2A		c3 lda #$2A
   158 42BA 8D 18 D0		 sta Playfield_Color2_PF2
   159 42BD A9 00		c4 lda #$00
   160 42BF 8D 19 D0		 sta Playfield_Color3_PF3
   161 42C2 A9 04		 lda #$04
   162 42C4 8D 1B D0		 sta PRIOR_GTIACTL
   163 42C7 A9 03		 lda #$03
   164 42C9 8D 0A D0		 sta Player2_Size
   165 42CC 8D 0B D0		 sta Player3_Size
   166 42CF A9 30		 lda #$30
   167 42D1 8D 0C D0		 sta Missiles_Size
   168 42D4 A9 77		 lda #$77
   169 42D6 8D 02 D0		 sta Player2_PositionX
   170 42D9 A9 58		 lda #$58
   171 42DB 8D 03 D0		 sta Player3_PositionX
   172 42DE A9 99		 lda #$99
   173 42E0 8D 06 D0		 sta Missile2_PositionX
   174 42E3 A9 95		 lda #$95
   175 42E5 8D 07 D0		 sta Missile3_PositionX
   176 42E8 A9 1C		c5 lda #$1C
   177 42EA 8D 14 D0		 sta Player2_Missile2_Color2_PM2
   178 42ED 8D 15 D0		 sta Player3_Missile3_Color3_PM3
   179
   180 42F0			 max #dli1
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 42F0 A9 C8		 lda <DLI1
     2 42F2 A2 41		 ldx >DLI1
Source: d:\Download\getris\pause_add.asm
   181
   182 42F4			nmiQ
   183 42F4 8D 8E 42		 sta dliv+1
   184 42F7 8E 8F 42		 stx dliv+2
   185
   186 42FA A5 80		 lda rejA
   187 42FC A6 81		 ldx rejX
   188 42FE A4 82		 ldy rejY
   189 4300 40			 rti
   190 				 
   191 				;---
   192
   193 4301			l_tcol
   194 4301 A9 AE B3 B8 BD E8	 dta l(c0,c1,c2,c3,c4,c5)
   195
   196 4307			h_tcol
   197 4307 42 42 42 42 42 42	 dta h(c0,c1,c2,c3,c4,c5)
   198
   199 = 430D			t_satur .ds color_nr
   200 = 4313			t_color .ds color_nr
   201
  1316 				.endl
  1317
  1318
  1319 				/*
  1320 				  Program DLI dla ekranu HIGH SCORE
  1321 				*/
  1321
  1322 4319			.local logo
  1323 4319			 icl 'H_SCORE_ok.asm'
Source: d:\Download\getris\H_SCORE_ok.asm
     1
     2 = BE24			pmg  equ pmg_highScore
     3
     4 = 0070			zp   equ $70
     5 = 0072			zp_  equ zp+2
     6 = 0074			txt  equ zp_+2
     7
     8
     9 4319-4D4B> 80 44 6E 48	ant dta $80,$44,a(text)
    10 431D 04 04 84 84 70 F0	 dta 4,4,$84,$84,$70,$f0
    11 4323 70 54		 dta $70,$44+$10
    12 4325 37 49 14 94		adr0 dta a(ekran-1),4+$10,$84+$10
    13 4329 70 54		 dta $70,$44+$10
    14 432B C7 49 14 94		adr1 dta a(ekran+3*48-1),4+$10,$84+$10
    15 432F 70 54		 dta $70,$44+$10
    16 4331 57 4A 14 94		adr2 dta a(ekran+6*48-1),4+$10,$84+$10
    17 4335 70 54		 dta $70,$44+$10
    18 4337 E7 4A 14 94		adr3 dta a(ekran+9*48-1),4+$10,$84+$10
    19 433B 70 54		 dta $70,$44+$10
    20 433D 77 4B 14 94		adr4 dta a(ekran+12*48-1),4+$10,$84+$10
    21 4341 41 19 43		 dta $41,a(ant)
    22
    23
    24 4344			main
    25 4344			 hax #pmg-1
Macro: HAX [Source: d:\Download\getris\getris2.asm]
     1 4344 A9 BE		 lda >PMG-1
     2 4346 A2 23		 ldx <PMG-1
Source: d:\Download\getris\H_SCORE_ok.asm
    26 4348 20 AD 7A		 jsr decode
    27
    28 				;-- init PMG
    29 434B A9 CB 8D 07 D4	 mva >pmBase_Text $d407	;PMCTL - wyswietlac duchy i pociski
    30 4350 A9 03 8D 1D D0	 mva #3 $d01d		;PMCTL - show PMG
    31
    32 4355 A9 B3 8D EB 46 A9 +  mwa #dli1 dliv+1
    33 				 
    34 435F A9 DF 8D FA FF A9 +  mwa #nmi $fffa		;nasza nowa obsluga przerwania NMI
    35
    36 4369 A2 03		 ldx #=hscore_msx       ;init modulu MPT
    37 436B A9 1C		 lda <hscore_msx
    38 436D A0 62		 ldy >hscore_msx
    39 436F 20 67 FB		 jsr mpt_player.initialization
    40
    41 4372 A9 C0 8D 0E D4	 mva #$c0 $d40e		;wlaczenie NMI z przerwaniami DLI
    42 4377 8D C3 EC		 sta mpt.player
    43
    44 437A 20 06 4C		 jsr fade_in
    45
    46 437D 20 D0 4E		 jsr input_string
    47
    48 4380 AD 10 D0 D0 FB	 lda:rne $d010
    49 				 
    50 4385 20 4F 4C		 jsr fade_out
    51
    52
    53 4388			new_game
    54
    55 				; zaczynamy od poczatku
    56 4388 A2 01		 ldx #1
    57 438A 20 AC 43		 jsr wait
    58
    59 438D 20 B5 EB		 jsr reset_pokey
    60
    61 4390 A9 00 8D 0E D4	 mva #0 $d40e
    62 4395 8D 00 D4		 sta $d400
    63 4398 8D C3 EC		 sta mpt.player
    64
    65 				; lda #0
    66 439B 8D 72 6C		 sta tetris.init.test+1         ; pozwalaj na wyzerowanie licznika poziomow i licznika punktow
    67
    68 439E A9 08		 lda #max_fps                   ; domyslne opoznienie spadania klockow
    69 43A0 8D D4 EC		 sta delay
    70
    71 43A3 A9 08		 lda #min_line                  ; domyslna liczba poziomych linii do usuniecia
    72 43A5 8D 6A 57		 sta tetris.line+1
    73 				 
    74 43A8 4C 8D 56		 jmp nowa_gra
    75
    76 				;--
    77
    78 43AB 00			licz brk
    79
    80 				/********************************************
    81 				  Name: WAIT
    82 				  Info: wait X frame
    83 				  
    84 				  Input: regX - frame count
    85 				********************************************/
    85
    86 43AC			.proc wait
    87
    88 43AC 20 A6 7A		 jsr wajt
    89 				 
    90 43AF CA			 dex
    91 43B0 D0 FA		 bne wait
    92 43B2 60			 rts
    93 				 
    94 				.endp
    95
    96 				;--
    97
    98 43B3			dli1
    99
   100 43B3 8D 0A D4		 sta $d40a                   ;line=0
   101 43B6 8D 0A D4		 sta $d40a                   ;line=1
   102 43B9 8D 0A D4		 sta $d40a                   ;line=2
   103 43BC 8D 0A D4		 sta $d40a                   ;line=3
   104 43BF 8D 0A D4		 sta $d40a                   ;line=4
   105 43C2 8D 0A D4		 sta $d40a                   ;line=5
   106 43C5 A9 6A		c8 lda #$6A
   107 43C7 A2 58		c9 ldx #$58
   108 43C9 A0 44		c10 ldy #$44
   109 43CB 8D 0A D4		 sta $d40a                   ;line=6
   110 43CE 8D 16 D0		 sta Playfield_Color0_PF0
   111 43D1 8E 17 D0		 stx Playfield_Color1_PF1
   112 43D4 8C 18 D0		 sty Playfield_Color2_PF2
   113 43D7 A9 75		 lda #$75
   114 43D9 8D 00 D0		 sta Player0_PositionX
   115 43DC A9 2A		c11 lda #$2A
   116 43DE 8D 12 D0		 sta Player0_Missile0_Color0_PM0
   117 				;--
   118 43E1 8D 0A D4		 sta $d40a                   ;line=7
   119 43E4 8D 0A D4		 sta $d40a                   ;line=8
   120 43E7 8D 0A D4		 sta $d40a                   ;line=9
   121 43EA 8D 0A D4		 sta $d40a                   ;line=10
   122 43ED 8D 0A D4		 sta $d40a                   ;line=11
   123 43F0 8D 0A D4		 sta $d40a                   ;line=12
   124 43F3 8D 0A D4		 sta $d40a                   ;line=13
   125 43F6 A9 7F		 lda #$7F
   126 43F8 A2 7D		 ldx #$7D
   127 43FA 8D 0A D4		 sta $d40a                   ;line=14
   128 43FD 8D 00 D0		 sta Player0_PositionX
   129 4400 8E 04 D0		 stx Missile0_PositionX
   130 4403 A9 4D		 lda #$4D
   131 4405 8D 0A D4		 sta $d40a                   ;line=15
   132 4408 8D 04 D0		 sta Missile0_PositionX
   133 440B A9 84		 lda #$84
   134 440D 8D 0A D4		 sta $d40a                   ;line=16
   135 4410 8D 06 D0		 sta Missile2_PositionX
   136 4413 8D 0A D4		 sta $d40a                   ;line=17
   137 4416 8D 0A D4		 sta $d40a                   ;line=18
   138 4419 A9 01		 lda #$01
   139 441B A2 3D		 ldx #$3D
   140 441D 8D 0A D4		 sta $d40a                   ;line=19
   141 4420 8D 08 D0		 sta Player0_Size
   142 4423 8E 00 D0		 stx Player0_PositionX
   143 4426 8D 0A D4		 sta $d40a                   ;line=20
   144 4429 8D 0A D4		 sta $d40a                   ;line=21
   145 442C A9 70		 lda #$70
   146 442E 8D 0A D4		 sta $d40a                   ;line=22
   147 4431 8D 03 D0		 sta Player3_PositionX
   148 4434 A9 76		 lda #$76
   149 4436 8D 0A D4		 sta $d40a                   ;line=23
   150 4439 8D 00 D0		 sta Player0_PositionX
   151 443C A9 75		 lda #$75
   152 443E A2 3F		 ldx #$3F
   153 4440 8D 0A D4		 sta $d40a                   ;line=24
   154 4443 8D 00 D0		 sta Player0_PositionX
   155 4446 8E 04 D0		 stx Missile0_PositionX
   156 				; sta $d40a                   ;line=25
   157 				; sta $d40a                   ;line=26
   158 				; sta $d40a                   ;line=27
   159 				; sta $d40a                   ;line=28
   160 				; sta $d40a                   ;line=29
   161 				; sta $d40a                   ;line=30
   162 				; sta $d40a                   ;line=31
   163
   164 4449			 max #dli1_2
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 4449 A9 50		 lda <DLI1_2
     2 444B A2 44		 ldx >DLI1_2
Source: d:\Download\getris\H_SCORE_ok.asm
   165 444D 4C D4 47		 jmp nmiQ
   166
   167
   168 4450			dli1_2
   169 4450 8D 0A D4		 sta $d40a                   ;line=32
   170 4453 8D 0A D4		 sta $d40a                   ;line=33
   171 4456 A9 44		c12 lda #$44
   172 4458 8D 0A D4		 sta $d40a                   ;line=34
   173 445B 8D 12 D0		 sta Player0_Missile0_Color0_PM0
   174 445E A9 78		c13 lda #$78
   175 4460 A2 76		c14 ldx #$76
   176 4462 A0 74		c15 ldy #$74
   177 4464 8D 0A D4		 sta $d40a                   ;line=35
   178 4467 8D 16 D0		 sta Playfield_Color0_PF0
   179 446A 8E 17 D0		 stx Playfield_Color1_PF1
   180 446D 8C 18 D0		 sty Playfield_Color2_PF2
   181 4470 A9 A6		 lda #$A6
   182 4472 8D 04 D0		 sta Missile0_PositionX
   183 				 
   184 4475			 max #dli2
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 4475 A9 7C		 lda <DLI2
     2 4477 A2 44		 ldx >DLI2
Source: d:\Download\getris\H_SCORE_ok.asm
   185 4479 4C D4 47		 jmp nmiQ
   186
   187
   188 447C			dli2
   189 447C A9 E0		 lda >fnt3_2
   190 447E A2 AA		c16 ldx #$AA
   191 4480 A0 D0		 ldy #$D0
   192 4482 8D 0A D4		 sta $d40a                   ;line=40
   193 4485 8D 09 D4		 sta CHARBASE
   194 4488 8E 18 D0		 stx Playfield_Color2_PF2
   195 448B 8C 00 D0		 sty Player0_PositionX
   196 448E A9 00		c17 lda #$00
   197 4490 8D 12 D0		 sta Player0_Missile0_Color0_PM0
   198 4493 8D 0A D4		 sta $d40a                   ;line=41
   199 4496 A9 00		c18 lda #$00
   200 4498 8D 0A D4		 sta $d40a                   ;line=42
   201 449B 8D 19 D0		 sta Playfield_Color3_PF3
   202 449E A9 A4		c19 lda #$A4
   203 44A0 8D 0A D4		 sta $d40a                   ;line=43
   204 44A3 8D 16 D0		 sta Playfield_Color0_PF0
   205 44A6 8D 0A D4		 sta $d40a                   ;line=44
   206 44A9 A9 A6		c20 lda #$A6
   207 44AB 8D 0A D4		 sta $d40a                   ;line=45
   208 44AE 8D 17 D0		 sta Playfield_Color1_PF1
   209 44B1 8D 0A D4		 sta $d40a                   ;line=46
   210 				; sta $d40a                   ;line=47
   211 44B4 A9 C4		c21 lda #$C4
   212 44B6 A2 C6		c22 ldx #$C6
   213 44B8 A0 CC		c23 ldy #$CC
   214 				; sta $d40a                   ;line=48
   215 44BA 8D 16 D0		 sta Playfield_Color0_PF0
   216 44BD 8E 17 D0		 stx Playfield_Color1_PF1
   217 44C0 8C 18 D0		 sty Playfield_Color2_PF2
   218 				; sta $d40a                   ;line=49
   219 				; sta $d40a                   ;line=50
   220 				; sta $d40a                   ;line=51
   221 				; sta $d40a                   ;line=52
   222 				; sta $d40a                   ;line=53
   223 				; sta $d40a                   ;line=54
   224 				; sta $d40a                   ;line=55
   225 				 
   226 44C3			 max #dli2_2
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 44C3 A9 CA		 lda <DLI2_2
     2 44C5 A2 44		 ldx >DLI2_2
Source: d:\Download\getris\H_SCORE_ok.asm
   227 44C7 4C D4 47		 jmp nmiQ
   228
   229
   230 44CA			dli2_2
   231 44CA 8D 0A D4		 sta $d40a                   ;line=56
   232 44CD 8D 0A D4		 sta $d40a                   ;line=57
   233 44D0 A9 33		 lda #$33
   234 44D2 A2 06		c24 ldx #$06
   235 44D4 8D 0A D4		 sta $d40a                   ;line=58
   236 44D7 8D 02 D0		 sta Player2_PositionX
   237 44DA 8E 14 D0		 stx Player2_Missile2_Color2_PM2
   238 44DD 8D 0A D4		 sta $d40a                   ;line=59
   239 44E0 A9 00		 lda #$00
   240 44E2 A2 33		 ldx #$33
   241 44E4 A0 06		c25 ldy #$06
   242 44E6 8D 0A D4		 sta $d40a                   ;line=60
   243 44E9 8D 09 D0		 sta Player1_Size
   244 44EC 8E 01 D0		 stx Player1_PositionX
   245 44EF 8C 13 D0		 sty Player1_Missile1_Color1_PM1
   246 44F2 A9 33		 lda #$33
   247 44F4 A2 08		c26 ldx #$08
   248 44F6 A0 0E		c27 ldy #$0E
   249 44F8 8D 0A D4		 sta $d40a                   ;line=61
   250 44FB 8D 03 D0		 sta Player3_PositionX
   251 44FE 8E 14 D0		 stx Player2_Missile2_Color2_PM2
   252 4501 8C 15 D0		 sty Player3_Missile3_Color3_PM3
   253 4504 8D 0A D4		 sta $d40a                   ;line=62
   254 4507 A9 C8		c28 lda #$C8
   255 4509 8D 0A D4		 sta $d40a                   ;line=63
   256 450C 8D 19 D0		 sta Playfield_Color3_PF3
   257
   258 450F A9 00		hp0 lda #0
   259 4511 8D 01 D0		 sta $d001
   260 4514 8D 02 D0		 sta $d002
   261 4517 8D 03 D0		 sta $d003
   262
   263 451A A9 00		hs0 lda #0
   264 451C 8D 04 D4		 sta $d404
   265
   266 451F			 max #dli3
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 451F A9 26		 lda <DLI3
     2 4521 A2 45		 ldx >DLI3
Source: d:\Download\getris\H_SCORE_ok.asm
   267 4523 4C D4 47		 jmp nmiQ
   268
   269
   270 4526			dli3
   271 				; lda >fnt3
   272 4526 A2 A4		c29 ldx #$A4
   273 4528 A0 A6		c30 ldy #$A6
   274 452A A9 00		c31 lda #$00
   275 452C 8D 0A D4		 sta $d40a                   ;line=88
   276 				; sta CHARBASE
   277 452F 8E 16 D0		 stx Playfield_Color0_PF0
   278 4532 8C 17 D0		 sty Playfield_Color1_PF1
   279 4535 8D 19 D0		 sta Playfield_Color3_PF3
   280 4538 8D 0A D4		 sta $d40a                   ;line=89
   281 453B A9 AC		c32 lda #$AC
   282 453D 8D 0A D4		 sta $d40a                   ;line=90
   283 4540 8D 18 D0		 sta Playfield_Color2_PF2
   284 4543 8D 0A D4		 sta $d40a                   ;line=91
   285 4546 8D 0A D4		 sta $d40a                   ;line=92
   286 4549 A9 04		c33 lda #$04
   287 454B A2 06		c34 ldx #$06
   288 454D A0 0C		c35 ldy #$0C
   289 454F 8D 0A D4		 sta $d40a                   ;line=93
   290 4552 8D 13 D0		 sta Player1_Missile1_Color1_PM1
   291 4555 8E 14 D0		 stx Player2_Missile2_Color2_PM2
   292 4558 8C 15 D0		 sty Player3_Missile3_Color3_PM3
   293 455B A9 34		c36 lda #$34
   294 455D A2 36		c37 ldx #$36
   295 455F A0 3C		c38 ldy #$3C
   296 4561 8D 0A D4		 sta $d40a                   ;line=94
   297 4564 8D 16 D0		 sta Playfield_Color0_PF0
   298 4567 8E 17 D0		 stx Playfield_Color1_PF1
   299 456A 8C 18 D0		 sty Playfield_Color2_PF2
   300 456D A9 38		c39 lda #$38
   301 456F 8D 0A D4		 sta $d40a                   ;line=95
   302 4572 8D 19 D0		 sta Playfield_Color3_PF3
   303 				; lda >fnt3_2
   304 				; sta $d40a                   ;line=96
   305 				; sta CHARBASE
   306
   307 4575 A9 00		hp1 lda #0
   308 4577 8D 01 D0		 sta $d001
   309 457A 8D 02 D0		 sta $d002
   310 457D 8D 03 D0		 sta $d003
   311
   312 4580 A9 00		hs1 lda #0
   313 4582 8D 04 D4		 sta $d404
   314
   315 4585			 max #dli4
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 4585 A9 8C		 lda <DLI4
     2 4587 A2 45		 ldx >DLI4
Source: d:\Download\getris\H_SCORE_ok.asm
   316 4589 4C D4 47		 jmp nmiQ
   317 				 
   318
   319 458C			dli4
   320 				; lda >fnt3
   321 458C A2 A4		c40 ldx #$A4
   322 458E A0 A6		c41 ldy #$A6
   323 4590 A9 00		c42 lda #$00
   324 4592 8D 0A D4		 sta $d40a                   ;line=120
   325 				; sta CHARBASE
   326 4595 8E 16 D0		 stx Playfield_Color0_PF0
   327 4598 8C 17 D0		 sty Playfield_Color1_PF1
   328 459B 8D 19 D0		 sta Playfield_Color3_PF3
   329 459E 8D 0A D4		 sta $d40a                   ;line=121
   330 45A1 A9 AC		c43 lda #$AC
   331 45A3 8D 0A D4		 sta $d40a                   ;line=122
   332 45A6 8D 18 D0		 sta Playfield_Color2_PF2
   333 45A9 8D 0A D4		 sta $d40a                   ;line=123
   334 45AC A9 0E		c44 lda #$0E
   335 45AE 8D 0A D4		 sta $d40a                   ;line=124
   336 45B1 8D 15 D0		 sta Player3_Missile3_Color3_PM3
   337 45B4 A9 0A		c45 lda #$0A
   338 45B6 8D 0A D4		 sta $d40a                   ;line=125
   339 45B9 8D 15 D0		 sta Player3_Missile3_Color3_PM3
   340
   341 45BC A9 00		hp2 lda #0
   342 45BE 8D 01 D0		 sta $d001
   343 45C1 8D 02 D0		 sta $d002
   344 45C4 8D 03 D0		 sta $d003
   345
   346 45C7 A9 00		hs2 lda #0
   347 45C9 8D 04 D4		 sta $d404
   348
   349 45CC 8D 0A D4		 sta $d40a                   ;line=126
   350 45CF A9 98		c46 lda #$98
   351 45D1 8D 0A D4		 sta $d40a                   ;line=127
   352 45D4 8D 19 D0		 sta Playfield_Color3_PF3
   353 				; lda >fnt3_2
   354 45D7 A2 94		c47 ldx #$94
   355 45D9 A0 96		c48 ldy #$96
   356 45DB A9 9C		c49 lda #$9C
   357 45DD 8D 0A D4		 sta $d40a                   ;line=128
   358 				; sta CHARBASE
   359 45E0 8E 16 D0		 stx Playfield_Color0_PF0
   360 45E3 8C 17 D0		 sty Playfield_Color1_PF1
   361 45E6 8D 18 D0		 sta Playfield_Color2_PF2
   362
   363 45E9			 max #dli5
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 45E9 A9 F0		 lda <DLI5
     2 45EB A2 45		 ldx >DLI5
Source: d:\Download\getris\H_SCORE_ok.asm
   364 45ED 4C D4 47		 jmp nmiQ
   365
   366
   367 45F0			dli5
   368 				; lda >fnt3
   369 45F0 A2 A4		c50 ldx #$A4
   370 45F2 A0 A6		c51 ldy #$A6
   371 45F4 A9 00		c52 lda #$00
   372 45F6 8D 0A D4		 sta $d40a                   ;line=152
   373 				; sta CHARBASE
   374 45F9 8E 16 D0		 stx Playfield_Color0_PF0
   375 45FC 8C 17 D0		 sty Playfield_Color1_PF1
   376 45FF 8D 19 D0		 sta Playfield_Color3_PF3
   377 4602 8D 0A D4		 sta $d40a                   ;line=153
   378 4605 A9 AC		c53 lda #$AC
   379 4607 8D 0A D4		 sta $d40a                   ;line=154
   380 460A 8D 18 D0		 sta Playfield_Color2_PF2
   381 460D 8D 0A D4		 sta $d40a                   ;line=155
   382 4610 A9 0E		c54 lda #$0E
   383 4612 8D 0A D4		 sta $d40a                   ;line=156
   384 4615 8D 15 D0		 sta Player3_Missile3_Color3_PM3
   385 4618 A9 08		c55 lda #$08
   386 461A 8D 0A D4		 sta $d40a                   ;line=157
   387 461D 8D 15 D0		 sta Player3_Missile3_Color3_PM3
   388
   389 4620 A9 00		hp3 lda #0
   390 4622 8D 01 D0		 sta $d001
   391 4625 8D 02 D0		 sta $d002
   392 4628 8D 03 D0		 sta $d003
   393
   394 462B A9 00		hs3 lda #0
   395 462D 8D 04 D4		 sta $d404
   396
   397 4630 8D 0A D4		 sta $d40a                   ;line=158
   398 4633 A9 F8		c56 lda #$F8
   399 4635 8D 0A D4		 sta $d40a                   ;line=159
   400 4638 8D 19 D0		 sta Playfield_Color3_PF3
   401 				; lda >fnt3_2
   402 463B A2 E4		c57 ldx #$E4
   403 463D A0 F6		c58 ldy #$F6
   404 463F A9 FC		c59 lda #$FC
   405 4641 8D 0A D4		 sta $d40a                   ;line=160
   406 				; sta CHARBASE
   407 4644 8E 16 D0		 stx Playfield_Color0_PF0
   408 4647 8C 17 D0		 sty Playfield_Color1_PF1
   409 464A 8D 18 D0		 sta Playfield_Color2_PF2
   410
   411 464D			 max #dli6
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 464D A9 54		 lda <DLI6
     2 464F A2 46		 ldx >DLI6
Source: d:\Download\getris\H_SCORE_ok.asm
   412 4651 4C D4 47		 jmp nmiQ
   413
   414
   415 4654			dli6
   416 				; lda >fnt3
   417 4654 A2 A4		c60 ldx #$A4
   418 4656 A0 A6		c61 ldy #$A6
   419 4658 A9 00		c62 lda #$00
   420 465A 8D 0A D4		 sta $d40a                   ;line=184
   421 				; sta CHARBASE
   422 465D 8E 16 D0		 stx Playfield_Color0_PF0
   423 4660 8C 17 D0		 sty Playfield_Color1_PF1
   424 4663 8D 19 D0		 sta Playfield_Color3_PF3
   425 4666 8D 0A D4		 sta $d40a                   ;line=185
   426 4669 A9 AC		c63 lda #$AC
   427 466B 8D 0A D4		 sta $d40a                   ;line=186
   428 466E 8D 18 D0		 sta Playfield_Color2_PF2
   429 4671 8D 0A D4		 sta $d40a                   ;line=187
   430 4674 A9 06		c64 lda #$06
   431 4676 8D 0A D4		 sta $d40a                   ;line=188
   432 4679 8D 15 D0		 sta Player3_Missile3_Color3_PM3
   433 467C 8D 0A D4		 sta $d40a                   ;line=189
   434
   435 467F A9 00		hp4 lda #0
   436 4681 8D 01 D0		 sta $d001
   437 4684 8D 02 D0		 sta $d002
   438 4687 8D 03 D0		 sta $d003
   439
   440 468A A9 00		hs4 lda #0
   441 468C 8D 04 D4		 sta $d404
   442
   443 468F 8D 0A D4		 sta $d40a                   ;line=190
   444 4692 A9 28		c65 lda #$28
   445 4694 8D 0A D4		 sta $d40a                   ;line=191
   446 4697 8D 19 D0		 sta Playfield_Color3_PF3
   447 				; lda >fnt3_2
   448 469A A2 24		c66 ldx #$24
   449 469C A0 26		c67 ldy #$26
   450 469E A9 2C		c68 lda #$2C
   451 46A0 8D 0A D4		 sta $d40a                   ;line=192
   452 				; sta CHARBASE
   453 46A3 8E 16 D0		 stx Playfield_Color0_PF0
   454 46A6 8C 17 D0		 sty Playfield_Color1_PF1
   455 46A9 8D 18 D0		 sta Playfield_Color2_PF2
   456
   457 				; sta $d40a                   ;line=193
   458 				; sta $d40a                   ;line=194
   459 				; sta $d40a                   ;line=195
   460 				; sta $d40a                   ;line=196
   461 				; sta $d40a                   ;line=197
   462 				; sta $d40a                   ;line=198
   463 				; sta $d40a                   ;line=199
   464
   465 46AC			 max #dli6_2
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 46AC A9 B3		 lda <DLI6_2
     2 46AE A2 46		 ldx >DLI6_2
Source: d:\Download\getris\H_SCORE_ok.asm
   466 46B0 4C D4 47		 jmp nmiQ
   467
   468
   469 46B3			dli6_2
   470 46B3 A9 A4		c69 lda #$A4
   471 46B5 A2 A6		c70 ldx #$A6
   472 46B7 A0 00		c71 ldy #$00
   473 46B9 8D 0A D4		 sta $d40a                   ;line=216
   474 46BC 8D 16 D0		 sta Playfield_Color0_PF0
   475 46BF 8E 17 D0		 stx Playfield_Color1_PF1
   476 46C2 8C 19 D0		 sty Playfield_Color3_PF3
   477 46C5 8D 0A D4		 sta $d40a                   ;line=217
   478 46C8 A9 AC		c72 lda #$AC
   479 46CA 8D 0A D4		 sta $d40a                   ;line=218
   480 46CD 8D 18 D0		 sta Playfield_Color2_PF2
   481 46D0 A9 0E		c73 lda #$0E
   482 46D2 8D 0A D4		 sta $d40a                   ;line=219
   483 46D5 8D 15 D0		 sta Player3_Missile3_Color3_PM3
   484
   485 46D8			 max #dli1
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 46D8 A9 B3		 lda <DLI1
     2 46DA A2 43		 ldx >DLI1
Source: d:\Download\getris\H_SCORE_ok.asm
   486 46DC 4C D4 47		 jmp nmiQ
   487
   488
   489 				;--
   490
   491 46DF			nmi
   492 46DF 85 80		 sta rejA
   493 46E1 86 81		 stx rejX
   494 46E3 84 82		 sty rejY
   495
   496 46E5 2C 0F D4		 bit $d40f
   497 46E8 10 03		 bpl vbl
   498 				 
   499 46EA 4C B3 43		dliv jmp dli1
   500
   501
   502 46ED			vbl
   503 46ED 8D 0F D4		 sta $d40f		;reset znacznika przerwania $d40f
   504 				 
   505 46F0 A9 19 8D 02 D4 A9 +  mwa #ant $d402		;adres programu ANTICA ($d402,$d403)
   506 46FA A9 3E 8D 00 D4	 mva #scr40 $d400	;ustawienie szerokosci obrazu $d400
   507
   508 46FF E6 14		 inc $14
   509
   510 				;-- init pierwszej linii
   511 4701 A9 E8		 lda >fnt3
   512 4703 8D 09 D4		 sta CHARBASE
   513 4706 A9 00		c0 lda #$00
   514 4708 8D 1A D0		 sta Background_BAK
   515 470B A9 2A		c1 lda #$2A
   516 470D 8D 16 D0		 sta Playfield_Color0_PF0
   517 4710 A9 38		c2 lda #$38
   518 4712 8D 17 D0		 sta Playfield_Color1_PF1
   519 4715 A9 34		c3 lda #$34
   520 4717 8D 18 D0		 sta Playfield_Color2_PF2
   521 471A A9 38		c4 lda #$38
   522 471C 8D 19 D0		 sta Playfield_Color3_PF3
   523 471F A9 04		 lda #$04
   524 4721 8D 1B D0		 sta PRIOR_GTIACTL
   525 4724 A9 00		 lda #$00
   526 4726 8D 08 D0		 sta Player0_Size
   527 4729 8D 0A D0		 sta Player2_Size
   528 472C 8D 0B D0		 sta Player3_Size
   529 472F 8D 0C D0		 sta Missiles_Size
   530 4732 A9 63		 lda #$63
   531 4734 8D 00 D0		 sta Player0_PositionX
   532 4737 A9 49		 lda #$49
   533 4739 8D 02 D0		 sta Player2_PositionX
   534 473C A9 73		 lda #$73
   535 473E 8D 03 D0		 sta Player3_PositionX
   536 4741 A9 4D		 lda #$4D
   537 4743 8D 04 D0		 sta Missile0_PositionX
   538 4746 A9 7B		 lda #$7B
   539 4748 8D 06 D0		 sta Missile2_PositionX
   540 474B A9 3F		 lda #$3F
   541 474D 8D 07 D0		 sta Missile3_PositionX
   542 4750 A9 6A		c5 lda #$6A
   543 4752 8D 12 D0		 sta Player0_Missile0_Color0_PM0
   544 4755 A9 34		c6 lda #$34
   545 4757 8D 14 D0		 sta Player2_Missile2_Color2_PM2
   546 475A 8D 15 D0		 sta Player3_Missile3_Color3_PM3
   547 475D A9 01		 lda #$01
   548 475F 8D 09 D0		 sta Player1_Size
   549 4762 A9 20		 lda #$20
   550 4764 8D 01 D0		 sta Player1_PositionX
   551 4767 A9 00		c7 lda #$00
   552 4769 8D 13 D0		 sta Player1_Missile1_Color1_PM1
   553
   554 				;---
   555
   556 476C A2 03		 ldx #=hscore_msx
   557 476E 20 C2 EC		 jsr mpt
   558
   559 				;---
   560
   561 4771 A5 14		 lda $14
   562 4773 29 01		 and #1
   563 4775 D0 03		 sne
   564
   565 4777 20 E1 47		 jsr falowanie 
   566
   567
   568 477A A5 14		 lda $14
   569 477C 29 03		 and #3
   570 477E D0 50		 bne _skp
   571
   572 4780 A9 00		mrg lda #0
   573 4782 49 01		 eor #1
   574 4784 8D 81 47		 sta mrg+1
   575 4787 F0 25		 beq faza2
   576
   577 				// realizujemy mruganie znaku zapytania
   578 				// modyfikujemy w tym celu znaki:
   579 				// 82  , 83
   580 				// 90  , 91
   581 				// 102 , 103
   582 = E290			ch1 = fnt3_2+82*8
   583 = E2D0			ch2 = fnt3_2+90*8
   584 = E330			ch3 = fnt3_2+102*8
   585
   586 = E370			ch1_tmp = fnt3_2+110*8
   587 = E380			ch2_tmp = fnt3_2+112*8
   588 = E390			ch3_tmp = fnt3_2+114*8
   589 				// przepisujac ich stara zawartosc do znakow 110...
   590 				 
   591 4789 A2 0F		 ldx #15
   592 478B			mv0
   593 478B BD 90 E2		 lda ch1,x
   594 478E 9D 70 E3		 sta ch1_tmp,x
   595
   596 4791 BD D0 E2		 lda ch2,x
   597 4794 9D 80 E3		 sta ch2_tmp,x
   598
   599 4797 BD 30 E3		 lda ch3,x
   600 479A 9D 90 E3		 sta ch3_tmp,x
   601 				 
   602 479D A9 00		 lda #0
   603 479F 9D 90 E2		 sta ch1,x
   604 47A2 9D D0 E2		 sta ch2,x
   605 47A5 9D 30 E3		 sta ch3,x
   606 				 
   607 47A8 CA			 dex
   608 47A9 10 E0		 bpl mv0
   609
   610 47AB 4C D0 47		 jmp _skp
   611
   612
   613 47AE			faza2
   614 47AE A2 0F		 ldx #15
   615 47B0			mv1
   616 47B0 BD 70 E3		 lda ch1_tmp,x
   617 47B3 9D 90 E2		 sta ch1,x
   618
   619 47B6 BD 80 E3		 lda ch2_tmp,x
   620 47B9 9D D0 E2		 sta ch2,x
   621
   622 47BC BD 90 E3		 lda ch3_tmp,x
   623 47BF 9D 30 E3		 sta ch3,x
   624 				 
   625 47C2 A9 00		 lda #0
   626 47C4 9D 70 E3		 sta ch1_tmp,x
   627 47C7 9D 80 E3		 sta ch2_tmp,x
   628 47CA 9D 90 E3		 sta ch3_tmp,x
   629 				 
   630 47CD CA			 dex
   631 47CE 10 E0		 bpl mv1
   632
   633 47D0			_skp
   634
   635 47D0			 max #dli1
Macro: MAX [Source: d:\Download\getris\getris2.asm]
     1 47D0 A9 B3		 lda <DLI1
     2 47D2 A2 43		 ldx >DLI1
Source: d:\Download\getris\H_SCORE_ok.asm
   636
   637 47D4			nmiQ
   638 47D4 8D EB 46		 sta dliv+1
   639 47D7 8E EC 46		 stx dliv+2
   640
   641 47DA A5 80		 lda rejA
   642 47DC A6 81		 ldx rejX
   643 47DE A4 82		 ldy rejY
   644 47E0 40			 rti
   645
   646 				;--
   647 				;--
   648
   649
   650 47E1			.proc falowanie
   651
   652 47E1 A2 00		 ldx #0
   653 47E3 20 19 48		 jsr fala
   654 47E6 8D 10 45		 sta hp0+1
   655 47E9 8E 1B 45		 stx hs0+1
   656
   657 47EC A2 01		 ldx #1
   658 47EE 20 19 48		 jsr fala
   659 47F1 8D 76 45		 sta hp1+1
   660 47F4 8E 81 45		 stx hs1+1
   661
   662 47F7 A2 02		 ldx #2
   663 47F9 20 19 48		 jsr fala
   664 47FC 8D BD 45		 sta hp2+1
   665 47FF 8E C8 45		 stx hs2+1
   666
   667 4802 A2 03		 ldx #3
   668 4804 20 19 48		 jsr fala
   669 4807 8D 21 46		 sta hp3+1
   670 480A 8E 2C 46		 stx hs3+1
   671
   672 480D A2 04		 ldx #4
   673 480F 20 19 48		 jsr fala
   674 4812 8D 80 46		 sta hp4+1
   675 4815 8E 8B 46		 stx hs4+1
   676
   677 4818 60			 rts
   678
   679 4819			fala
   680 4819 FE 34 48		 inc t_licz,x
   681 481C BD 34 48		 lda t_licz,x
   682 481F 29 0F		 and #$f
   683 4821 A8			 tay
   684 4822 B9 3E 48		 lda t_fala,y
   685 4825 48			 pha
   686
   687 4826 FE 39 48		 inc t_licz2,x
   688 4829 BD 39 48		 lda t_licz2,x
   689 482C 29 1F		 and #$1f
   690 482E A8			 tay
   691 482F BE 4E 48		 ldx t_scro,y
   692 4832 68			 pla
   693 4833 60			 rts
   694
   695 4834 0F 0B 07 03 00	t_licz dta 15,11,7,3,0
   696
   697 4839 14 10 0C 08 04	t_licz2 dta 20,16,12,8,4
   698
   699 483E			t_fala
   700 483E 34 34 34 33 32 31 +  dta 52 , 52 , 52 , 51 , 50 , 49 , 48 , 47 , 46 , 46 , 46 , 47 , 48 , 49 , 50 , 51 
   701
   702 484E			t_scro
   703 				; dta 7,7,7,7,7,6,6,6,5,5,4,3,2,2,1,1,0,0,0,0,0,1,1,2,2,3,4,5,5,6,6,6
   704 484E 06 07 07 08 08 08 +  dta 6 , 7 , 7 , 8 , 8 , 8 , 8 , 8 
   705 4856 07 07 06 06 05 04 +  dta 7 , 7 , 6 , 6 , 5 , 4 , 3 , 2 
   706 485E 02 01 01 00 00 00 +  dta 2 , 1 , 1 , 0 , 0 , 0 , 0 , 0 
   707 4866 01 01 02 02 03 04 +  dta 1 , 1 , 2 , 2 , 3 , 4 , 5 , 6 
   708
   709 				.endp
   710
   711
   712 486E			text
   713 486E 00 00 00 00 00 00 +  ins 'H_Score_OK.scr',0,5*40
   714
   715 				;ekran
   716 				.rept 5
   717 				 :4 BRK
   718 				 INS 'H_Score_OK.scr',5*40+#*120,40
   719 				 :4 BRK
   721 				 :4 BRK
   722 				 INS 'H_Score_OK.scr',5*40+#*120+40,40
   723 				 :4 BRK
   725 				 :4 BRK
   726 				 INS 'H_Score_OK.scr',5*40+#*120+80,40
   727 				 :4 BRK
   728 				.endr
Source: REPT
   717 4936 00 00 00 00		 :4 BRK
   717 493A 00 00 00 00 0A 35 +  INS 'H_Score_OK.scr',5*40+#*120,40
   717 4962 00 00 00 00		 :4 BRK
   717 4966 00 00 00 00		 :4 BRK
   717 496A 00 00 00 00 12 0B +  INS 'H_Score_OK.scr',5*40+#*120+40,40
   717 4992 00 00 00 00		 :4 BRK
   717 4996 00 00 00 00		 :4 BRK
   717 499A 00 00 00 00 3B 3C +  INS 'H_Score_OK.scr',5*40+#*120+80,40
   717 49C2 00 00 00 00		 :4 BRK
   717 49C6 00 00 00 00		 :4 BRK
   717 49CA 00 00 00 00 18 19 +  INS 'H_Score_OK.scr',5*40+#*120,40
   717 49F2 00 00 00 00		 :4 BRK
   717 49F6 00 00 00 00		 :4 BRK
   717 49FA 00 00 00 00 24 25 +  INS 'H_Score_OK.scr',5*40+#*120+40,40
   717 4A22 00 00 00 00		 :4 BRK
   717 4A26 00 00 00 00		 :4 BRK
   717 4A2A 00 00 00 00 34 2A +  INS 'H_Score_OK.scr',5*40+#*120+80,40
   717 4A52 00 00 00 00		 :4 BRK
   717 4A56 00 00 00 00		 :4 BRK
   717 4A5A 00 00 00 00 06 07 +  INS 'H_Score_OK.scr',5*40+#*120,40
   717 4A82 00 00 00 00		 :4 BRK
   717 4A86 00 00 00 00		 :4 BRK
   717 4A8A 00 00 00 00 12 0B +  INS 'H_Score_OK.scr',5*40+#*120+40,40
   717 4AB2 00 00 00 00		 :4 BRK
   717 4AB6 00 00 00 00		 :4 BRK
   717 4ABA 00 00 00 00 29 2A +  INS 'H_Score_OK.scr',5*40+#*120+80,40
   717 4AE2 00 00 00 00		 :4 BRK
   717 4AE6 00 00 00 00		 :4 BRK
   717 4AEA 00 00 00 00 06 07 +  INS 'H_Score_OK.scr',5*40+#*120,40
   717 4B12 00 00 00 00		 :4 BRK
   717 4B16 00 00 00 00		 :4 BRK
   717 4B1A 00 00 00 00 12 0B +  INS 'H_Score_OK.scr',5*40+#*120+40,40
   717 4B42 00 00 00 00		 :4 BRK
   717 4B46 00 00 00 00		 :4 BRK
   717 4B4A 00 00 00 00 29 2A +  INS 'H_Score_OK.scr',5*40+#*120+80,40
   717 4B72 00 00 00 00		 :4 BRK
   717 4B76 00 00 00 00		 :4 BRK
   717 4B7A 00 00 00 00 13 14 +  INS 'H_Score_OK.scr',5*40+#*120,40
   717 4BA2 00 00 00 00		 :4 BRK
   717 4BA6 00 00 00 00		 :4 BRK
   717 4BAA 00 00 00 00 12 0B +  INS 'H_Score_OK.scr',5*40+#*120+40,40
   717 4BD2 00 00 00 00		 :4 BRK
   717 4BD6 00 00 00 00		 :4 BRK
   717 4BDA 00 00 00 00 28 0B +  INS 'H_Score_OK.scr',5*40+#*120+80,40
   717 4C02 00 00 00 00		 :4 BRK
Source: d:\Download\getris\H_SCORE_ok.asm
   729
   730 				/*
   731 				  FADE ON-OUT
   732 				*/
   732
   733 4C06			 icl 'h_score_ok.fad'
Source: d:\Download\getris\h_score_ok.fad
     1 				/*
     2 				  Modyfikacji podlegaja adresy (+1):
     3
     4 				  fade_in.ltc0          l_tcol        adres tablicy z mlodszymi bajtami modyfikowanych adresow
     5 				  fade_out.ltc1
     6 				  ltc2
     7
     8 				  fade_in.htc0          h_tcol        adres tablicy ze starszymi bajtami modyfikowanych adresow
     9 				  fade_out.htc1
    10 				  htc2
    11
    12 				  fade_in.sat0          t_satur       adres tablicy przechowywujacej jasnosci
    13 				  sat1
    14
    15 				  fade_in.tco0          t_color       adres tablicy przechowywujacej kolory
    16 				  tco1
    17 				  
    18 				  fade_in.col_nr0                     adres bajtu zawierajacego liczbe zmian
    19 				  fade_out.col_nr1
    20 				  col_nr2
    21 				*/
    21
    22
    23 = 004A			color_nr equ 74
    24
    25 				;-----------;
    26 				;- FADE IN -;
    27 				;-----------;
    28 4C06			.proc fade_in
    29
    30 4C06 A2 06		 ldx #6
    31 4C08 20 AC 43		 jsr wait
    32 				 
    33 4C0B A9 10		 lda #16
    34 4C0D 8D AB 43		 sta licz
    35 4C10			fad
    36 4C10 A2 02		 ldx #2
    37 4C12 20 AC 43		 jsr wait
    38 4C15 20 1E 4C		 jsr fade
    39 4C18 CE AB 43		 dec licz
    40 4C1B D0 F3		 bne fad
    41 4C1D 60			 rts
    42
    43 4C1E			fade
    44
    45 4C1E A2 00		 ldx #0
    46
    47 4C20			fade_l
    48 4C20 BD B8 4C		ltc0 lda l_tcol,x
    49 4C23 85 83		 sta tmp
    50 4C25 BD 02 4D		htc0 lda h_tcol,x
    51 4C28 85 84		 sta tmp+1
    52
    53 4C2A A0 01		 ldy #1
    54 4C2C B1 83		 lda (tmp),y
    55 4C2E A8			 tay
    56
    57 4C2F 29 0F		 and #$0f
    58 4C31 DD 4C 4D		sat0 cmp t_satur,x
    59 4C34 F0 01		 beq skp0
    60
    61 4C36 C8			 iny
    62
    63 4C37			skp0
    64
    65 4C37 98			 tya
    66 4C38 29 F0		 and #$f0
    67 4C3A DD 96 4D		tco0 cmp t_color,x
    68 4C3D F0 05		 beq skp1
    69
    70 4C3F 98			 tya
    71 4C40 18			 clc
    72 4C41 69 10		 adc #$10
    73 4C43 A8			 tay
    74
    75 4C44			skp1
    76 4C44 98			 tya
    77
    78 4C45 A0 01		 ldy #1
    79 4C47 91 83		 sta (tmp),y
    80
    81 4C49 E8			 inx
    82 4C4A E0 4A		col_nr0 cpx #color_nr
    83 4C4C D0 D2		 bne fade_l
    84 4C4E 60			 rts
    85 				.endp
    86
    87
    88 				;------------;
    89 				;- FADE OUT -;
    90 				;------------;
    91 4C4F			.proc fade_out
    92
    93 4C4F A2 06		 ldx #6
    94 4C51 20 AC 43		 jsr wait
    95 				 
    96 4C54 A9 10		 lda #16
    97 4C56 8D AB 43		 sta licz
    98 4C59			fad
    99 4C59 A2 02		 ldx #2
   100 4C5B 20 AC 43		 jsr wait
   101 4C5E 20 67 4C		 jsr fade
   102 4C61 CE AB 43		 dec licz
   103 4C64 D0 F3		 bne fad
   104 4C66 60			 rts
   105
   106 4C67			fade
   107
   108 4C67 A2 00		 ldx #0
   109
   110 4C69			fade_l
   111 4C69 BD B8 4C		ltc1 lda l_tcol,x
   112 4C6C 85 83		 sta tmp
   113 4C6E BD 02 4D		htc1 lda h_tcol,x
   114 4C71 85 84		 sta tmp+1
   115
   116 4C73 A0 01		 ldy #1
   117 4C75 B1 83		 lda (tmp),y
   118 4C77 A8			 tay
   119
   120 4C78 29 0F		 and #$0f
   121 4C7A F0 01		 beq skp0
   122
   123 4C7C 88			 dey
   124
   125 4C7D			skp0
   126
   127 4C7D 98			 tya
   128 4C7E 29 F0		 and #$f0
   129 4C80 F0 05		 beq skp1
   130
   131 4C82 98			 tya
   132 4C83 38			 sec
   133 4C84 E9 10		 sbc #$10
   134 4C86 A8			 tay
   135
   136 4C87			skp1
   137 4C87 98			 tya
   138
   139 4C88 A0 01		 ldy #1
   140 4C8A 91 83		 sta (tmp),y
   141
   142 4C8C E8			 inx
   143 4C8D E0 4A		col_nr1 cpx #color_nr
   144 4C8F D0 D8		 bne fade_l
   145 4C91 60			 rts
   146 				.endp
   147
   148
   149 				;--------------;
   150 				;- SAVE COLOR -;
   151 				;--------------;
   152 4C92			save_color
   153
   154 4C92 A2 00		 ldx #0
   155 4C94			save_l
   156 4C94 BD B8 4C		ltc2 lda l_tcol,x
   157 4C97 85 83		 sta tmp
   158 4C99 BD 02 4D		htc2 lda h_tcol,x
   159 4C9C 85 84		 sta tmp+1
   160
   161 4C9E A0 01		 ldy #1
   162 4CA0 B1 83		 lda (tmp),y
   163 4CA2 48			 pha
   164 4CA3 29 0F		 and #$0f
   165 4CA5 9D 4C 4D		sat1 sta t_satur,x
   166 4CA8 68			 pla
   167 4CA9 29 F0		 and #$f0
   168 4CAB 9D 96 4D		tco1 sta t_color,x
   169
   170 4CAE A9 00		 lda #0        ; black screen (all colors = $00)
   171 4CB0 91 83		 sta (tmp),y
   172
   173 4CB2 E8			 inx
   174 4CB3 E0 4A		col_nr2 cpx #color_nr
   175 4CB5 D0 DD		 bne save_l
   176 4CB7 60			 rts
   177
   178
   179 4CB8			l_tcol
   180 4CB8 06 0B 10 15 1A 50 +  dta l(logo.c0,logo.c1,logo.c2,logo.c3,logo.c4,logo.c5,logo.c6,logo.c7,c8,c9)
   181 4CC2 C9 DC 56 5E 60 62 +  dta l(c10,c11,c12,c13,c14,c15,c16,c17,c18,c19)
   182 4CCC A9 B4 B6 B8 D2 E4 +  dta l(c20,c21,c22,c23,c24,c25,c26,c27,c28,c29)
   183 4CD6 28 2A 3B 49 4B 4D +  dta l(c30,c31,c32,c33,c34,c35,c36,c37,c38,c39)
   184 4CE0 8C 8E 90 A1 AC B4 +  dta l(c40,c41,c42,c43,c44,c45,c46,c47,c48,c49)
   185 4CEA F0 F2 F4 05 10 18 +  dta l(c50,c51,c52,c53,c54,c55,c56,c57,c58,c59)
   186 4CF4 54 56 58 69 74 92 +  dta l(c60,c61,c62,c63,c64,c65,c66,c67,c68,c69)
   187 4CFE B5 B7 C8 D0		 dta l(c70,c71,c72,c73)
   188
   189 4D02			h_tcol
   190 4D02 47 47 47 47 47 47 +  dta h(logo.c0,logo.c1,logo.c2,logo.c3,logo.c4,logo.c5,logo.c6,logo.c7,c8,c9)
   191 4D0C 43 43 44 44 44 44 +  dta h(c10,c11,c12,c13,c14,c15,c16,c17,c18,c19)
   192 4D16 44 44 44 44 44 44 +  dta h(c20,c21,c22,c23,c24,c25,c26,c27,c28,c29)
   193 4D20 45 45 45 45 45 45 +  dta h(c30,c31,c32,c33,c34,c35,c36,c37,c38,c39)
   194 4D2A 45 45 45 45 45 45 +  dta h(c40,c41,c42,c43,c44,c45,c46,c47,c48,c49)
   195 4D34 45 45 45 46 46 46 +  dta h(c50,c51,c52,c53,c54,c55,c56,c57,c58,c59)
   196 4D3E 46 46 46 46 46 46 +  dta h(c60,c61,c62,c63,c64,c65,c66,c67,c68,c69)
   197 4D48 46 46 46 46		 dta h(c70,c71,c72,c73)
   198
   199 = 4D4C			t_satur .ds color_nr
   200 = 4D96			t_color .ds color_nr
   734
   735
   736 				/*
   737 				  INPUT STRING
   738 				*/
   738
   739 4DE0			 icl 'input_string.asm'
Source: d:\Download\getris\input_string.asm
     1 				/*
     2 				  INPUT STRING
     3 				  wprowadza znaki z klawiatury pod adres 'newString'
     4 				*/
     4
     5
     6 = 486E			scren      equ text
     7 = 4938			ekran      equ scren+5*40+2
     8
     9 = 0030			scr_width  equ 48
    10
    11 = 000A			ile_znakow equ 10
    12
    13 = 76CD			count      equ tetris.licznik.count
    14
    15
    16 				/*
    17 				  NAME: LITERY
    18 				  INFO: ksztalt liter opisany 6 bajtami (na podstawie 'HIGH_SCORE_ALL_2.G2F')
    19 				        wczytujemy pierwsze 6 wierszy
    20 				    IN: ---
    21 				   OUT: ---
    22 				*/
    22
    23 4DE0			litery
    24 4DE0-52D6> 00 00 01 02 +  ins 'score_alfabet.scr'
    25
    26
    27 				/*
    28 				  NAME: INPUT_STRING
    29 				  
    30 				  INFO: pod adresem 'COUNT' znajduje sie 7 bajtowa tablica reprezentujaca najwyzszy wynik gracza (high_score)
    31 				        ten wynik porownywany jest z HIG1..HIG5, jesli jest wystarczajaco dobry
    32 				        wyswietlamy go na odpowiedniej pozycji i pobieramy ciag znakow czyli pseudo gracza
    33
    34 				    IN: ---
    35
    36 				   OUT: pod adresem 'NEWSTRING' znajduja sie wpisane znaki   
    37 				*/
    37
    38
    39 				/*
    40 				.array count [6] .byte
    41 				 [2] = 4
    42 				 [3] = 4
    43 				 [4] = 9
    44 				 [5] = 6
    45 				 [6] = 1
    46 				.enda
    47 				*/
    47
    48
    49 4ED0			.proc input_string
    50
    51 4ED0 20 29 50		 jsr POZYCJA
    52
    53 4ED3 E0 FF		 cpx #$ff
    54 4ED5 D0 01		 bne ok
    55 4ED7 60			 rts
    56
    57 4ED8			ok
    58 				; teraz przeskrolujemy tablice wynikow
    59
    60 4ED8 8E 5C 4F		 stx hx+1
    61
    62 				*---	PUNKTY
    63
    64 4EDB A9 D5		 lda <l_hig
    65 4EDD A0 50		 ldy >l_hig
    66 4EDF 20 53 50		 jsr hscrol
    67 				 
    68 4EE2 A9 E1		 lda <h_hig
    69 4EE4 A0 50		 ldy >h_hig
    70 4EE6 20 53 50		 jsr hscrol
    71
    72 				*---	KSYWKI
    73
    74 4EE9 A9 BD		 lda <l_txt
    75 4EEB A0 50		 ldy >l_txt
    76 4EED 20 53 50		 jsr hscrol
    77 				 
    78 4EF0 A9 C9		 lda <h_txt
    79 4EF2 A0 50		 ldy >h_txt
    80 4EF4 20 53 50		 jsr hscrol
    81
    82 4EF7 BD BD 50		 lda l_txt,x	; zamiast ksywki wpisujemy znak konca wiersza $9b
    83 4EFA 85 74		 sta txt
    84 4EFC BD C9 50		 lda h_txt,x
    85 4EFF 85 75		 sta txt+1
    86
    87 4F01 A0 09		 ldy #ile_znakow-1
    88 4F03 A9 9B		 lda #$9b
    89 4F05 91 74 88		 sta (txt),y-
    90 4F08 10 FB		 rpl
    91
    92 				*---	ADRESY OBRAZU KAZDEGO WIERSZA Z KSYWKA I PUNKTAMI
    93
    94 4F0A A9 A7		 lda <l_score
    95 4F0C A0 50		 ldy >l_score
    96 4F0E 20 53 50		 jsr hscrol
    97 				 
    98 4F11 A9 B2		 lda <h_score
    99 4F13 A0 50		 ldy >h_score
   100 4F15 20 53 50		 jsr hscrol
   101
   102 4F18 AD AC 50		 lda l_score+5	; modyfikacja, tutaj bedziemy wpisywac nowa ksywke
   103 4F1B 9D A7 50		 sta l_score,x
   104 4F1E AD B7 50		 lda h_score+5
   105 4F21 9D B2 50		 sta h_score,x
   106
   107 4F24 A0 00		 ldy #0		; modyfikacja programu ANTIC'a
   108 4F26 20 99 50		 jsr new_adr
   109 4F29 8E 25 43		 stx adr0
   110 4F2C 8C 26 43		 sty adr0+1
   111
   112 4F2F A0 01		 ldy #1
   113 4F31 20 99 50		 jsr new_adr
   114 4F34 8E 2B 43		 stx adr1
   115 4F37 8C 2C 43		 sty adr1+1
   116
   117 4F3A A0 02		 ldy #2
   118 4F3C 20 99 50		 jsr new_adr
   119 4F3F 8E 31 43		 stx adr2
   120 4F42 8C 32 43		 sty adr2+1
   121
   122 4F45 A0 03		 ldy #3
   123 4F47 20 99 50		 jsr new_adr
   124 4F4A 8E 37 43		 stx adr3
   125 4F4D 8C 38 43		 sty adr3+1
   126
   127 4F50 A0 04		 ldy #4
   128 4F52 20 99 50		 jsr new_adr
   129 4F55 8E 3D 43		 stx adr4
   130 4F58 8C 3E 43		 sty adr4+1
   131
   132 				; zajmiemy sie aktualnie najlepszym wynikiem 
   133
   134 4F5B A2 00		hx ldx #0
   135
   136 4F5D BD A7 50		 lda l_score,x
   137 4F60 8D 20 51		 sta put_char.lscr+1
   138 4F63 85 74		 sta txt
   139 4F65 BD B2 50		 lda h_score,x
   140 4F68 8D 26 51		 sta put_char.hscr+1
   141 4F6B 85 75		 sta txt+1
   142 				 
   143 4F6D A0 5F		 ldy #scr_width*2-1
   144 4F6F A9 00		 lda #0
   145 4F71 91 74 88		 sta (txt),y-
   146 4F74 10 FB		 rpl
   147
   148 4F76 A0 62		 ldy #2*scr_width+2		; czyscimy ksywke
   149 4F78			cl2_
   150 4F78 A9 26		 lda #"F"
   151 4F7A 91 74		 sta (txt),y
   152 4F7C C8			 iny
   153 4F7D A9 27		 lda #"G"
   154 4F7F 91 74		 sta (txt),y
   155 4F81 C8			 iny
   156 4F82 C0 76		 cpy #2*scr_width+2+20
   157 4F84 D0 F2		 bne cl2_
   158
   159
   160 4F86 BD BD 50		 lda l_txt,x
   161 4F89 85 74		 sta txt
   162 4F8B BD C9 50		 lda h_txt,x
   163 4F8E 85 75		 sta txt+1
   164
   165 				; przepisujemy wynik na wybrana pozycje
   166 4F90 A0 06		 ldy #6
   167 4F92			mv
   168 4F92 B9 CD 76		 lda count,y
   169 4F95 91 70		 sta (zp),y
   170 4F97 88			 dey
   171 4F98 10 F8		 bpl mv
   172
   173 4F9A A2 01		 ldx #1
   174 4F9C 8E 1E 51		 stx put_char.ofs+1
   175 4F9F CA			 dex
   176 				 
   177 4FA0 A0 0B		 ldy #11
   178 				 
   179 4FA2			cpr
   180 4FA2 BD CD 76		 lda count,x
   181 4FA5 18			 clc
   182 4FA6 69 3D		 adc #"Z"+3
   183 				 
   184 4FA8 20 F7 50		 jsr put_char
   185
   186 4FAB C8			 iny
   187 4FAC E8			 inx 
   188 4FAD E0 07		 cpx #7
   189 4FAF D0 F1		 bne cpr
   190
   191
   192 4FB1 A0 00		 ldy #0
   193 4FB3 8C 1E 51		 sty put_char.ofs+1
   194 4FB6			cp
   195 4FB6 B1 74		 lda (txt),y
   196 4FB8 99 D7 52		 sta newString,y
   197
   198 4FBB C8			 iny
   199 				 
   200 4FBC 20 F7 50		 jsr put_char
   201 				 
   202 4FBF C9 9B		 cmp #$9b
   203 4FC1 D0 F3		 bne cp
   204
   205 4FC3 A9 3B		 lda #"Z"+1
   206 4FC5 20 F7 50		 jsr put_char
   207
   208 4FC8 88			 dey
   209 4FC9 8C DF 4F		 sty _2+1
   210
   211 				 
   212 4FCC 20 A9 51		_1 jsr get_key
   213
   214 4FCF C9 9B		   cmp #$9b
   215 4FD1 F0 3A		   beq _end
   216 4FD3 C9 7E		   cmp #$7e
   217 4FD5 F0 1C		   beq _del
   218
   219 4FD7			char_ok
   220 4FD7 AC DF 4F		   ldy _2+1
   221 4FDA C0 09		   cpy #ile_znakow-1              ; liczba znakow do wpisania
   222 4FDC F0 EE		   beq _1
   223 4FDE A0 00		_2 ldy #0
   224 4FE0 99 D7 52		   sta newString,y
   225 4FE3 C8			   iny
   226 4FE4 20 F7 50		   jsr put_char
   227 4FE7 A9 3B		   lda #"Z"+1
   228 4FE9 C8			   iny
   229 4FEA 20 F7 50		   jsr put_char
   230 4FED EE DF 4F		   inc _2+1
   231 4FF0 4C CC 4F		   jmp _1
   232
   233 4FF3 AC DF 4F		_del ldy _2+1
   234 4FF6 F0 D4		   beq _1
   235 4FF8 A9 00		   lda #" "
   236 4FFA 99 D7 52		   sta newString,y
   237 4FFD C8			   iny
   238 4FFE 20 F7 50		   jsr put_char
   239 5001 CE DF 4F		   dec _2+1
   240 5004 A9 3B		_4 lda #"Z"+1
   241 5006 88			   dey
   242 5007 20 F7 50		   jsr put_char
   243 500A 4C CC 4F		   jmp _1
   244
   245 500D			_end
   246 500D AC DF 4F		 ldy _2+1
   247 5010 C8			 iny
   248 5011 A9 00		 lda #" "
   249 5013 20 F7 50		 jsr put_char
   250
   251 5016 AC DF 4F		 ldy _2+1
   252 5019 A9 9B		 lda #$9b
   253 501B 99 D7 52		 sta newString,y
   254
   255 501E A0 09		 ldy #ile_znakow-1
   256 5020			cp_
   257 5020 B9 D7 52		 lda newString,y
   258 5023 91 74		 sta (txt),y
   259 5025 88			 dey
   260 5026 10 F8		 bpl cp_
   261 5028 60			 rts
   262
   263 				/*
   264 				  Sprawdzamy czy uzyskany wynik jest wiekszy od dotychczasowych z tablicy HIGH SCORE
   265 				*/
   265
   266 5029			POZYCJA
   267 5029 A2 00		 ldx #0
   268
   269 502B			lp__
   270 502B BD D5 50		 lda l_hig,x
   271 502E 85 70		 sta zp
   272 5030 BD E1 50		 lda h_hig,x
   273 5033 85 71		 sta zp+1
   274
   275 5035 A0 00		 ldy #0
   276 5037			tst_lp
   277 5037 B9 CD 76		 lda count,y
   278 503A D1 70		 cmp (zp),y
   279 503C F0 05		 beq tst_skp
   280 503E 90 0B		 bcc nxt
   281 				 
   282 5040 4C 52 50		 jmp jest
   283
   284 5043			tst_skp 
   285 5043 C8			 iny
   286 5044 C0 07		 cpy #7
   287 5046 D0 EF		 bne tst_lp
   288 				 
   289 5048 4C 52 50		 jmp jest
   290
   291 504B			nxt
   292 504B E8			 inx
   293 504C E0 05		 cpx #5
   294 504E D0 DB		 bne lp__
   295
   296 5050 A2 FF		 ldx #$ff	; nie_znalazl
   297
   298 5052			jest		; a tutaj gdy wpis do tablicy jest mozliwy
   299 5052 60			 rts
   300
   301
   302 5053			HSCROL
   303 5053 8D 89 50		 sta _src+1
   304 5056 8D 94 50		 sta _dst2+1
   305 5059 8C 8A 50		 sty _src+2
   306 505C 8C 95 50		 sty _dst2+2 
   307 				 
   308 505F A0 00		 ldy #0
   309 5061 20 88 50 20 88 50 +  :5 jsr _src
   310
   311 5070 8A			 txa
   312 5071 18			 clc
   313 5072 69 01		 adc #1
   314 5074 A8			 tay
   315 5075 20 90 50 20 90 50 +  :5 jsr _src2
   316
   317 5084 AE 5C 4F		 ldx hx+1
   318 5087 60			 rts
   319
   320 5088 B9 FF FF		_src lda $ffff,y
   321 508B 99 ED 50		_dst sta _tmp,y
   322 508E C8			 iny
   323 508F 60			 rts
   324
   325 5090 BD ED 50		_src2 lda _tmp,x
   326 5093 99 FF FF		_dst2 sta $ffff,y
   327 5096 E8			 inx 
   328 5097 C8			 iny
   329 5098 60			 rts
   330
   331
   332 5099			NEW_ADR
   333 5099 B9 A7 50		 lda l_score,y
   334 509C 38			 sec
   335 509D E9 05		 sbc #5
   336 509F AA			 tax
   337 50A0 B9 B2 50		 lda h_score,y
   338 50A3 E9 00		 sbc #0
   339 50A5 A8			 tay
   340 50A6 60			 rts
   341
   342 50A7 3C CC 5C EC 7C 00 + l_score dta l( ekran+4 , ekran+3*48+4 , ekran+6*48+4 , ekran+9*48+4 , ekran+12*48+4 , 0,0,0,0,0,0)
   343 50B2 49 49 4A 4A 4B 00 + h_score dta h( ekran+4 , ekran+3*48+4 , ekran+6*48+4 , ekran+9*48+4 , ekran+12*48+4 , 0,0,0,0,0,0)
   344
   345 50BD E1 EB F5 FF 09 00 + l_txt dta l( txt1 , txt2 , txt3 , txt4 , txt5 ,0,0,0,0,0,0,0)
   346 50C9 52 52 52 52 53 00 + h_txt dta h( txt1 , txt2 , txt3 , txt4 , txt5 ,0,0,0,0,0,0,0)
   347
   348 50D5 13 1A 21 28 2F 00 + l_hig dta l( hig1 , hig2 , hig3 , hig4 , hig5 ,0,0,0,0,0,0,0)
   349 50E1 53 53 53 53 53 00 + h_hig dta h( hig1 , hig2 , hig3 , hig4 , hig5 ,0,0,0,0,0,0,0)
   350
   351 50ED 00 00 00 00 00 00 + _tmp :10 brk
   352
   353 				.endp
   354
   355
   356 				/*
   357 				  NAME: PUT_CHAR
   358
   359 				  INFO: wyswietla znak na wskazanej pozycji i o wskazanym kodzie
   360 				        jesli kod znaku jest z przedzialy <$21..$3b+12> to wyswietlamy go
   361 				        jesli jest inny to wyswietlamy znak numer 0 czyli kropke
   362 				        regA i regY zostaja zachowane
   363
   364 				    IN: reg A - kod znaku
   365 				        reg Y - pozycja pozioma
   366
   367 				   OUT: zwraca poczatkowa zawartosc regA i regY
   368 				*/
   368
   369 50F7			.proc put_char
   370 50F7 8C 57 51		 sty regY
   371 50FA 8D 55 51		 sta regA
   372 				 
   373 50FD C9 21		 cmp #$21
   374 50FF 90 07		 bcc bad_char
   375 5101 C9 47		 cmp #$3b+12
   376 5103 B0 03		 bcs bad_char
   377
   378 5105 4C 0A 51		 jmp ok_char
   379
   380 5108 A9 20		bad_char lda #$20
   381
   382 510A 38			ok_char sec
   383 510B E9 20		 sbc #$20
   384 510D A8			 tay
   385 				 
   386 510E B9 59 51		 lda l_adr,y
   387 5111 85 70		 sta zp
   388 5113 B9 81 51		 lda h_adr,y
   389 5116 85 71		 sta zp+1
   390 				 
   391 5118 AD 57 51		 lda regY
   392 511B 0A			 asl @
   393 511C 18			 clc
   394 511D 69 00		ofs adc #0
   395 511F 69 00		lscr adc #0
   396 5121 85 72		 sta zp_
   397 5123 A9 00		 lda #0
   398 5125 69 00		hscr adc #0
   399 5127 85 73		 sta zp_+1
   400
   401 5129 A0 00		 ldy #0
   402 512B B1 70		 lda (zp),y
   403 512D 91 72		 sta (zp_),y
   404 512F C8				iny
   405 5130 B1 70			lda (zp),y
   406 5132 91 72			sta (zp_),y
   407
   408 5134 A0 28		 ldy #40
   409 5136 B1 70		 lda (zp),y
   410 5138 A0 30		 ldy #scr_width
   411 513A 91 72		 sta (zp_),y
   412 513C A0 29			ldy #40+1
   413 513E B1 70			lda (zp),y
   414 5140 A0 31			ldy #scr_width+1
   415 5142 91 72			sta (zp_),y
   416
   417 5144 A0 50		 ldy #40*2
   418 5146 B1 70		 lda (zp),y
   419 5148 A0 60		 ldy #scr_width*2
   420 514A 91 72		 sta (zp_),y
   421 514C A0 51			ldy #40*2+1
   422 514E B1 70			lda (zp),y
   423 5150 A0 61			ldy #scr_width*2+1
   424 5152 91 72			sta (zp_),y
   425 				 
   426 5154 A9 00		 lda #0
   427 = 5155			regA equ *-1
   428 5156 A0 00		 ldy #0
   429 = 5157			regY equ *-1
   430 5158 60			 rts
   431
   432 5159			l_adr
   433 5159 E0 E2 E4 E6 E8 EA +  :20 dta l(litery+#*2)
   434 516D 58 5A 5C 5E 60 62 +  :20 dta l(litery+3*40+#*2)
   435
   436 5181			h_adr
   437 5181 4D 4D 4D 4D 4D 4D +  :20 dta h(litery+#*2)
   438 5195 4E 4E 4E 4E 4E 4E +  :20 dta h(litery+3*40+#*2)
   439
   440 				.endp
   441
   442
   443 				/*
   444 				  NAME: GET_KEY
   445 				  INFO: czeka na nacisniecie klawisza
   446 				    IN: ---
   447 				   OUT: w reg A znajdzie sie kod nacisnietego klawisza
   448 				*/
   448
   449 51A9			.proc get_key
   450
   451 51A9 20 A6 7A		 jsr wajt
   452
   453 51AC AD 0F D2		 lda $d20f
   454 51AF 29 04		 and #4
   455 51B1 D0 F6		 bne get_key
   456 				 
   457 51B3 AC 09 D2		 ldy $d209
   458 51B6 B9 D7 51		 lda tab,y
   459 51B9 C9 FF		 cmp #$ff
   460 51BB F0 EC		 beq get_key
   461 				 
   462 51BD C9 00		 cmp #0
   463 = 51BE			old_key equ *-1
   464 51BF D0 0D		 bne skp
   465 				 
   466 51C1 A2 06		 ldx #6
   467 = 51C2			delay equ *-1
   468 51C3 CA			 dex
   469 51C4 8E C2 51		 stx delay
   470 51C7 D0 E0		 bne get_key
   471 				 
   472 51C9 A2 06		 ldx #6
   473 51CB 8E C2 51		 stx delay 
   474 				 
   475 51CE			skp
   476 51CE 8D BE 51		 sta old_key
   477 				 
   478 51D1 A2 06		 ldx #6
   479 51D3 8E C2 51		 stx delay
   480 51D6 60			 rts
   481
   482 				.endp
   483
   484
   485 				/*
   486 				  NAME: TAB
   487 				  INFO: tablica 256 bajtow z kodami nacisnietego klawisza
   488 				    IN: ---
   489 				   OUT: ---
   490 				*/
   490
   491 51D7			.array tab [256] .byte = $20
   492
   493  [003F] 21 [007F] 21	 [63]:[127] = "A"
   494  [0015] 22 [0055] 22	 [21]:[85]  = "B"
   495  [0012] 23 [0052] 23	 [18]:[82]  = "C"
   496  [003A] 24 [007A] 24	 [58]:[122] = "D"
   497  [002A] 25 [006A] 25	 [42]:[106] = "E"
   498  [0038] 26 [0078] 26	 [56]:[120] = "F"
   499  [003D] 27 [007D] 27	 [61]:[125] = "G"
   500  [0039] 28 [0079] 28	 [57]:[121] = "H"
   501  [000D] 29 [004D] 29	 [13]:[77]  = "I"
   502  [0001] 2A [0041] 2A	 [1] :[65]  = "J"
   503  [0005] 2B [0045] 2B	 [5] :[69]  = "K"
   504  [0000] 2C [0040] 2C	 [0] :[64]  = "L"
   505  [0025] 2D [0065] 2D	 [37]:[101] = "M"
   506  [0023] 2E [0063] 2E	 [35]:[99]  = "N"
   507  [0008] 2F [0048] 2F	 [8] :[72]  = "O"
   508  [000A] 30 [004A] 30	 [10]:[74]  = "P"
   509  [002F] 31 [006F] 31	 [47]:[111] = "Q"
   510  [0028] 32 [0068] 32	 [40]:[104] = "R"
   511  [003E] 33 [007E] 33	 [62]:[126] = "S"
   512  [002D] 34 [006D] 34	 [45]:[109] = "T"
   513  [000B] 35 [004B] 35	 [11]:[75]  = "U"
   514  [0010] 36 [0050] 36	 [16]:[80]  = "V"
   515  [002E] 37 [006E] 37	 [46]:[110] = "W"
   516  [0016] 38 [0056] 38	 [22]:[86]  = "X"
   517  [002B] 39 [006B] 39	 [43]:[107] = "Y"
   518  [0017] 3A [0057] 3A	 [23]:[87]  = "Z"
   519 				; [33]:[97]  = ' '
   520
   521  [0034] 7E [00B4] 7E	 [52]:[180] = $7e
   522  [000C] 9B [004C] 9B	 [12]:[76]  = $9b
   523
   524 				.enda
   525
   526
   527 				/*
   528 				  NAME: NEWSTRING
   529 				  INFO: obszar 10 bajtow przeznaczony na wpisywana z klawiatury nazwe
   530 				    IN: ---
   531 				   OUT: ---
   532 				*/
   532
   533 = 52D7			newstring .ds 10
   534
   535
   536 				/*
   537 				  NAME: TXT1, TXT2, TXT3, TXT4, TXT5
   538 				  INFO: pseudonimy na liscie High Score
   539 				        po 10 znakow kazdy <0..9>
   540 				    IN: ---
   541 				   OUT: ---
   542 				*/
   542
   543
   544 52E1			.array txt1 [ile_znakow] .byte = $9b
   545  [0000] 36 29 24 2F 2C	 [0] = "VIDOL"
   546 				.enda
   547
   548 52EB			.array txt2 [ile_znakow] .byte = $9b
   549  [0000] 33 2C 21 36 25 +  [0] = "SLAVES"
   550 				.enda
   551
   552 52F5			.array txt3 [ile_znakow] .byte = $9b
   553  [0000] 24 25 2C 39	 [0] = "DELY"
   554 				.enda
   555
   556 52FF			.array txt4 [ile_znakow] .byte = $9b
   557  [0000] 24 32 21 23 2F +  [0] = "DRACON"
   558 				.enda
   559
   560 5309			.array txt5 [ile_znakow] .byte = $9b
   561  [0000] 2D 21 23 27 39 +  [0] = "MACGYVER"
   562 				.enda
   563
   564
   565 				/*
   566 				  NAME: HIG1, HIG2, HIG3, HIG4, HIG5
   567 				  INFO: lista najlepszych wynikow
   568 				        5 pozycji po 7 cyfr kazda <0..6>
   569 				    IN: ---
   570 				   OUT: ---
   571 				*/
   571
   572 5313			.array hig1 [7] .byte
   573  [0003] 05 00 00 00	 [3] = '5000'-$30
   574 				.enda
   575
   576 531A			.array hig2 [7] .byte
   577  [0003] 04 00 00 00	 [3] = '4000'-$30
   578 				.enda
   579
   580 5321			.array hig3 [7] .byte
   581  [0003] 03 00 00 00	 [3] = '3000'-$30
   582 				.enda
   583
   584 5328			.array hig4 [7] .byte
   585  [0003] 02 00 00 00	 [3] = '2000'-$30
   586 				.enda
   587
   588 532F			.array hig5 [7] .byte
   589  [0003] 01 00 00 00	 [3] = '1000'-$30
   590 				.enda
  1324 				.endl
  1325
  1326
  1327 				/*
  1328 				  Pamiec obrazu dla ekranu HIGH SCORE
  1329 				*/
  1329
  1330 5336 00 00 00 00 00 00 + text_logo  ins 'h_score_ok.scr'
  1331
  1332
  1333 5656			main
  1334 5656 20 A6 7A		 jsr wajt
  1335
  1336 5659 78			 sei			;wylaczenie przerwan
  1337 565A A9 00 8D 0E D4	 mva #0 $d40e
  1338 565F 8D 00 D4		 sta $d400
  1339 				 
  1340 5662 85 96		 sta tetris.lvl
  1341
  1342 5664 A9 FE 8D 01 D3	 mva #$fe $d301		;wylaczenie ROM-u
  1343
  1344 				;-- init fade colors
  1345
  1346 5669 20 9A 79		 jsr save_color         ; zapamietujemy i kasujemy kolory dla glownego ekranu gry 
  1347 566C 20 92 4C		 jsr logo.save_color    ; zapamietujemy i kasujemy kolory dla ekranu HIGH SCORE
  1348
  1349 566F A9 F7		 lda <tetris.high_score.fad_over       ; modyfikacja adresow procedr fade_in, fade_out dla ekranu GAME OVER
  1350 5671 A2 6D		 ldx >tetris.high_score.fad_over
  1351 5673 20 0B 6E		 jsr tetris.set_fade
  1352
  1353 5676 20 92 4C		 jsr logo.save_color    ; zapamietujemy i kasujemy kolory dla ekranu GAME OVER
  1354
  1355
  1356 5679 A9 A8		 lda <tetris.well_done.fad_well       ; modyfikacja adresow procedr fade_in, fade_out dla ekranu WELL DONE
  1357 567B A2 6D		 ldx >tetris.well_done.fad_well
  1358 567D 20 0B 6E		 jsr tetris.set_fade
  1359
  1360 5680 20 92 4C		 jsr logo.save_color    ; zapamietujemy i kasujemy kolory dla ekranu GAME OVER
  1361
  1362
  1363 5683 A9 C3		 lda <tetris.pause.fad_pause          ; modyfikacja adresow procedr fade_in, fade_out dla ekranu PAUSE
  1364 5685 A2 6D		 ldx >tetris.pause.fad_pause
  1365 5687 20 0B 6E		 jsr tetris.set_fade
  1366
  1367 568A 20 92 4C		 jsr logo.save_color    ; zapamietujemy i kasujemy kolory dla ekranu PAUSE
  1368
  1369
  1370 568D			nowa_gra
  1371
  1372 568D 20 5F EB		 jsr title
  1373
  1374 5690 C9 03		 cmp #%011
  1375 5692 D0 06		 bne _skp
  1376
  1377 5694 20 C0 76		 jsr tetris.licznik.reset 
  1378 5697 4C EA 6D		 jmp tetris.high_score.h_score		; ekran HIGH SCORE
  1379
  1380 569A			_skp
  1381 569A A9 00		 lda #0
  1382 569C 8D D2 56		 sta msx_losuj+1
  1383
  1384 569F			restart
  1385
  1386 				;-- init PMG
  1387 569F A9 00 8D C5 7A A9 +  mwa #pmBase1 decode.q1+1
  1388 56A9			 hax #pm1-1
Macro: HAX [Source: d:\Download\getris\getris2.asm]
     1 56A9 A9 1D		 lda >PM1-1
     2 56AB A2 31		 ldx <PM1-1
Source: d:\Download\getris\getris2.asm
  1389 56AD 20 B7 7A		 jsr decode.dep        ; musimy tak wywolac, bo DECODE ustawia domyslny adres _DST
  1390
  1391 56B0			 hax #pm2-1
Macro: HAX [Source: d:\Download\getris\getris2.asm]
     1 56B0 A9 1E		 lda >PM2-1
     2 56B2 A2 81		 ldx <PM2-1
Source: d:\Download\getris\getris2.asm
  1392 56B4 20 AD 7A		 jsr decode
  1393
  1394
  1395 56B7 A9 C3 8D 07 D4	 mva >pmBase1 $d407     ;PMCTL - wyswietlac duchy i pociski
  1396 56BC 8D 01 EC		 sta nmi.pmBase
  1397 				 
  1398 56BF A9 03 8D 1D D0	 mva #3 $d01d           ;PMCTL - show sprites and missiles
  1399
  1400 56C4 20 71 6C		 jsr tetris.init
  1401
  1402 56C7 A9 81 8D EA EB A9 +  mwa #ekran2.dli nmi.vdli
  1403
  1404
  1405 56D1 A9 00		msx_losuj lda #0
  1406 56D3 D0 17		 bne _nie 
  1407
  1408 56D5 AD 0A D2		 lda $d20a
  1409 56D8 29 03		 and #3
  1410 56DA C9 00		old_msx cmp #0
  1411 56DC D0 05		 bne msx_ok
  1412
  1413 56DE 18			 clc
  1414 56DF 69 01		 adc #1
  1415 56E1 29 03		 and #3
  1416 				 
  1417 56E3			msx_ok
  1418 56E3 8D DB 56		 sta old_msx+1
  1419 				 
  1420 56E6 18			 clc
  1421 56E7 69 01		 adc #1
  1422 56E9 8D D2 56		 sta msx_losuj+1
  1423
  1424 56EC			_nie
  1425 56EC AA			 tax
  1426 56ED CA			 dex
  1427 56EE BD 64 1F		 lda game_msx_l,x
  1428 56F1 BC 68 1F		 ldy game_msx_h,x
  1429
  1430 56F4 A2 03		 ldx #=game_msx         ;init modulu MPT
  1431
  1432 56F6 20 67 FB		 jsr mpt_player.initialization
  1433
  1434 56F9 A9 DE 8D FA FF A9 +  mwa #nmi $fffa
  1435 5703 A9 C0 8D 0E D4	 mva #$c0 $d40e
  1436
  1437 				;---
  1438
  1439 5708			.local tetris
  1440
  1441 5708			 icl 'tetris_add.asm'
Source: d:\Download\getris\tetris_add.asm
     1 				/*
     2 				  Engine sterujacy klockami dla GETRIS'a
     3 				  v1.2 by TeBe/Madteam
     4 				  changes: 25.02.2005
     5 				*/
     5
     6
     7 = 000F			width	equ 12+3
     8 = 00D1			height	equ 212-3
     9
    10 = 006B			znak      equ klocek_char  ;$ff         procedura PRZEPISZ_CHAR jest dzieki temu szybsza
    11
    12 = 0085			kloc      equ zp_free      ;(2)
    13 = 0087			kloc_tmp  equ kloc+2       ;(2)
    14 = 0089			klocek_nr equ kloc_tmp+2   ;(1)
    15 = 008A			pos_x     equ klocek_nr+1  ;(1)
    16 = 008B			pos_y     equ pos_x+1      ;(1)
    17 = 008C			old       equ pos_y+1      ;(1)
    18 = 008D			old_posy  equ old+1        ;(1)
    19 = 008E			rX        equ old_posy+1   ;(1)
    20 = 008F			tmpZ      equ rX+1         ;(3)
    21
    22 = 0092			klocSCR1_tmp equ tmpZ+3         ;(2)
    23 = 0094			klocSCR2_tmp equ klocSCR1_tmp+2 ;(2)
    24
    25 = 0096			lvl     equ klocSCR2_tmp+2      ;(1)
    26
    27
    28 5708			main
    29 				 
    30 				/*
    31 				  LET'S GO
    32 				*/
    32
    33
    34 5708 20 76 7A		 jsr zapal_ekran
    35
    36 570B A9 FF 8D C3 EC	 mva #$ff mpt.player	; graj muze
    37
    38
    39 5710			loop
    40 5710 A2 08		 ldx #max_fps		; opoznienie dla spadajacych klockow
    41 = 5711			wait equ *-1
    42
    43 5712 20 A6 7A		hh jsr wajt
    44
    45 5715 A9 00		spacja lda #0
    46 5717 D0 18		 bne _pokaz_space 
    47
    48 5719 AD 0F D2		 lda $d20f
    49 571C 29 04		 and #4
    50 571E D0 44		 bne _no_key
    51
    52 5720 AD 09 D2		 lda $d209
    53 5723 C9 1C		 cmp #28	; kod ESC
    54 5725 F0 37		 beq escape
    55 5727 C9 21		 cmp #33        ; kod SPACE
    56 5729 D0 39		 bne _no_key
    57
    58 572B 8D 16 57		 sta spacja+1   ; nacisnieto spacje
    59 572E 4C 64 57		 jmp _no_key
    60
    61 5731			_pokaz_space
    62 5731 A5 8B		 lda pos_y
    63 5733 29 07		 and #7
    64 5735 D0 2D		 bne _no_key
    65
    66 5737 8D 16 57		 sta spacja+1
    67 				 
    68 573A A9 FF		 lda #$ff
    69 573C 8D 87 6D		 sta init.pause_sw
    70 573F 8D 72 6C		 sta init.test+1
    71
    72 5742 A0 00		 ldy #0         ; zapamietanie starej zawartosci grafiki graczy
    73 5744			_c0
    74 5744 B9 00 C6		 lda pmBase1+$0300,y
    75 5747 99 E0 7A		 sta pg_tmp,y
    76 574A B9 00 C7		 lda pmBase1+$0400,y
    77 574D 99 BA 7B		 sta pg_tmp+height+9,y
    78 5750 C8			 iny
    79 5751 C0 DA		 cpy #height+9
    80 5753 D0 EF		 bne _c0
    81
    82 5755 20 8D 7A		 jsr zgas_ekran
    83 5758 20 B2 6D		 jsr pause
    84
    85 575B 4C 9F 56		 jmp restart
    86
    87
    88 				*--- ESCAPE
    89
    90 575E			escape
    91 575E 20 8D 7A		 jsr zgas_ekran
    92 5761 4C 88 43		 jmp logo.new_game
    93
    94
    95 5764			_no_key
    96 				 
    97 5764 CA			 dex
    98 5765 D0 AB		 bne hh
    99
   100
   101 5767 A5 96		 lda lvl                ; test usunietych linii w studni
   102 5769 C9 08		line cmp #min_line      ; jesli osiagnieto liczbe usunietych linii to zwieksz licznik poziomow (licznik linii ++2)
   103 576B 90 30		 bcc _skp
   104
   105 576D C9 10		 cmp #max_line          ; maksymalnie MAX_LINE linii do usuniecia na 1 poziom
   106 576F B0 06		 bcs _ls
   107
   108 5771 EE 6A 57 EE 6A 57	 :2 inc line+1
   109
   110 5777			_ls
   111 				 
   112 5777 20 8D 7A		 jsr zgas_ekran
   113 577A 20 97 6D		 jsr well_done
   114 				 
   115 577D 20 48 6C		 jsr zeruj_pasek
   116
   117 5780 EE 92 76		 inc licz_level.level   ; zwiekszamy licznik poziomow
   118 5783 20 B5 71		 jsr licz_level
   119
   120 5786 A9 FF		 lda #$ff
   121 5788 8D 72 6C		 sta init.test+1        ; zablokuj zerowanie licznika poziomow i licznika punktow
   122
   123 578B AD D4 EC		 lda delay              ; minimalne opoznienie spadajacych klockow = min_fps
   124 578E C9 02		 cmp #min_fps
   125 5790 F0 03		 beq _res
   126
   127 5792 CE D4 EC		 dec delay              ; zmniejsz opoznienie spadajacych klockow
   128
   129 5795			_res
   130 5795 A9 00		 lda #0
   131 5797 8D D2 56		 sta msx_losuj+1        ; teraz mozemy wylosowac nowy modul MPT
   132
   133 579A 4C 9F 56		 jmp restart
   134 				 
   135 579D			_skp
   136
   137 579D A9 00		 lda #0
   138 = 579E			faza equ *-1
   139 579F F0 3A		 beq cont
   140 				 
   141 				; wstawiamy puste linie w trzech wierszach na PMG
   142 				/*
   143 				 ldx #0
   144 				pustaczek equ *-1
   145 				 lda #0
   146 				 sta pmBase1+$300+8,x+2
   147 				 sta pmBase2+$300+8,x+2
   148 				 sta pmBase1+$400+8,x+2
   149 				 sta pmBase2+$400+8,x+2
   150
   151 				 sta pmBase1+$300+16,x+2
   152 				 sta pmBase2+$300+16,x+2
   153 				 sta pmBase1+$400+16,x+2
   154 				 sta pmBase2+$400+16,x+2
   155
   156 				 sta pmBase1+$300+24,x+2
   157 				 sta pmBase2+$300+24,x+2
   158 				 sta pmBase1+$400+24,x+2
   159 				 sta pmBase2+$400+24,x+2
   160 				*/
   160
   161
   162 57A1 A9 00		 lda #0
   163 57A3 8D 16 57		 sta spacja+1
   164
   165 57A6 20 D8 6A		 jsr test_line
   166
   167 57A9			.local __t
   168 57A9 D0 06		 bne _skip
   169
   170 57AB EE D2 76		 inc licznik.count+5            ; punkty na kazdy upuszczony klocek (+ 10 pkt)
   171 57AE 20 93 76		 jsr licznik
   172
   173 57B1			_skip 
   174 				.endl
   175
   176 57B1 20 C3 59		 jsr przepisz_char
   177 				 
   178 57B4 AD D4 EC		 lda delay
   179 57B7 8D 11 57		 sta wait
   180
   181 57BA 20 6C 6D		 jsr init.studnia
   182 				 
   183 57BD AD 2B 69		 lda losuj_klocek.wylosowany
   184 57C0 0A 0A		 :2 asl @
   185 57C2 85 89		 sta klocek_nr
   186
   187 				; and #%11111100
   188 57C4 8D D2 EC		 sta maska
   189
   190 57C7 20 1C 69		 jsr losuj_klocek
   191 57CA 20 71 6E		 jsr pokaz_klocek
   192
   193 57CD 20 0A 69		 jsr get_kloc
   194 				 
   195 57D0 20 16 5B		 jsr test_posY
   196 57D3 F0 06		 beq cont               ; brak mozliwosci ruchu GAME OVER
   197
   198 				/*
   199 				  GAME OVER - HIGH SCORE
   200 				*/
   200
   201
   202 57D5 20 8D 7A		 jsr zgas_ekran
   203 				 
   204 57D8 4C CD 6D		 jmp high_score
   205
   206 57DB			cont
   207 57DB A9 6C		 lda #108
   208 57DD 8D 7C 5B		 sta pkloc_jsr1.pos_y_add
   209 				; sta pkloc_jsr_p2.pos_y_add
   210 57E0 A9 48		 lda #72
   211 57E2 8D 98 5B		 sta pkloc_jsr2.pos_y_add
   212 57E5 A9 24		 lda #36
   213 57E7 8D BF 5B		 sta pkloc_jsr3.pos_y_add
   214
   215 57EA A2 80		 ldx #128
   216 57EC A5 8B		 lda pos_y
   217 57EE 29 07		 and #7
   218 57F0 F0 02		 beq _s0
   219 				 
   220 57F2 A2 6B		 ldx #klocek_char
   221 57F4			_s0
   222 57F4 8E 80 5B		 stx pkloc_jsr1.test
   223 				; stx pkloc_jsr_p2.test
   224 57F7 8E 9C 5B		 stx pkloc_jsr2.test
   225 57FA 8E C3 5B		 stx pkloc_jsr3.test
   226
   227 57FD A2 00		 ldx #" "
   228 57FF 20 3C 5B		 jsr put_klocek
   229 				 
   230 5802 A5 8B		 lda pos_y
   231 5804 85 8D		 sta old_posy
   232 				 
   233 				;--- w dol do konca
   234 5806 A9 00		 lda #0
   235 = 5807			w_dol equ *-1
   236 5808 F0 21		 beq _skip2
   237
   238 580A 20 16 5B		 jsr test_posY
   239 580D 8D 9E 57		 sta faza
   240 5810 D0 6A		 bne _skip
   241 5812 20 16 5B		 jsr test_posY
   242 5815 8D 9E 57		 sta faza
   243 5818 D0 62		 bne _skip
   244 581A 20 16 5B		 jsr test_posY
   245 581D 8D 9E 57		 sta faza
   246 5820 D0 5A		 bne _skip
   247 5822 20 16 5B		 jsr test_posY
   248 5825 8D 9E 57		 sta faza
   249 5828 4C 7C 58		 jmp _skip
   250
   251 582B			_skip2
   252
   253 				;--- zmiana pozycji Y klocka
   254 582B 20 16 5B		 jsr test_posY
   255 582E 8D 9E 57		 sta faza
   256 5831 D0 49		 bne _skip
   257 				  
   258 				;--- zmiana fazy klocka
   259 5833 A9 00		 lda #0
   260 = 5834			r_d010 equ *-1
   261 5835 D0 08		 bne _skip_trig
   262
   263 5837 20 B2 5A		 jsr test_faza
   264 583A A9 FF		 lda #$ff
   265 583C 8D 34 58		 sta r_d010
   266
   267 583F			_skip_trig
   268
   269 				;--- zmiana pozycji X klocka
   270 583F A9 00		 lda #0
   271 = 5840			r_d300 equ *-1
   272 5841 C9 07		 cmp #7		; prawo
   273 5843 F0 0B		 beq _nxt0
   274 5845 C9 0B		 cmp #11	; lewo
   275 5847 F0 0F		 beq _nxt1
   276 5849 C9 0D		 cmp #13	; dol
   277 584B F0 13		 beq _nxt2
   278 				 
   279 584D 4C 6B 58		 jmp _end_joy
   280
   281 5850			_nxt0           ; 7 prawo
   282 5850 A2 01		 ldx #1
   283 5852 20 E3 5A		 jsr test_posX
   284 5855 4C 6B 58		 jmp _end_joy
   285
   286 5858			_nxt1           ; 11 lewo
   287 5858 A2 FF		 ldx #$ff
   288 585A 20 E3 5A		 jsr test_posX
   289 585D 4C 6B 58		 jmp _end_joy
   290
   291 5860			_nxt2           ; 13 dol
   292 5860 8D 07 58		 sta w_dol
   293 5863 A9 01		 lda #1
   294 5865 8D 11 57		 sta wait
   295 5868 4C 7C 58		 jmp _skip
   296
   297
   298 586B			_end_joy
   299 586B A9 00		 lda #0
   300 586D 8D D3 EC		 sta read_joy
   301 5870 8D 40 58		 sta r_d300
   302 5873 8D 07 58		 sta w_dol
   303 5876 AD D4 EC		 lda delay
   304 5879 8D 11 57		 sta wait
   305
   306 587C			_skip
   307
   308
   309 				; lda w_dol
   310 				; beq ___skp
   311 				 
   312 587C AD 00 D3		 lda $d300                      ; sprawdz czy trzymamy kierunek W_DOL
   313 587F 29 0F		 and #$f
   314 5881 C9 0D		 cmp #13
   315 5883 F0 0E		 beq ___skp
   316 				 
   317 5885 AD D4 EC		 lda delay
   318 5888 8D 11 57		 sta wait
   319
   320 588B A9 00		 lda #0
   321 588D 8D 07 58		 sta w_dol                      ; jesli inny kierunek to normalne spadanie klocka
   322 5890 8D D3 EC		 sta read_joy
   323 				 
   324 5893			___skp
   325
   326
   327 5893 AD 9E 57		 lda faza
   328 5896 F0 23		 beq __skip
   329 5898 C6 8B		 dec pos_y
   330 				 
   331 				; jsr puste_linie
   332
   333 589A A9 20		 lda #8*4
   334 589C 8D 7C 5B		 sta pkloc_jsr1.pos_y_add
   335 				; sta pkloc_jsr_p2.pos_y_add
   336 589F 8D 98 5B		 sta pkloc_jsr2.pos_y_add
   337 58A2 8D BF 5B		 sta pkloc_jsr3.pos_y_add
   338
   339 58A5 A9 6B		 lda #klocek_char
   340 58A7 8D 80 5B		 sta pkloc_jsr1.test
   341 				; sta pkloc_jsr_p2.test
   342 58AA 8D 9C 5B		 sta pkloc_jsr2.test
   343 58AD 8D C3 5B		 sta pkloc_jsr3.test
   344
   345 58B0 A2 6B		 ldx #znak
   346 58B2 20 3C 5B		 jsr put_klocek
   347
   348 58B5 20 0C 5A		 jsr przepisz_pmg
   349
   350 58B8 4C 10 57		 jmp loop 
   351 58BB			__skip
   352
   353 				; jsr puste_linie
   354
   355 58BB A5 8B		 lda pos_y
   356 58BD 29 07		 and #7
   357 58BF 0A			 asl @
   358 58C0 0A			 asl @
   359 58C1 8D 7C 5B		 sta pkloc_jsr1.pos_y_add
   360 				; sta pkloc_jsr_p2.pos_y_add
   361 58C4 8D 98 5B		 sta pkloc_jsr2.pos_y_add
   362 58C7 8D BF 5B		 sta pkloc_jsr3.pos_y_add
   363
   364 58CA A2 6B		 ldx #znak
   365 58CC 20 3C 5B		 jsr put_klocek
   366
   367 58CF 20 0C 5A		 jsr przepisz_pmg
   368 				 
   369 58D2 4C 10 57		 jmp loop
   370
   371 				/*
   372 				  Wykasuj co 8-a linie w buforze
   373 				*/
   373
   374 				/*
   375 				.proc puste_linie
   376
   377 				 lda pos_y
   378 				 :3 lsr @
   379 				 :3 asl @
   380 				 clc
   381 				 adc #8
   382
   383 				?ofs=3
   384
   385 				 tax
   386 				 loa_buf kloc_tmp "+18-?ofs,x"
   387 				 
   388 				 stx pustaczek
   389 				 
   390 				 ldy #2
   391 				 lda #0
   392 				_loop
   393 				 sta (kloc_tmp),y
   394 				 iny
   395 				 cpy #width-1
   396 				 bne _loop
   397
   398 				 txa
   399 				 clc
   400 				 adc #8
   401 				 cmp #[height/8]*8-1
   402 				 bcs stop
   403
   404
   405 				.local _f2
   406 				 tax
   407 				 loa_buf kloc_tmp "+18-?ofs,x"
   408 				 
   409 				 ldy #2
   410 				 lda #0
   411 				_loop
   412 				 sta (kloc_tmp),y
   413 				 iny
   414 				 cpy #width-1
   415 				 bne _loop
   416 				 
   417 				 txa
   418 				 clc
   419 				 adc #8
   420 				 cmp #[height/8]*8-1
   421 				 bcs stop
   422 				.endl 
   423
   424
   425 				.local _f3
   426 				 tax
   427 				 loa_buf kloc_tmp "+18-?ofs,x"
   428 				 
   429 				 ldy #2
   430 				 lda #0
   431 				_loop
   432 				 sta (kloc_tmp),y
   433 				 iny
   434 				 cpy #width-1
   435 				 bne _loop
   436 				.endl
   437
   438
   439 				stop
   440 				 rts
   441 				.endp
   442 				*/
   442
   443
   444 				/*
   445 				  Przepisz bufor na PMG (co wiersz)
   446 				*/
   446
   447 58D5			.proc przepisz_pmg_all
   448
   449 58D5 A9 00		 lda #0
   450 58D7 85 8E		 sta rX
   451
   452 58D9			loop_
   453 58D9 AA			 tax
   454 58DA			 loa_buf kloc_tmp "+11,x"
Macro: TETRIS.LOA_BUF [Source: d:\Download\getris\tetris_add.asm]
     1 58DA BD EF 77		 lda l_buf+11,x
     2 58DD 85 87		 sta KLOC_TMP
     3 58DF BD CA 78		 lda h_buf+11,x
     4 58E2 85 88		 sta KLOC_TMP+1
Source: d:\Download\getris\tetris_add.asm
   455
   456 58E4 A2 00		 ldx #0
   457
   458 58E6 A0 02		 ldy #2
   459 58E8			 move_pmg_i $80
Macro: TETRIS.MOVE_PMG_I [Source: d:\Download\getris\tetris_add.asm]
     1 58E8 B1 87		 lda (kloc_tmp),y
     2 58EA F0 02		 beq _skip
     3 58EC A2 80		 ldx #$80
     4 58EE			_skip
Source: d:\Download\getris\tetris_add.asm
   460 58EE C8			 iny
   461 58EF			 move_pmg $40
Macro: TETRIS.MOVE_PMG [Source: d:\Download\getris\tetris_add.asm]
     1 58EF B1 87		 lda (kloc_tmp),y
     2 58F1 F0 04		 beq _skip
     3 58F3 8A			 txa
     4 58F4 09 40		 ora #$40
     5 58F6 AA			 tax
     6 58F7			_skip
Source: d:\Download\getris\tetris_add.asm
   462 58F7 C8			 iny
   463 58F8			 move_pmg $20
Macro: TETRIS.MOVE_PMG [Source: d:\Download\getris\tetris_add.asm]
     1 58F8 B1 87		 lda (kloc_tmp),y
     2 58FA F0 04		 beq _skip
     3 58FC 8A			 txa
     4 58FD 09 20		 ora #$20
     5 58FF AA			 tax
     6 5900			_skip
Source: d:\Download\getris\tetris_add.asm
   464 5900 C8			 iny
   465 5901			 move_pmg $10
Macro: TETRIS.MOVE_PMG [Source: d:\Download\getris\tetris_add.asm]
     1 5901 B1 87		 lda (kloc_tmp),y
     2 5903 F0 04		 beq _skip
     3 5905 8A			 txa
     4 5906 09 10		 ora #$10
     5 5908 AA			 tax
     6 5909			_skip
Source: d:\Download\getris\tetris_add.asm
   466 5909 C8			 iny
   467 590A			 move_pmg $08
Macro: TETRIS.MOVE_PMG [Source: d:\Download\getris\tetris_add.asm]
     1 590A B1 87		 lda (kloc_tmp),y
     2 590C F0 04		 beq _skip
     3 590E 8A			 txa
     4 590F 09 08		 ora #$08
     5 5911 AA			 tax
     6 5912			_skip
Source: d:\Download\getris\tetris_add.asm
   468 5912 C8			 iny
   469 5913			 move_pmg $04
Macro: TETRIS.MOVE_PMG [Source: d:\Download\getris\tetris_add.asm]
     1 5913 B1 87		 lda (kloc_tmp),y
     2 5915 F0 04		 beq _skip
     3 5917 8A			 txa
     4 5918 09 04		 ora #$04
     5 591A AA			 tax
     6 591B			_skip
Source: d:\Download\getris\tetris_add.asm
   470
   471 = 0013			?ofs = 19
   472
   473 591B 8A			 txa
   474 591C A6 8E		 ldx rX
   475 591E DD 13 C6		 cmp pmBase1+$300+?ofs,x
   476 5921 F0 2A		 beq cont
   477
   478 5923 9D 13 C6		 sta pmBase1+$300+?ofs,x
   479 5926 9D 14 C6		 sta pmBase1+$300+?ofs+1,x
   480 5929 9D 15 C6		 sta pmBase1+$300+?ofs+2,x
   481 592C 9D 16 C6		 sta pmBase1+$300+?ofs+3,x
   482 592F 9D 17 C6		 sta pmBase1+$300+?ofs+4,x
   483 5932 9D 18 C6		 sta pmBase1+$300+?ofs+5,x
   484 5935 9D 19 C6		 sta pmBase1+$300+?ofs+6,x
   485
   486 5938 9D 13 CE		 sta pmBase2+$300+?ofs,x
   487 593B 9D 14 CE		 sta pmBase2+$300+?ofs+1,x
   488 593E 9D 15 CE		 sta pmBase2+$300+?ofs+2,x
   489 5941 9D 16 CE		 sta pmBase2+$300+?ofs+3,x
   490 5944 9D 17 CE		 sta pmBase2+$300+?ofs+4,x
   491 5947 9D 18 CE		 sta pmBase2+$300+?ofs+5,x
   492 594A 9D 19 CE		 sta pmBase2+$300+?ofs+6,x
   493
   494 				; lda #0
   495 				; sta pmBase1+$300+?ofs+7,x
   496 				; sta pmBase2+$300+?ofs+7,x
   497
   498 594D			cont
   499 594D A2 00		 ldx #0
   500 				 
   501 594F C8			 iny
   502 5950			 move_pmg_i $20
Macro: TETRIS.MOVE_PMG_I [Source: d:\Download\getris\tetris_add.asm]
     1 5950 B1 87		 lda (kloc_tmp),y
     2 5952 F0 02		 beq _skip
     3 5954 A2 20		 ldx #$20
     4 5956			_skip
Source: d:\Download\getris\tetris_add.asm
   503 5956 C8			 iny
   504 5957			 move_pmg $10
Macro: TETRIS.MOVE_PMG [Source: d:\Download\getris\tetris_add.asm]
     1 5957 B1 87		 lda (kloc_tmp),y
     2 5959 F0 04		 beq _skip
     3 595B 8A			 txa
     4 595C 09 10		 ora #$10
     5 595E AA			 tax
     6 595F			_skip
Source: d:\Download\getris\tetris_add.asm
   505 595F C8			 iny
   506 5960			 move_pmg $08
Macro: TETRIS.MOVE_PMG [Source: d:\Download\getris\tetris_add.asm]
     1 5960 B1 87		 lda (kloc_tmp),y
     2 5962 F0 04		 beq _skip
     3 5964 8A			 txa
     4 5965 09 08		 ora #$08
     5 5967 AA			 tax
     6 5968			_skip
Source: d:\Download\getris\tetris_add.asm
   507 5968 C8			 iny
   508 5969			 move_pmg $04
Macro: TETRIS.MOVE_PMG [Source: d:\Download\getris\tetris_add.asm]
     1 5969 B1 87		 lda (kloc_tmp),y
     2 596B F0 04		 beq _skip
     3 596D 8A			 txa
     4 596E 09 04		 ora #$04
     5 5970 AA			 tax
     6 5971			_skip
Source: d:\Download\getris\tetris_add.asm
   509 5971 C8			 iny
   510 5972			 move_pmg $02
Macro: TETRIS.MOVE_PMG [Source: d:\Download\getris\tetris_add.asm]
     1 5972 B1 87		 lda (kloc_tmp),y
     2 5974 F0 04		 beq _skip
     3 5976 8A			 txa
     4 5977 09 02		 ora #$02
     5 5979 AA			 tax
     6 597A			_skip
Source: d:\Download\getris\tetris_add.asm
   511 597A C8			 iny
   512 597B			 move_pmg $01
Macro: TETRIS.MOVE_PMG [Source: d:\Download\getris\tetris_add.asm]
     1 597B B1 87		 lda (kloc_tmp),y
     2 597D F0 04		 beq _skip
     3 597F 8A			 txa
     4 5980 09 01		 ora #$01
     5 5982 AA			 tax
     6 5983			_skip
Source: d:\Download\getris\tetris_add.asm
   513
   514 5983 8A			 txa
   515 5984 A6 8E		 ldx rX
   516 5986 DD 13 C7		 cmp pmBase1+$400+?ofs,x
   517 5989 F0 2A		 beq cont2
   518 				 
   519 598B 9D 13 C7		 sta pmBase1+$400+?ofs,x
   520 598E 9D 14 C7		 sta pmBase1+$400+?ofs+1,x
   521 5991 9D 15 C7		 sta pmBase1+$400+?ofs+2,x
   522 5994 9D 16 C7		 sta pmBase1+$400+?ofs+3,x
   523 5997 9D 17 C7		 sta pmBase1+$400+?ofs+4,x
   524 599A 9D 18 C7		 sta pmBase1+$400+?ofs+5,x
   525 599D 9D 19 C7		 sta pmBase1+$400+?ofs+6,x
   526
   527 59A0 9D 13 CF		 sta pmBase2+$400+?ofs,x
   528 59A3 9D 14 CF		 sta pmBase2+$400+?ofs+1,x
   529 59A6 9D 15 CF		 sta pmBase2+$400+?ofs+2,x
   530 59A9 9D 16 CF		 sta pmBase2+$400+?ofs+3,x
   531 59AC 9D 17 CF		 sta pmBase2+$400+?ofs+4,x
   532 59AF 9D 18 CF		 sta pmBase2+$400+?ofs+5,x
   533 59B2 9D 19 CF		 sta pmBase2+$400+?ofs+6,x
   534
   535 				; lda #0
   536 				; sta pmBase1+$400+?ofs+7,x
   537 				; sta pmBase2+$400+?ofs+7,x
   538
   539 59B5			cont2 
   540 				; lda rX
   541 59B5 8A			 txa
   542 59B6 18			 clc
   543 59B7 69 08		 adc #8
   544 59B9 85 8E		 sta rX
   545 59BB C9 C8		 cmp #[[height-7]/8]*8
   546 59BD F0 03		 beq stop
   547 59BF 4C D9 58		 jmp loop_
   548
   549 59C2			stop
   550 59C2 60			 rts
   551 				.endp
   552
   553
   554 				/*
   555 				  Przepisz bufor na znaki
   556 				*/
   556
   557 59C3			.proc przepisz_char
   558
   559 59C3 A9 00		 lda #0
   560 59C5 85 8E		 sta rX
   561
   562 59C7			loop_
   563 59C7 AA			 tax
   564 59C8 4A 4A 4A		 :3 lsr @
   565 59CB A8			 tay
   566
   567 59CC			 loa_buf kloc_tmp "+11,x"
Macro: TETRIS.LOA_BUF [Source: d:\Download\getris\tetris_add.asm]
     1 59CC BD EF 77		 lda l_buf+11,x
     2 59CF 85 87		 sta KLOC_TMP
     3 59D1 BD CA 78		 lda h_buf+11,x
     4 59D4 85 88		 sta KLOC_TMP+1
Source: d:\Download\getris\tetris_add.asm
   568 				 
   569 59D6 B9 75 77		 lda l_scr1+1,y
   570 59D9 8D F7 59		 sta tmp1+1
   571 59DC B9 91 77		 lda h_scr1+1,y
   572 59DF 8D F8 59		 sta tmp1+2
   573
   574 59E2 B9 AD 77		 lda l_scr2+1,y
   575 59E5 8D FA 59		 sta tmp2+1
   576 59E8 B9 C9 77		 lda h_scr2+1,y
   577 59EB 8D FB 59		 sta tmp2+2
   578
   579 59EE A0 02		 ldy #2
   580 59F0			loop
   581 59F0 B1 87		 lda (kloc_tmp),y
   582 59F2 D0 02		 bne _put
   583 				 
   584 59F4 A9 73		 lda #puste_char
   585 				; bne _put
   586
   587 				;_char 
   588 				; lda #klocek_char
   589
   590 59F6			_put
   591 59F6 99 FF FF		tmp1 sta $ffff,y
   592 59F9 99 FF FF		tmp2 sta $ffff,y
   593
   594 59FC C8			 iny
   595 59FD C0 0E		 cpy #12+2
   596 59FF D0 EF		 bne loop
   597
   598 				; lda rX
   599 5A01 8A			 txa
   600 5A02 18			 clc
   601 5A03 69 08		 adc #8
   602 5A05 85 8E		 sta rX
   603 5A07 C9 C8		 cmp #[[height-7]/8]*8
   604 5A09 D0 BC		 bne loop_
   605
   606 5A0B 60			 rts
   607 				.endp
   608
   609
   610 				/*
   611 				  Przepisz bufor na PMG (co linie)
   612 				*/
   612
   613 				.macro move_pmg_i
   614 				 lda (kloc_tmp),y
   615 				 beq _skip
   616 				 ldx #:1
   617 				_skip
   618 				.endm
   619
   620 				.macro move_pmg
   621 				 lda (kloc_tmp),y
   622 				 beq _skip
   623 				 txa
   624 				 ora #:1
   625 				 tax
   626 				_skip
   627 				.endm
   628
   629
   630 				/*
   631 				  Spadajacy klocek na PMG  
   632 				*/ 
   632 				 
   633 5A0C			.proc przepisz_pmg
   634
   635 5A0C A5 8B		 lda pos_y
   636 5A0E AA			 tax
   637 5A0F 18			 clc
   638 5A10 69 18		 adc #24
   639
   640 5A12 C9 CF		 cmp #height-2
   641 5A14 90 02		 bcc ok
   642 5A16 A9 D0		 lda #height-1
   643 5A18			ok
   644 5A18 8D AB 5A		 sta max_y+1
   645
   646 5A1B A6 8D		 ldx old_posy
   647 				; stx rX
   648 5A1D			loop
   649 5A1D 86 8E		 stx rX
   650 5A1F			 loa_buf kloc_tmp  ",x"
Macro: TETRIS.LOA_BUF [Source: d:\Download\getris\tetris_add.asm]
     1 5A1F BD E4 77		 lda l_buf,x
     2 5A22 85 87		 sta KLOC_TMP
     3 5A24 BD BF 78		 lda h_buf,x
     4 5A27 85 88		 sta KLOC_TMP+1
Source: d:\Download\getris\tetris_add.asm
   651
   652 5A29 A2 00		 ldx #0
   653
   654 5A2B A0 02		 ldy #2
   655 5A2D			 move_pmg_i $80
Macro: TETRIS.MOVE_PMG_I [Source: d:\Download\getris\tetris_add.asm]
     1 5A2D B1 87		 lda (kloc_tmp),y
     2 5A2F F0 02		 beq _skip
     3 5A31 A2 80		 ldx #$80
     4 5A33			_skip
Source: d:\Download\getris\tetris_add.asm
   656 5A33 C8			 iny
   657 5A34			 move_pmg $40
Macro: TETRIS.MOVE_PMG [Source: d:\Download\getris\tetris_add.asm]
     1 5A34 B1 87		 lda (kloc_tmp),y
     2 5A36 F0 04		 beq _skip
     3 5A38 8A			 txa
     4 5A39 09 40		 ora #$40
     5 5A3B AA			 tax
     6 5A3C			_skip
Source: d:\Download\getris\tetris_add.asm
   658 5A3C C8			 iny
   659 5A3D			 move_pmg $20
Macro: TETRIS.MOVE_PMG [Source: d:\Download\getris\tetris_add.asm]
     1 5A3D B1 87		 lda (kloc_tmp),y
     2 5A3F F0 04		 beq _skip
     3 5A41 8A			 txa
     4 5A42 09 20		 ora #$20
     5 5A44 AA			 tax
     6 5A45			_skip
Source: d:\Download\getris\tetris_add.asm
   660 5A45 C8			 iny
   661 5A46			 move_pmg $10
Macro: TETRIS.MOVE_PMG [Source: d:\Download\getris\tetris_add.asm]
     1 5A46 B1 87		 lda (kloc_tmp),y
     2 5A48 F0 04		 beq _skip
     3 5A4A 8A			 txa
     4 5A4B 09 10		 ora #$10
     5 5A4D AA			 tax
     6 5A4E			_skip
Source: d:\Download\getris\tetris_add.asm
   662 5A4E C8			 iny
   663 5A4F			 move_pmg $08
Macro: TETRIS.MOVE_PMG [Source: d:\Download\getris\tetris_add.asm]
     1 5A4F B1 87		 lda (kloc_tmp),y
     2 5A51 F0 04		 beq _skip
     3 5A53 8A			 txa
     4 5A54 09 08		 ora #$08
     5 5A56 AA			 tax
     6 5A57			_skip
Source: d:\Download\getris\tetris_add.asm
   664 5A57 C8			 iny
   665 5A58			 move_pmg $04
Macro: TETRIS.MOVE_PMG [Source: d:\Download\getris\tetris_add.asm]
     1 5A58 B1 87		 lda (kloc_tmp),y
     2 5A5A F0 04		 beq _skip
     3 5A5C 8A			 txa
     4 5A5D 09 04		 ora #$04
     5 5A5F AA			 tax
     6 5A60			_skip
Source: d:\Download\getris\tetris_add.asm
   666
   667 5A60 86 8F		 stx tmpZ
   668
   669 5A62 A2 00		 ldx #0
   670
   671 5A64 C8			 iny
   672 5A65			 move_pmg_i $20
Macro: TETRIS.MOVE_PMG_I [Source: d:\Download\getris\tetris_add.asm]
     1 5A65 B1 87		 lda (kloc_tmp),y
     2 5A67 F0 02		 beq _skip
     3 5A69 A2 20		 ldx #$20
     4 5A6B			_skip
Source: d:\Download\getris\tetris_add.asm
   673 5A6B C8			 iny
   674 5A6C			 move_pmg $10
Macro: TETRIS.MOVE_PMG [Source: d:\Download\getris\tetris_add.asm]
     1 5A6C B1 87		 lda (kloc_tmp),y
     2 5A6E F0 04		 beq _skip
     3 5A70 8A			 txa
     4 5A71 09 10		 ora #$10
     5 5A73 AA			 tax
     6 5A74			_skip
Source: d:\Download\getris\tetris_add.asm
   675 5A74 C8			 iny
   676 5A75			 move_pmg $08
Macro: TETRIS.MOVE_PMG [Source: d:\Download\getris\tetris_add.asm]
     1 5A75 B1 87		 lda (kloc_tmp),y
     2 5A77 F0 04		 beq _skip
     3 5A79 8A			 txa
     4 5A7A 09 08		 ora #$08
     5 5A7C AA			 tax
     6 5A7D			_skip
Source: d:\Download\getris\tetris_add.asm
   677 5A7D C8			 iny
   678 5A7E			 move_pmg $04
Macro: TETRIS.MOVE_PMG [Source: d:\Download\getris\tetris_add.asm]
     1 5A7E B1 87		 lda (kloc_tmp),y
     2 5A80 F0 04		 beq _skip
     3 5A82 8A			 txa
     4 5A83 09 04		 ora #$04
     5 5A85 AA			 tax
     6 5A86			_skip
Source: d:\Download\getris\tetris_add.asm
   679 5A86 C8			 iny
   680 5A87			 move_pmg $02
Macro: TETRIS.MOVE_PMG [Source: d:\Download\getris\tetris_add.asm]
     1 5A87 B1 87		 lda (kloc_tmp),y
     2 5A89 F0 04		 beq _skip
     3 5A8B 8A			 txa
     4 5A8C 09 02		 ora #$02
     5 5A8E AA			 tax
     6 5A8F			_skip
Source: d:\Download\getris\tetris_add.asm
   681 5A8F C8			 iny
   682 5A90			 move_pmg $01
Macro: TETRIS.MOVE_PMG [Source: d:\Download\getris\tetris_add.asm]
     1 5A90 B1 87		 lda (kloc_tmp),y
     2 5A92 F0 04		 beq _skip
     3 5A94 8A			 txa
     4 5A95 09 01		 ora #$01
     5 5A97 AA			 tax
     6 5A98			_skip
Source: d:\Download\getris\tetris_add.asm
   683
   684 5A98 8A			 txa
   685 5A99 A6 8E		 ldx rX
   686 5A9B 9D 0B C7		 sta pmBase1+$400+8+3,x
   687 5A9E 9D 0B CF		 sta pmBase2+$400+8+3,x
   688
   689 5AA1 A5 8F		 lda tmpZ
   690 5AA3 9D 0B C6		 sta pmBase1+$300+8+3,x
   691 5AA6 9D 0B CE		 sta pmBase2+$300+8+3,x
   692
   693 5AA9 E8			 inx
   694 				; stx rX
   695 5AAA E0 00		max_y cpx #0
   696 5AAC F0 03		 beq stop
   697 5AAE 4C 1D 5A		 jmp loop
   698
   699 5AB1			stop
   700 5AB1 60			 rts
   701 				.endp
   702
   703
   704 				/*
   705 				  Sprawdz mozliwosc zmiany fazy klocka
   706 				*/
   706
   707 5AB2			.proc test_faza
   708
   709 5AB2 A5 85 85 87 A5 86 +  mwa kloc kloc_tmp
   710
   711 5ABA A6 89		 ldx klocek_nr
   712 5ABC 86 8C		 stx old
   713 				 
   714 5ABE E8			 inx
   715 5ABF 8A			 txa
   716 5AC0 29 03		 and #3
   717 5AC2 0D D2 EC		 ora maska
   718 5AC5 85 89		 sta klocek_nr
   719
   720 5AC7 A8			 tay
   721 5AC8 B9 24 77		 lda l_test,y
   722 5ACB 8D D7 5A		 sta jump+1
   723 5ACE B9 4C 77		 lda h_test,y
   724 5AD1 8D D8 5A		 sta jump+2
   725
   726 5AD4 A9 00		 lda #0
   727 5AD6 20 FF FF		jump jsr $ffff
   728 5AD9 F0 07		 beq ok
   729 				 
   730 5ADB A5 8C		 lda old
   731 5ADD 85 89		 sta klocek_nr
   732 				 
   733 5ADF A9 FF		 lda #$ff
   734 5AE1 60			 rts
   735
   736 5AE2 60			ok rts
   737 				.endp
   738
   739
   740 				/*
   741 				  Sprawdz mozliwosc zmiany pozycji X klocka
   742 				*/
   742
   743 5AE3			.proc test_posX
   744
   745 5AE3 A5 8A		 lda pos_x
   746 5AE5 85 8C		 sta old
   747
   748 5AE7 8A			 txa
   749 5AE8 18			 clc
   750 5AE9 65 8A		 adc pos_x
   751 5AEB 85 8A		 sta pos_x
   752 				 
   753 5AED 20 0A 69		 jsr get_kloc
   754
   755 5AF0 A5 85 85 87 A5 86 +  mwa kloc kloc_tmp
   756
   757 5AF8 A4 89		 ldy klocek_nr
   758 5AFA B9 24 77		 lda l_test,y
   759 5AFD 8D 09 5B		 sta jump+1
   760 5B00 B9 4C 77		 lda h_test,y
   761 5B03 8D 0A 5B		 sta jump+2
   762
   763 5B06 A9 00		 lda #0
   764 5B08 20 FF FF		jump jsr $ffff
   765 5B0B F0 08		 beq ok
   766 				 
   767 5B0D A5 8C		 lda old
   768 5B0F 85 8A		 sta pos_x
   769 				 
   770 5B11 20 0A 69		 jsr get_kloc
   771 5B14 60			 rts
   772
   773 5B15 60			ok rts
   774 				.endp
   775
   776
   777 				/*
   778 				  Sprawdz mozliwosc zmiany pozycji Y klocka
   779 				*/
   779
   780 5B16			.proc test_posY
   781
   782 5B16 E6 8B		 inc pos_y
   783 5B18 20 0A 69		 jsr get_kloc
   784
   785 5B1B A5 85 85 87 A5 86 +  mwa kloc kloc_tmp
   786
   787 5B23 A4 89		 ldy klocek_nr
   788 5B25 B9 24 77		 lda l_test,y
   789 5B28 8D 34 5B		 sta jump+1
   790 5B2B B9 4C 77		 lda h_test,y
   791 5B2E 8D 35 5B		 sta jump+2
   792
   793 5B31 A9 00		 lda #0
   794 5B33 20 FF FF		jump jsr $ffff
   795 5B36 F0 03		 beq ok
   796
   797 				; jsr get_kloc
   798 5B38 A9 FF		 lda #$ff
   799 5B3A 60			 rts
   800
   801 5B3B			ok
   802 				; jsr get_kloc
   803 				; lda #0
   804 5B3B 60			 rts
   805
   806 				.endp
   807
   808
   809 				/*
   810 				  Skok do odpowiedniej procedury klocka
   811 				*/
   811
   812 5B3C			.proc put_klocek
   813
   814 5B3C A5 8B		 lda pos_y
   815 5B3E 4A 4A 4A		 :3 lsr @
   816 5B41 A8			 tay
   817 				 
   818 5B42 18			 clc
   819 5B43 B9 74 77		 lda l_scr1,y
   820 5B46 65 8A		 adc pos_x
   821 5B48 85 92		 sta klocSCR1_tmp
   822 5B4A 85 94		 sta klocSCR2_tmp
   823 5B4C B9 90 77		 lda h_scr1,y
   824 5B4F 69 00		 adc #0
   825 5B51 85 93		 sta klocSCR1_tmp+1
   826 5B53 69 06		 adc >text2-text1
   827 5B55 85 95		 sta klocSCR2_tmp+1
   828
   829 5B57 A5 85 85 87 A5 86 +  mwa kloc kloc_tmp
   830
   831 5B5F A4 89		 ldy klocek_nr
   832 5B61 B9 D4 76		 lda l_klocek,y
   833 5B64 8D 6F 5B		 sta jump+1
   834 5B67 B9 FC 76		 lda h_klocek,y
   835 5B6A 8D 70 5B		 sta jump+2
   836 				 
   837 5B6D 8A			 txa
   838 5B6E 4C FF FF		jump jmp $ffff
   839 				.endp
   840
   841
   842 				/*
   843 				  ADD_KLOC_TMP
   844 				*/
   844
   845 5B71			.proc add_kloc_tmp
   846 5B71 18			 clc
   847 5B72 65 87		 adc kloc_tmp
   848 5B74 85 87		 sta kloc_tmp
   849 5B76 90 02		 bcc _skip
   850 5B78 E6 88		 inc kloc_tmp+1
   851 5B7A			_skip
   852 5B7A 60			 rts
   853 				.endp
   854
   855
   856 				.macro add_kloc
   857 				 ift :1=1
   858 				  inw kloc_tmp
   859 				 eli :1=2
   860 				  inw kloc_tmp
   861 				  inw kloc_tmp
   862 				 eli :1>2
   863 				  tax
   864 				  lda #:1
   865 				  jsr add_kloc_tmp
   866 				  txa
   867 				 eif
   868 				
   869 				 .def ?lkl = 0
   870 				.endm
   871
   872
   873 				.macro lkl_close
   874 				 add_kloc ?lkl
   875 				.endm
   876
   877
   878 				.macro __kloc2tmpZ
   879 				 ift :1=0
   880 				  lkl_close
   881 				  mwx kloc_tmp tmpZ
   882 				 els
   883 				  mwx tmpZ kloc_tmp
   884 				  .def ?lkl = 0
   885 				 eif  
   886 				.endm
   887
   888
   889 				/*
   890 				  Procedury i makra dla konkretnej fazy klocka
   891 				*/
   891
   892 				.macro pkloc
   893 				
   894 				 ldy #:1
   895 				
   896 				 ift :2=1
   897 				  jsr pkloc_jsr1
   898 				 eli :2=2
   899 				  jsr pkloc_jsr2
   900 				 eli :2=3
   901 				  jsr pkloc_jsr3
   902 				; eli :2=-2		; to powodowalo wymazanie klocka, NIE UZYWAC !!!
   903 				;  jsr pkloc_jsr_p2
   904 				 eif
   905 				
   906 				.endm
   907
   908
   909 				// procedura realizujaca opadanie w poziomie dwoch klockow, na znakach
   910 				/*
   911 				.proc pkloc_jsr_p2
   912 				 ldx #0
   913 				pos_y_add equ *-1
   914
   915 				; ldy #0
   916 				 lda (klocSCR1_tmp),y
   917 				 cmp #klocek_char
   918 				test equ *-1
   919 				 beq _skip
   920 				 lda klocSCR_fazy,x
   921 				 sta (klocSCR1_tmp),y
   922 				 sta (klocSCR2_tmp),y
   923 				 iny
   924 				 sta (klocSCR1_tmp),y
   925 				 sta (klocSCR2_tmp),y
   926 				 dey
   927
   928 				_skip 
   929 				; ldy #40
   930 				 tya
   931 				 clc
   932 				 adc #40
   933 				 tay
   934
   935 				 lda klocSCR_fazy+1,x
   936 				 sta (klocSCR1_tmp),y
   937 				 sta (klocSCR2_tmp),y
   938 				 iny
   939 				 sta (klocSCR1_tmp),y
   940 				 sta (klocSCR2_tmp),y 
   941 				 rts
   942 				.endp
   943 				*/
   943
   944
   945
   946 				// procedura realizujaca opadanie w pionie jednego klocka, na znakach
   947 5B7B			.proc pkloc_jsr1
   948 5B7B A2 00		 ldx #0
   949 = 5B7C			pos_y_add equ *-1
   950
   951 				; ldy #0
   952 5B7D B1 92		 lda (klocSCR1_tmp),y
   953 5B7F C9 6B		 cmp #klocek_char
   954 = 5B80			test equ *-1
   955 5B81 F0 07		 beq _skip
   956 5B83 BD B0 B4		 lda klocSCR_fazy,x
   957 5B86 91 92		 sta (klocSCR1_tmp),y
   958 5B88 91 94		 sta (klocSCR2_tmp),y
   959
   960 5B8A			_skip 
   961 				; ldy #40
   962 5B8A 98			 tya
   963 5B8B 18			 clc
   964 5B8C 69 28		 adc #40
   965 5B8E A8			 tay
   966
   967 5B8F BD B1 B4		 lda klocSCR_fazy+1,x
   968 5B92 91 92		 sta (klocSCR1_tmp),y
   969 5B94 91 94		 sta (klocSCR2_tmp),y 
   970 5B96 60			 rts
   971 				.endp
   972
   973
   974 				// procedura realizujaca opadanie w pionie dwoch klockow, na znakach
   975 5B97			.proc pkloc_jsr2
   976 5B97 A2 00		 ldx #0
   977 = 5B98			pos_y_add equ *-1
   978
   979 				; ldy #0
   980 5B99 B1 92		 lda (klocSCR1_tmp),y
   981 5B9B C9 6B		 cmp #klocek_char
   982 = 5B9C			test equ *-1
   983 5B9D F0 07		 beq _skip
   984 5B9F BD D4 B4		 lda klocSCR_fazy+36,x
   985 5BA2 91 92		 sta (klocSCR1_tmp),y
   986 5BA4 91 94		 sta (klocSCR2_tmp),y
   987
   988 5BA6			_skip
   989 				; ldy #40
   990 5BA6 98			 tya
   991 5BA7 18			 clc
   992 5BA8 69 28		 adc #40
   993 5BAA A8			 tay
   994
   995 5BAB BD D5 B4		 lda klocSCR_fazy+36+1,x
   996 5BAE 91 92		 sta (klocSCR1_tmp),y
   997 5BB0 91 94		 sta (klocSCR2_tmp),y
   998
   999 				; ldy #80
  1000 5BB2 98			 tya
  1001 5BB3 69 28		 adc #40
  1002 5BB5 A8			 tay
  1003
  1004 5BB6 BD D6 B4		 lda klocSCR_fazy+36+2,x
  1005 5BB9 91 92		 sta (klocSCR1_tmp),y
  1006 5BBB 91 94		 sta (klocSCR2_tmp),y 
  1007 5BBD 60			 rts
  1008 				.endp
  1009
  1010
  1011 				// procedura realizujaca opadanie w pionie trzech klockow, na znakach
  1012 5BBE			.proc pkloc_jsr3
  1013 5BBE A2 00		 ldx #0
  1014 = 5BBF			pos_y_add equ *-1
  1015
  1016 				; ldy #0
  1017 5BC0 B1 92		 lda (klocSCR1_tmp),y
  1018 5BC2 C9 6B		 cmp #klocek_char
  1019 = 5BC3			test equ *-1
  1020 5BC4 F0 07		 beq _skip
  1021 5BC6 BD F8 B4		 lda klocSCR_fazy+72,x
  1022 5BC9 91 92		 sta (klocSCR1_tmp),y
  1023 5BCB 91 94		 sta (klocSCR2_tmp),y
  1024
  1025 5BCD			_skip
  1026 				; ldy #40
  1027 5BCD 98			 tya
  1028 5BCE 18			 clc
  1029 5BCF 69 28		 adc #40
  1030 5BD1 A8			 tay
  1031
  1032 5BD2 BD F9 B4		 lda klocSCR_fazy+72+1,x
  1033 5BD5 91 92		 sta (klocSCR1_tmp),y
  1034 5BD7 91 94		 sta (klocSCR2_tmp),y
  1035
  1036 				; ldy #80
  1037 5BD9 98			 tya
  1038 5BDA 69 28		 adc #40
  1039 5BDC A8			 tay
  1040
  1041 5BDD BD FA B4		 lda klocSCR_fazy+72+2,x
  1042 5BE0 91 92		 sta (klocSCR1_tmp),y
  1043 5BE2 91 94		 sta (klocSCR2_tmp),y 
  1044
  1045 				; ldy #120
  1046 5BE4 98			 tya
  1047 5BE5 69 28		 adc #40
  1048 5BE7 A8			 tay
  1049
  1050 5BE8 BD FB B4		 lda klocSCR_fazy+72+3,x
  1051 5BEB 91 92		 sta (klocSCR1_tmp),y
  1052 5BED 91 94		 sta (klocSCR2_tmp),y 
  1053 5BEF 60			 rts
  1054 				.endp
  1055
  1056
  1057 				// wypelniamy wartosciami bufor studni BUF
  1058 				// pamiec studni zorganizowana jest jako tablica 2-d o wymiarach WIDTH*HEIGHT
  1059 				.macro sta_kloc
  1060 				 .def ?lkl = ?lkl + :1
  1061 				
  1062 				 ift ?lkl=0
  1063 				  jsr sta_kloc_jsr
  1064 				 eli ?lkl=1
  1065 				  jsr sta_kloc_jsr_plus1
  1066 				 eli ?lkl=2
  1067 				  jsr sta_kloc_jsr_plus2
  1068 				 eli ?lkl=120
  1069 				  jsr sta_kloc_jsr_plus120
  1070 				 eli ?lkl=121
  1071 				  jsr sta_kloc_jsr_plus121
  1072 				 els
  1073 				  add_kloc ?lkl
  1074 				  jsr sta_kloc_jsr
  1075 				 eif
  1076 				
  1077 				.endm
  1078
  1079
  1080 5BF0			sta_kloc_jsr
  1081 				; ldy #width*7
  1082 				; sta (kloc_tmp),y
  1083 5BF0 A0 5A		 ldy #width*6
  1084 5BF2 91 87		 sta (kloc_tmp),y
  1085 5BF4 A0 4B		 ldy #width*5
  1086 5BF6 91 87		 sta (kloc_tmp),y
  1087 5BF8 A0 3C		 ldy #width*4
  1088 5BFA 91 87		 sta (kloc_tmp),y
  1089 5BFC A0 2D		 ldy #width*3
  1090 5BFE 91 87		 sta (kloc_tmp),y
  1091 5C00 A0 1E		 ldy #width*2
  1092 5C02 91 87		 sta (kloc_tmp),y
  1093 5C04 A0 0F		 ldy #width
  1094 5C06 91 87		 sta (kloc_tmp),y
  1095 5C08 A0 00		 ldy #0
  1096 5C0A 91 87		 sta (kloc_tmp),y
  1097 5C0C 60			 rts
  1098
  1099
  1100 5C0D			sta_kloc_jsr_plus1
  1101 				; ldy #width*7+1
  1102 				; sta (kloc_tmp),y
  1103 5C0D A0 5B		 ldy #width*6+1
  1104 5C0F 91 87		 sta (kloc_tmp),y
  1105 5C11 A0 4C		 ldy #width*5+1
  1106 5C13 91 87		 sta (kloc_tmp),y
  1107 5C15 A0 3D		 ldy #width*4+1
  1108 5C17 91 87		 sta (kloc_tmp),y
  1109 5C19 A0 2E		 ldy #width*3+1
  1110 5C1B 91 87		 sta (kloc_tmp),y
  1111 5C1D A0 1F		 ldy #width*2+1
  1112 5C1F 91 87		 sta (kloc_tmp),y
  1113 5C21 A0 10		 ldy #width+1
  1114 5C23 91 87		 sta (kloc_tmp),y
  1115 5C25 A0 01		 ldy #0+1
  1116 5C27 91 87		 sta (kloc_tmp),y
  1117 5C29 60			 rts
  1118
  1119
  1120 5C2A			sta_kloc_jsr_plus2
  1121 				; ldy #width*7+2
  1122 				; sta (kloc_tmp),y
  1123 5C2A A0 5C		 ldy #width*6+2
  1124 5C2C 91 87		 sta (kloc_tmp),y
  1125 5C2E A0 4D		 ldy #width*5+2
  1126 5C30 91 87		 sta (kloc_tmp),y
  1127 5C32 A0 3E		 ldy #width*4+2
  1128 5C34 91 87		 sta (kloc_tmp),y
  1129 5C36 A0 2F		 ldy #width*3+2
  1130 5C38 91 87		 sta (kloc_tmp),y
  1131 5C3A A0 20		 ldy #width*2+2
  1132 5C3C 91 87		 sta (kloc_tmp),y
  1133 5C3E A0 11		 ldy #width+2
  1134 5C40 91 87		 sta (kloc_tmp),y
  1135 5C42 A0 02		 ldy #0+2
  1136 5C44 91 87		 sta (kloc_tmp),y
  1137 5C46 60			 rts
  1138
  1139
  1140 5C47			sta_kloc_jsr_plus120
  1141 				; ldy #width*7+120
  1142 				; sta (kloc_tmp),y
  1143 5C47 A0 D2		 ldy #width*6+120
  1144 5C49 91 87		 sta (kloc_tmp),y
  1145 5C4B A0 C3		 ldy #width*5+120
  1146 5C4D 91 87		 sta (kloc_tmp),y
  1147 5C4F A0 B4		 ldy #width*4+120
  1148 5C51 91 87		 sta (kloc_tmp),y
  1149 5C53 A0 A5		 ldy #width*3+120
  1150 5C55 91 87		 sta (kloc_tmp),y
  1151 5C57 A0 96		 ldy #width*2+120
  1152 5C59 91 87		 sta (kloc_tmp),y
  1153 5C5B A0 87		 ldy #width+120
  1154 5C5D 91 87		 sta (kloc_tmp),y
  1155 5C5F A0 78		 ldy #0+120
  1156 5C61 91 87		 sta (kloc_tmp),y
  1157 5C63 60			 rts
  1158
  1159
  1160 5C64			sta_kloc_jsr_plus121
  1161 				; ldy #width*7+121
  1162 				; sta (kloc_tmp),y
  1163 5C64 A0 D3		 ldy #width*6+121
  1164 5C66 91 87		 sta (kloc_tmp),y
  1165 5C68 A0 C4		 ldy #width*5+121
  1166 5C6A 91 87		 sta (kloc_tmp),y
  1167 5C6C A0 B5		 ldy #width*4+121
  1168 5C6E 91 87		 sta (kloc_tmp),y
  1169 5C70 A0 A6		 ldy #width*3+121
  1170 5C72 91 87		 sta (kloc_tmp),y
  1171 5C74 A0 97		 ldy #width*2+121
  1172 5C76 91 87		 sta (kloc_tmp),y
  1173 5C78 A0 88		 ldy #width+121
  1174 5C7A 91 87		 sta (kloc_tmp),y
  1175 5C7C A0 79		 ldy #0+121
  1176 5C7E 91 87		 sta (kloc_tmp),y
  1177 5C80 60			 rts
  1178
  1179
  1180 				.macro lda_kloc
  1181 				
  1182 				 .def ?lkl = ?lkl + :1
  1183 				
  1184 				 ift ?lkl>=240
  1185 				  lkl_close
  1186 				 eif
  1187 				 
  1188 				 ldy #0+?lkl
  1189 				 ora (kloc_tmp),y
  1190 				; ldy #width
  1191 				; ora (kloc_tmp),y
  1192 				; ldy #width*2
  1193 				; ora (kloc_tmp),y
  1194 				 ldy #width*3+?lkl
  1195 				 ora (kloc_tmp),y
  1196 				; ldy #width*4
  1197 				; ora (kloc_tmp),y
  1198 				; ldy #width*5
  1199 				; ora (kloc_tmp),y
  1200 				; ldy #width*6
  1201 				; ora (kloc_tmp),y
  1202 				 ldy #width*8+?lkl
  1203 				 ora (kloc_tmp),y
  1204 				.endm
  1205
  1206
  1207 				/*
  1208 				  Definicje ksztalow i procedury obslugi klockow
  1209 				*/
  1209
  1210 				* KLOCEK 1 (2 fazy)
  1211 				; ' * '
  1212 				; ' * '
  1213 				; ' * '
  1214 5C81			.proc klocek1_0
  1215 = 0000			 .def ?lkl = 0
  1216 5C81			 sta_kloc 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 5C81 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1217 5C84			 sta_kloc width*8
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + WIDTH*8
    12 5C84 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1218 5C87			 sta_kloc width*8
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 00F1			 .def ?lkl = ?lkl + WIDTH*8
     7 5C87 AA			  tax
     8 5C88 A9 F1		  lda #?LKL
     9 5C8A 20 71 5B		  jsr add_kloc_tmp
    10 5C8D 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 5C8E 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1219
  1220 5C91			 pkloc 1 , 3
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5C91 A0 01		 ldy #1
     9 5C93 20 BE 5B		  jsr pkloc_jsr3
Source: d:\Download\getris\tetris_add.asm
  1221 5C96 60			 rts
  1222
  1223 5C97			test
  1224 = 0000			 .def ?lkl = 0
  1225 5C97			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 5C97 A0 01		 ldy #0+?lkl
     9 5C99 11 87		 ora (kloc_tmp),y
    14 5C9B A0 2E		 ldy #width*3+?lkl
    15 5C9D 11 87		 ora (kloc_tmp),y
    22 5C9F A0 79		 ldy #width*8+?lkl
    23 5CA1 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1226 5CA3			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + WIDTH*8
     8 5CA3 A0 79		 ldy #0+?lkl
     9 5CA5 11 87		 ora (kloc_tmp),y
    14 5CA7 A0 A6		 ldy #width*3+?lkl
    15 5CA9 11 87		 ora (kloc_tmp),y
    22 5CAB A0 F1		 ldy #width*8+?lkl
    23 5CAD 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1227 5CAF			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F1			 .def ?lkl = ?lkl + WIDTH*8
     7 5CAF AA			  tax
     8 5CB0 A9 F1		  lda #?LKL
     9 5CB2 20 71 5B		  jsr add_kloc_tmp
    10 5CB5 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 5CB6 A0 00		 ldy #0+?lkl
     9 5CB8 11 87		 ora (kloc_tmp),y
    14 5CBA A0 2D		 ldy #width*3+?lkl
    15 5CBC 11 87		 ora (kloc_tmp),y
    22 5CBE A0 78		 ldy #width*8+?lkl
    23 5CC0 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1228 5CC2 60			 rts 
  1229 				.endp
  1230
  1231
  1232 				; '   '
  1233 				; '***'
  1234 				; '   '
  1235 5CC3			.proc klocek1_1
  1236 = 0000			 .def ?lkl = 0
  1237 5CC3			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 5CC3 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1238 5CC6			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + 1
    12 5CC6 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1239 5CC9			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 007A			 .def ?lkl = ?lkl + 1
     7 5CC9 AA			  tax
     8 5CCA A9 7A		  lda #?LKL
     9 5CCC 20 71 5B		  jsr add_kloc_tmp
    10 5CCF 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 5CD0 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1240
  1241 5CD3			 pkloc 40   , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5CD3 A0 28		 ldy #40
     5 5CD5 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1242 5CD8			 pkloc 40+1 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5CD8 A0 29		 ldy #40+1
     5 5CDA 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1243 5CDD			 pkloc 40+2 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5CDD A0 2A		 ldy #40+2
     5 5CDF 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1244 5CE2 60			 rts
  1245
  1246 5CE3			test
  1247 = 0000			 .def ?lkl = 0
  1248 5CE3			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 5CE3 A0 78		 ldy #0+?lkl
     9 5CE5 11 87		 ora (kloc_tmp),y
    14 5CE7 A0 A5		 ldy #width*3+?lkl
    15 5CE9 11 87		 ora (kloc_tmp),y
    22 5CEB A0 F0		 ldy #width*8+?lkl
    23 5CED 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1249 5CEF			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + 1
     8 5CEF A0 79		 ldy #0+?lkl
     9 5CF1 11 87		 ora (kloc_tmp),y
    14 5CF3 A0 A6		 ldy #width*3+?lkl
    15 5CF5 11 87		 ora (kloc_tmp),y
    22 5CF7 A0 F1		 ldy #width*8+?lkl
    23 5CF9 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1250 5CFB			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 007A			 .def ?lkl = ?lkl + 1
     8 5CFB A0 7A		 ldy #0+?lkl
     9 5CFD 11 87		 ora (kloc_tmp),y
    14 5CFF A0 A7		 ldy #width*3+?lkl
    15 5D01 11 87		 ora (kloc_tmp),y
    22 5D03 A0 F2		 ldy #width*8+?lkl
    23 5D05 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1251 5D07 60			 rts
  1252 				.endp
  1253
  1254
  1255 				* KLOCEK 2 (4 fazy)
  1256 				; ' * '
  1257 				; ' * '
  1258 				; ' **'
  1259 5D08			.proc klocek2_0
  1260 = 0000			 .def ?lkl = 0
  1261 5D08			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 5D08 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1262 5D0B			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + WIDTH*8
    12 5D0B 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1263 5D0E			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 00F1			 .def ?lkl = ?lkl + WIDTH*8
     7 5D0E AA			  tax
     8 5D0F A9 F1		  lda #?LKL
     9 5D11 20 71 5B		  jsr add_kloc_tmp
    10 5D14 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 5D15 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1264 5D18			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 5D18 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1265
  1266 5D1B			 pkloc 1      , 3
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5D1B A0 01		 ldy #1
     9 5D1D 20 BE 5B		  jsr pkloc_jsr3
Source: d:\Download\getris\tetris_add.asm
  1267 5D20			 pkloc 2+2*40 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5D20 A0 52		 ldy #2+2*40
     5 5D22 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1268 5D25 60			 rts
  1269
  1270 5D26			test
  1271 = 0000			 .def ?lkl = 0
  1272 5D26			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 5D26 A0 01		 ldy #0+?lkl
     9 5D28 11 87		 ora (kloc_tmp),y
    14 5D2A A0 2E		 ldy #width*3+?lkl
    15 5D2C 11 87		 ora (kloc_tmp),y
    22 5D2E A0 79		 ldy #width*8+?lkl
    23 5D30 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1273 5D32			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + WIDTH*8
     8 5D32 A0 79		 ldy #0+?lkl
     9 5D34 11 87		 ora (kloc_tmp),y
    14 5D36 A0 A6		 ldy #width*3+?lkl
    15 5D38 11 87		 ora (kloc_tmp),y
    22 5D3A A0 F1		 ldy #width*8+?lkl
    23 5D3C 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1274 5D3E			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F1			 .def ?lkl = ?lkl + WIDTH*8
     7 5D3E AA			  tax
     8 5D3F A9 F1		  lda #?LKL
     9 5D41 20 71 5B		  jsr add_kloc_tmp
    10 5D44 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 5D45 A0 00		 ldy #0+?lkl
     9 5D47 11 87		 ora (kloc_tmp),y
    14 5D49 A0 2D		 ldy #width*3+?lkl
    15 5D4B 11 87		 ora (kloc_tmp),y
    22 5D4D A0 78		 ldy #width*8+?lkl
    23 5D4F 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1275 5D51			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 5D51 A0 01		 ldy #0+?lkl
     9 5D53 11 87		 ora (kloc_tmp),y
    14 5D55 A0 2E		 ldy #width*3+?lkl
    15 5D57 11 87		 ora (kloc_tmp),y
    22 5D59 A0 79		 ldy #width*8+?lkl
    23 5D5B 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1276 5D5D 60			 rts
  1277 				.endp
  1278
  1279
  1280 				; '   '
  1281 				; '***'
  1282 				; '*  '
  1283 5D5E			.proc klocek2_1
  1284 = 0000			 .def ?lkl = 0
  1285 5D5E			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 5D5E 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1286 5D61			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     7 5D61 AA			  tax
     8 5D62 A9 78		  lda #?LKL
     9 5D64 20 71 5B		  jsr add_kloc_tmp
    10 5D67 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 5D68 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1287 5D70			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 5D70 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1288 5D73			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 5D73 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1289 5D7B			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 5D7B 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1290 5D7E			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0002			 .def ?lkl = ?lkl + 1
     8 5D7E 20 2A 5C		  jsr sta_kloc_jsr_plus2
Source: d:\Download\getris\tetris_add.asm
  1291
  1292 5D81			 pkloc 40   , 2
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5D81 A0 28		 ldy #40
     7 5D83 20 97 5B		  jsr pkloc_jsr2
Source: d:\Download\getris\tetris_add.asm
  1293 5D86			 pkloc 40+1 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5D86 A0 29		 ldy #40+1
     5 5D88 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1294 5D8B			 pkloc 40+2 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5D8B A0 2A		 ldy #40+2
     5 5D8D 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1295 5D90 60			 rts
  1296
  1297 5D91			test
  1298 = 0000			 .def ?lkl = 0
  1299 5D91			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 5D91 A0 78		 ldy #0+?lkl
     9 5D93 11 87		 ora (kloc_tmp),y
    14 5D95 A0 A5		 ldy #width*3+?lkl
    15 5D97 11 87		 ora (kloc_tmp),y
    22 5D99 A0 F0		 ldy #width*8+?lkl
    23 5D9B 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1300 5D9D			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     7 5D9D AA			  tax
     8 5D9E A9 78		  lda #?LKL
     9 5DA0 20 71 5B		  jsr add_kloc_tmp
    10 5DA3 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 5DA4 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1301 5DAC			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 5DAC A0 78		 ldy #0+?lkl
     9 5DAE 11 87		 ora (kloc_tmp),y
    14 5DB0 A0 A5		 ldy #width*3+?lkl
    15 5DB2 11 87		 ora (kloc_tmp),y
    22 5DB4 A0 F0		 ldy #width*8+?lkl
    23 5DB6 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1302 5DB8			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 5DB8 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1303 5DC0			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 5DC0 A0 01		 ldy #0+?lkl
     9 5DC2 11 87		 ora (kloc_tmp),y
    14 5DC4 A0 2E		 ldy #width*3+?lkl
    15 5DC6 11 87		 ora (kloc_tmp),y
    22 5DC8 A0 79		 ldy #width*8+?lkl
    23 5DCA 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1304 5DCC			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0002			 .def ?lkl = ?lkl + 1
     8 5DCC A0 02		 ldy #0+?lkl
     9 5DCE 11 87		 ora (kloc_tmp),y
    14 5DD0 A0 2F		 ldy #width*3+?lkl
    15 5DD2 11 87		 ora (kloc_tmp),y
    22 5DD4 A0 7A		 ldy #width*8+?lkl
    23 5DD6 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1305 5DD8 60			 rts
  1306 				.endp
  1307
  1308
  1309 				; '** '
  1310 				; ' * '
  1311 				; ' * '
  1312 5DD9			.proc klocek2_2
  1313 = 0000			 .def ?lkl = 0
  1314 5DD9			 sta_kloc 0       , 0
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0000			 .def ?lkl = ?lkl + 0
     4 5DD9 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1315 5DDC			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 5DDC 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1316 5DDF			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + WIDTH*8
    12 5DDF 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1317 5DE2			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 00F1			 .def ?lkl = ?lkl + WIDTH*8
     7 5DE2 AA			  tax
     8 5DE3 A9 F1		  lda #?LKL
     9 5DE5 20 71 5B		  jsr add_kloc_tmp
    10 5DE8 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 5DE9 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1318
  1319 5DEC			 pkloc 0 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5DEC A0 00		 ldy #0
     5 5DEE 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1320 5DF1			 pkloc 1 , 3
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5DF1 A0 01		 ldy #1
     9 5DF3 20 BE 5B		  jsr pkloc_jsr3
Source: d:\Download\getris\tetris_add.asm
  1321 5DF6 60			 rts
  1322
  1323 5DF7			test
  1324 = 0000			 .def ?lkl = 0
  1325 5DF7			 lda_kloc 0
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0000			 .def ?lkl = ?lkl + 0
     8 5DF7 A0 00		 ldy #0+?lkl
     9 5DF9 11 87		 ora (kloc_tmp),y
    14 5DFB A0 2D		 ldy #width*3+?lkl
    15 5DFD 11 87		 ora (kloc_tmp),y
    22 5DFF A0 78		 ldy #width*8+?lkl
    23 5E01 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1326 5E03			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 5E03 A0 01		 ldy #0+?lkl
     9 5E05 11 87		 ora (kloc_tmp),y
    14 5E07 A0 2E		 ldy #width*3+?lkl
    15 5E09 11 87		 ora (kloc_tmp),y
    22 5E0B A0 79		 ldy #width*8+?lkl
    23 5E0D 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1327 5E0F			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + WIDTH*8
     8 5E0F A0 79		 ldy #0+?lkl
     9 5E11 11 87		 ora (kloc_tmp),y
    14 5E13 A0 A6		 ldy #width*3+?lkl
    15 5E15 11 87		 ora (kloc_tmp),y
    22 5E17 A0 F1		 ldy #width*8+?lkl
    23 5E19 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1328 5E1B			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F1			 .def ?lkl = ?lkl + WIDTH*8
     7 5E1B AA			  tax
     8 5E1C A9 F1		  lda #?LKL
     9 5E1E 20 71 5B		  jsr add_kloc_tmp
    10 5E21 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 5E22 A0 00		 ldy #0+?lkl
     9 5E24 11 87		 ora (kloc_tmp),y
    14 5E26 A0 2D		 ldy #width*3+?lkl
    15 5E28 11 87		 ora (kloc_tmp),y
    22 5E2A A0 78		 ldy #width*8+?lkl
    23 5E2C 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1329 5E2E 60			 rts
  1330 				.endp
  1331
  1332
  1333 				; '  *'
  1334 				; '***'
  1335 				; '   '
  1336 5E2F			.proc klocek2_3
  1337 = 0000			 .def ?lkl = 0
  1338 5E2F			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 5E2F A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1339 5E37			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 5E37 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1340 5E3A			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + 1
    12 5E3A 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1341 5E3D			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 007A			 .def ?lkl = ?lkl + 1
     7 5E3D AA			  tax
     8 5E3E A9 7A		  lda #?LKL
     9 5E40 20 71 5B		  jsr add_kloc_tmp
    10 5E43 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 5E44 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1342 5E47			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 5E47 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1343 5E4F			 sta_kloc 2       , 2
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0002			 .def ?lkl = ?lkl + 2
     8 5E4F 20 2A 5C		  jsr sta_kloc_jsr_plus2
Source: d:\Download\getris\tetris_add.asm
  1344
  1345 5E52			 pkloc 40   , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5E52 A0 28		 ldy #40
     5 5E54 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1346 5E57			 pkloc 40+1 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5E57 A0 29		 ldy #40+1
     5 5E59 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1347 5E5C			 pkloc 2    , 2
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5E5C A0 02		 ldy #2
     7 5E5E 20 97 5B		  jsr pkloc_jsr2
Source: d:\Download\getris\tetris_add.asm
  1348 5E61 60			 rts
  1349
  1350 5E62			test
  1351 = 0000			 .def ?lkl = 0
  1352 5E62			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 5E62 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1353 5E6A			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 5E6A A0 78		 ldy #0+?lkl
     9 5E6C 11 87		 ora (kloc_tmp),y
    14 5E6E A0 A5		 ldy #width*3+?lkl
    15 5E70 11 87		 ora (kloc_tmp),y
    22 5E72 A0 F0		 ldy #width*8+?lkl
    23 5E74 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1354 5E76			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + 1
     8 5E76 A0 79		 ldy #0+?lkl
     9 5E78 11 87		 ora (kloc_tmp),y
    14 5E7A A0 A6		 ldy #width*3+?lkl
    15 5E7C 11 87		 ora (kloc_tmp),y
    22 5E7E A0 F1		 ldy #width*8+?lkl
    23 5E80 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1355 5E82			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 007A			 .def ?lkl = ?lkl + 1
     8 5E82 A0 7A		 ldy #0+?lkl
     9 5E84 11 87		 ora (kloc_tmp),y
    14 5E86 A0 A7		 ldy #width*3+?lkl
    15 5E88 11 87		 ora (kloc_tmp),y
    22 5E8A A0 F2		 ldy #width*8+?lkl
    23 5E8C 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1356 5E8E			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 5E8E A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1357 5E96			 lda_kloc 2
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0002			 .def ?lkl = ?lkl + 2
     8 5E96 A0 02		 ldy #0+?lkl
     9 5E98 11 87		 ora (kloc_tmp),y
    14 5E9A A0 2F		 ldy #width*3+?lkl
    15 5E9C 11 87		 ora (kloc_tmp),y
    22 5E9E A0 7A		 ldy #width*8+?lkl
    23 5EA0 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1358 5EA2 60			 rts
  1359 				.endp
  1360
  1361
  1362 				* KLOCEK 3 (1 faza)
  1363 				; '   '
  1364 				; ' **'
  1365 				; ' **'
  1366 5EA3			.proc klocek3_0
  1367 = 0000			 .def ?lkl = 0
  1368 5EA3			 sta_kloc 1+width*8 , 1+40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + 1+WIDTH*8
    12 5EA3 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1369 5EA6			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     7 5EA6 AA			  tax
     8 5EA7 A9 79		  lda #?LKL
     9 5EA9 20 71 5B		  jsr add_kloc_tmp
    10 5EAC 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 5EAD A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1370 5EB5			 sta_kloc 1         , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 5EB5 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1371 5EB8			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 5EB8 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1372 5EC0			 sta_kloc width*8   , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 5EC0 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1373 5EC3			 sta_kloc 1         , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + 1
    12 5EC3 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1374
  1375 5EC6			 pkloc 1+40 , 2
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5EC6 A0 29		 ldy #1+40
     7 5EC8 20 97 5B		  jsr pkloc_jsr2
Source: d:\Download\getris\tetris_add.asm
  1376 5ECB			 pkloc 2+40 , 2 
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5ECB A0 2A		 ldy #2+40
     7 5ECD 20 97 5B		  jsr pkloc_jsr2
Source: d:\Download\getris\tetris_add.asm
  1377 5ED0 60			 rts
  1378
  1379 5ED1			test
  1380 = 0000			 .def ?lkl = 0
  1381 5ED1			 lda_kloc 1+width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + 1+WIDTH*8
     8 5ED1 A0 79		 ldy #0+?lkl
     9 5ED3 11 87		 ora (kloc_tmp),y
    14 5ED5 A0 A6		 ldy #width*3+?lkl
    15 5ED7 11 87		 ora (kloc_tmp),y
    22 5ED9 A0 F1		 ldy #width*8+?lkl
    23 5EDB 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1382 5EDD			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     7 5EDD AA			  tax
     8 5EDE A9 79		  lda #?LKL
     9 5EE0 20 71 5B		  jsr add_kloc_tmp
    10 5EE3 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 5EE4 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1383 5EEC			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 5EEC A0 01		 ldy #0+?lkl
     9 5EEE 11 87		 ora (kloc_tmp),y
    14 5EF0 A0 2E		 ldy #width*3+?lkl
    15 5EF2 11 87		 ora (kloc_tmp),y
    22 5EF4 A0 79		 ldy #width*8+?lkl
    23 5EF6 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1384 5EF8			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 5EF8 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1385 5F00			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 5F00 A0 78		 ldy #0+?lkl
     9 5F02 11 87		 ora (kloc_tmp),y
    14 5F04 A0 A5		 ldy #width*3+?lkl
    15 5F06 11 87		 ora (kloc_tmp),y
    22 5F08 A0 F0		 ldy #width*8+?lkl
    23 5F0A 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1386 5F0C			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + 1
     8 5F0C A0 79		 ldy #0+?lkl
     9 5F0E 11 87		 ora (kloc_tmp),y
    14 5F10 A0 A6		 ldy #width*3+?lkl
    15 5F12 11 87		 ora (kloc_tmp),y
    22 5F14 A0 F1		 ldy #width*8+?lkl
    23 5F16 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1387 5F18 60			 rts
  1388 				.endp
  1389
  1390
  1391 				* KLOCEK 4 (2 fazy)
  1392 				; '   '
  1393 				; ' **'
  1394 				; '** '
  1395 5F19			.proc klocek4_0
  1396 = 0000			 .def ?lkl = 0
  1397 5F19			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 5F19 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1398 5F21			 sta_kloc 1+width*8 , 1+40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + 1+WIDTH*8
    12 5F21 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1399 5F24			 sta_kloc 1         , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 007A			 .def ?lkl = ?lkl + 1
     7 5F24 AA			  tax
     8 5F25 A9 7A		  lda #?LKL
     9 5F27 20 71 5B		  jsr add_kloc_tmp
    10 5F2A 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 5F2B 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1400 5F2E			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 5F2E A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1401 5F36			 sta_kloc width*2*8 , 40*2
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 00F0			 .def ?lkl = ?lkl + WIDTH*2*8
     7 5F36 AA			  tax
     8 5F37 A9 F0		  lda #?LKL
     9 5F39 20 71 5B		  jsr add_kloc_tmp
    10 5F3C 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 5F3D 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1402 5F40			 sta_kloc 1         , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 5F40 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1403
  1404 5F43			 pkloc 1+40 , 2
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5F43 A0 29		 ldy #1+40
     7 5F45 20 97 5B		  jsr pkloc_jsr2
Source: d:\Download\getris\tetris_add.asm
  1405 5F48			 pkloc 2+40 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5F48 A0 2A		 ldy #2+40
     5 5F4A 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1406 5F4D			 pkloc 2*40 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5F4D A0 50		 ldy #2*40
     5 5F4F 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1407 5F52 60			 rts
  1408
  1409 5F53			test
  1410 = 0000			 .def ?lkl = 0
  1411 5F53			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 5F53 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1412 5F5B			 lda_kloc 1+width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + 1+WIDTH*8
     8 5F5B A0 79		 ldy #0+?lkl
     9 5F5D 11 87		 ora (kloc_tmp),y
    14 5F5F A0 A6		 ldy #width*3+?lkl
    15 5F61 11 87		 ora (kloc_tmp),y
    22 5F63 A0 F1		 ldy #width*8+?lkl
    23 5F65 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1413 5F67			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 007A			 .def ?lkl = ?lkl + 1
     8 5F67 A0 7A		 ldy #0+?lkl
     9 5F69 11 87		 ora (kloc_tmp),y
    14 5F6B A0 A7		 ldy #width*3+?lkl
    15 5F6D 11 87		 ora (kloc_tmp),y
    22 5F6F A0 F2		 ldy #width*8+?lkl
    23 5F71 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1414 5F73			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 5F73 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1415 5F7B			 lda_kloc width*2*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F0			 .def ?lkl = ?lkl + WIDTH*2*8
     7 5F7B AA			  tax
     8 5F7C A9 F0		  lda #?LKL
     9 5F7E 20 71 5B		  jsr add_kloc_tmp
    10 5F81 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 5F82 A0 00		 ldy #0+?lkl
     9 5F84 11 87		 ora (kloc_tmp),y
    14 5F86 A0 2D		 ldy #width*3+?lkl
    15 5F88 11 87		 ora (kloc_tmp),y
    22 5F8A A0 78		 ldy #width*8+?lkl
    23 5F8C 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1416 5F8E			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 5F8E A0 01		 ldy #0+?lkl
     9 5F90 11 87		 ora (kloc_tmp),y
    14 5F92 A0 2E		 ldy #width*3+?lkl
    15 5F94 11 87		 ora (kloc_tmp),y
    22 5F96 A0 79		 ldy #width*8+?lkl
    23 5F98 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1417 5F9A 60			 rts
  1418 				.endp
  1419
  1420
  1421 				; '*  '
  1422 				; '** '
  1423 				; ' * '
  1424 5F9B			.proc klocek4_1
  1425 = 0000			 .def ?lkl = 0
  1426 5F9B			 sta_kloc 0       , 0
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0000			 .def ?lkl = ?lkl + 0
     4 5F9B 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1427 5F9E			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 5F9E 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1428 5FA1			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + 1
    12 5FA1 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1429 5FA4			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 00F1			 .def ?lkl = ?lkl + WIDTH*8
     7 5FA4 AA			  tax
     8 5FA5 A9 F1		  lda #?LKL
     9 5FA7 20 71 5B		  jsr add_kloc_tmp
    10 5FAA 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 5FAB 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1430
  1431 5FAE			 pkloc 0    , 2
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5FAE A0 00		 ldy #0
     7 5FB0 20 97 5B		  jsr pkloc_jsr2
Source: d:\Download\getris\tetris_add.asm
  1432 5FB3			 pkloc 1+40 , 2
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 5FB3 A0 29		 ldy #1+40
     7 5FB5 20 97 5B		  jsr pkloc_jsr2
Source: d:\Download\getris\tetris_add.asm
  1433 5FB8 60			 rts
  1434
  1435 5FB9			test
  1436 = 0000			 .def ?lkl = 0
  1437 5FB9			 lda_kloc 0
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0000			 .def ?lkl = ?lkl + 0
     8 5FB9 A0 00		 ldy #0+?lkl
     9 5FBB 11 87		 ora (kloc_tmp),y
    14 5FBD A0 2D		 ldy #width*3+?lkl
    15 5FBF 11 87		 ora (kloc_tmp),y
    22 5FC1 A0 78		 ldy #width*8+?lkl
    23 5FC3 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1438 5FC5			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 5FC5 A0 78		 ldy #0+?lkl
     9 5FC7 11 87		 ora (kloc_tmp),y
    14 5FC9 A0 A5		 ldy #width*3+?lkl
    15 5FCB 11 87		 ora (kloc_tmp),y
    22 5FCD A0 F0		 ldy #width*8+?lkl
    23 5FCF 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1439 5FD1			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + 1
     8 5FD1 A0 79		 ldy #0+?lkl
     9 5FD3 11 87		 ora (kloc_tmp),y
    14 5FD5 A0 A6		 ldy #width*3+?lkl
    15 5FD7 11 87		 ora (kloc_tmp),y
    22 5FD9 A0 F1		 ldy #width*8+?lkl
    23 5FDB 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1440 5FDD			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F1			 .def ?lkl = ?lkl + WIDTH*8
     7 5FDD AA			  tax
     8 5FDE A9 F1		  lda #?LKL
     9 5FE0 20 71 5B		  jsr add_kloc_tmp
    10 5FE3 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 5FE4 A0 00		 ldy #0+?lkl
     9 5FE6 11 87		 ora (kloc_tmp),y
    14 5FE8 A0 2D		 ldy #width*3+?lkl
    15 5FEA 11 87		 ora (kloc_tmp),y
    22 5FEC A0 78		 ldy #width*8+?lkl
    23 5FEE 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1441 5FF0 60			 rts
  1442 				.endp
  1443
  1444
  1445 				* KLOCEK 5 (2 fazy)
  1446 				; '   '
  1447 				; '** '
  1448 				; ' **'
  1449 5FF1			.proc klocek5_0
  1450 = 0000			 .def ?lkl = 0
  1451 5FF1			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 5FF1 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1452 5FF4			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + 1
    12 5FF4 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1453 5FF7			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 00F1			 .def ?lkl = ?lkl + WIDTH*8
     7 5FF7 AA			  tax
     8 5FF8 A9 F1		  lda #?LKL
     9 5FFA 20 71 5B		  jsr add_kloc_tmp
    10 5FFD 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 5FFE 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1454 6001			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 6001 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1455
  1456 6004			 pkloc 40     , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 6004 A0 28		 ldy #40
     5 6006 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1457 6009			 pkloc 1+40   , 2
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 6009 A0 29		 ldy #1+40
     7 600B 20 97 5B		  jsr pkloc_jsr2
Source: d:\Download\getris\tetris_add.asm
  1458 600E			 pkloc 2+2*40 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 600E A0 52		 ldy #2+2*40
     5 6010 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1459 6013 60			 rts
  1460
  1461 6014			test
  1462 = 0000			 .def ?lkl = 0
  1463 6014			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 6014 A0 78		 ldy #0+?lkl
     9 6016 11 87		 ora (kloc_tmp),y
    14 6018 A0 A5		 ldy #width*3+?lkl
    15 601A 11 87		 ora (kloc_tmp),y
    22 601C A0 F0		 ldy #width*8+?lkl
    23 601E 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1464 6020			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + 1
     8 6020 A0 79		 ldy #0+?lkl
     9 6022 11 87		 ora (kloc_tmp),y
    14 6024 A0 A6		 ldy #width*3+?lkl
    15 6026 11 87		 ora (kloc_tmp),y
    22 6028 A0 F1		 ldy #width*8+?lkl
    23 602A 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1465 602C			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F1			 .def ?lkl = ?lkl + WIDTH*8
     7 602C AA			  tax
     8 602D A9 F1		  lda #?LKL
     9 602F 20 71 5B		  jsr add_kloc_tmp
    10 6032 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 6033 A0 00		 ldy #0+?lkl
     9 6035 11 87		 ora (kloc_tmp),y
    14 6037 A0 2D		 ldy #width*3+?lkl
    15 6039 11 87		 ora (kloc_tmp),y
    22 603B A0 78		 ldy #width*8+?lkl
    23 603D 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1466 603F			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 603F A0 01		 ldy #0+?lkl
     9 6041 11 87		 ora (kloc_tmp),y
    14 6043 A0 2E		 ldy #width*3+?lkl
    15 6045 11 87		 ora (kloc_tmp),y
    22 6047 A0 79		 ldy #width*8+?lkl
    23 6049 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1467 604B 60			 rts
  1468 				.endp
  1469
  1470
  1471 				; ' * '
  1472 				; '** '
  1473 				; '*  '
  1474 604C			.proc klocek5_1
  1475 = 0000			 .def ?lkl = 0
  1476 604C			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 604C A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1477 6054			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 6054 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1478 6057			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + WIDTH*8
    12 6057 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1479 605A			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 605A A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1480 6062			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 6062 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1481 6065			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 00F0			 .def ?lkl = ?lkl + WIDTH*8
     7 6065 AA			  tax
     8 6066 A9 F0		  lda #?LKL
     9 6068 20 71 5B		  jsr add_kloc_tmp
    10 606B 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 606C 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1482
  1483 606F			 pkloc 1  , 2
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 606F A0 01		 ldy #1
     7 6071 20 97 5B		  jsr pkloc_jsr2
Source: d:\Download\getris\tetris_add.asm
  1484 6074			 pkloc 40 , 2
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 6074 A0 28		 ldy #40
     7 6076 20 97 5B		  jsr pkloc_jsr2
Source: d:\Download\getris\tetris_add.asm
  1485 6079 60			 rts
  1486
  1487 607A			test
  1488 = 0000			 .def ?lkl = 0
  1489 607A			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 607A A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1490 6082			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 6082 A0 01		 ldy #0+?lkl
     9 6084 11 87		 ora (kloc_tmp),y
    14 6086 A0 2E		 ldy #width*3+?lkl
    15 6088 11 87		 ora (kloc_tmp),y
    22 608A A0 79		 ldy #width*8+?lkl
    23 608C 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1491 608E			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + WIDTH*8
     8 608E A0 79		 ldy #0+?lkl
     9 6090 11 87		 ora (kloc_tmp),y
    14 6092 A0 A6		 ldy #width*3+?lkl
    15 6094 11 87		 ora (kloc_tmp),y
    22 6096 A0 F1		 ldy #width*8+?lkl
    23 6098 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1492 609A			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 609A A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1493 60A2			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 60A2 A0 78		 ldy #0+?lkl
     9 60A4 11 87		 ora (kloc_tmp),y
    14 60A6 A0 A5		 ldy #width*3+?lkl
    15 60A8 11 87		 ora (kloc_tmp),y
    22 60AA A0 F0		 ldy #width*8+?lkl
    23 60AC 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1494 60AE			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F0			 .def ?lkl = ?lkl + WIDTH*8
     7 60AE AA			  tax
     8 60AF A9 F0		  lda #?LKL
     9 60B1 20 71 5B		  jsr add_kloc_tmp
    10 60B4 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 60B5 A0 00		 ldy #0+?lkl
     9 60B7 11 87		 ora (kloc_tmp),y
    14 60B9 A0 2D		 ldy #width*3+?lkl
    15 60BB 11 87		 ora (kloc_tmp),y
    22 60BD A0 78		 ldy #width*8+?lkl
    23 60BF 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1495 60C1 60			 rts
  1496 				.endp
  1497
  1498
  1499 				* KLOCEK 6 (1 faza)
  1500 				; ' * '
  1501 				; '***'
  1502 				; ' * '
  1503 60C2			.proc klocek6_0
  1504 = 0000			 .def ?lkl = 0
  1505 60C2			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 60C2 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1506 60CA			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 60CA 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1507 60CD			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + WIDTH*8
    12 60CD 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1508 60D0			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 00F1			 .def ?lkl = ?lkl + WIDTH*8
     7 60D0 AA			  tax
     8 60D1 A9 F1		  lda #?LKL
     9 60D3 20 71 5B		  jsr add_kloc_tmp
    10 60D6 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 60D7 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1509 60DA			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 60DA A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1510 60E2			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 60E2 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1511 60E5			 sta_kloc 2       , 2
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 007A			 .def ?lkl = ?lkl + 2
     7 60E5 AA			  tax
     8 60E6 A9 7A		  lda #?LKL
     9 60E8 20 71 5B		  jsr add_kloc_tmp
    10 60EB 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 60EC 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1512
  1513 60EF			 pkloc 1    , 3
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 60EF A0 01		 ldy #1
     9 60F1 20 BE 5B		  jsr pkloc_jsr3
Source: d:\Download\getris\tetris_add.asm
  1514 60F4			 pkloc 40   , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 60F4 A0 28		 ldy #40
     5 60F6 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1515 60F9			 pkloc 2+40 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 60F9 A0 2A		 ldy #2+40
     5 60FB 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1516 60FE 60			 rts
  1517
  1518 60FF			test
  1519 = 0000			 .def ?lkl = 0
  1520 60FF			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 60FF A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1521 6107			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 6107 A0 01		 ldy #0+?lkl
     9 6109 11 87		 ora (kloc_tmp),y
    14 610B A0 2E		 ldy #width*3+?lkl
    15 610D 11 87		 ora (kloc_tmp),y
    22 610F A0 79		 ldy #width*8+?lkl
    23 6111 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1522 6113			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + WIDTH*8
     8 6113 A0 79		 ldy #0+?lkl
     9 6115 11 87		 ora (kloc_tmp),y
    14 6117 A0 A6		 ldy #width*3+?lkl
    15 6119 11 87		 ora (kloc_tmp),y
    22 611B A0 F1		 ldy #width*8+?lkl
    23 611D 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1523 611F			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F1			 .def ?lkl = ?lkl + WIDTH*8
     7 611F AA			  tax
     8 6120 A9 F1		  lda #?LKL
     9 6122 20 71 5B		  jsr add_kloc_tmp
    10 6125 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 6126 A0 00		 ldy #0+?lkl
     9 6128 11 87		 ora (kloc_tmp),y
    14 612A A0 2D		 ldy #width*3+?lkl
    15 612C 11 87		 ora (kloc_tmp),y
    22 612E A0 78		 ldy #width*8+?lkl
    23 6130 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1524 6132			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 6132 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1525 613A			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 613A A0 78		 ldy #0+?lkl
     9 613C 11 87		 ora (kloc_tmp),y
    14 613E A0 A5		 ldy #width*3+?lkl
    15 6140 11 87		 ora (kloc_tmp),y
    22 6142 A0 F0		 ldy #width*8+?lkl
    23 6144 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1526 6146			 lda_kloc 2
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 007A			 .def ?lkl = ?lkl + 2
     8 6146 A0 7A		 ldy #0+?lkl
     9 6148 11 87		 ora (kloc_tmp),y
    14 614A A0 A7		 ldy #width*3+?lkl
    15 614C 11 87		 ora (kloc_tmp),y
    22 614E A0 F2		 ldy #width*8+?lkl
    23 6150 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1527 6152 60			 rts
  1528 				.endp
  1529
  1530
  1531 				* KLOCEK 7 (4 fazy)
  1532 				; '   '
  1533 				; '***'
  1534 				; ' * '
  1535 6153			.proc klocek7_0
  1536 = 0000			 .def ?lkl = 0
  1537 6153			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 6153 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1538 6156			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + 1
    12 6156 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1539 6159			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     7 6159 AA			  tax
     8 615A A9 79		  lda #?LKL
     9 615C 20 71 5B		  jsr add_kloc_tmp
    10 615F 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 6160 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1540 6168			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 6168 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1541 616B			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 616B A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1542 6173			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 6173 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1543
  1544 6176			 pkloc 40   , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 6176 A0 28		 ldy #40
     5 6178 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1545 617B			 pkloc 40+1 , 2
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 617B A0 29		 ldy #40+1
     7 617D 20 97 5B		  jsr pkloc_jsr2
Source: d:\Download\getris\tetris_add.asm
  1546 6180			 pkloc 40+2 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 6180 A0 2A		 ldy #40+2
     5 6182 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1547 6185 60			 rts
  1548
  1549 6186			test
  1550 = 0000			 .def ?lkl = 0
  1551 6186			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 6186 A0 78		 ldy #0+?lkl
     9 6188 11 87		 ora (kloc_tmp),y
    14 618A A0 A5		 ldy #width*3+?lkl
    15 618C 11 87		 ora (kloc_tmp),y
    22 618E A0 F0		 ldy #width*8+?lkl
    23 6190 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1552 6192			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + 1
     8 6192 A0 79		 ldy #0+?lkl
     9 6194 11 87		 ora (kloc_tmp),y
    14 6196 A0 A6		 ldy #width*3+?lkl
    15 6198 11 87		 ora (kloc_tmp),y
    22 619A A0 F1		 ldy #width*8+?lkl
    23 619C 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1553 619E			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     7 619E AA			  tax
     8 619F A9 79		  lda #?LKL
     9 61A1 20 71 5B		  jsr add_kloc_tmp
    10 61A4 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 61A5 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1554 61AD			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 61AD A0 01		 ldy #0+?lkl
     9 61AF 11 87		 ora (kloc_tmp),y
    14 61B1 A0 2E		 ldy #width*3+?lkl
    15 61B3 11 87		 ora (kloc_tmp),y
    22 61B5 A0 79		 ldy #width*8+?lkl
    23 61B7 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1555 61B9			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 61B9 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1556 61C1			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 61C1 A0 78		 ldy #0+?lkl
     9 61C3 11 87		 ora (kloc_tmp),y
    14 61C5 A0 A5		 ldy #width*3+?lkl
    15 61C7 11 87		 ora (kloc_tmp),y
    22 61C9 A0 F0		 ldy #width*8+?lkl
    23 61CB 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1557 61CD 60			 rts
  1558 				.endp
  1559
  1560
  1561 				; ' * '
  1562 				; '** '
  1563 				; ' * '
  1564 61CE			.proc klocek7_1
  1565 = 0000			 .def ?lkl = 0
  1566 61CE			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 61CE A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1567 61D6			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 61D6 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1568 61D9			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + WIDTH*8
    12 61D9 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1569 61DC			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 00F1			 .def ?lkl = ?lkl + WIDTH*8
     7 61DC AA			  tax
     8 61DD A9 F1		  lda #?LKL
     9 61DF 20 71 5B		  jsr add_kloc_tmp
    10 61E2 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 61E3 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1570 61E6			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 61E6 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1571 61EE			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 61EE 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1572
  1573 61F1			 pkloc 1  , 3
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 61F1 A0 01		 ldy #1
     9 61F3 20 BE 5B		  jsr pkloc_jsr3
Source: d:\Download\getris\tetris_add.asm
  1574 61F6			 pkloc 40 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 61F6 A0 28		 ldy #40
     5 61F8 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1575 61FB 60			 rts
  1576
  1577 61FC			test
  1578 = 0000			 .def ?lkl = 0
  1579 61FC			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 61FC A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1580 6204			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 6204 A0 01		 ldy #0+?lkl
     9 6206 11 87		 ora (kloc_tmp),y
    14 6208 A0 2E		 ldy #width*3+?lkl
    15 620A 11 87		 ora (kloc_tmp),y
    22 620C A0 79		 ldy #width*8+?lkl
    23 620E 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1581 6210			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + WIDTH*8
     8 6210 A0 79		 ldy #0+?lkl
     9 6212 11 87		 ora (kloc_tmp),y
    14 6214 A0 A6		 ldy #width*3+?lkl
    15 6216 11 87		 ora (kloc_tmp),y
    22 6218 A0 F1		 ldy #width*8+?lkl
    23 621A 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1582 621C			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F1			 .def ?lkl = ?lkl + WIDTH*8
     7 621C AA			  tax
     8 621D A9 F1		  lda #?LKL
     9 621F 20 71 5B		  jsr add_kloc_tmp
    10 6222 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 6223 A0 00		 ldy #0+?lkl
     9 6225 11 87		 ora (kloc_tmp),y
    14 6227 A0 2D		 ldy #width*3+?lkl
    15 6229 11 87		 ora (kloc_tmp),y
    22 622B A0 78		 ldy #width*8+?lkl
    23 622D 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1583 622F			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 622F A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1584 6237			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 6237 A0 78		 ldy #0+?lkl
     9 6239 11 87		 ora (kloc_tmp),y
    14 623B A0 A5		 ldy #width*3+?lkl
    15 623D 11 87		 ora (kloc_tmp),y
    22 623F A0 F0		 ldy #width*8+?lkl
    23 6241 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1585 6243 60			 rts
  1586 				.endp
  1587
  1588
  1589 				; ' * '
  1590 				; '***'
  1591 				; '   '
  1592 6244			.proc klocek7_2
  1593 = 0000			 .def ?lkl = 0
  1594 6244			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 6244 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1595 624C			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 624C 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1596 624F			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + WIDTH*8
    12 624F 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1597 6252			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 007A			 .def ?lkl = ?lkl + 1
     7 6252 AA			  tax
     8 6253 A9 7A		  lda #?LKL
     9 6255 20 71 5B		  jsr add_kloc_tmp
    10 6258 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 6259 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1598 625C			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 625C A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1599 6264			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 6264 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1600
  1601 6267			 pkloc 1    , 2
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 6267 A0 01		 ldy #1
     7 6269 20 97 5B		  jsr pkloc_jsr2
Source: d:\Download\getris\tetris_add.asm
  1602 626C			 pkloc 40   , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 626C A0 28		 ldy #40
     5 626E 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1603 6271			 pkloc 2+40 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 6271 A0 2A		 ldy #2+40
     5 6273 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1604 6276 60			 rts
  1605
  1606 6277			test
  1607 = 0000			 .def ?lkl = 0
  1608 6277			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 6277 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1609 627F			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 627F A0 01		 ldy #0+?lkl
     9 6281 11 87		 ora (kloc_tmp),y
    14 6283 A0 2E		 ldy #width*3+?lkl
    15 6285 11 87		 ora (kloc_tmp),y
    22 6287 A0 79		 ldy #width*8+?lkl
    23 6289 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1610 628B			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + WIDTH*8
     8 628B A0 79		 ldy #0+?lkl
     9 628D 11 87		 ora (kloc_tmp),y
    14 628F A0 A6		 ldy #width*3+?lkl
    15 6291 11 87		 ora (kloc_tmp),y
    22 6293 A0 F1		 ldy #width*8+?lkl
    23 6295 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1611 6297			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 007A			 .def ?lkl = ?lkl + 1
     8 6297 A0 7A		 ldy #0+?lkl
     9 6299 11 87		 ora (kloc_tmp),y
    14 629B A0 A7		 ldy #width*3+?lkl
    15 629D 11 87		 ora (kloc_tmp),y
    22 629F A0 F2		 ldy #width*8+?lkl
    23 62A1 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1612 62A3			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 62A3 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1613 62AB			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 62AB A0 78		 ldy #0+?lkl
     9 62AD 11 87		 ora (kloc_tmp),y
    14 62AF A0 A5		 ldy #width*3+?lkl
    15 62B1 11 87		 ora (kloc_tmp),y
    22 62B3 A0 F0		 ldy #width*8+?lkl
    23 62B5 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1614 62B7 60			 rts
  1615 				.endp
  1616
  1617
  1618 				; ' * '
  1619 				; ' **'
  1620 				; ' * '
  1621 62B8			.proc klocek7_3
  1622 = 0000			 .def ?lkl = 0
  1623 62B8			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 62B8 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1624 62BB			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + WIDTH*8
    12 62BB 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1625 62BE			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     7 62BE AA			  tax
     8 62BF A9 79		  lda #?LKL
     9 62C1 20 71 5B		  jsr add_kloc_tmp
    10 62C4 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 62C5 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1626 62CD			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 62CD 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1627 62D0			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 62D0 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1628 62D8			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 62D8 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1629
  1630 62DB			 pkloc 1    , 3
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 62DB A0 01		 ldy #1
     9 62DD 20 BE 5B		  jsr pkloc_jsr3
Source: d:\Download\getris\tetris_add.asm
  1631 62E0			 pkloc 2+40 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 62E0 A0 2A		 ldy #2+40
     5 62E2 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1632 62E5 60			 rts
  1633
  1634 62E6			test
  1635 = 0000			 .def ?lkl = 0
  1636 62E6			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 62E6 A0 01		 ldy #0+?lkl
     9 62E8 11 87		 ora (kloc_tmp),y
    14 62EA A0 2E		 ldy #width*3+?lkl
    15 62EC 11 87		 ora (kloc_tmp),y
    22 62EE A0 79		 ldy #width*8+?lkl
    23 62F0 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1637 62F2			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + WIDTH*8
     8 62F2 A0 79		 ldy #0+?lkl
     9 62F4 11 87		 ora (kloc_tmp),y
    14 62F6 A0 A6		 ldy #width*3+?lkl
    15 62F8 11 87		 ora (kloc_tmp),y
    22 62FA A0 F1		 ldy #width*8+?lkl
    23 62FC 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1638 62FE			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     7 62FE AA			  tax
     8 62FF A9 79		  lda #?LKL
     9 6301 20 71 5B		  jsr add_kloc_tmp
    10 6304 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 6305 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1639 630D			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 630D A0 78		 ldy #0+?lkl
     9 630F 11 87		 ora (kloc_tmp),y
    14 6311 A0 A5		 ldy #width*3+?lkl
    15 6313 11 87		 ora (kloc_tmp),y
    22 6315 A0 F0		 ldy #width*8+?lkl
    23 6317 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1640 6319			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 6319 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1641 6321			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 6321 A0 01		 ldy #0+?lkl
     9 6323 11 87		 ora (kloc_tmp),y
    14 6325 A0 2E		 ldy #width*3+?lkl
    15 6327 11 87		 ora (kloc_tmp),y
    22 6329 A0 79		 ldy #width*8+?lkl
    23 632B 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1642 632D 60			 rts
  1643 				.endp
  1644
  1645
  1646 				* KLOCEK 8 (4 fazy)
  1647 				; '  *'
  1648 				; '  *'
  1649 				; '***'
  1650 632E			.proc klocek8_0
  1651 = 0000			 .def ?lkl = 0
  1652 632E			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 632E A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1653 6336			 sta_kloc 2         , 2
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0002			 .def ?lkl = ?lkl + 2
     8 6336 20 2A 5C		  jsr sta_kloc_jsr_plus2
Source: d:\Download\getris\tetris_add.asm
  1654 6339			 sta_kloc width*8   , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 007A			 .def ?lkl = ?lkl + WIDTH*8
     7 6339 AA			  tax
     8 633A A9 7A		  lda #?LKL
     9 633C 20 71 5B		  jsr add_kloc_tmp
    10 633F 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 6340 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1655 6343			 sta_kloc width*8   , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 6343 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1656 6346			  __kloc2tmpZ 1 
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 6346 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1657 634E			 sta_kloc width*2*8 , 40*2
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 00F0			 .def ?lkl = ?lkl + WIDTH*2*8
     7 634E AA			  tax
     8 634F A9 F0		  lda #?LKL
     9 6351 20 71 5B		  jsr add_kloc_tmp
    10 6354 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 6355 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1658 6358			 sta_kloc 1         , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 6358 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1659
  1660 635B			 pkloc 2      , 3
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 635B A0 02		 ldy #2
     9 635D 20 BE 5B		  jsr pkloc_jsr3
Source: d:\Download\getris\tetris_add.asm
  1661 6360			 pkloc 2*40   , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 6360 A0 50		 ldy #2*40
     5 6362 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1662 6365			 pkloc 2*40+1 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 6365 A0 51		 ldy #2*40+1
     5 6367 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1663 636A 60			 rts
  1664
  1665 636B			test
  1666 = 0000			 .def ?lkl = 0
  1667 636B			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 636B A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1668 6373			 lda_kloc 2
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0002			 .def ?lkl = ?lkl + 2
     8 6373 A0 02		 ldy #0+?lkl
     9 6375 11 87		 ora (kloc_tmp),y
    14 6377 A0 2F		 ldy #width*3+?lkl
    15 6379 11 87		 ora (kloc_tmp),y
    22 637B A0 7A		 ldy #width*8+?lkl
    23 637D 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1669 637F			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 007A			 .def ?lkl = ?lkl + WIDTH*8
     8 637F A0 7A		 ldy #0+?lkl
     9 6381 11 87		 ora (kloc_tmp),y
    14 6383 A0 A7		 ldy #width*3+?lkl
    15 6385 11 87		 ora (kloc_tmp),y
    22 6387 A0 F2		 ldy #width*8+?lkl
    23 6389 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1670 638B			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F2			 .def ?lkl = ?lkl + WIDTH*8
     7 638B AA			  tax
     8 638C A9 F2		  lda #?LKL
     9 638E 20 71 5B		  jsr add_kloc_tmp
    10 6391 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 6392 A0 00		 ldy #0+?lkl
     9 6394 11 87		 ora (kloc_tmp),y
    14 6396 A0 2D		 ldy #width*3+?lkl
    15 6398 11 87		 ora (kloc_tmp),y
    22 639A A0 78		 ldy #width*8+?lkl
    23 639C 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1671 639E			  __kloc2tmpZ 1 
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 639E A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1672 63A6			 lda_kloc width*2*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F0			 .def ?lkl = ?lkl + WIDTH*2*8
     7 63A6 AA			  tax
     8 63A7 A9 F0		  lda #?LKL
     9 63A9 20 71 5B		  jsr add_kloc_tmp
    10 63AC 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 63AD A0 00		 ldy #0+?lkl
     9 63AF 11 87		 ora (kloc_tmp),y
    14 63B1 A0 2D		 ldy #width*3+?lkl
    15 63B3 11 87		 ora (kloc_tmp),y
    22 63B5 A0 78		 ldy #width*8+?lkl
    23 63B7 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1673 63B9			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 63B9 A0 01		 ldy #0+?lkl
     9 63BB 11 87		 ora (kloc_tmp),y
    14 63BD A0 2E		 ldy #width*3+?lkl
    15 63BF 11 87		 ora (kloc_tmp),y
    22 63C1 A0 79		 ldy #width*8+?lkl
    23 63C3 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1674 63C5 60			 rts
  1675 				.endp
  1676
  1677
  1678 				; '*  '
  1679 				; '*  '
  1680 				; '***'
  1681 63C6			.proc klocek8_1
  1682 = 0000			 .def ?lkl = 0
  1683 63C6			 sta_kloc 0       , 0
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0000			 .def ?lkl = ?lkl + 0
     4 63C6 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1684 63C9			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 63C9 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1685 63CC			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 00F0			 .def ?lkl = ?lkl + WIDTH*8
     7 63CC AA			  tax
     8 63CD A9 F0		  lda #?LKL
     9 63CF 20 71 5B		  jsr add_kloc_tmp
    10 63D2 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 63D3 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1686 63D6			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 63D6 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1687 63D9			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0002			 .def ?lkl = ?lkl + 1
     8 63D9 20 2A 5C		  jsr sta_kloc_jsr_plus2
Source: d:\Download\getris\tetris_add.asm
  1688
  1689 63DC			 pkloc 0      , 3
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 63DC A0 00		 ldy #0
     9 63DE 20 BE 5B		  jsr pkloc_jsr3
Source: d:\Download\getris\tetris_add.asm
  1690 63E1			 pkloc 1+2*40 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 63E1 A0 51		 ldy #1+2*40
     5 63E3 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1691 63E6			 pkloc 2+2*40 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 63E6 A0 52		 ldy #2+2*40
     5 63E8 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1692 63EB 60			 rts
  1693
  1694 63EC			test
  1695 = 0000			 .def ?lkl = 0
  1696 63EC			 lda_kloc 0
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0000			 .def ?lkl = ?lkl + 0
     8 63EC A0 00		 ldy #0+?lkl
     9 63EE 11 87		 ora (kloc_tmp),y
    14 63F0 A0 2D		 ldy #width*3+?lkl
    15 63F2 11 87		 ora (kloc_tmp),y
    22 63F4 A0 78		 ldy #width*8+?lkl
    23 63F6 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1697 63F8			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 63F8 A0 78		 ldy #0+?lkl
     9 63FA 11 87		 ora (kloc_tmp),y
    14 63FC A0 A5		 ldy #width*3+?lkl
    15 63FE 11 87		 ora (kloc_tmp),y
    22 6400 A0 F0		 ldy #width*8+?lkl
    23 6402 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1698 6404			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F0			 .def ?lkl = ?lkl + WIDTH*8
     7 6404 AA			  tax
     8 6405 A9 F0		  lda #?LKL
     9 6407 20 71 5B		  jsr add_kloc_tmp
    10 640A 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 640B A0 00		 ldy #0+?lkl
     9 640D 11 87		 ora (kloc_tmp),y
    14 640F A0 2D		 ldy #width*3+?lkl
    15 6411 11 87		 ora (kloc_tmp),y
    22 6413 A0 78		 ldy #width*8+?lkl
    23 6415 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1699 6417			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 6417 A0 01		 ldy #0+?lkl
     9 6419 11 87		 ora (kloc_tmp),y
    14 641B A0 2E		 ldy #width*3+?lkl
    15 641D 11 87		 ora (kloc_tmp),y
    22 641F A0 79		 ldy #width*8+?lkl
    23 6421 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1700 6423			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0002			 .def ?lkl = ?lkl + 1
     8 6423 A0 02		 ldy #0+?lkl
     9 6425 11 87		 ora (kloc_tmp),y
    14 6427 A0 2F		 ldy #width*3+?lkl
    15 6429 11 87		 ora (kloc_tmp),y
    22 642B A0 7A		 ldy #width*8+?lkl
    23 642D 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1701 642F 60			 rts
  1702 				.endp
  1703
  1704
  1705 				; '***'
  1706 				; '*  '
  1707 				; '*  '
  1708 6430			.proc klocek8_2
  1709 = 0000			 .def ?lkl = 0
  1710 6430			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 6430 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1711 6438			 sta_kloc 0       , 0
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0000			 .def ?lkl = ?lkl + 0
     4 6438 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1712 643B			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 643B 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1713 643E			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0002			 .def ?lkl = ?lkl + 1
     8 643E 20 2A 5C		  jsr sta_kloc_jsr_plus2
Source: d:\Download\getris\tetris_add.asm
  1714 6441			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 6441 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1715 6449			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 6449 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1716 644C			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 00F0			 .def ?lkl = ?lkl + WIDTH*8
     7 644C AA			  tax
     8 644D A9 F0		  lda #?LKL
     9 644F 20 71 5B		  jsr add_kloc_tmp
    10 6452 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 6453 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1717
  1718 6456			 pkloc 0 , 3
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 6456 A0 00		 ldy #0
     9 6458 20 BE 5B		  jsr pkloc_jsr3
Source: d:\Download\getris\tetris_add.asm
  1719 645B			 pkloc 1 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 645B A0 01		 ldy #1
     5 645D 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1720 6460			 pkloc 2 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 6460 A0 02		 ldy #2
     5 6462 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1721 6465 60			 rts
  1722
  1723 6466			test
  1724 = 0000			 .def ?lkl = 0
  1725 6466			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 6466 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1726 646E			 lda_kloc 0
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0000			 .def ?lkl = ?lkl + 0
     8 646E A0 00		 ldy #0+?lkl
     9 6470 11 87		 ora (kloc_tmp),y
    14 6472 A0 2D		 ldy #width*3+?lkl
    15 6474 11 87		 ora (kloc_tmp),y
    22 6476 A0 78		 ldy #width*8+?lkl
    23 6478 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1727 647A			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 647A A0 01		 ldy #0+?lkl
     9 647C 11 87		 ora (kloc_tmp),y
    14 647E A0 2E		 ldy #width*3+?lkl
    15 6480 11 87		 ora (kloc_tmp),y
    22 6482 A0 79		 ldy #width*8+?lkl
    23 6484 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1728 6486			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0002			 .def ?lkl = ?lkl + 1
     8 6486 A0 02		 ldy #0+?lkl
     9 6488 11 87		 ora (kloc_tmp),y
    14 648A A0 2F		 ldy #width*3+?lkl
    15 648C 11 87		 ora (kloc_tmp),y
    22 648E A0 7A		 ldy #width*8+?lkl
    23 6490 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1729 6492			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 6492 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1730 649A			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 649A A0 78		 ldy #0+?lkl
     9 649C 11 87		 ora (kloc_tmp),y
    14 649E A0 A5		 ldy #width*3+?lkl
    15 64A0 11 87		 ora (kloc_tmp),y
    22 64A2 A0 F0		 ldy #width*8+?lkl
    23 64A4 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1731 64A6			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F0			 .def ?lkl = ?lkl + WIDTH*8
     7 64A6 AA			  tax
     8 64A7 A9 F0		  lda #?LKL
     9 64A9 20 71 5B		  jsr add_kloc_tmp
    10 64AC 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 64AD A0 00		 ldy #0+?lkl
     9 64AF 11 87		 ora (kloc_tmp),y
    14 64B1 A0 2D		 ldy #width*3+?lkl
    15 64B3 11 87		 ora (kloc_tmp),y
    22 64B5 A0 78		 ldy #width*8+?lkl
    23 64B7 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1732 64B9 60			 rts
  1733 				.endp
  1734
  1735
  1736 				; '***'
  1737 				; '  *'
  1738 				; '  *'
  1739 64BA			.proc klocek8_3
  1740 = 0000			 .def ?lkl = 0
  1741 64BA			 sta_kloc 0       , 0
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0000			 .def ?lkl = ?lkl + 0
     4 64BA 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1742 64BD			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 64BD 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1743 64C0			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0002			 .def ?lkl = ?lkl + 1
     8 64C0 20 2A 5C		  jsr sta_kloc_jsr_plus2
Source: d:\Download\getris\tetris_add.asm
  1744 64C3			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 007A			 .def ?lkl = ?lkl + WIDTH*8
     7 64C3 AA			  tax
     8 64C4 A9 7A		  lda #?LKL
     9 64C6 20 71 5B		  jsr add_kloc_tmp
    10 64C9 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 64CA 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1745 64CD			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 64CD 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1746
  1747 64D0			 pkloc 0 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 64D0 A0 00		 ldy #0
     5 64D2 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1748 64D5			 pkloc 1 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 64D5 A0 01		 ldy #1
     5 64D7 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1749 64DA			 pkloc 2 , 3
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 64DA A0 02		 ldy #2
     9 64DC 20 BE 5B		  jsr pkloc_jsr3
Source: d:\Download\getris\tetris_add.asm
  1750 64DF 60			 rts
  1751
  1752 64E0			test
  1753 = 0000			 .def ?lkl = 0
  1754 64E0			 lda_kloc 0
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0000			 .def ?lkl = ?lkl + 0
     8 64E0 A0 00		 ldy #0+?lkl
     9 64E2 11 87		 ora (kloc_tmp),y
    14 64E4 A0 2D		 ldy #width*3+?lkl
    15 64E6 11 87		 ora (kloc_tmp),y
    22 64E8 A0 78		 ldy #width*8+?lkl
    23 64EA 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1755 64EC			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 64EC A0 01		 ldy #0+?lkl
     9 64EE 11 87		 ora (kloc_tmp),y
    14 64F0 A0 2E		 ldy #width*3+?lkl
    15 64F2 11 87		 ora (kloc_tmp),y
    22 64F4 A0 79		 ldy #width*8+?lkl
    23 64F6 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1756 64F8			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0002			 .def ?lkl = ?lkl + 1
     8 64F8 A0 02		 ldy #0+?lkl
     9 64FA 11 87		 ora (kloc_tmp),y
    14 64FC A0 2F		 ldy #width*3+?lkl
    15 64FE 11 87		 ora (kloc_tmp),y
    22 6500 A0 7A		 ldy #width*8+?lkl
    23 6502 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1757 6504			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 007A			 .def ?lkl = ?lkl + WIDTH*8
     8 6504 A0 7A		 ldy #0+?lkl
     9 6506 11 87		 ora (kloc_tmp),y
    14 6508 A0 A7		 ldy #width*3+?lkl
    15 650A 11 87		 ora (kloc_tmp),y
    22 650C A0 F2		 ldy #width*8+?lkl
    23 650E 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1758 6510			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F2			 .def ?lkl = ?lkl + WIDTH*8
     7 6510 AA			  tax
     8 6511 A9 F2		  lda #?LKL
     9 6513 20 71 5B		  jsr add_kloc_tmp
    10 6516 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 6517 A0 00		 ldy #0+?lkl
     9 6519 11 87		 ora (kloc_tmp),y
    14 651B A0 2D		 ldy #width*3+?lkl
    15 651D 11 87		 ora (kloc_tmp),y
    22 651F A0 78		 ldy #width*8+?lkl
    23 6521 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1759 6523 60			 rts
  1760 				.endp
  1761
  1762
  1763 				* KLOCEK 9 (4 fazy)
  1764 				; '** '
  1765 				; '** '
  1766 				; '*  '
  1767 6524			.proc klocek9_0
  1768 = 0000			 .def ?lkl = 0
  1769 6524			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 6524 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1770 652C			 sta_kloc 0       , 0
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0000			 .def ?lkl = ?lkl + 0
     4 652C 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1771 652F			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 652F 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1772 6532			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + WIDTH*8
    12 6532 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1773 6535			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 6535 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1774 653D			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 653D 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1775 6540			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 00F0			 .def ?lkl = ?lkl + WIDTH*8
     7 6540 AA			  tax
     8 6541 A9 F0		  lda #?LKL
     9 6543 20 71 5B		  jsr add_kloc_tmp
    10 6546 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 6547 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1776
  1777 654A			 pkloc 0 , 3
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 654A A0 00		 ldy #0
     9 654C 20 BE 5B		  jsr pkloc_jsr3
Source: d:\Download\getris\tetris_add.asm
  1778 654F			 pkloc 1 , 2
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 654F A0 01		 ldy #1
     7 6551 20 97 5B		  jsr pkloc_jsr2
Source: d:\Download\getris\tetris_add.asm
  1779 6554 60			 rts
  1780
  1781 6555			test
  1782 = 0000			 .def ?lkl = 0
  1783 6555			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 6555 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1784 655D			 lda_kloc 0
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0000			 .def ?lkl = ?lkl + 0
     8 655D A0 00		 ldy #0+?lkl
     9 655F 11 87		 ora (kloc_tmp),y
    14 6561 A0 2D		 ldy #width*3+?lkl
    15 6563 11 87		 ora (kloc_tmp),y
    22 6565 A0 78		 ldy #width*8+?lkl
    23 6567 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1785 6569			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 6569 A0 01		 ldy #0+?lkl
     9 656B 11 87		 ora (kloc_tmp),y
    14 656D A0 2E		 ldy #width*3+?lkl
    15 656F 11 87		 ora (kloc_tmp),y
    22 6571 A0 79		 ldy #width*8+?lkl
    23 6573 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1786 6575			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + WIDTH*8
     8 6575 A0 79		 ldy #0+?lkl
     9 6577 11 87		 ora (kloc_tmp),y
    14 6579 A0 A6		 ldy #width*3+?lkl
    15 657B 11 87		 ora (kloc_tmp),y
    22 657D A0 F1		 ldy #width*8+?lkl
    23 657F 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1787 6581			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 6581 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1788 6589			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 6589 A0 78		 ldy #0+?lkl
     9 658B 11 87		 ora (kloc_tmp),y
    14 658D A0 A5		 ldy #width*3+?lkl
    15 658F 11 87		 ora (kloc_tmp),y
    22 6591 A0 F0		 ldy #width*8+?lkl
    23 6593 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1789 6595			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F0			 .def ?lkl = ?lkl + WIDTH*8
     7 6595 AA			  tax
     8 6596 A9 F0		  lda #?LKL
     9 6598 20 71 5B		  jsr add_kloc_tmp
    10 659B 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 659C A0 00		 ldy #0+?lkl
     9 659E 11 87		 ora (kloc_tmp),y
    14 65A0 A0 2D		 ldy #width*3+?lkl
    15 65A2 11 87		 ora (kloc_tmp),y
    22 65A4 A0 78		 ldy #width*8+?lkl
    23 65A6 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1790 65A8 60			 rts
  1791 				.endp
  1792
  1793
  1794 				; '***'
  1795 				; ' **'
  1796 				; '   '
  1797 65A9			.proc klocek9_1
  1798 = 0000			 .def ?lkl = 0
  1799 65A9			 sta_kloc 0       , 0
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0000			 .def ?lkl = ?lkl + 0
     4 65A9 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1800 65AC			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 65AC 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1801 65AF			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     2 65AF E6 87 D0 02 E6 88	  inw kloc_tmp
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 65B5 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1802 65BD			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 65BD 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1803 65C0			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + WIDTH*8
    12 65C0 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1804 65C3			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 65C3 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1805 65CB			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 65CB 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1806
  1807 65CE			 pkloc 0 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 65CE A0 00		 ldy #0
     5 65D0 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1808 65D3			 pkloc 1 , 2
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 65D3 A0 01		 ldy #1
     7 65D5 20 97 5B		  jsr pkloc_jsr2
Source: d:\Download\getris\tetris_add.asm
  1809 65D8			 pkloc 2 , 2
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 65D8 A0 02		 ldy #2
     7 65DA 20 97 5B		  jsr pkloc_jsr2
Source: d:\Download\getris\tetris_add.asm
  1810 65DD 60			 rts
  1811
  1812 65DE			test
  1813 = 0000			 .def ?lkl = 0
  1814 65DE			 lda_kloc 0
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0000			 .def ?lkl = ?lkl + 0
     8 65DE A0 00		 ldy #0+?lkl
     9 65E0 11 87		 ora (kloc_tmp),y
    14 65E2 A0 2D		 ldy #width*3+?lkl
    15 65E4 11 87		 ora (kloc_tmp),y
    22 65E6 A0 78		 ldy #width*8+?lkl
    23 65E8 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1815 65EA			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 65EA A0 01		 ldy #0+?lkl
     9 65EC 11 87		 ora (kloc_tmp),y
    14 65EE A0 2E		 ldy #width*3+?lkl
    15 65F0 11 87		 ora (kloc_tmp),y
    22 65F2 A0 79		 ldy #width*8+?lkl
    23 65F4 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1816 65F6			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     2 65F6 E6 87 D0 02 E6 88	  inw kloc_tmp
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 65FC A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1817 6604			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 6604 A0 01		 ldy #0+?lkl
     9 6606 11 87		 ora (kloc_tmp),y
    14 6608 A0 2E		 ldy #width*3+?lkl
    15 660A 11 87		 ora (kloc_tmp),y
    22 660C A0 79		 ldy #width*8+?lkl
    23 660E 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1818 6610			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + WIDTH*8
     8 6610 A0 79		 ldy #0+?lkl
     9 6612 11 87		 ora (kloc_tmp),y
    14 6614 A0 A6		 ldy #width*3+?lkl
    15 6616 11 87		 ora (kloc_tmp),y
    22 6618 A0 F1		 ldy #width*8+?lkl
    23 661A 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1819 661C			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 661C A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1820 6624			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 6624 A0 78		 ldy #0+?lkl
     9 6626 11 87		 ora (kloc_tmp),y
    14 6628 A0 A5		 ldy #width*3+?lkl
    15 662A 11 87		 ora (kloc_tmp),y
    22 662C A0 F0		 ldy #width*8+?lkl
    23 662E 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1821 6630 60			 rts
  1822 				.endp
  1823
  1824
  1825 				; '  *'
  1826 				; ' **'
  1827 				; ' **'
  1828 6631			.proc klocek9_2
  1829 = 0000			 .def ?lkl = 0
  1830 6631			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 6631 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1831 6639			 sta_kloc 2         , 2
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0002			 .def ?lkl = ?lkl + 2
     8 6639 20 2A 5C		  jsr sta_kloc_jsr_plus2
Source: d:\Download\getris\tetris_add.asm
  1832 663C			 sta_kloc width*8   , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 007A			 .def ?lkl = ?lkl + WIDTH*8
     7 663C AA			  tax
     8 663D A9 7A		  lda #?LKL
     9 663F 20 71 5B		  jsr add_kloc_tmp
    10 6642 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 6643 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1833 6646			 sta_kloc width*8   , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 6646 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1834 6649			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 6649 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1835 6651			 sta_kloc 1+width*8 , 1+40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + 1+WIDTH*8
    12 6651 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1836 6654			 sta_kloc width*8   , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 00F1			 .def ?lkl = ?lkl + WIDTH*8
     7 6654 AA			  tax
     8 6655 A9 F1		  lda #?LKL
     9 6657 20 71 5B		  jsr add_kloc_tmp
    10 665A 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 665B 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1837
  1838 665E			 pkloc 2    , 3
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 665E A0 02		 ldy #2
     9 6660 20 BE 5B		  jsr pkloc_jsr3
Source: d:\Download\getris\tetris_add.asm
  1839 6663			 pkloc 1+40 , 2
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 6663 A0 29		 ldy #1+40
     7 6665 20 97 5B		  jsr pkloc_jsr2
Source: d:\Download\getris\tetris_add.asm
  1840 6668 60			 rts
  1841
  1842 6669			test
  1843 = 0000			 .def ?lkl = 0
  1844 6669			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 6669 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1845 6671			 lda_kloc 2
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0002			 .def ?lkl = ?lkl + 2
     8 6671 A0 02		 ldy #0+?lkl
     9 6673 11 87		 ora (kloc_tmp),y
    14 6675 A0 2F		 ldy #width*3+?lkl
    15 6677 11 87		 ora (kloc_tmp),y
    22 6679 A0 7A		 ldy #width*8+?lkl
    23 667B 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1846 667D			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 007A			 .def ?lkl = ?lkl + WIDTH*8
     8 667D A0 7A		 ldy #0+?lkl
     9 667F 11 87		 ora (kloc_tmp),y
    14 6681 A0 A7		 ldy #width*3+?lkl
    15 6683 11 87		 ora (kloc_tmp),y
    22 6685 A0 F2		 ldy #width*8+?lkl
    23 6687 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1847 6689			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F2			 .def ?lkl = ?lkl + WIDTH*8
     7 6689 AA			  tax
     8 668A A9 F2		  lda #?LKL
     9 668C 20 71 5B		  jsr add_kloc_tmp
    10 668F 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 6690 A0 00		 ldy #0+?lkl
     9 6692 11 87		 ora (kloc_tmp),y
    14 6694 A0 2D		 ldy #width*3+?lkl
    15 6696 11 87		 ora (kloc_tmp),y
    22 6698 A0 78		 ldy #width*8+?lkl
    23 669A 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1848 669C			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 669C A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1849 66A4			 lda_kloc 1+width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + 1+WIDTH*8
     8 66A4 A0 79		 ldy #0+?lkl
     9 66A6 11 87		 ora (kloc_tmp),y
    14 66A8 A0 A6		 ldy #width*3+?lkl
    15 66AA 11 87		 ora (kloc_tmp),y
    22 66AC A0 F1		 ldy #width*8+?lkl
    23 66AE 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1850 66B0			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F1			 .def ?lkl = ?lkl + WIDTH*8
     7 66B0 AA			  tax
     8 66B1 A9 F1		  lda #?LKL
     9 66B3 20 71 5B		  jsr add_kloc_tmp
    10 66B6 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 66B7 A0 00		 ldy #0+?lkl
     9 66B9 11 87		 ora (kloc_tmp),y
    14 66BB A0 2D		 ldy #width*3+?lkl
    15 66BD 11 87		 ora (kloc_tmp),y
    22 66BF A0 78		 ldy #width*8+?lkl
    23 66C1 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1851 66C3 60			 rts
  1852 				.endp
  1853
  1854
  1855 				; '   '
  1856 				; '** '
  1857 				; '***'
  1858 66C4			.proc klocek9_3
  1859 = 0000			 .def ?lkl = 0
  1860 66C4			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 66C4 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1861 66C7			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     7 66C7 AA			  tax
     8 66C8 A9 78		  lda #?LKL
     9 66CA 20 71 5B		  jsr add_kloc_tmp
    10 66CD 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 66CE A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1862 66D6			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 66D6 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1863 66D9			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + WIDTH*8
    12 66D9 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1864 66DC			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 007A			 .def ?lkl = ?lkl + 1
     7 66DC AA			  tax
     8 66DD A9 7A		  lda #?LKL
     9 66DF 20 71 5B		  jsr add_kloc_tmp
    10 66E2 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 66E3 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1865 66E6			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 66E6 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1866 66EE			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 66EE 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1867
  1868 66F1			 pkloc 40     , 2
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 66F1 A0 28		 ldy #40
     7 66F3 20 97 5B		  jsr pkloc_jsr2
Source: d:\Download\getris\tetris_add.asm
  1869 66F6			 pkloc 1+40   , 2
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 66F6 A0 29		 ldy #1+40
     7 66F8 20 97 5B		  jsr pkloc_jsr2
Source: d:\Download\getris\tetris_add.asm
  1870 66FB			 pkloc 2+2*40 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 66FB A0 52		 ldy #2+2*40
     5 66FD 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1871 6700 60			 rts
  1872
  1873 6701			test
  1874 = 0000			 .def ?lkl = 0
  1875 6701			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 6701 A0 78		 ldy #0+?lkl
     9 6703 11 87		 ora (kloc_tmp),y
    14 6705 A0 A5		 ldy #width*3+?lkl
    15 6707 11 87		 ora (kloc_tmp),y
    22 6709 A0 F0		 ldy #width*8+?lkl
    23 670B 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1876 670D			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     7 670D AA			  tax
     8 670E A9 78		  lda #?LKL
     9 6710 20 71 5B		  jsr add_kloc_tmp
    10 6713 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 6714 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1877 671C			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 671C A0 01		 ldy #0+?lkl
     9 671E 11 87		 ora (kloc_tmp),y
    14 6720 A0 2E		 ldy #width*3+?lkl
    15 6722 11 87		 ora (kloc_tmp),y
    22 6724 A0 79		 ldy #width*8+?lkl
    23 6726 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1878 6728			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + WIDTH*8
     8 6728 A0 79		 ldy #0+?lkl
     9 672A 11 87		 ora (kloc_tmp),y
    14 672C A0 A6		 ldy #width*3+?lkl
    15 672E 11 87		 ora (kloc_tmp),y
    22 6730 A0 F1		 ldy #width*8+?lkl
    23 6732 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1879 6734			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 007A			 .def ?lkl = ?lkl + 1
     8 6734 A0 7A		 ldy #0+?lkl
     9 6736 11 87		 ora (kloc_tmp),y
    14 6738 A0 A7		 ldy #width*3+?lkl
    15 673A 11 87		 ora (kloc_tmp),y
    22 673C A0 F2		 ldy #width*8+?lkl
    23 673E 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1880 6740			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 6740 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1881 6748			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 6748 A0 78		 ldy #0+?lkl
     9 674A 11 87		 ora (kloc_tmp),y
    14 674C A0 A5		 ldy #width*3+?lkl
    15 674E 11 87		 ora (kloc_tmp),y
    22 6750 A0 F0		 ldy #width*8+?lkl
    23 6752 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1882 6754 60			 rts
  1883 				.endp
  1884
  1885
  1886 				* KLOCEK 10 (4 fazy)
  1887 				; ' * '
  1888 				; ' * '
  1889 				; '** '
  1890 6755			.proc klocek10_0
  1891 = 0000			 .def ?lkl = 0
  1892 6755			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 6755 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1893 675D			 sta_kloc 1         , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 675D 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1894 6760			 sta_kloc width*8   , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + WIDTH*8
    12 6760 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1895 6763			 sta_kloc width*8   , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 00F1			 .def ?lkl = ?lkl + WIDTH*8
     7 6763 AA			  tax
     8 6764 A9 F1		  lda #?LKL
     9 6766 20 71 5B		  jsr add_kloc_tmp
    10 6769 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 676A 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1896 676D			  __kloc2tmpZ 1 
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 676D A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1897 6775			 sta_kloc width*2*8 , 40*2
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 00F0			 .def ?lkl = ?lkl + WIDTH*2*8
     7 6775 AA			  tax
     8 6776 A9 F0		  lda #?LKL
     9 6778 20 71 5B		  jsr add_kloc_tmp
    10 677B 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 677C 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1898
  1899 677F			 pkloc 1    , 3
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 677F A0 01		 ldy #1
     9 6781 20 BE 5B		  jsr pkloc_jsr3
Source: d:\Download\getris\tetris_add.asm
  1900 6784			 pkloc 2*40 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 6784 A0 50		 ldy #2*40
     5 6786 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1901 6789 60			 rts
  1902
  1903 678A			test
  1904 = 0000			 .def ?lkl = 0
  1905 678A			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 678A A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1906 6792			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 6792 A0 01		 ldy #0+?lkl
     9 6794 11 87		 ora (kloc_tmp),y
    14 6796 A0 2E		 ldy #width*3+?lkl
    15 6798 11 87		 ora (kloc_tmp),y
    22 679A A0 79		 ldy #width*8+?lkl
    23 679C 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1907 679E			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + WIDTH*8
     8 679E A0 79		 ldy #0+?lkl
     9 67A0 11 87		 ora (kloc_tmp),y
    14 67A2 A0 A6		 ldy #width*3+?lkl
    15 67A4 11 87		 ora (kloc_tmp),y
    22 67A6 A0 F1		 ldy #width*8+?lkl
    23 67A8 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1908 67AA			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F1			 .def ?lkl = ?lkl + WIDTH*8
     7 67AA AA			  tax
     8 67AB A9 F1		  lda #?LKL
     9 67AD 20 71 5B		  jsr add_kloc_tmp
    10 67B0 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 67B1 A0 00		 ldy #0+?lkl
     9 67B3 11 87		 ora (kloc_tmp),y
    14 67B5 A0 2D		 ldy #width*3+?lkl
    15 67B7 11 87		 ora (kloc_tmp),y
    22 67B9 A0 78		 ldy #width*8+?lkl
    23 67BB 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1909 67BD			  __kloc2tmpZ 1 
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 67BD A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1910 67C5			 lda_kloc width*2*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F0			 .def ?lkl = ?lkl + WIDTH*2*8
     7 67C5 AA			  tax
     8 67C6 A9 F0		  lda #?LKL
     9 67C8 20 71 5B		  jsr add_kloc_tmp
    10 67CB 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 67CC A0 00		 ldy #0+?lkl
     9 67CE 11 87		 ora (kloc_tmp),y
    14 67D0 A0 2D		 ldy #width*3+?lkl
    15 67D2 11 87		 ora (kloc_tmp),y
    22 67D4 A0 78		 ldy #width*8+?lkl
    23 67D6 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1911 67D8 60			 rts
  1912 				.endp
  1913
  1914
  1915 				; '*  '
  1916 				; '***'
  1917 				; '   '
  1918 67D9			.proc klocek10_1
  1919 = 0000			 .def ?lkl = 0
  1920 67D9			 sta_kloc 0       , 0
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0000			 .def ?lkl = ?lkl + 0
     4 67D9 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1921 67DC			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 67DC 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1922 67DF			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + 1
    12 67DF 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1923 67E2			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 007A			 .def ?lkl = ?lkl + 1
     7 67E2 AA			  tax
     8 67E3 A9 7A		  lda #?LKL
     9 67E5 20 71 5B		  jsr add_kloc_tmp
    10 67E8 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 67E9 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1924
  1925 67EC			 pkloc 0     , 2
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 67EC A0 00		 ldy #0
     7 67EE 20 97 5B		  jsr pkloc_jsr2
Source: d:\Download\getris\tetris_add.asm
  1926 67F1			 pkloc 1+40  , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 67F1 A0 29		 ldy #1+40
     5 67F3 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1927 67F6			 pkloc 2+40  , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 67F6 A0 2A		 ldy #2+40
     5 67F8 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1928 67FB 60			 rts
  1929
  1930 67FC			test
  1931 = 0000			 .def ?lkl = 0
  1932 67FC			 lda_kloc 0
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0000			 .def ?lkl = ?lkl + 0
     8 67FC A0 00		 ldy #0+?lkl
     9 67FE 11 87		 ora (kloc_tmp),y
    14 6800 A0 2D		 ldy #width*3+?lkl
    15 6802 11 87		 ora (kloc_tmp),y
    22 6804 A0 78		 ldy #width*8+?lkl
    23 6806 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1933 6808			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 6808 A0 78		 ldy #0+?lkl
     9 680A 11 87		 ora (kloc_tmp),y
    14 680C A0 A5		 ldy #width*3+?lkl
    15 680E 11 87		 ora (kloc_tmp),y
    22 6810 A0 F0		 ldy #width*8+?lkl
    23 6812 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1934 6814			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + 1
     8 6814 A0 79		 ldy #0+?lkl
     9 6816 11 87		 ora (kloc_tmp),y
    14 6818 A0 A6		 ldy #width*3+?lkl
    15 681A 11 87		 ora (kloc_tmp),y
    22 681C A0 F1		 ldy #width*8+?lkl
    23 681E 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1935 6820			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 007A			 .def ?lkl = ?lkl + 1
     8 6820 A0 7A		 ldy #0+?lkl
     9 6822 11 87		 ora (kloc_tmp),y
    14 6824 A0 A7		 ldy #width*3+?lkl
    15 6826 11 87		 ora (kloc_tmp),y
    22 6828 A0 F2		 ldy #width*8+?lkl
    23 682A 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1936 682C 60			 rts
  1937 				.endp
  1938
  1939
  1940 				; ' **'
  1941 				; ' * '
  1942 				; ' * '
  1943 682D			.proc klocek10_2
  1944 = 0000			 .def ?lkl = 0
  1945 682D			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 682D 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1946 6830			  __kloc2tmpZ 0 
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     2 6830 E6 87 D0 02 E6 88	  inw kloc_tmp
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 6836 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1947 683E			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0001			 .def ?lkl = ?lkl + 1
     6 683E 20 0D 5C		  jsr sta_kloc_jsr_plus1
Source: d:\Download\getris\tetris_add.asm
  1948 6841			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 6841 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1949 6849			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 6849 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1950 684C			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 00F0			 .def ?lkl = ?lkl + WIDTH*8
     7 684C AA			  tax
     8 684D A9 F0		  lda #?LKL
     9 684F 20 71 5B		  jsr add_kloc_tmp
    10 6852 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 6853 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1951
  1952 6856			 pkloc 1 , 3
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 6856 A0 01		 ldy #1
     9 6858 20 BE 5B		  jsr pkloc_jsr3
Source: d:\Download\getris\tetris_add.asm
  1953 685B			 pkloc 2 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 685B A0 02		 ldy #2
     5 685D 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1954 6860 60			 rts
  1955
  1956 6861			test
  1957 = 0000			 .def ?lkl = 0
  1958 6861			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 6861 A0 01		 ldy #0+?lkl
     9 6863 11 87		 ora (kloc_tmp),y
    14 6865 A0 2E		 ldy #width*3+?lkl
    15 6867 11 87		 ora (kloc_tmp),y
    22 6869 A0 79		 ldy #width*8+?lkl
    23 686B 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1959 686D			  __kloc2tmpZ 0
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     2 686D E6 87 D0 02 E6 88	  inw kloc_tmp
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     3 6873 A6 87 86 8F A6 88 +   mwx kloc_tmp tmpZ
Source: d:\Download\getris\tetris_add.asm
  1960 687B			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0001			 .def ?lkl = ?lkl + 1
     8 687B A0 01		 ldy #0+?lkl
     9 687D 11 87		 ora (kloc_tmp),y
    14 687F A0 2E		 ldy #width*3+?lkl
    15 6881 11 87		 ora (kloc_tmp),y
    22 6883 A0 79		 ldy #width*8+?lkl
    23 6885 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1961 6887			  __kloc2tmpZ 1
Macro: TETRIS.__KLOC2TMPZ [Source: d:\Download\getris\tetris_add.asm]
     5 6887 A6 8F 86 87 A6 90 +   mwx tmpZ kloc_tmp
     6 = 0000			  .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
  1962 688F			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 688F A0 78		 ldy #0+?lkl
     9 6891 11 87		 ora (kloc_tmp),y
    14 6893 A0 A5		 ldy #width*3+?lkl
    15 6895 11 87		 ora (kloc_tmp),y
    22 6897 A0 F0		 ldy #width*8+?lkl
    23 6899 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1963 689B			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F0			 .def ?lkl = ?lkl + WIDTH*8
     7 689B AA			  tax
     8 689C A9 F0		  lda #?LKL
     9 689E 20 71 5B		  jsr add_kloc_tmp
    10 68A1 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 68A2 A0 00		 ldy #0+?lkl
     9 68A4 11 87		 ora (kloc_tmp),y
    14 68A6 A0 2D		 ldy #width*3+?lkl
    15 68A8 11 87		 ora (kloc_tmp),y
    22 68AA A0 78		 ldy #width*8+?lkl
    23 68AC 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1964 68AE 60			 rts
  1965 				.endp
  1966
  1967
  1968 				; '   '
  1969 				; '***'
  1970 				; '  *'
  1971 68AF			.proc klocek10_3
  1972 = 0000			 .def ?lkl = 0
  1973 68AF			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 68AF 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1974 68B2			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0079			 .def ?lkl = ?lkl + 1
    12 68B2 20 64 5C		  jsr sta_kloc_jsr_plus121
Source: d:\Download\getris\tetris_add.asm
  1975 68B5			 sta_kloc 1       , 1
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 007A			 .def ?lkl = ?lkl + 1
     7 68B5 AA			  tax
     8 68B6 A9 7A		  lda #?LKL
     9 68B8 20 71 5B		  jsr add_kloc_tmp
    10 68BB 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
    15 68BC 20 F0 5B		  jsr sta_kloc_jsr
Source: d:\Download\getris\tetris_add.asm
  1976 68BF			 sta_kloc width*8 , 40
Macro: TETRIS.STA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     1 = 0078			 .def ?lkl = ?lkl + WIDTH*8
    10 68BF 20 47 5C		  jsr sta_kloc_jsr_plus120
Source: d:\Download\getris\tetris_add.asm
  1977
  1978 68C2			 pkloc 40   , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 68C2 A0 28		 ldy #40
     5 68C4 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1979 68C7			 pkloc 40+1 , 1
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 68C7 A0 29		 ldy #40+1
     5 68C9 20 7B 5B		  jsr pkloc_jsr1
Source: d:\Download\getris\tetris_add.asm
  1980 68CC			 pkloc 40+2 , 2
Macro: TETRIS.PKLOC [Source: d:\Download\getris\tetris_add.asm]
     2 68CC A0 2A		 ldy #40+2
     7 68CE 20 97 5B		  jsr pkloc_jsr2
Source: d:\Download\getris\tetris_add.asm
  1981 68D1 60			 rts
  1982
  1983 68D2			test
  1984 = 0000			 .def ?lkl = 0
  1985 68D2			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0078			 .def ?lkl = ?lkl + WIDTH*8
     8 68D2 A0 78		 ldy #0+?lkl
     9 68D4 11 87		 ora (kloc_tmp),y
    14 68D6 A0 A5		 ldy #width*3+?lkl
    15 68D8 11 87		 ora (kloc_tmp),y
    22 68DA A0 F0		 ldy #width*8+?lkl
    23 68DC 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1986 68DE			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 0079			 .def ?lkl = ?lkl + 1
     8 68DE A0 79		 ldy #0+?lkl
     9 68E0 11 87		 ora (kloc_tmp),y
    14 68E2 A0 A6		 ldy #width*3+?lkl
    15 68E4 11 87		 ora (kloc_tmp),y
    22 68E6 A0 F1		 ldy #width*8+?lkl
    23 68E8 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1987 68EA			 lda_kloc 1
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 007A			 .def ?lkl = ?lkl + 1
     8 68EA A0 7A		 ldy #0+?lkl
     9 68EC 11 87		 ora (kloc_tmp),y
    14 68EE A0 A7		 ldy #width*3+?lkl
    15 68F0 11 87		 ora (kloc_tmp),y
    22 68F2 A0 F2		 ldy #width*8+?lkl
    23 68F4 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1988 68F6			 lda_kloc width*8
Macro: TETRIS.LDA_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 = 00F2			 .def ?lkl = ?lkl + WIDTH*8
     7 68F6 AA			  tax
     8 68F7 A9 F2		  lda #?LKL
     9 68F9 20 71 5B		  jsr add_kloc_tmp
    10 68FC 8A			  txa
    13 = 0000			 .def ?lkl = 0
Source: d:\Download\getris\tetris_add.asm
Source: d:\Download\getris\tetris_add.asm
     8 68FD A0 00		 ldy #0+?lkl
     9 68FF 11 87		 ora (kloc_tmp),y
    14 6901 A0 2D		 ldy #width*3+?lkl
    15 6903 11 87		 ora (kloc_tmp),y
    22 6905 A0 78		 ldy #width*8+?lkl
    23 6907 11 87		 ora (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  1989 6909 60			 rts
  1990 				.endp
  1991
  1992
  1993 				/*
  1994 				  ustawia adres 'kloc' wg aktualnej pozycji X,Y klocka
  1995 				*/
  1995
  1996 690A			.proc get_kloc
  1997
  1998 690A A4 8B		 ldy pos_y
  1999
  2000 690C 18			 clc
  2001 690D B9 E4 77		 lda l_buf,y
  2002 6910 65 8A		 adc pos_x
  2003 6912 85 85		 sta kloc
  2004 6914 B9 BF 78		 lda h_buf,y
  2005 6917 69 00		 adc #0
  2006 6919 85 86		 sta kloc+1 
  2007 691B 60			 rts
  2008
  2009 				.endp
  2010
  2011
  2012 				/*
  2013 				  losujemy wartosc z przedzialu <0..8>
  2014 				*/
  2014
  2015 691C			.proc losuj_klocek
  2016 				; lda licz_level.level
  2017 				; cmp #nowy_klocek               ; jesli level >= NOWY_KLOCEK wtedy dochodzi nowy ksztalt klocka
  2018 				; bcs los9
  2019
  2020 				; lda $d20a
  2021 				; and #1
  2022 				; sta _add0+1
  2023
  2024 				; lda $d20a
  2025 				; and #%00011100
  2026 				; :2 lsr @
  2027 				; clc
  2028 				;_add0 adc #0
  2029
  2030 				; sta wylosowany
  2031 				; rts
  2032
  2033 691C			los9
  2034 691C AD 0A D2		 lda $d20a
  2035 691F 4A			 lsr @
  2036 6920 4A			 lsr @
  2037 6921 29 0F		 and #$f
  2038 6923 A8			 tay
  2039 6924 B9 2C 69		 lda tlos,y
  2040
  2041 6927 8D 2B 69		 sta wylosowany
  2042 692A 60			 rts
  2043
  2044 692B 00			wylosowany brk
  2045
  2046 692C 00 01 02 03 04 05 + tlos dta 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5
  2047 				.endp
  2048
  2049
  2050 				/*
  2051 				  Testowanie linii i przemieszczenie studni w dol
  2052 				*/
  2052
  2053 				.macro put
  2054 				 ldy #:1
  2055 				 lda (kloc),y
  2056 				 sta (kloc_tmp),y
  2057 				 ldy #:1+width
  2058 				 sta (kloc_tmp),y
  2059 				 ldy #:1+width*2
  2060 				 sta (kloc_tmp),y
  2061 				 ldy #:1+width*3
  2062 				 sta (kloc_tmp),y
  2063 				 ldy #:1+width*4
  2064 				 sta (kloc_tmp),y
  2065 				 ldy #:1+width*5
  2066 				 sta (kloc_tmp),y
  2067 				 ldy #:1+width*6
  2068 				 sta (kloc_tmp),y
  2069 				.endm
  2070
  2071 693C			.proc move_kloc
  2072 693C			 put 2
Macro: TETRIS.PUT [Source: d:\Download\getris\tetris_add.asm]
     1 693C A0 02		 ldy #2
     2 693E B1 85		 lda (kloc),y
     3 6940 91 87		 sta (kloc_tmp),y
     4 6942 A0 11		 ldy #2+width
     5 6944 91 87		 sta (kloc_tmp),y
     6 6946 A0 20		 ldy #2+width*2
     7 6948 91 87		 sta (kloc_tmp),y
     8 694A A0 2F		 ldy #2+width*3
     9 694C 91 87		 sta (kloc_tmp),y
    10 694E A0 3E		 ldy #2+width*4
    11 6950 91 87		 sta (kloc_tmp),y
    12 6952 A0 4D		 ldy #2+width*5
    13 6954 91 87		 sta (kloc_tmp),y
    14 6956 A0 5C		 ldy #2+width*6
    15 6958 91 87		 sta (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  2073 695A			 put 3
Macro: TETRIS.PUT [Source: d:\Download\getris\tetris_add.asm]
     1 695A A0 03		 ldy #3
     2 695C B1 85		 lda (kloc),y
     3 695E 91 87		 sta (kloc_tmp),y
     4 6960 A0 12		 ldy #3+width
     5 6962 91 87		 sta (kloc_tmp),y
     6 6964 A0 21		 ldy #3+width*2
     7 6966 91 87		 sta (kloc_tmp),y
     8 6968 A0 30		 ldy #3+width*3
     9 696A 91 87		 sta (kloc_tmp),y
    10 696C A0 3F		 ldy #3+width*4
    11 696E 91 87		 sta (kloc_tmp),y
    12 6970 A0 4E		 ldy #3+width*5
    13 6972 91 87		 sta (kloc_tmp),y
    14 6974 A0 5D		 ldy #3+width*6
    15 6976 91 87		 sta (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  2074 6978			 put 4
Macro: TETRIS.PUT [Source: d:\Download\getris\tetris_add.asm]
     1 6978 A0 04		 ldy #4
     2 697A B1 85		 lda (kloc),y
     3 697C 91 87		 sta (kloc_tmp),y
     4 697E A0 13		 ldy #4+width
     5 6980 91 87		 sta (kloc_tmp),y
     6 6982 A0 22		 ldy #4+width*2
     7 6984 91 87		 sta (kloc_tmp),y
     8 6986 A0 31		 ldy #4+width*3
     9 6988 91 87		 sta (kloc_tmp),y
    10 698A A0 40		 ldy #4+width*4
    11 698C 91 87		 sta (kloc_tmp),y
    12 698E A0 4F		 ldy #4+width*5
    13 6990 91 87		 sta (kloc_tmp),y
    14 6992 A0 5E		 ldy #4+width*6
    15 6994 91 87		 sta (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  2075 6996			 put 5
Macro: TETRIS.PUT [Source: d:\Download\getris\tetris_add.asm]
     1 6996 A0 05		 ldy #5
     2 6998 B1 85		 lda (kloc),y
     3 699A 91 87		 sta (kloc_tmp),y
     4 699C A0 14		 ldy #5+width
     5 699E 91 87		 sta (kloc_tmp),y
     6 69A0 A0 23		 ldy #5+width*2
     7 69A2 91 87		 sta (kloc_tmp),y
     8 69A4 A0 32		 ldy #5+width*3
     9 69A6 91 87		 sta (kloc_tmp),y
    10 69A8 A0 41		 ldy #5+width*4
    11 69AA 91 87		 sta (kloc_tmp),y
    12 69AC A0 50		 ldy #5+width*5
    13 69AE 91 87		 sta (kloc_tmp),y
    14 69B0 A0 5F		 ldy #5+width*6
    15 69B2 91 87		 sta (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  2076 69B4			 put 6
Macro: TETRIS.PUT [Source: d:\Download\getris\tetris_add.asm]
     1 69B4 A0 06		 ldy #6
     2 69B6 B1 85		 lda (kloc),y
     3 69B8 91 87		 sta (kloc_tmp),y
     4 69BA A0 15		 ldy #6+width
     5 69BC 91 87		 sta (kloc_tmp),y
     6 69BE A0 24		 ldy #6+width*2
     7 69C0 91 87		 sta (kloc_tmp),y
     8 69C2 A0 33		 ldy #6+width*3
     9 69C4 91 87		 sta (kloc_tmp),y
    10 69C6 A0 42		 ldy #6+width*4
    11 69C8 91 87		 sta (kloc_tmp),y
    12 69CA A0 51		 ldy #6+width*5
    13 69CC 91 87		 sta (kloc_tmp),y
    14 69CE A0 60		 ldy #6+width*6
    15 69D0 91 87		 sta (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  2077 69D2			 put 7
Macro: TETRIS.PUT [Source: d:\Download\getris\tetris_add.asm]
     1 69D2 A0 07		 ldy #7
     2 69D4 B1 85		 lda (kloc),y
     3 69D6 91 87		 sta (kloc_tmp),y
     4 69D8 A0 16		 ldy #7+width
     5 69DA 91 87		 sta (kloc_tmp),y
     6 69DC A0 25		 ldy #7+width*2
     7 69DE 91 87		 sta (kloc_tmp),y
     8 69E0 A0 34		 ldy #7+width*3
     9 69E2 91 87		 sta (kloc_tmp),y
    10 69E4 A0 43		 ldy #7+width*4
    11 69E6 91 87		 sta (kloc_tmp),y
    12 69E8 A0 52		 ldy #7+width*5
    13 69EA 91 87		 sta (kloc_tmp),y
    14 69EC A0 61		 ldy #7+width*6
    15 69EE 91 87		 sta (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  2078 69F0			 put 8
Macro: TETRIS.PUT [Source: d:\Download\getris\tetris_add.asm]
     1 69F0 A0 08		 ldy #8
     2 69F2 B1 85		 lda (kloc),y
     3 69F4 91 87		 sta (kloc_tmp),y
     4 69F6 A0 17		 ldy #8+width
     5 69F8 91 87		 sta (kloc_tmp),y
     6 69FA A0 26		 ldy #8+width*2
     7 69FC 91 87		 sta (kloc_tmp),y
     8 69FE A0 35		 ldy #8+width*3
     9 6A00 91 87		 sta (kloc_tmp),y
    10 6A02 A0 44		 ldy #8+width*4
    11 6A04 91 87		 sta (kloc_tmp),y
    12 6A06 A0 53		 ldy #8+width*5
    13 6A08 91 87		 sta (kloc_tmp),y
    14 6A0A A0 62		 ldy #8+width*6
    15 6A0C 91 87		 sta (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  2079 6A0E			 put 9
Macro: TETRIS.PUT [Source: d:\Download\getris\tetris_add.asm]
     1 6A0E A0 09		 ldy #9
     2 6A10 B1 85		 lda (kloc),y
     3 6A12 91 87		 sta (kloc_tmp),y
     4 6A14 A0 18		 ldy #9+width
     5 6A16 91 87		 sta (kloc_tmp),y
     6 6A18 A0 27		 ldy #9+width*2
     7 6A1A 91 87		 sta (kloc_tmp),y
     8 6A1C A0 36		 ldy #9+width*3
     9 6A1E 91 87		 sta (kloc_tmp),y
    10 6A20 A0 45		 ldy #9+width*4
    11 6A22 91 87		 sta (kloc_tmp),y
    12 6A24 A0 54		 ldy #9+width*5
    13 6A26 91 87		 sta (kloc_tmp),y
    14 6A28 A0 63		 ldy #9+width*6
    15 6A2A 91 87		 sta (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  2080 6A2C			 put 10
Macro: TETRIS.PUT [Source: d:\Download\getris\tetris_add.asm]
     1 6A2C A0 0A		 ldy #10
     2 6A2E B1 85		 lda (kloc),y
     3 6A30 91 87		 sta (kloc_tmp),y
     4 6A32 A0 19		 ldy #10+width
     5 6A34 91 87		 sta (kloc_tmp),y
     6 6A36 A0 28		 ldy #10+width*2
     7 6A38 91 87		 sta (kloc_tmp),y
     8 6A3A A0 37		 ldy #10+width*3
     9 6A3C 91 87		 sta (kloc_tmp),y
    10 6A3E A0 46		 ldy #10+width*4
    11 6A40 91 87		 sta (kloc_tmp),y
    12 6A42 A0 55		 ldy #10+width*5
    13 6A44 91 87		 sta (kloc_tmp),y
    14 6A46 A0 64		 ldy #10+width*6
    15 6A48 91 87		 sta (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  2081 6A4A			 put 11
Macro: TETRIS.PUT [Source: d:\Download\getris\tetris_add.asm]
     1 6A4A A0 0B		 ldy #11
     2 6A4C B1 85		 lda (kloc),y
     3 6A4E 91 87		 sta (kloc_tmp),y
     4 6A50 A0 1A		 ldy #11+width
     5 6A52 91 87		 sta (kloc_tmp),y
     6 6A54 A0 29		 ldy #11+width*2
     7 6A56 91 87		 sta (kloc_tmp),y
     8 6A58 A0 38		 ldy #11+width*3
     9 6A5A 91 87		 sta (kloc_tmp),y
    10 6A5C A0 47		 ldy #11+width*4
    11 6A5E 91 87		 sta (kloc_tmp),y
    12 6A60 A0 56		 ldy #11+width*5
    13 6A62 91 87		 sta (kloc_tmp),y
    14 6A64 A0 65		 ldy #11+width*6
    15 6A66 91 87		 sta (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  2082 6A68			 put 12
Macro: TETRIS.PUT [Source: d:\Download\getris\tetris_add.asm]
     1 6A68 A0 0C		 ldy #12
     2 6A6A B1 85		 lda (kloc),y
     3 6A6C 91 87		 sta (kloc_tmp),y
     4 6A6E A0 1B		 ldy #12+width
     5 6A70 91 87		 sta (kloc_tmp),y
     6 6A72 A0 2A		 ldy #12+width*2
     7 6A74 91 87		 sta (kloc_tmp),y
     8 6A76 A0 39		 ldy #12+width*3
     9 6A78 91 87		 sta (kloc_tmp),y
    10 6A7A A0 48		 ldy #12+width*4
    11 6A7C 91 87		 sta (kloc_tmp),y
    12 6A7E A0 57		 ldy #12+width*5
    13 6A80 91 87		 sta (kloc_tmp),y
    14 6A82 A0 66		 ldy #12+width*6
    15 6A84 91 87		 sta (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  2083 6A86			 put 13
Macro: TETRIS.PUT [Source: d:\Download\getris\tetris_add.asm]
     1 6A86 A0 0D		 ldy #13
     2 6A88 B1 85		 lda (kloc),y
     3 6A8A 91 87		 sta (kloc_tmp),y
     4 6A8C A0 1C		 ldy #13+width
     5 6A8E 91 87		 sta (kloc_tmp),y
     6 6A90 A0 2B		 ldy #13+width*2
     7 6A92 91 87		 sta (kloc_tmp),y
     8 6A94 A0 3A		 ldy #13+width*3
     9 6A96 91 87		 sta (kloc_tmp),y
    10 6A98 A0 49		 ldy #13+width*4
    11 6A9A 91 87		 sta (kloc_tmp),y
    12 6A9C A0 58		 ldy #13+width*5
    13 6A9E 91 87		 sta (kloc_tmp),y
    14 6AA0 A0 67		 ldy #13+width*6
    15 6AA2 91 87		 sta (kloc_tmp),y
Source: d:\Download\getris\tetris_add.asm
  2084 6AA4 60			 rts
  2085 				.endp
  2086
  2087
  2088 6AA5			.proc move
  2089
  2090 6AA5 A5 8C		 lda old
  2091 6AA7 8D AB 6A		 sta tmp
  2092 				 
  2093 6AAA			loop2
  2094 6AAA A0 00		 ldy #0
  2095 = 6AAB			tmp equ *-1
  2096
  2097 6AAC			 loa_buf kloc_tmp ",y"
Macro: TETRIS.LOA_BUF [Source: d:\Download\getris\tetris_add.asm]
     1 6AAC B9 E4 77		 lda l_buf,y
     2 6AAF 85 87		 sta KLOC_TMP
     3 6AB1 B9 BF 78		 lda h_buf,y
     4 6AB4 85 88		 sta KLOC_TMP+1
Source: d:\Download\getris\tetris_add.asm
  2098
  2099 6AB6 98			 tya
  2100 6AB7 38			 sec
  2101 6AB8 E9 08		 sbc #8
  2102 6ABA 8D AB 6A		 sta tmp
  2103 6ABD A8			 tay
  2104
  2105 6ABE			 loa_buf kloc ",y"
Macro: TETRIS.LOA_BUF [Source: d:\Download\getris\tetris_add.asm]
     1 6ABE B9 E4 77		 lda l_buf,y
     2 6AC1 85 85		 sta KLOC
     3 6AC3 B9 BF 78		 lda h_buf,y
     4 6AC6 85 86		 sta KLOC+1
Source: d:\Download\getris\tetris_add.asm
  2106
  2107 6AC8 20 3C 69		 jsr move_kloc
  2108
  2109 6ACB AD AB 6A		 lda tmp
  2110 6ACE C9 10		 cmp #16
  2111 6AD0 B0 D8		 bcs loop2
  2112
  2113 6AD2 20 C3 59		 jsr przepisz_char
  2114 6AD5 4C D5 58		 jmp przepisz_pmg_all
  2115 				.endp
  2116
  2117
  2118 				// testujemy pozioma linie w studni, jesli jest cala to usuwamy ja i zwiekszamy licznik punktow
  2119 6AD8			.proc test_line
  2120 6AD8 A9 00		 lda #0
  2121 6ADA 8D F6 6B		 sta hit+1
  2122
  2123 6ADD A4 8B		 ldy pos_y
  2124 				; clc
  2125 				; adc #1
  2126 6ADF C8			 iny
  2127 6AE0 84 8C		 sty old
  2128
  2129 6AE2			.local _f1
  2130 				; tay
  2131 6AE2			 loa_buf kloc_tmp ",y"
Macro: TETRIS.LOA_BUF [Source: d:\Download\getris\tetris_add.asm]
     1 6AE2 B9 E4 77		 lda l_buf,y
     2 6AE5 85 87		 sta KLOC_TMP
     3 6AE7 B9 BF 78		 lda h_buf,y
     4 6AEA 85 88		 sta KLOC_TMP+1
Source: d:\Download\getris\tetris_add.asm
  2132
  2133 6AEC A0 02		 ldy #2
  2134 6AEE B1 87		 lda (kloc_tmp),y
  2135 6AF0 A0 0D		 ldy #13
  2136 6AF2 31 87		 and (kloc_tmp),y 
  2137 6AF4 F0 41		 beq fault
  2138 6AF6 A0 03		 ldy #3
  2139 6AF8 B1 87		 lda (kloc_tmp),y 
  2140 6AFA A0 0C		 ldy #12
  2141 6AFC 31 87		 and (kloc_tmp),y 
  2142 6AFE F0 37		 beq fault
  2143 6B00 A0 04		 ldy #4
  2144 6B02 B1 87		 lda (kloc_tmp),y 
  2145 6B04 A0 0B		 ldy #11
  2146 6B06 31 87		 and (kloc_tmp),y 
  2147 6B08 F0 2D		 beq fault
  2148 6B0A A0 05		 ldy #5
  2149 6B0C B1 87		 lda (kloc_tmp),y 
  2150 6B0E A0 0A		 ldy #10
  2151 6B10 31 87		 and (kloc_tmp),y 
  2152 6B12 F0 23		 beq fault
  2153 6B14 A0 06		 ldy #6
  2154 6B16 B1 87		 lda (kloc_tmp),y 
  2155 6B18 A0 09		 ldy #9
  2156 6B1A 31 87		 and (kloc_tmp),y 
  2157 6B1C F0 19		 beq fault
  2158 6B1E A0 07		 ldy #7
  2159 6B20 B1 87		 lda (kloc_tmp),y 
  2160 6B22 A0 08		 ldy #8
  2161 6B24 31 87		 and (kloc_tmp),y 
  2162 6B26 F0 0F		 beq fault
  2163
  2164 6B28 8C F6 6B		 sty hit+1
  2165 6B2B E6 96		 inc lvl
  2166 				 
  2167 6B2D 20 F8 6B		 jsr line_pkt
  2168 6B30 20 A5 6A		 jsr move
  2169 6B33 4C 37 6B		 jmp fault
  2170 6B36 60			quit rts
  2171
  2172 6B37			fault
  2173 6B37 A5 8C		 lda old
  2174 6B39 18			 clc
  2175 6B3A 69 08		 adc #8
  2176 6B3C 85 8C		 sta old
  2177 				 
  2178 6B3E C9 D0		 cmp #height-1
  2179 6B40 B0 F4		 bcs quit
  2180 				.endl
  2181
  2182
  2183 6B42			.local _f2
  2184 6B42 A8			 tay
  2185 6B43			 loa_buf kloc_tmp ",y"
Macro: TETRIS.LOA_BUF [Source: d:\Download\getris\tetris_add.asm]
     1 6B43 B9 E4 77		 lda l_buf,y
     2 6B46 85 87		 sta KLOC_TMP
     3 6B48 B9 BF 78		 lda h_buf,y
     4 6B4B 85 88		 sta KLOC_TMP+1
Source: d:\Download\getris\tetris_add.asm
  2186
  2187 6B4D A0 02		 ldy #2
  2188 6B4F B1 87		 lda (kloc_tmp),y 
  2189 6B51 A0 0D		 ldy #13
  2190 6B53 31 87		 and (kloc_tmp),y 
  2191 6B55 F0 41		 beq fault
  2192 6B57 A0 03		 ldy #3
  2193 6B59 B1 87		 lda (kloc_tmp),y 
  2194 6B5B A0 0C		 ldy #12
  2195 6B5D 31 87		 and (kloc_tmp),y 
  2196 6B5F F0 37		 beq fault
  2197 6B61 A0 04		 ldy #4
  2198 6B63 B1 87		 lda (kloc_tmp),y 
  2199 6B65 A0 0B		 ldy #11
  2200 6B67 31 87		 and (kloc_tmp),y 
  2201 6B69 F0 2D		 beq fault
  2202 6B6B A0 05		 ldy #5
  2203 6B6D B1 87		 lda (kloc_tmp),y 
  2204 6B6F A0 0A		 ldy #10
  2205 6B71 31 87		 and (kloc_tmp),y 
  2206 6B73 F0 23		 beq fault
  2207 6B75 A0 06		 ldy #6
  2208 6B77 B1 87		 lda (kloc_tmp),y 
  2209 6B79 A0 09		 ldy #9
  2210 6B7B 31 87		 and (kloc_tmp),y 
  2211 6B7D F0 19		 beq fault
  2212 6B7F A0 07		 ldy #7
  2213 6B81 B1 87		 lda (kloc_tmp),y 
  2214 6B83 A0 08		 ldy #8
  2215 6B85 31 87		 and (kloc_tmp),y 
  2216 6B87 F0 0F		 beq fault
  2217
  2218 6B89 8C F6 6B		 sty hit+1
  2219 6B8C E6 96		 inc lvl
  2220
  2221 6B8E 20 F8 6B		 jsr line_pkt
  2222 6B91 20 A5 6A		 jsr move
  2223 6B94 4C 98 6B		 jmp fault
  2224 6B97 60			quit rts
  2225
  2226 6B98			fault
  2227 6B98 A5 8C		 lda old
  2228 6B9A 18			 clc
  2229 6B9B 69 08		 adc #8
  2230 6B9D 85 8C		 sta old
  2231 				 
  2232 6B9F C9 D0		 cmp #height-1
  2233 6BA1 B0 F4		 bcs quit
  2234 				.endl
  2235
  2236
  2237 6BA3			.local _f3
  2238 6BA3 A8			 tay
  2239 6BA4			 loa_buf kloc_tmp ",y"
Macro: TETRIS.LOA_BUF [Source: d:\Download\getris\tetris_add.asm]
     1 6BA4 B9 E4 77		 lda l_buf,y
     2 6BA7 85 87		 sta KLOC_TMP
     3 6BA9 B9 BF 78		 lda h_buf,y
     4 6BAC 85 88		 sta KLOC_TMP+1
Source: d:\Download\getris\tetris_add.asm
  2240
  2241 6BAE A0 02		 ldy #2
  2242 6BB0 B1 87		 lda (kloc_tmp),y 
  2243 6BB2 A0 0D		 ldy #13
  2244 6BB4 31 87		 and (kloc_tmp),y 
  2245 6BB6 F0 3D		 beq fault
  2246 6BB8 A0 03		 ldy #3
  2247 6BBA B1 87		 lda (kloc_tmp),y 
  2248 6BBC A0 0C		 ldy #12
  2249 6BBE 31 87		 and (kloc_tmp),y 
  2250 6BC0 F0 33		 beq fault
  2251 6BC2 A0 04		 ldy #4
  2252 6BC4 B1 87		 lda (kloc_tmp),y 
  2253 6BC6 A0 0B		 ldy #11
  2254 6BC8 31 87		 and (kloc_tmp),y 
  2255 6BCA F0 29		 beq fault
  2256 6BCC A0 05		 ldy #5
  2257 6BCE B1 87		 lda (kloc_tmp),y 
  2258 6BD0 A0 0A		 ldy #10
  2259 6BD2 31 87		 and (kloc_tmp),y 
  2260 6BD4 F0 1F		 beq fault
  2261 6BD6 A0 06		 ldy #6
  2262 6BD8 B1 87		 lda (kloc_tmp),y 
  2263 6BDA A0 09		 ldy #9
  2264 6BDC 31 87		 and (kloc_tmp),y 
  2265 6BDE F0 15		 beq fault
  2266 6BE0 A0 07		 ldy #7
  2267 6BE2 B1 87		 lda (kloc_tmp),y 
  2268 6BE4 A0 08		 ldy #8
  2269 6BE6 31 87		 and (kloc_tmp),y 
  2270 6BE8 F0 0B		 beq fault
  2271
  2272 6BEA 8C F6 6B		 sty hit+1
  2273 6BED E6 96		 inc lvl
  2274 				 
  2275 6BEF 20 F8 6B		 jsr line_pkt
  2276 6BF2 20 A5 6A		 jsr move
  2277 				 
  2278 6BF5			fault 
  2279 				.endl
  2280
  2281
  2282 6BF5 A9 00		hit lda #0
  2283 6BF7 60			 rts
  2284
  2285
  2286 				// licznik punktow za skasowanie calej linii (max *16)
  2287 6BF8			line_pkt
  2288 6BF8 AD 92 76		 lda licz_level.level
  2289 6BFB 29 0F		 and #$0f
  2290 6BFD A8			 tay
  2291
  2292 6BFE			pkt_
  2293 6BFE EE D1 76		 inc licznik.count+4            ; + 100 pkt
  2294 6C01 20 93 76		 jsr licznik
  2295
  2296 6C04 88			 dey
  2297 6C05 10 F7		 bpl pkt_
  2298
  2299
  2300 				// jesli zostala usunieta linia (HIT>0) to zwieksz poziomy pasek symbolizujacy usuniete linie
  2301 6C07 AD F6 6B		 lda hit+1
  2302 6C0A F0 25		 beq _skp
  2303
  2304 6C0C AC 6A 57		 ldy line+1
  2305 				 
  2306 6C0F AD 32 6C		 lda real
  2307 6C12 18			 clc
  2308 6C13 79 36 6C		 adc ulamki-min_line,y
  2309 6C16 8D 32 6C		 sta real
  2310 6C19 90 16		 bcc _skp
  2311
  2312 6C1B EE 33 6C		 inc real+1
  2313
  2314 6C1E AC 33 6C		 ldy real+1
  2315 6C21 C0 06		 cpy #6				; nie mozemy przekroczyc 5 znakow
  2316 6C23 B0 0C		 bcs _skp
  2317
  2318 6C25 B9 33 6C		 lda pas1-1,y
  2319 6C28 99 EE B2		 sta text1+17*40+31-1,y		; pasek pokazujacy usuniete linie
  2320
  2321 6C2B B9 38 6C		 lda pas2-1,y
  2322 6C2E 99 EE B8		 sta text2+17*40+31-1,y
  2323
  2324 6C31			_skp
  2325 6C31 60			 rts
  2326
  2327
  2328 6C32 00 00		real 	 .word
  2329
  2330 6C34 AB AC AD 2E 2F	pas1 dta 171,172,173,46,47
  2331 6C39 9A 9B 9C 1D 1E	pas2 dta 154,155,156,29,30
  2332
  2333 6C3E A0 8E 80 75 6B 63 + ulamki dta 160 , 142 , 128 , 117 , 107 , 99 , 92 , 85 , 80 , 75
  2334
  2335 				.endp
  2336
  2337
  2338 				/*
  2339 				  Zeruj pasek pokazujacy usuniete linie
  2340 				*/
  2340
  2341 6C48			zeruj_pasek
  2342
  2343 6C48 A9 00		 lda #0
  2344
  2345 6C4A 85 96		 sta lvl                        ; wyzeruj licznik usunietych linii
  2346
  2347 6C4C 8D 32 6C		 sta test_line.real
  2348 6C4F 8D 33 6C		 sta test_line.real+1
  2349
  2350 6C52 8D EF B2		 sta text1+17*40+31		; czyscimy poziomy pasek pokazujacy usuniete linie
  2351 6C55 8D F0 B2		 sta text1+17*40+31+1
  2352 6C58 8D F1 B2		 sta text1+17*40+31+2
  2353 6C5B 8D F2 B2		 sta text1+17*40+31+3
  2354 6C5E 8D F3 B2		 sta text1+17*40+31+4
  2355
  2356 6C61 8D EF B8		 sta text2+17*40+31
  2357 6C64 8D F0 B8		 sta text2+17*40+31+1
  2358 6C67 8D F1 B8		 sta text2+17*40+31+2
  2359 6C6A 8D F2 B8		 sta text2+17*40+31+3
  2360 6C6D 8D F3 B8		 sta text2+17*40+31+4
  2361
  2362 6C70 60			 rts
  2363
  2364
  2365 				/*
  2366 				  INIT
  2367 				*/
  2367
  2368 6C71			.proc init
  2369
  2370 6C71 A9 00		test lda #0
  2371 6C73 D0 0C		 bne _s
  2372
  2373 6C75 20 48 6C		 jsr zeruj_pasek
  2374
  2375 6C78 8D 92 76		 sta licz_level.level		; zerujemy licznik leveli i punktow
  2376 6C7B 20 B5 71		 jsr licz_level
  2377
  2378 6C7E 20 C0 76		 jsr licznik.reset
  2379
  2380 6C81			_s
  2381
  2382 6C81 A9 28 8D 43 B5 A9 +  mwa #text1 adr                 ; ustawiamy pierwszy ekran
  2383
  2384 6C8B A9 04		 lda #delay_joy_default_value
  2385 6C8D 8D D6 EC		 sta delay_joy
  2386 6C90 8D D3 EC		 sta read_joy
  2387
  2388 6C93 A9 FF		 lda #delay_trig_default_value
  2389 6C95 8D D5 EC		 sta delay_trig
  2390
  2391 6C98 AD D4 EC		 lda delay
  2392 6C9B 8D 11 57		 sta wait
  2393
  2394 				; czyscimy obszar studni ze spritami
  2395
  2396 6C9E AD 87 6D		 lda pause_sw           ; czy mamy czyscic zawartosc studni ?
  2397 6CA1 D0 47		 bne _s0
  2398
  2399 6CA3 A0 00		 ldy #0
  2400 6CA5 98			 tya
  2401 6CA6			_clr
  2402 6CA6 99 00 C6		 sta pmBase1+$0300,y
  2403 6CA9 99 00 C7		 sta pmBase1+$0400,y
  2404 6CAC 99 00 CE		 sta pmBase2+$0300,y
  2405 6CAF 99 00 CF		 sta pmBase2+$0400,y
  2406 6CB2 C8			 iny
  2407 6CB3 C0 DA		 cpy #height+9
  2408 6CB5 D0 EF		 bne _clr
  2409
  2410 6CB7 20 6C 6D		 jsr studnia
  2411
  2412 6CBA A9 00 8D 84 6D A9 +  mwa #buf fill+1
  2413 				 
  2414 6CC4 A2 0C		 ldx >[width*height]
  2415 6CC6 E8			 inx
  2416 6CC7 A0 00		 ldy #0
  2417 6CC9 98			 tya
  2418
  2419 6CCA 20 83 6D		lp jsr fill
  2420 6CCD C8			 iny
  2421 6CCE D0 FA		 bne lp
  2422 6CD0 EE 85 6D		 inc fill+2
  2423 6CD3 CA			 dex
  2424 6CD4 D0 F4		 bne lp
  2425
  2426 6CD6 A9 30 8D 84 6D A9 +  mwa #buf+width*[height-1] fill+1
  2427
  2428 6CE0 A0 00		 ldy #0
  2429 6CE2 A9 FF		 lda #$ff 
  2430
  2431 6CE4 20 83 6D		lp2 jsr fill
  2432 6CE7 C8			 iny
  2433 6CE8 D0 FA		 bne lp2
  2434
  2435 6CEA			_s0
  2436
  2437 6CEA 20 C3 59		 jsr przepisz_char
  2438 				 
  2439
  2440 6CED AD 87 6D		 lda pause_sw           ; czy mamy zerowac zawartosc studni ?
  2441 6CF0 D0 4B		 bne _s1
  2442
  2443 6CF2 A9 00		 lda #0
  2444 6CF4 85 8A		 sta pos_x
  2445 6CF6 8D 9E 57		 sta faza
  2446 6CF9 85 8B		 sta pos_y
  2447
  2448 6CFB 20 0A 69		 jsr get_kloc
  2449 				 
  2450 6CFE A2 D1		 ldx #height
  2451 6D00 A9 6B		loop1 lda #znak
  2452 6D02 A0 00		 ldy #0
  2453 6D04 91 85		 sta (kloc),y
  2454 6D06 C8			 iny
  2455 6D07 91 85		 sta (kloc),y 
  2456 6D09 A0 0E		 ldy #width-1
  2457 6D0B 91 85		 sta (kloc),y
  2458
  2459 6D0D A5 85		 lda kloc
  2460 6D0F 18			 clc
  2461 6D10 69 0F		 adc #width
  2462 6D12 85 85		 sta kloc
  2463 6D14 90 02		 bcc _skp
  2464 6D16 E6 86		 inc kloc+1
  2465 6D18			_skp
  2466
  2467 6D18 CA			 dex
  2468 6D19 D0 E5		 bne loop1
  2469 				 
  2470
  2471 6D1B A9 D0		 lda #height-1
  2472 6D1D 85 8B		 sta pos_y 
  2473 6D1F 20 0A 69		 jsr get_kloc
  2474 				 
  2475 6D22 A9 6B		 lda #znak
  2476 6D24 A0 0E		 ldy #width-1
  2477 6D26 91 85		loop2 sta (kloc),y
  2478 6D28 88			 dey
  2479 6D29 10 FB		 bpl loop2
  2480
  2481 6D2B A9 07		 lda #[width-1]/2
  2482 6D2D 85 8A		 sta pos_x
  2483 6D2F 85 8B		 sta pos_y
  2484 				 
  2485 6D31 20 0A 69		 jsr get_kloc
  2486
  2487 6D34 20 B5 71		 jsr licz_level
  2488 				 
  2489 6D37 20 1C 69		 jsr losuj_klocek
  2490 6D3A 20 71 6E		 jsr pokaz_klocek
  2491
  2492 6D3D			_s1
  2493
  2494
  2495 6D3D AD 87 6D		 lda pause_sw
  2496 6D40 F0 21		 beq _s2
  2497
  2498
  2499 6D42 A0 00		 ldy #0         ; przywracamy stara zawartosc grafiki graczy
  2500 6D44			_c0
  2501 6D44 B9 E0 7A		 lda pg_tmp,y
  2502 6D47 99 00 C6		 sta pmBase1+$0300,y
  2503 6D4A 99 00 CE		 sta pmBase2+$0300,y
  2504 6D4D B9 BA 7B		 lda pg_tmp+height+9,y
  2505 6D50 99 00 C7		 sta pmBase1+$0400,y
  2506 6D53 99 00 CF		 sta pmBase2+$0400,y
  2507 6D56 C8			 iny
  2508 6D57 C0 DA		 cpy #height+9
  2509 6D59 D0 E9		 bne _c0
  2510
  2511 6D5B 20 0A 69		 jsr get_kloc   ; ustaw adres klocka
  2512
  2513 6D5E A2 00		 ldx #" "
  2514 6D60 20 3C 5B		 jsr put_klocek
  2515
  2516 6D63			_s2
  2517 				 
  2518 6D63 A9 00		 lda #0
  2519 6D65 8D 87 6D		 sta pause_sw
  2520 6D68 8D 72 6C		 sta test+1
  2521 6D6B 60			 rts
  2522
  2523
  2524 6D6C			studnia
  2525 6D6C A9 07		 lda #[width-1]/2
  2526 6D6E 85 8A		 sta pos_x
  2527
  2528 6D70 A9 00		 lda #0
  2529 6D72 8D 9E 57		 sta faza
  2530 6D75 8D 07 58		 sta w_dol
  2531 6D78 8D D3 EC		 sta read_joy
  2532 6D7B 8D 40 58		 sta r_d300
  2533 6D7E 85 8B		 sta pos_y
  2534 6D80 85 8D		 sta old_posy
  2535 6D82 60			 rts
  2536
  2537
  2538 6D83 99 FF FF		fill sta $ffff,y
  2539 6D86 60			 rts 
  2540
  2541 6D87 00			pause_sw brk
  2542
  2543 				.endp
  2544
  2545
  2546 				/*
  2547 				  Init PMG
  2548 				  Wylaczenie obrazu i zerowanie Playera #1
  2549 				*/
  2549
  2550 6D88			init_pmg
  2551 6D88 A9 00 8D 0E D4	 mva #0 $d40e
  2552 6D8D 8D 00 D4		 sta $d400
  2553 6D90 8D 09 D0		 sta player1_size
  2554 6D93 8D 01 D0		 sta player1_positionX
  2555 6D96 60			 rts
  2556
  2557 				/*
  2558 				  Well Done
  2559 				*/
  2559
  2560 6D97			.proc well_done
  2561
  2562 6D97 20 A6 7A		 jsr wajt
  2563
  2564 6D9A 20 88 6D		 jsr init_pmg
  2565
  2566 6D9D A9 A8		 lda <fad_well
  2567 6D9F A2 6D		 ldx >fad_well
  2568 6DA1 20 0B 6E		 jsr set_fade
  2569
  2570 6DA4 20 88 3F		 jsr well.main
  2571
  2572 6DA7 60			 rts
  2573
  2574 6DA8 4E 41 55 41 5C 41 + fad_well dta a(well.l_tcol , well.h_tcol , well.t_satur ,well.t_color , well.color_nr)
  2575 				.endp
  2576
  2577
  2578 				/*
  2579 				  Pause
  2580 				*/
  2580
  2581 6DB2			.proc pause
  2582
  2583 6DB2 20 A6 7A		 jsr wajt
  2584
  2585 6DB5 20 88 6D		 jsr init_pmg
  2586
  2587 6DB8 A9 C3		 lda <fad_pause
  2588 6DBA A2 6D		 ldx >fad_pause
  2589 6DBC 20 0B 6E		 jsr set_fade
  2590
  2591 6DBF 20 80 41		 jsr pau.main
  2592
  2593 6DC2 60			 rts
  2594
  2595 6DC3 01 43 07 43 0D 43 + fad_pause dta a(pau.l_tcol , pau.h_tcol , pau.t_satur ,pau.t_color , pau.color_nr)
  2596 				.endp
  2597
  2598
  2599 				/*
  2600 				  High Score
  2601 				*/
  2601
  2602 6DCD			.proc high_score
  2603
  2604 6DCD 20 A6 7A		 jsr wajt
  2605 6DD0 20 88 6D		 jsr init_pmg
  2606
  2607 				; ekran CONGRATULATIONS
  2608 6DD3 20 29 50		 jsr logo.input_string.pozycja
  2609
  2610 6DD6 E0 00		 cpx #0
  2611 6DD8 D0 06		 bne g_over
  2612 				 
  2613 6DDA 20 26 EB		 jsr congrat
  2614
  2615 6DDD 4C EA 6D		 jmp h_score
  2616
  2617
  2618 				; ekran GAME OVER
  2619 				; modyfikacja procedur wygaszajacych kolory
  2620 6DE0			g_over
  2621
  2622 				; jsr wajt
  2623 				; jsr init_pmg
  2624
  2625 6DE0 A9 F7		 lda <fad_over
  2626 6DE2 A2 6D		 ldx >fad_over
  2627 6DE4 20 0B 6E		 jsr set_fade
  2628
  2629 6DE7 20 1B 20		 jsr game_over.main
  2630
  2631
  2632 				; ekran HIGH SCORE 
  2633 6DEA			h_score
  2634
  2635 6DEA 20 88 6D		 jsr init_pmg
  2636
  2637 6DED A9 01		 lda <fad_high
  2638 6DEF A2 6E		 ldx >fad_high
  2639 6DF1 20 0B 6E		 jsr set_fade
  2640 				 
  2641 6DF4 4C 44 43		 jmp logo.main
  2642
  2643 6DF7 90 22 9E 22 AC 22 + fad_over dta a(game_over.l_tcol , game_over.h_tcol , game_over.t_satur , game_over.t_color , game_over.color_nr)
  2644 6E01 B8 4C 02 4D 4C 4D + fad_high dta a(logo.l_tcol , logo.h_tcol , logo.t_satur , logo.t_color , logo.color_nr)
  2645 				.endp
  2646
  2647
  2648 				/*
  2649 				  Modyfikujemy procedury fade_in, fade_out
  2650 				*/
  2650
  2651 6E0B			.proc set_fade
  2652 6E0B 85 8F		 sta tmpZ
  2653 6E0D 86 90		 stx tmpZ+1
  2654 				 
  2655 6E0F A0 00		 ldy #0
  2656
  2657 6E11 B1 8F		 lda (tmpZ),y
  2658 6E13 8D 21 4C		 sta logo.fade_in.ltc0+1
  2659 6E16 8D 6A 4C		 sta logo.fade_out.ltc1+1
  2660 6E19 8D 95 4C		 sta logo.ltc2+1
  2661 6E1C C8			 iny
  2662 6E1D B1 8F		 lda (tmpZ),y
  2663 6E1F 8D 22 4C		 sta logo.fade_in.ltc0+2
  2664 6E22 8D 6B 4C		 sta logo.fade_out.ltc1+2
  2665 6E25 8D 96 4C		 sta logo.ltc2+2
  2666 				  
  2667 6E28 C8			 iny
  2668 6E29 B1 8F		 lda (tmpZ),y
  2669 6E2B 8D 26 4C		 sta logo.fade_in.htc0+1
  2670 6E2E 8D 6F 4C		 sta logo.fade_out.htc1+1
  2671 6E31 8D 9A 4C		 sta logo.htc2+1
  2672 6E34 C8			 iny
  2673 6E35 B1 8F		 lda (tmpZ),y
  2674 6E37 8D 27 4C		 sta logo.fade_in.htc0+2
  2675 6E3A 8D 70 4C		 sta logo.fade_out.htc1+2
  2676 6E3D 8D 9B 4C		 sta logo.htc2+2
  2677
  2678 6E40 C8			 iny
  2679 6E41 B1 8F		 lda (tmpZ),y
  2680 6E43 8D 32 4C		 sta logo.fade_in.sat0+1
  2681 6E46 8D A6 4C		 sta logo.sat1+1
  2682 6E49 C8			 iny
  2683 6E4A B1 8F		 lda (tmpZ),y
  2684 6E4C 8D 33 4C		 sta logo.fade_in.sat0+2
  2685 6E4F 8D A7 4C		 sta logo.sat1+2
  2686
  2687 6E52 C8			 iny
  2688 6E53 B1 8F		 lda (tmpZ),y
  2689 6E55 8D 3B 4C		 sta logo.fade_in.tco0+1
  2690 6E58 8D AC 4C		 sta logo.tco1+1
  2691 6E5B C8			 iny
  2692 6E5C B1 8F		 lda (tmpZ),y
  2693 6E5E 8D 3C 4C		 sta logo.fade_in.tco0+2
  2694 6E61 8D AD 4C		 sta logo.tco1+2
  2695
  2696 6E64 C8			 iny
  2697 6E65 B1 8F		 lda (tmpZ),y
  2698 6E67 8D 4B 4C		 sta logo.fade_in.col_nr0+1
  2699 6E6A 8D 8E 4C		 sta logo.fade_out.col_nr1+1
  2700 6E6D 8D B4 4C		 sta logo.col_nr2+1
  2701
  2702 6E70 60			 rts
  2703
  2704 				.endp
  2705
  2706
  2707 				/*
  2708 				  Licznik LEVEL
  2709 				*/
  2709
  2710 				.macro put_kloc ' '
  2711 				
  2712 				 lda pokaz_klocek.l_klo,y
  2713 				 sta kloc_tmp
  2714 				 lda pokaz_klocek.h_klo,y
  2715 				 sta kloc_tmp+1
  2716 				
  2717 				 ldy #0
  2718 				 lda (kloc_tmp),y
  2719 				 sta :1
  2720 				 sta :2
  2721 				 iny
  2722 				 lda (kloc_tmp),y
  2723 				 sta :1+1
  2724 				 sta :2+1
  2725 				 iny
  2726 				 lda (kloc_tmp),y
  2727 				 sta :1+2
  2728 				 sta :2+2
  2729 				 iny
  2730 				 lda (kloc_tmp),y
  2731 				 sta :1+3
  2732 				 sta :2+3
  2733 				 iny
  2734 				 lda (kloc_tmp),y
  2735 				 sta :1+4
  2736 				 sta :2+4
  2737 				 iny
  2738 				 lda (kloc_tmp),y
  2739 				 sta :1+5
  2740 				 sta :2+5
  2741 				 iny
  2742 				 lda (kloc_tmp),y
  2743 				 sta :1+6
  2744 				 sta :2+6
  2745 				 iny
  2746 				 lda (kloc_tmp),y
  2747 				 sta :1+7
  2748 				 sta :2+7
  2749 				.endm
  2750
  2751
  2752 				/*
  2753 				  pokazuje na ekranie klocek o numerze 'WYLOSOWANY'
  2754 				  grafika skompresowana OPTYMIZING (plik SCR i FNT)
  2755 				*/
  2755
  2756 6E71			.proc pokaz_klocek
  2757
  2758 6E71 AD 2B 69		 lda losuj_klocek.wylosowany
  2759 6E74 8D 7C 6E		 sta _add+1
  2760
  2761 6E77 0A 0A 0A		 :3 asl @
  2762 6E7A 18			 clc
  2763 6E7B 69 00		_add adc #0
  2764
  2765 6E7D AA			 tax
  2766
  2767 				; 74,75,76  Charset #2
  2768 				; 88,89,90  Charset #2
  2769 				; 11,12,13  Charset #3
  2770
  2771 				; 61,62,63  Charset #2
  2772 				; 76,77,78  Charset #2
  2773 				; 92,93,94  Charset #2
  2774
  2775 6E7E BC 00 DD		 ldy klocki_gfx,x
  2776 6E81			 put_kloc fnt1+2*$400+74*8  fnt2+2*$400+61*8
Macro: TETRIS.PUT_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 6E81 B9 85 71		 lda pokaz_klocek.l_klo,y
     3 6E84 85 87		 sta kloc_tmp
     4 6E86 B9 9D 71		 lda pokaz_klocek.h_klo,y
     5 6E89 85 88		 sta kloc_tmp+1
     7 6E8B A0 00		 ldy #0
     8 6E8D B1 87		 lda (kloc_tmp),y
     9 6E8F 8D 50 8A		 sta FNT1+2*$400+74*8
    10 6E92 8D E8 A1		 sta FNT2+2*$400+61*8
    11 6E95 C8			 iny
    12 6E96 B1 87		 lda (kloc_tmp),y
    13 6E98 8D 51 8A		 sta FNT1+2*$400+74*8+1
    14 6E9B 8D E9 A1		 sta FNT2+2*$400+61*8+1
    15 6E9E C8			 iny
    16 6E9F B1 87		 lda (kloc_tmp),y
    17 6EA1 8D 52 8A		 sta FNT1+2*$400+74*8+2
    18 6EA4 8D EA A1		 sta FNT2+2*$400+61*8+2
    19 6EA7 C8			 iny
    20 6EA8 B1 87		 lda (kloc_tmp),y
    21 6EAA 8D 53 8A		 sta FNT1+2*$400+74*8+3
    22 6EAD 8D EB A1		 sta FNT2+2*$400+61*8+3
    23 6EB0 C8			 iny
    24 6EB1 B1 87		 lda (kloc_tmp),y
    25 6EB3 8D 54 8A		 sta FNT1+2*$400+74*8+4
    26 6EB6 8D EC A1		 sta FNT2+2*$400+61*8+4
    27 6EB9 C8			 iny
    28 6EBA B1 87		 lda (kloc_tmp),y
    29 6EBC 8D 55 8A		 sta FNT1+2*$400+74*8+5
    30 6EBF 8D ED A1		 sta FNT2+2*$400+61*8+5
    31 6EC2 C8			 iny
    32 6EC3 B1 87		 lda (kloc_tmp),y
    33 6EC5 8D 56 8A		 sta FNT1+2*$400+74*8+6
    34 6EC8 8D EE A1		 sta FNT2+2*$400+61*8+6
    35 6ECB C8			 iny
    36 6ECC B1 87		 lda (kloc_tmp),y
    37 6ECE 8D 57 8A		 sta FNT1+2*$400+74*8+7
    38 6ED1 8D EF A1		 sta FNT2+2*$400+61*8+7
Source: d:\Download\getris\tetris_add.asm
  2777 6ED4 BC 01 DD		 ldy klocki_gfx+1,x
  2778 6ED7			 put_kloc fnt1+2*$400+75*8  fnt2+2*$400+62*8
Macro: TETRIS.PUT_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 6ED7 B9 85 71		 lda pokaz_klocek.l_klo,y
     3 6EDA 85 87		 sta kloc_tmp
     4 6EDC B9 9D 71		 lda pokaz_klocek.h_klo,y
     5 6EDF 85 88		 sta kloc_tmp+1
     7 6EE1 A0 00		 ldy #0
     8 6EE3 B1 87		 lda (kloc_tmp),y
     9 6EE5 8D 58 8A		 sta FNT1+2*$400+75*8
    10 6EE8 8D F0 A1		 sta FNT2+2*$400+62*8
    11 6EEB C8			 iny
    12 6EEC B1 87		 lda (kloc_tmp),y
    13 6EEE 8D 59 8A		 sta FNT1+2*$400+75*8+1
    14 6EF1 8D F1 A1		 sta FNT2+2*$400+62*8+1
    15 6EF4 C8			 iny
    16 6EF5 B1 87		 lda (kloc_tmp),y
    17 6EF7 8D 5A 8A		 sta FNT1+2*$400+75*8+2
    18 6EFA 8D F2 A1		 sta FNT2+2*$400+62*8+2
    19 6EFD C8			 iny
    20 6EFE B1 87		 lda (kloc_tmp),y
    21 6F00 8D 5B 8A		 sta FNT1+2*$400+75*8+3
    22 6F03 8D F3 A1		 sta FNT2+2*$400+62*8+3
    23 6F06 C8			 iny
    24 6F07 B1 87		 lda (kloc_tmp),y
    25 6F09 8D 5C 8A		 sta FNT1+2*$400+75*8+4
    26 6F0C 8D F4 A1		 sta FNT2+2*$400+62*8+4
    27 6F0F C8			 iny
    28 6F10 B1 87		 lda (kloc_tmp),y
    29 6F12 8D 5D 8A		 sta FNT1+2*$400+75*8+5
    30 6F15 8D F5 A1		 sta FNT2+2*$400+62*8+5
    31 6F18 C8			 iny
    32 6F19 B1 87		 lda (kloc_tmp),y
    33 6F1B 8D 5E 8A		 sta FNT1+2*$400+75*8+6
    34 6F1E 8D F6 A1		 sta FNT2+2*$400+62*8+6
    35 6F21 C8			 iny
    36 6F22 B1 87		 lda (kloc_tmp),y
    37 6F24 8D 5F 8A		 sta FNT1+2*$400+75*8+7
    38 6F27 8D F7 A1		 sta FNT2+2*$400+62*8+7
Source: d:\Download\getris\tetris_add.asm
  2779 6F2A BC 02 DD		 ldy klocki_gfx+2,x
  2780 6F2D			 put_kloc fnt1+2*$400+76*8  fnt2+2*$400+63*8
Macro: TETRIS.PUT_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 6F2D B9 85 71		 lda pokaz_klocek.l_klo,y
     3 6F30 85 87		 sta kloc_tmp
     4 6F32 B9 9D 71		 lda pokaz_klocek.h_klo,y
     5 6F35 85 88		 sta kloc_tmp+1
     7 6F37 A0 00		 ldy #0
     8 6F39 B1 87		 lda (kloc_tmp),y
     9 6F3B 8D 60 8A		 sta FNT1+2*$400+76*8
    10 6F3E 8D F8 A1		 sta FNT2+2*$400+63*8
    11 6F41 C8			 iny
    12 6F42 B1 87		 lda (kloc_tmp),y
    13 6F44 8D 61 8A		 sta FNT1+2*$400+76*8+1
    14 6F47 8D F9 A1		 sta FNT2+2*$400+63*8+1
    15 6F4A C8			 iny
    16 6F4B B1 87		 lda (kloc_tmp),y
    17 6F4D 8D 62 8A		 sta FNT1+2*$400+76*8+2
    18 6F50 8D FA A1		 sta FNT2+2*$400+63*8+2
    19 6F53 C8			 iny
    20 6F54 B1 87		 lda (kloc_tmp),y
    21 6F56 8D 63 8A		 sta FNT1+2*$400+76*8+3
    22 6F59 8D FB A1		 sta FNT2+2*$400+63*8+3
    23 6F5C C8			 iny
    24 6F5D B1 87		 lda (kloc_tmp),y
    25 6F5F 8D 64 8A		 sta FNT1+2*$400+76*8+4
    26 6F62 8D FC A1		 sta FNT2+2*$400+63*8+4
    27 6F65 C8			 iny
    28 6F66 B1 87		 lda (kloc_tmp),y
    29 6F68 8D 65 8A		 sta FNT1+2*$400+76*8+5
    30 6F6B 8D FD A1		 sta FNT2+2*$400+63*8+5
    31 6F6E C8			 iny
    32 6F6F B1 87		 lda (kloc_tmp),y
    33 6F71 8D 66 8A		 sta FNT1+2*$400+76*8+6
    34 6F74 8D FE A1		 sta FNT2+2*$400+63*8+6
    35 6F77 C8			 iny
    36 6F78 B1 87		 lda (kloc_tmp),y
    37 6F7A 8D 67 8A		 sta FNT1+2*$400+76*8+7
    38 6F7D 8D FF A1		 sta FNT2+2*$400+63*8+7
Source: d:\Download\getris\tetris_add.asm
  2781
  2782 6F80 BC 03 DD		 ldy klocki_gfx+3,x
  2783 6F83			 put_kloc fnt1+2*$400+88*8  fnt2+2*$400+76*8
Macro: TETRIS.PUT_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 6F83 B9 85 71		 lda pokaz_klocek.l_klo,y
     3 6F86 85 87		 sta kloc_tmp
     4 6F88 B9 9D 71		 lda pokaz_klocek.h_klo,y
     5 6F8B 85 88		 sta kloc_tmp+1
     7 6F8D A0 00		 ldy #0
     8 6F8F B1 87		 lda (kloc_tmp),y
     9 6F91 8D C0 8A		 sta FNT1+2*$400+88*8
    10 6F94 8D 60 A2		 sta FNT2+2*$400+76*8
    11 6F97 C8			 iny
    12 6F98 B1 87		 lda (kloc_tmp),y
    13 6F9A 8D C1 8A		 sta FNT1+2*$400+88*8+1
    14 6F9D 8D 61 A2		 sta FNT2+2*$400+76*8+1
    15 6FA0 C8			 iny
    16 6FA1 B1 87		 lda (kloc_tmp),y
    17 6FA3 8D C2 8A		 sta FNT1+2*$400+88*8+2
    18 6FA6 8D 62 A2		 sta FNT2+2*$400+76*8+2
    19 6FA9 C8			 iny
    20 6FAA B1 87		 lda (kloc_tmp),y
    21 6FAC 8D C3 8A		 sta FNT1+2*$400+88*8+3
    22 6FAF 8D 63 A2		 sta FNT2+2*$400+76*8+3
    23 6FB2 C8			 iny
    24 6FB3 B1 87		 lda (kloc_tmp),y
    25 6FB5 8D C4 8A		 sta FNT1+2*$400+88*8+4
    26 6FB8 8D 64 A2		 sta FNT2+2*$400+76*8+4
    27 6FBB C8			 iny
    28 6FBC B1 87		 lda (kloc_tmp),y
    29 6FBE 8D C5 8A		 sta FNT1+2*$400+88*8+5
    30 6FC1 8D 65 A2		 sta FNT2+2*$400+76*8+5
    31 6FC4 C8			 iny
    32 6FC5 B1 87		 lda (kloc_tmp),y
    33 6FC7 8D C6 8A		 sta FNT1+2*$400+88*8+6
    34 6FCA 8D 66 A2		 sta FNT2+2*$400+76*8+6
    35 6FCD C8			 iny
    36 6FCE B1 87		 lda (kloc_tmp),y
    37 6FD0 8D C7 8A		 sta FNT1+2*$400+88*8+7
    38 6FD3 8D 67 A2		 sta FNT2+2*$400+76*8+7
Source: d:\Download\getris\tetris_add.asm
  2784 6FD6 BC 04 DD		 ldy klocki_gfx+4,x
  2785 6FD9			 put_kloc fnt1+2*$400+89*8  fnt2+2*$400+77*8
Macro: TETRIS.PUT_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 6FD9 B9 85 71		 lda pokaz_klocek.l_klo,y
     3 6FDC 85 87		 sta kloc_tmp
     4 6FDE B9 9D 71		 lda pokaz_klocek.h_klo,y
     5 6FE1 85 88		 sta kloc_tmp+1
     7 6FE3 A0 00		 ldy #0
     8 6FE5 B1 87		 lda (kloc_tmp),y
     9 6FE7 8D C8 8A		 sta FNT1+2*$400+89*8
    10 6FEA 8D 68 A2		 sta FNT2+2*$400+77*8
    11 6FED C8			 iny
    12 6FEE B1 87		 lda (kloc_tmp),y
    13 6FF0 8D C9 8A		 sta FNT1+2*$400+89*8+1
    14 6FF3 8D 69 A2		 sta FNT2+2*$400+77*8+1
    15 6FF6 C8			 iny
    16 6FF7 B1 87		 lda (kloc_tmp),y
    17 6FF9 8D CA 8A		 sta FNT1+2*$400+89*8+2
    18 6FFC 8D 6A A2		 sta FNT2+2*$400+77*8+2
    19 6FFF C8			 iny
    20 7000 B1 87		 lda (kloc_tmp),y
    21 7002 8D CB 8A		 sta FNT1+2*$400+89*8+3
    22 7005 8D 6B A2		 sta FNT2+2*$400+77*8+3
    23 7008 C8			 iny
    24 7009 B1 87		 lda (kloc_tmp),y
    25 700B 8D CC 8A		 sta FNT1+2*$400+89*8+4
    26 700E 8D 6C A2		 sta FNT2+2*$400+77*8+4
    27 7011 C8			 iny
    28 7012 B1 87		 lda (kloc_tmp),y
    29 7014 8D CD 8A		 sta FNT1+2*$400+89*8+5
    30 7017 8D 6D A2		 sta FNT2+2*$400+77*8+5
    31 701A C8			 iny
    32 701B B1 87		 lda (kloc_tmp),y
    33 701D 8D CE 8A		 sta FNT1+2*$400+89*8+6
    34 7020 8D 6E A2		 sta FNT2+2*$400+77*8+6
    35 7023 C8			 iny
    36 7024 B1 87		 lda (kloc_tmp),y
    37 7026 8D CF 8A		 sta FNT1+2*$400+89*8+7
    38 7029 8D 6F A2		 sta FNT2+2*$400+77*8+7
Source: d:\Download\getris\tetris_add.asm
  2786 702C BC 05 DD		 ldy klocki_gfx+5,x
  2787 702F			 put_kloc fnt1+2*$400+90*8  fnt2+2*$400+78*8
Macro: TETRIS.PUT_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 702F B9 85 71		 lda pokaz_klocek.l_klo,y
     3 7032 85 87		 sta kloc_tmp
     4 7034 B9 9D 71		 lda pokaz_klocek.h_klo,y
     5 7037 85 88		 sta kloc_tmp+1
     7 7039 A0 00		 ldy #0
     8 703B B1 87		 lda (kloc_tmp),y
     9 703D 8D D0 8A		 sta FNT1+2*$400+90*8
    10 7040 8D 70 A2		 sta FNT2+2*$400+78*8
    11 7043 C8			 iny
    12 7044 B1 87		 lda (kloc_tmp),y
    13 7046 8D D1 8A		 sta FNT1+2*$400+90*8+1
    14 7049 8D 71 A2		 sta FNT2+2*$400+78*8+1
    15 704C C8			 iny
    16 704D B1 87		 lda (kloc_tmp),y
    17 704F 8D D2 8A		 sta FNT1+2*$400+90*8+2
    18 7052 8D 72 A2		 sta FNT2+2*$400+78*8+2
    19 7055 C8			 iny
    20 7056 B1 87		 lda (kloc_tmp),y
    21 7058 8D D3 8A		 sta FNT1+2*$400+90*8+3
    22 705B 8D 73 A2		 sta FNT2+2*$400+78*8+3
    23 705E C8			 iny
    24 705F B1 87		 lda (kloc_tmp),y
    25 7061 8D D4 8A		 sta FNT1+2*$400+90*8+4
    26 7064 8D 74 A2		 sta FNT2+2*$400+78*8+4
    27 7067 C8			 iny
    28 7068 B1 87		 lda (kloc_tmp),y
    29 706A 8D D5 8A		 sta FNT1+2*$400+90*8+5
    30 706D 8D 75 A2		 sta FNT2+2*$400+78*8+5
    31 7070 C8			 iny
    32 7071 B1 87		 lda (kloc_tmp),y
    33 7073 8D D6 8A		 sta FNT1+2*$400+90*8+6
    34 7076 8D 76 A2		 sta FNT2+2*$400+78*8+6
    35 7079 C8			 iny
    36 707A B1 87		 lda (kloc_tmp),y
    37 707C 8D D7 8A		 sta FNT1+2*$400+90*8+7
    38 707F 8D 77 A2		 sta FNT2+2*$400+78*8+7
Source: d:\Download\getris\tetris_add.asm
  2788
  2789 7082 BC 06 DD		 ldy klocki_gfx+6,x
  2790 7085			 put_kloc fnt1+3*$400+11*8  fnt2+2*$400+92*8
Macro: TETRIS.PUT_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 7085 B9 85 71		 lda pokaz_klocek.l_klo,y
     3 7088 85 87		 sta kloc_tmp
     4 708A B9 9D 71		 lda pokaz_klocek.h_klo,y
     5 708D 85 88		 sta kloc_tmp+1
     7 708F A0 00		 ldy #0
     8 7091 B1 87		 lda (kloc_tmp),y
     9 7093 8D 58 8C		 sta FNT1+3*$400+11*8
    10 7096 8D E0 A2		 sta FNT2+2*$400+92*8
    11 7099 C8			 iny
    12 709A B1 87		 lda (kloc_tmp),y
    13 709C 8D 59 8C		 sta FNT1+3*$400+11*8+1
    14 709F 8D E1 A2		 sta FNT2+2*$400+92*8+1
    15 70A2 C8			 iny
    16 70A3 B1 87		 lda (kloc_tmp),y
    17 70A5 8D 5A 8C		 sta FNT1+3*$400+11*8+2
    18 70A8 8D E2 A2		 sta FNT2+2*$400+92*8+2
    19 70AB C8			 iny
    20 70AC B1 87		 lda (kloc_tmp),y
    21 70AE 8D 5B 8C		 sta FNT1+3*$400+11*8+3
    22 70B1 8D E3 A2		 sta FNT2+2*$400+92*8+3
    23 70B4 C8			 iny
    24 70B5 B1 87		 lda (kloc_tmp),y
    25 70B7 8D 5C 8C		 sta FNT1+3*$400+11*8+4
    26 70BA 8D E4 A2		 sta FNT2+2*$400+92*8+4
    27 70BD C8			 iny
    28 70BE B1 87		 lda (kloc_tmp),y
    29 70C0 8D 5D 8C		 sta FNT1+3*$400+11*8+5
    30 70C3 8D E5 A2		 sta FNT2+2*$400+92*8+5
    31 70C6 C8			 iny
    32 70C7 B1 87		 lda (kloc_tmp),y
    33 70C9 8D 5E 8C		 sta FNT1+3*$400+11*8+6
    34 70CC 8D E6 A2		 sta FNT2+2*$400+92*8+6
    35 70CF C8			 iny
    36 70D0 B1 87		 lda (kloc_tmp),y
    37 70D2 8D 5F 8C		 sta FNT1+3*$400+11*8+7
    38 70D5 8D E7 A2		 sta FNT2+2*$400+92*8+7
Source: d:\Download\getris\tetris_add.asm
  2791 70D8 BC 07 DD		 ldy klocki_gfx+7,x
  2792 70DB			 put_kloc fnt1+3*$400+12*8  fnt2+2*$400+93*8
Macro: TETRIS.PUT_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 70DB B9 85 71		 lda pokaz_klocek.l_klo,y
     3 70DE 85 87		 sta kloc_tmp
     4 70E0 B9 9D 71		 lda pokaz_klocek.h_klo,y
     5 70E3 85 88		 sta kloc_tmp+1
     7 70E5 A0 00		 ldy #0
     8 70E7 B1 87		 lda (kloc_tmp),y
     9 70E9 8D 60 8C		 sta FNT1+3*$400+12*8
    10 70EC 8D E8 A2		 sta FNT2+2*$400+93*8
    11 70EF C8			 iny
    12 70F0 B1 87		 lda (kloc_tmp),y
    13 70F2 8D 61 8C		 sta FNT1+3*$400+12*8+1
    14 70F5 8D E9 A2		 sta FNT2+2*$400+93*8+1
    15 70F8 C8			 iny
    16 70F9 B1 87		 lda (kloc_tmp),y
    17 70FB 8D 62 8C		 sta FNT1+3*$400+12*8+2
    18 70FE 8D EA A2		 sta FNT2+2*$400+93*8+2
    19 7101 C8			 iny
    20 7102 B1 87		 lda (kloc_tmp),y
    21 7104 8D 63 8C		 sta FNT1+3*$400+12*8+3
    22 7107 8D EB A2		 sta FNT2+2*$400+93*8+3
    23 710A C8			 iny
    24 710B B1 87		 lda (kloc_tmp),y
    25 710D 8D 64 8C		 sta FNT1+3*$400+12*8+4
    26 7110 8D EC A2		 sta FNT2+2*$400+93*8+4
    27 7113 C8			 iny
    28 7114 B1 87		 lda (kloc_tmp),y
    29 7116 8D 65 8C		 sta FNT1+3*$400+12*8+5
    30 7119 8D ED A2		 sta FNT2+2*$400+93*8+5
    31 711C C8			 iny
    32 711D B1 87		 lda (kloc_tmp),y
    33 711F 8D 66 8C		 sta FNT1+3*$400+12*8+6
    34 7122 8D EE A2		 sta FNT2+2*$400+93*8+6
    35 7125 C8			 iny
    36 7126 B1 87		 lda (kloc_tmp),y
    37 7128 8D 67 8C		 sta FNT1+3*$400+12*8+7
    38 712B 8D EF A2		 sta FNT2+2*$400+93*8+7
Source: d:\Download\getris\tetris_add.asm
  2793 712E BC 08 DD		 ldy klocki_gfx+8,x
  2794 7131			 put_kloc fnt1+3*$400+13*8  fnt2+2*$400+94*8
Macro: TETRIS.PUT_KLOC [Source: d:\Download\getris\tetris_add.asm]
     2 7131 B9 85 71		 lda pokaz_klocek.l_klo,y
     3 7134 85 87		 sta kloc_tmp
     4 7136 B9 9D 71		 lda pokaz_klocek.h_klo,y
     5 7139 85 88		 sta kloc_tmp+1
     7 713B A0 00		 ldy #0
     8 713D B1 87		 lda (kloc_tmp),y
     9 713F 8D 68 8C		 sta FNT1+3*$400+13*8
    10 7142 8D F0 A2		 sta FNT2+2*$400+94*8
    11 7145 C8			 iny
    12 7146 B1 87		 lda (kloc_tmp),y
    13 7148 8D 69 8C		 sta FNT1+3*$400+13*8+1
    14 714B 8D F1 A2		 sta FNT2+2*$400+94*8+1
    15 714E C8			 iny
    16 714F B1 87		 lda (kloc_tmp),y
    17 7151 8D 6A 8C		 sta FNT1+3*$400+13*8+2
    18 7154 8D F2 A2		 sta FNT2+2*$400+94*8+2
    19 7157 C8			 iny
    20 7158 B1 87		 lda (kloc_tmp),y
    21 715A 8D 6B 8C		 sta FNT1+3*$400+13*8+3
    22 715D 8D F3 A2		 sta FNT2+2*$400+94*8+3
    23 7160 C8			 iny
    24 7161 B1 87		 lda (kloc_tmp),y
    25 7163 8D 6C 8C		 sta FNT1+3*$400+13*8+4
    26 7166 8D F4 A2		 sta FNT2+2*$400+94*8+4
    27 7169 C8			 iny
    28 716A B1 87		 lda (kloc_tmp),y
    29 716C 8D 6D 8C		 sta FNT1+3*$400+13*8+5
    30 716F 8D F5 A2		 sta FNT2+2*$400+94*8+5
    31 7172 C8			 iny
    32 7173 B1 87		 lda (kloc_tmp),y
    33 7175 8D 6E 8C		 sta FNT1+3*$400+13*8+6
    34 7178 8D F6 A2		 sta FNT2+2*$400+94*8+6
    35 717B C8			 iny
    36 717C B1 87		 lda (kloc_tmp),y
    37 717E 8D 6F 8C		 sta FNT1+3*$400+13*8+7
    38 7181 8D F7 A2		 sta FNT2+2*$400+94*8+7
Source: d:\Download\getris\tetris_add.asm
  2795 7184 60			 rts
  2796
  2797 7185			l_klo
  2798 7185 5A 62 6A 72 7A 82 +  :24 dta l(klocki_gfx+30*3+#*8)
  2799
  2800 719D			h_klo
  2801 719D DD DD DD DD DD DD +  :24 dta h(klocki_gfx+30*3+#*8)
  2802
  2803 				.endp
  2804
  2805
  2806 				/*
  2807 				  Licznik LEVEL
  2808 				*/
  2808
  2809 				.macro put_char ' '
  2810 				 tay
  2811 				 lda licz_level.l_lev,y
  2812 				 sta kloc_tmp
  2813 				 lda licz_level.h_lev,y
  2814 				 sta kloc_tmp+1
  2815 				
  2816 				 ldy #0
  2817 				 lda (kloc_tmp),y
  2818 				 tax
  2819 				 ora :3
  2820 				 sta :1
  2821 				 txa
  2822 				 ora :4
  2823 				 sta :2
  2824 				 iny
  2825 				 lda (kloc_tmp),y
  2826 				 tax
  2827 				 ora :3+1
  2828 				 sta :1+1
  2829 				 txa
  2830 				 ora :4+1
  2831 				 sta :2+1
  2832 				 iny
  2833 				 lda (kloc_tmp),y
  2834 				 tax
  2835 				 ora :3+2
  2836 				 sta :1+2
  2837 				 txa
  2838 				 ora :4+2
  2839 				 sta :2+2
  2840 				 iny
  2841 				 lda (kloc_tmp),y
  2842 				 tax
  2843 				 ora :3+3
  2844 				 sta :1+3
  2845 				 txa
  2846 				 ora :4+3
  2847 				 sta :2+3
  2848 				 iny
  2849 				 lda (kloc_tmp),y
  2850 				 tax
  2851 				 ora :3+4
  2852 				 sta :1+4
  2853 				 txa
  2854 				 ora :4+4
  2855 				 sta :2+4
  2856 				 iny
  2857 				 lda (kloc_tmp),y
  2858 				 tax
  2859 				 ora :3+5
  2860 				 sta :1+5
  2861 				 txa
  2862 				 ora :4+5
  2863 				 sta :2+5
  2864 				 iny
  2865 				 lda (kloc_tmp),y
  2866 				 tax
  2867 				 ora :3+6
  2868 				 sta :1+6
  2869 				 txa
  2870 				 ora :4+6
  2871 				 sta :2+6
  2872 				 iny
  2873 				 lda (kloc_tmp),y
  2874 				 tax
  2875 				 ora :3+7
  2876 				 sta :1+7
  2877 				 txa
  2878 				 ora :4+7
  2879 				 sta :2+7
  2880 				.endm
  2881
  2882
  2883 71B5			.proc licz_level
  2884
  2885 				; 14,15,16   Charset #4
  2886 				; 41,42,43   Charset #4
  2887
  2888 				; 97,98,99   Charset #3
  2889 				; 20,21,22   Charset #4
  2890
  2891 				;tlo1
  2892 				; 95,96,97
  2893 				; 98,7,99
  2894
  2895 				;tlo1
  2896 				; 100,101,102
  2897 				; 103,7,104
  2898
  2899 71B5 AC 92 76		 ldy level
  2900 71B8 C0 3B		 cpy #59
  2901 71BA D0 05		 bne skip
  2902 71BC A0 00		 ldy #0
  2903 71BE 8C 92 76		 sty level
  2904
  2905 71C1			skip
  2906 71C1 B9 5C 75		 lda l_licz,y
  2907 71C4 85 8F		 sta tmpZ
  2908 71C6 B9 98 75		 lda h_licz,y
  2909 71C9 85 90		 sta tmpZ+1
  2910
  2911 71CB A0 00		 ldy #0
  2912 71CD B1 8F		 lda (tmpZ),y
  2913 71CF			 put_char fnt1+4*$400+14*8  fnt2+3*$400+97*8  level_gfx+360+95*8  level_gfx+360+100*8
Macro: TETRIS.PUT_CHAR [Source: d:\Download\getris\tetris_add.asm]
     1 71CF A8			 tay
     2 71D0 B9 D4 75		 lda licz_level.l_lev,y
     3 71D3 85 87		 sta kloc_tmp
     4 71D5 B9 33 76		 lda licz_level.h_lev,y
     5 71D8 85 88		 sta kloc_tmp+1
     7 71DA A0 00		 ldy #0
     8 71DC B1 87		 lda (kloc_tmp),y
     9 71DE AA			 tax
    10 71DF 0D 60 DC		 ora LEVEL_GFX+360+95*8
    11 71E2 8D 70 90		 sta FNT1+4*$400+14*8
    12 71E5 8A			 txa
    13 71E6 0D 88 DC		 ora LEVEL_GFX+360+100*8
    14 71E9 8D 08 A7		 sta FNT2+3*$400+97*8
    15 71EC C8			 iny
    16 71ED B1 87		 lda (kloc_tmp),y
    17 71EF AA			 tax
    18 71F0 0D 61 DC		 ora LEVEL_GFX+360+95*8+1
    19 71F3 8D 71 90		 sta FNT1+4*$400+14*8+1
    20 71F6 8A			 txa
    21 71F7 0D 89 DC		 ora LEVEL_GFX+360+100*8+1
    22 71FA 8D 09 A7		 sta FNT2+3*$400+97*8+1
    23 71FD C8			 iny
    24 71FE B1 87		 lda (kloc_tmp),y
    25 7200 AA			 tax
    26 7201 0D 62 DC		 ora LEVEL_GFX+360+95*8+2
    27 7204 8D 72 90		 sta FNT1+4*$400+14*8+2
    28 7207 8A			 txa
    29 7208 0D 8A DC		 ora LEVEL_GFX+360+100*8+2
    30 720B 8D 0A A7		 sta FNT2+3*$400+97*8+2
    31 720E C8			 iny
    32 720F B1 87		 lda (kloc_tmp),y
    33 7211 AA			 tax
    34 7212 0D 63 DC		 ora LEVEL_GFX+360+95*8+3
    35 7215 8D 73 90		 sta FNT1+4*$400+14*8+3
    36 7218 8A			 txa
    37 7219 0D 8B DC		 ora LEVEL_GFX+360+100*8+3
    38 721C 8D 0B A7		 sta FNT2+3*$400+97*8+3
    39 721F C8			 iny
    40 7220 B1 87		 lda (kloc_tmp),y
    41 7222 AA			 tax
    42 7223 0D 64 DC		 ora LEVEL_GFX+360+95*8+4
    43 7226 8D 74 90		 sta FNT1+4*$400+14*8+4
    44 7229 8A			 txa
    45 722A 0D 8C DC		 ora LEVEL_GFX+360+100*8+4
    46 722D 8D 0C A7		 sta FNT2+3*$400+97*8+4
    47 7230 C8			 iny
    48 7231 B1 87		 lda (kloc_tmp),y
    49 7233 AA			 tax
    50 7234 0D 65 DC		 ora LEVEL_GFX+360+95*8+5
    51 7237 8D 75 90		 sta FNT1+4*$400+14*8+5
    52 723A 8A			 txa
    53 723B 0D 8D DC		 ora LEVEL_GFX+360+100*8+5
    54 723E 8D 0D A7		 sta FNT2+3*$400+97*8+5
    55 7241 C8			 iny
    56 7242 B1 87		 lda (kloc_tmp),y
    57 7244 AA			 tax
    58 7245 0D 66 DC		 ora LEVEL_GFX+360+95*8+6
    59 7248 8D 76 90		 sta FNT1+4*$400+14*8+6
    60 724B 8A			 txa
    61 724C 0D 8E DC		 ora LEVEL_GFX+360+100*8+6
    62 724F 8D 0E A7		 sta FNT2+3*$400+97*8+6
    63 7252 C8			 iny
    64 7253 B1 87		 lda (kloc_tmp),y
    65 7255 AA			 tax
    66 7256 0D 67 DC		 ora LEVEL_GFX+360+95*8+7
    67 7259 8D 77 90		 sta FNT1+4*$400+14*8+7
    68 725C 8A			 txa
    69 725D 0D 8F DC		 ora LEVEL_GFX+360+100*8+7
    70 7260 8D 0F A7		 sta FNT2+3*$400+97*8+7
Source: d:\Download\getris\tetris_add.asm
  2914 7263 A0 01		 ldy #1
  2915 7265 B1 8F		 lda (tmpZ),y
  2916 7267			 put_char fnt1+4*$400+15*8  fnt2+3*$400+98*8  level_gfx+360+96*8  level_gfx+360+101*8
Macro: TETRIS.PUT_CHAR [Source: d:\Download\getris\tetris_add.asm]
     1 7267 A8			 tay
     2 7268 B9 D4 75		 lda licz_level.l_lev,y
     3 726B 85 87		 sta kloc_tmp
     4 726D B9 33 76		 lda licz_level.h_lev,y
     5 7270 85 88		 sta kloc_tmp+1
     7 7272 A0 00		 ldy #0
     8 7274 B1 87		 lda (kloc_tmp),y
     9 7276 AA			 tax
    10 7277 0D 68 DC		 ora LEVEL_GFX+360+96*8
    11 727A 8D 78 90		 sta FNT1+4*$400+15*8
    12 727D 8A			 txa
    13 727E 0D 90 DC		 ora LEVEL_GFX+360+101*8
    14 7281 8D 10 A7		 sta FNT2+3*$400+98*8
    15 7284 C8			 iny
    16 7285 B1 87		 lda (kloc_tmp),y
    17 7287 AA			 tax
    18 7288 0D 69 DC		 ora LEVEL_GFX+360+96*8+1
    19 728B 8D 79 90		 sta FNT1+4*$400+15*8+1
    20 728E 8A			 txa
    21 728F 0D 91 DC		 ora LEVEL_GFX+360+101*8+1
    22 7292 8D 11 A7		 sta FNT2+3*$400+98*8+1
    23 7295 C8			 iny
    24 7296 B1 87		 lda (kloc_tmp),y
    25 7298 AA			 tax
    26 7299 0D 6A DC		 ora LEVEL_GFX+360+96*8+2
    27 729C 8D 7A 90		 sta FNT1+4*$400+15*8+2
    28 729F 8A			 txa
    29 72A0 0D 92 DC		 ora LEVEL_GFX+360+101*8+2
    30 72A3 8D 12 A7		 sta FNT2+3*$400+98*8+2
    31 72A6 C8			 iny
    32 72A7 B1 87		 lda (kloc_tmp),y
    33 72A9 AA			 tax
    34 72AA 0D 6B DC		 ora LEVEL_GFX+360+96*8+3
    35 72AD 8D 7B 90		 sta FNT1+4*$400+15*8+3
    36 72B0 8A			 txa
    37 72B1 0D 93 DC		 ora LEVEL_GFX+360+101*8+3
    38 72B4 8D 13 A7		 sta FNT2+3*$400+98*8+3
    39 72B7 C8			 iny
    40 72B8 B1 87		 lda (kloc_tmp),y
    41 72BA AA			 tax
    42 72BB 0D 6C DC		 ora LEVEL_GFX+360+96*8+4
    43 72BE 8D 7C 90		 sta FNT1+4*$400+15*8+4
    44 72C1 8A			 txa
    45 72C2 0D 94 DC		 ora LEVEL_GFX+360+101*8+4
    46 72C5 8D 14 A7		 sta FNT2+3*$400+98*8+4
    47 72C8 C8			 iny
    48 72C9 B1 87		 lda (kloc_tmp),y
    49 72CB AA			 tax
    50 72CC 0D 6D DC		 ora LEVEL_GFX+360+96*8+5
    51 72CF 8D 7D 90		 sta FNT1+4*$400+15*8+5
    52 72D2 8A			 txa
    53 72D3 0D 95 DC		 ora LEVEL_GFX+360+101*8+5
    54 72D6 8D 15 A7		 sta FNT2+3*$400+98*8+5
    55 72D9 C8			 iny
    56 72DA B1 87		 lda (kloc_tmp),y
    57 72DC AA			 tax
    58 72DD 0D 6E DC		 ora LEVEL_GFX+360+96*8+6
    59 72E0 8D 7E 90		 sta FNT1+4*$400+15*8+6
    60 72E3 8A			 txa
    61 72E4 0D 96 DC		 ora LEVEL_GFX+360+101*8+6
    62 72E7 8D 16 A7		 sta FNT2+3*$400+98*8+6
    63 72EA C8			 iny
    64 72EB B1 87		 lda (kloc_tmp),y
    65 72ED AA			 tax
    66 72EE 0D 6F DC		 ora LEVEL_GFX+360+96*8+7
    67 72F1 8D 7F 90		 sta FNT1+4*$400+15*8+7
    68 72F4 8A			 txa
    69 72F5 0D 97 DC		 ora LEVEL_GFX+360+101*8+7
    70 72F8 8D 17 A7		 sta FNT2+3*$400+98*8+7
Source: d:\Download\getris\tetris_add.asm
  2917 72FB A0 02		 ldy #2
  2918 72FD B1 8F		 lda (tmpZ),y
  2919 72FF			 put_char fnt1+4*$400+16*8  fnt2+3*$400+99*8  level_gfx+360+97*8  level_gfx+360+102*8
Macro: TETRIS.PUT_CHAR [Source: d:\Download\getris\tetris_add.asm]
     1 72FF A8			 tay
     2 7300 B9 D4 75		 lda licz_level.l_lev,y
     3 7303 85 87		 sta kloc_tmp
     4 7305 B9 33 76		 lda licz_level.h_lev,y
     5 7308 85 88		 sta kloc_tmp+1
     7 730A A0 00		 ldy #0
     8 730C B1 87		 lda (kloc_tmp),y
     9 730E AA			 tax
    10 730F 0D 70 DC		 ora LEVEL_GFX+360+97*8
    11 7312 8D 80 90		 sta FNT1+4*$400+16*8
    12 7315 8A			 txa
    13 7316 0D 98 DC		 ora LEVEL_GFX+360+102*8
    14 7319 8D 18 A7		 sta FNT2+3*$400+99*8
    15 731C C8			 iny
    16 731D B1 87		 lda (kloc_tmp),y
    17 731F AA			 tax
    18 7320 0D 71 DC		 ora LEVEL_GFX+360+97*8+1
    19 7323 8D 81 90		 sta FNT1+4*$400+16*8+1
    20 7326 8A			 txa
    21 7327 0D 99 DC		 ora LEVEL_GFX+360+102*8+1
    22 732A 8D 19 A7		 sta FNT2+3*$400+99*8+1
    23 732D C8			 iny
    24 732E B1 87		 lda (kloc_tmp),y
    25 7330 AA			 tax
    26 7331 0D 72 DC		 ora LEVEL_GFX+360+97*8+2
    27 7334 8D 82 90		 sta FNT1+4*$400+16*8+2
    28 7337 8A			 txa
    29 7338 0D 9A DC		 ora LEVEL_GFX+360+102*8+2
    30 733B 8D 1A A7		 sta FNT2+3*$400+99*8+2
    31 733E C8			 iny
    32 733F B1 87		 lda (kloc_tmp),y
    33 7341 AA			 tax
    34 7342 0D 73 DC		 ora LEVEL_GFX+360+97*8+3
    35 7345 8D 83 90		 sta FNT1+4*$400+16*8+3
    36 7348 8A			 txa
    37 7349 0D 9B DC		 ora LEVEL_GFX+360+102*8+3
    38 734C 8D 1B A7		 sta FNT2+3*$400+99*8+3
    39 734F C8			 iny
    40 7350 B1 87		 lda (kloc_tmp),y
    41 7352 AA			 tax
    42 7353 0D 74 DC		 ora LEVEL_GFX+360+97*8+4
    43 7356 8D 84 90		 sta FNT1+4*$400+16*8+4
    44 7359 8A			 txa
    45 735A 0D 9C DC		 ora LEVEL_GFX+360+102*8+4
    46 735D 8D 1C A7		 sta FNT2+3*$400+99*8+4
    47 7360 C8			 iny
    48 7361 B1 87		 lda (kloc_tmp),y
    49 7363 AA			 tax
    50 7364 0D 75 DC		 ora LEVEL_GFX+360+97*8+5
    51 7367 8D 85 90		 sta FNT1+4*$400+16*8+5
    52 736A 8A			 txa
    53 736B 0D 9D DC		 ora LEVEL_GFX+360+102*8+5
    54 736E 8D 1D A7		 sta FNT2+3*$400+99*8+5
    55 7371 C8			 iny
    56 7372 B1 87		 lda (kloc_tmp),y
    57 7374 AA			 tax
    58 7375 0D 76 DC		 ora LEVEL_GFX+360+97*8+6
    59 7378 8D 86 90		 sta FNT1+4*$400+16*8+6
    60 737B 8A			 txa
    61 737C 0D 9E DC		 ora LEVEL_GFX+360+102*8+6
    62 737F 8D 1E A7		 sta FNT2+3*$400+99*8+6
    63 7382 C8			 iny
    64 7383 B1 87		 lda (kloc_tmp),y
    65 7385 AA			 tax
    66 7386 0D 77 DC		 ora LEVEL_GFX+360+97*8+7
    67 7389 8D 87 90		 sta FNT1+4*$400+16*8+7
    68 738C 8A			 txa
    69 738D 0D 9F DC		 ora LEVEL_GFX+360+102*8+7
    70 7390 8D 1F A7		 sta FNT2+3*$400+99*8+7
Source: d:\Download\getris\tetris_add.asm
  2920 				 
  2921 7393 A0 03		 ldy #3
  2922 7395 B1 8F		 lda (tmpZ),y
  2923 7397			 put_char fnt1+4*$400+41*8  fnt2+4*$400+20*8  level_gfx+360+98*8  level_gfx+360+103*8
Macro: TETRIS.PUT_CHAR [Source: d:\Download\getris\tetris_add.asm]
     1 7397 A8			 tay
     2 7398 B9 D4 75		 lda licz_level.l_lev,y
     3 739B 85 87		 sta kloc_tmp
     4 739D B9 33 76		 lda licz_level.h_lev,y
     5 73A0 85 88		 sta kloc_tmp+1
     7 73A2 A0 00		 ldy #0
     8 73A4 B1 87		 lda (kloc_tmp),y
     9 73A6 AA			 tax
    10 73A7 0D 78 DC		 ora LEVEL_GFX+360+98*8
    11 73AA 8D 48 91		 sta FNT1+4*$400+41*8
    12 73AD 8A			 txa
    13 73AE 0D A0 DC		 ora LEVEL_GFX+360+103*8
    14 73B1 8D A0 A8		 sta FNT2+4*$400+20*8
    15 73B4 C8			 iny
    16 73B5 B1 87		 lda (kloc_tmp),y
    17 73B7 AA			 tax
    18 73B8 0D 79 DC		 ora LEVEL_GFX+360+98*8+1
    19 73BB 8D 49 91		 sta FNT1+4*$400+41*8+1
    20 73BE 8A			 txa
    21 73BF 0D A1 DC		 ora LEVEL_GFX+360+103*8+1
    22 73C2 8D A1 A8		 sta FNT2+4*$400+20*8+1
    23 73C5 C8			 iny
    24 73C6 B1 87		 lda (kloc_tmp),y
    25 73C8 AA			 tax
    26 73C9 0D 7A DC		 ora LEVEL_GFX+360+98*8+2
    27 73CC 8D 4A 91		 sta FNT1+4*$400+41*8+2
    28 73CF 8A			 txa
    29 73D0 0D A2 DC		 ora LEVEL_GFX+360+103*8+2
    30 73D3 8D A2 A8		 sta FNT2+4*$400+20*8+2
    31 73D6 C8			 iny
    32 73D7 B1 87		 lda (kloc_tmp),y
    33 73D9 AA			 tax
    34 73DA 0D 7B DC		 ora LEVEL_GFX+360+98*8+3
    35 73DD 8D 4B 91		 sta FNT1+4*$400+41*8+3
    36 73E0 8A			 txa
    37 73E1 0D A3 DC		 ora LEVEL_GFX+360+103*8+3
    38 73E4 8D A3 A8		 sta FNT2+4*$400+20*8+3
    39 73E7 C8			 iny
    40 73E8 B1 87		 lda (kloc_tmp),y
    41 73EA AA			 tax
    42 73EB 0D 7C DC		 ora LEVEL_GFX+360+98*8+4
    43 73EE 8D 4C 91		 sta FNT1+4*$400+41*8+4
    44 73F1 8A			 txa
    45 73F2 0D A4 DC		 ora LEVEL_GFX+360+103*8+4
    46 73F5 8D A4 A8		 sta FNT2+4*$400+20*8+4
    47 73F8 C8			 iny
    48 73F9 B1 87		 lda (kloc_tmp),y
    49 73FB AA			 tax
    50 73FC 0D 7D DC		 ora LEVEL_GFX+360+98*8+5
    51 73FF 8D 4D 91		 sta FNT1+4*$400+41*8+5
    52 7402 8A			 txa
    53 7403 0D A5 DC		 ora LEVEL_GFX+360+103*8+5
    54 7406 8D A5 A8		 sta FNT2+4*$400+20*8+5
    55 7409 C8			 iny
    56 740A B1 87		 lda (kloc_tmp),y
    57 740C AA			 tax
    58 740D 0D 7E DC		 ora LEVEL_GFX+360+98*8+6
    59 7410 8D 4E 91		 sta FNT1+4*$400+41*8+6
    60 7413 8A			 txa
    61 7414 0D A6 DC		 ora LEVEL_GFX+360+103*8+6
    62 7417 8D A6 A8		 sta FNT2+4*$400+20*8+6
    63 741A C8			 iny
    64 741B B1 87		 lda (kloc_tmp),y
    65 741D AA			 tax
    66 741E 0D 7F DC		 ora LEVEL_GFX+360+98*8+7
    67 7421 8D 4F 91		 sta FNT1+4*$400+41*8+7
    68 7424 8A			 txa
    69 7425 0D A7 DC		 ora LEVEL_GFX+360+103*8+7
    70 7428 8D A7 A8		 sta FNT2+4*$400+20*8+7
Source: d:\Download\getris\tetris_add.asm
  2924 742B A0 04		 ldy #4
  2925 742D B1 8F		 lda (tmpZ),y
  2926 742F			 put_char fnt1+4*$400+42*8  fnt2+4*$400+21*8  level_gfx+360+7*8   level_gfx+360+7*8
Macro: TETRIS.PUT_CHAR [Source: d:\Download\getris\tetris_add.asm]
     1 742F A8			 tay
     2 7430 B9 D4 75		 lda licz_level.l_lev,y
     3 7433 85 87		 sta kloc_tmp
     4 7435 B9 33 76		 lda licz_level.h_lev,y
     5 7438 85 88		 sta kloc_tmp+1
     7 743A A0 00		 ldy #0
     8 743C B1 87		 lda (kloc_tmp),y
     9 743E AA			 tax
    10 743F 0D A0 D9		 ora LEVEL_GFX+360+7*8
    11 7442 8D 50 91		 sta FNT1+4*$400+42*8
    12 7445 8A			 txa
    13 7446 0D A0 D9		 ora LEVEL_GFX+360+7*8
    14 7449 8D A8 A8		 sta FNT2+4*$400+21*8
    15 744C C8			 iny
    16 744D B1 87		 lda (kloc_tmp),y
    17 744F AA			 tax
    18 7450 0D A1 D9		 ora LEVEL_GFX+360+7*8+1
    19 7453 8D 51 91		 sta FNT1+4*$400+42*8+1
    20 7456 8A			 txa
    21 7457 0D A1 D9		 ora LEVEL_GFX+360+7*8+1
    22 745A 8D A9 A8		 sta FNT2+4*$400+21*8+1
    23 745D C8			 iny
    24 745E B1 87		 lda (kloc_tmp),y
    25 7460 AA			 tax
    26 7461 0D A2 D9		 ora LEVEL_GFX+360+7*8+2
    27 7464 8D 52 91		 sta FNT1+4*$400+42*8+2
    28 7467 8A			 txa
    29 7468 0D A2 D9		 ora LEVEL_GFX+360+7*8+2
    30 746B 8D AA A8		 sta FNT2+4*$400+21*8+2
    31 746E C8			 iny
    32 746F B1 87		 lda (kloc_tmp),y
    33 7471 AA			 tax
    34 7472 0D A3 D9		 ora LEVEL_GFX+360+7*8+3
    35 7475 8D 53 91		 sta FNT1+4*$400+42*8+3
    36 7478 8A			 txa
    37 7479 0D A3 D9		 ora LEVEL_GFX+360+7*8+3
    38 747C 8D AB A8		 sta FNT2+4*$400+21*8+3
    39 747F C8			 iny
    40 7480 B1 87		 lda (kloc_tmp),y
    41 7482 AA			 tax
    42 7483 0D A4 D9		 ora LEVEL_GFX+360+7*8+4
    43 7486 8D 54 91		 sta FNT1+4*$400+42*8+4
    44 7489 8A			 txa
    45 748A 0D A4 D9		 ora LEVEL_GFX+360+7*8+4
    46 748D 8D AC A8		 sta FNT2+4*$400+21*8+4
    47 7490 C8			 iny
    48 7491 B1 87		 lda (kloc_tmp),y
    49 7493 AA			 tax
    50 7494 0D A5 D9		 ora LEVEL_GFX+360+7*8+5
    51 7497 8D 55 91		 sta FNT1+4*$400+42*8+5
    52 749A 8A			 txa
    53 749B 0D A5 D9		 ora LEVEL_GFX+360+7*8+5
    54 749E 8D AD A8		 sta FNT2+4*$400+21*8+5
    55 74A1 C8			 iny
    56 74A2 B1 87		 lda (kloc_tmp),y
    57 74A4 AA			 tax
    58 74A5 0D A6 D9		 ora LEVEL_GFX+360+7*8+6
    59 74A8 8D 56 91		 sta FNT1+4*$400+42*8+6
    60 74AB 8A			 txa
    61 74AC 0D A6 D9		 ora LEVEL_GFX+360+7*8+6
    62 74AF 8D AE A8		 sta FNT2+4*$400+21*8+6
    63 74B2 C8			 iny
    64 74B3 B1 87		 lda (kloc_tmp),y
    65 74B5 AA			 tax
    66 74B6 0D A7 D9		 ora LEVEL_GFX+360+7*8+7
    67 74B9 8D 57 91		 sta FNT1+4*$400+42*8+7
    68 74BC 8A			 txa
    69 74BD 0D A7 D9		 ora LEVEL_GFX+360+7*8+7
    70 74C0 8D AF A8		 sta FNT2+4*$400+21*8+7
Source: d:\Download\getris\tetris_add.asm
  2927 74C3 A0 05		 ldy #5
  2928 74C5 B1 8F		 lda (tmpZ),y
  2929 74C7			 put_char fnt1+4*$400+43*8  fnt2+4*$400+22*8  level_gfx+360+99*8  level_gfx+360+104*8
Macro: TETRIS.PUT_CHAR [Source: d:\Download\getris\tetris_add.asm]
     1 74C7 A8			 tay
     2 74C8 B9 D4 75		 lda licz_level.l_lev,y
     3 74CB 85 87		 sta kloc_tmp
     4 74CD B9 33 76		 lda licz_level.h_lev,y
     5 74D0 85 88		 sta kloc_tmp+1
     7 74D2 A0 00		 ldy #0
     8 74D4 B1 87		 lda (kloc_tmp),y
     9 74D6 AA			 tax
    10 74D7 0D 80 DC		 ora LEVEL_GFX+360+99*8
    11 74DA 8D 58 91		 sta FNT1+4*$400+43*8
    12 74DD 8A			 txa
    13 74DE 0D A8 DC		 ora LEVEL_GFX+360+104*8
    14 74E1 8D B0 A8		 sta FNT2+4*$400+22*8
    15 74E4 C8			 iny
    16 74E5 B1 87		 lda (kloc_tmp),y
    17 74E7 AA			 tax
    18 74E8 0D 81 DC		 ora LEVEL_GFX+360+99*8+1
    19 74EB 8D 59 91		 sta FNT1+4*$400+43*8+1
    20 74EE 8A			 txa
    21 74EF 0D A9 DC		 ora LEVEL_GFX+360+104*8+1
    22 74F2 8D B1 A8		 sta FNT2+4*$400+22*8+1
    23 74F5 C8			 iny
    24 74F6 B1 87		 lda (kloc_tmp),y
    25 74F8 AA			 tax
    26 74F9 0D 82 DC		 ora LEVEL_GFX+360+99*8+2
    27 74FC 8D 5A 91		 sta FNT1+4*$400+43*8+2
    28 74FF 8A			 txa
    29 7500 0D AA DC		 ora LEVEL_GFX+360+104*8+2
    30 7503 8D B2 A8		 sta FNT2+4*$400+22*8+2
    31 7506 C8			 iny
    32 7507 B1 87		 lda (kloc_tmp),y
    33 7509 AA			 tax
    34 750A 0D 83 DC		 ora LEVEL_GFX+360+99*8+3
    35 750D 8D 5B 91		 sta FNT1+4*$400+43*8+3
    36 7510 8A			 txa
    37 7511 0D AB DC		 ora LEVEL_GFX+360+104*8+3
    38 7514 8D B3 A8		 sta FNT2+4*$400+22*8+3
    39 7517 C8			 iny
    40 7518 B1 87		 lda (kloc_tmp),y
    41 751A AA			 tax
    42 751B 0D 84 DC		 ora LEVEL_GFX+360+99*8+4
    43 751E 8D 5C 91		 sta FNT1+4*$400+43*8+4
    44 7521 8A			 txa
    45 7522 0D AC DC		 ora LEVEL_GFX+360+104*8+4
    46 7525 8D B4 A8		 sta FNT2+4*$400+22*8+4
    47 7528 C8			 iny
    48 7529 B1 87		 lda (kloc_tmp),y
    49 752B AA			 tax
    50 752C 0D 85 DC		 ora LEVEL_GFX+360+99*8+5
    51 752F 8D 5D 91		 sta FNT1+4*$400+43*8+5
    52 7532 8A			 txa
    53 7533 0D AD DC		 ora LEVEL_GFX+360+104*8+5
    54 7536 8D B5 A8		 sta FNT2+4*$400+22*8+5
    55 7539 C8			 iny
    56 753A B1 87		 lda (kloc_tmp),y
    57 753C AA			 tax
    58 753D 0D 86 DC		 ora LEVEL_GFX+360+99*8+6
    59 7540 8D 5E 91		 sta FNT1+4*$400+43*8+6
    60 7543 8A			 txa
    61 7544 0D AE DC		 ora LEVEL_GFX+360+104*8+6
    62 7547 8D B6 A8		 sta FNT2+4*$400+22*8+6
    63 754A C8			 iny
    64 754B B1 87		 lda (kloc_tmp),y
    65 754D AA			 tax
    66 754E 0D 87 DC		 ora LEVEL_GFX+360+99*8+7
    67 7551 8D 5F 91		 sta FNT1+4*$400+43*8+7
    68 7554 8A			 txa
    69 7555 0D AF DC		 ora LEVEL_GFX+360+104*8+7
    70 7558 8D B7 A8		 sta FNT2+4*$400+22*8+7
Source: d:\Download\getris\tetris_add.asm
  2930 755B 60			 rts
  2931
  2932
  2933 755C			l_licz
  2934 755C 00 06 0C 12 18 1E +  :60 dta l(level_gfx+#*6)
  2935
  2936 7598			h_licz
  2937 7598 D8 D8 D8 D8 D8 D8 +  :60 dta h(level_gfx+#*6)
  2938
  2939 75D4			l_lev
  2940 75D4 68 70 78 80 88 90 +  :95 dta l(level_gfx+360+#*8)
  2941
  2942 7633			h_lev
  2943 7633 D9 D9 D9 D9 D9 D9 +  :95 dta h(level_gfx+360+#*8)
  2944
  2945 7692 00			level brk
  2946 				.endp
  2947
  2948
  2949 				/*
  2950 				  Licznik SCORE
  2951 				*/
  2951
  2952 7693			.proc licznik
  2953
  2954 7693 A2 06		 ldx #6
  2955
  2956 7695			lp
  2957 7695 BD CD 76		 lda count,x
  2958 7698 C9 0A		 cmp #10
  2959 769A 90 09		 bcc skp
  2960 769C 38			 sec
  2961 769D E9 0A		 sbc #10
  2962 769F 9D CD 76		 sta count,x
  2963 76A2 FE CC 76		 inc count-1,x
  2964
  2965 76A5			skp
  2966 76A5 CA			 dex
  2967 76A6 D0 ED		 bne lp
  2968 				 
  2969
  2970 				/*
  2971 				 lda count+6
  2972 				 cmp #10
  2973 				 bcc t1
  2974 				 sec
  2975 				 sbc #10
  2976 				 sta count+6
  2977 				 inc count+5
  2978
  2979 				t1
  2980 				 lda count+5
  2981 				 cmp #10
  2982 				 bcc t2
  2983 				 sec
  2984 				 sbc #10
  2985 				 sta count+5
  2986 				 inc count+4
  2987
  2988 				t2
  2989 				 lda count+4
  2990 				 cmp #10
  2991 				 bcc t3
  2992 				 sec
  2993 				 sbc #10
  2994 				 sta count+4
  2995 				 inc count+3
  2996
  2997 				t3
  2998 				 lda count+3
  2999 				 cmp #10
  3000 				 bcc t4
  3001 				 sec
  3002 				 sbc #10
  3003 				 sta count+3
  3004 				 inc count+2
  3005
  3006 				t4
  3007 				 lda count+2
  3008 				 cmp #10
  3009 				 bcc t5
  3010 				 sec
  3011 				 sbc #10
  3012 				 sta count+2
  3013 				 inc count+1
  3014
  3015 				t5
  3016 				 lda count+1
  3017 				 cmp #10
  3018 				 bcc t6
  3019 				 sec
  3020 				 sbc #10
  3021 				 sta count+1
  3022 				 inc count
  3023
  3024 				t6
  3025 				 rts
  3026 				*/
  3026
  3027
  3028 76A8 A2 00		display ldx #0
  3029 76AA BD CD 76		dsp lda count,x
  3030
  3031 76AD 29 0F		 and #%00001111
  3032 76AF 18			 clc
  3033 76B0 69 B9		 adc #"Y"*
  3034 76B2 9D 5E B1		 sta text1+7*40+30,x
  3035 76B5 69 FF		 adc #$ff
  3036 76B7 9D 5E B7		 sta text2+7*40+30,x
  3037 				 
  3038 76BA E8			 inx
  3039 76BB E0 07		 cpx #7
  3040 76BD 90 EB		 bcc dsp
  3041 76BF 60			 rts
  3042
  3043
  3044 76C0			reset
  3045 76C0 A9 00		 lda #0
  3046 76C2 A2 06		 ldx #6
  3047
  3048 76C4			res
  3049 76C4 9D CD 76		 sta count,x
  3050 76C7 CA			 dex
  3051 76C8 10 FA		 bpl res
  3052 76CA 4C A8 76		 jmp display
  3053 				 
  3054
  3055 76CD 00 00 00 00 00 00 + count :7 brk
  3056
  3057 				.endp
  3058
  3059
  3060 				/*
  3061 				 adresy procedur dla klockow
  3062
  3063 				;77    **
  3064 				;CDE    **
  3065 				;SSS   ***
  3066 				t_klocek1
  3067 				 dta d' 7 '*
  3068 				 dta d' D '*
  3069 				 dta d' S '*
  3070
  3071 				 dta d' 7 '*
  3072 				 dta d' D '*
  3073 				 dta d' SS'*
  3074
  3075 				 dta d'   '*
  3076 				 dta d' EE'*
  3077 				 dta d' SS'*
  3078
  3079 				 dta d'   '*
  3080 				 dta d' EE'*
  3081 				 dta d'SS '*
  3082
  3083 				 dta d'   '*
  3084 				 dta d'EE '*
  3085 				 dta d' SS'*
  3086
  3087 				 dta d'   '*
  3088 				 dta d'EEE'*
  3089 				 dta d' S '*
  3090
  3091 				 dta d'  7'*
  3092 				 dta d'  D'*
  3093 				 dta d'SSS'*
  3094
  3095 				 dta d'77 '*
  3096 				 dta d'DD '*
  3097 				 dta d'S  '*
  3098
  3099 				 dta d' 7 '*
  3100 				 dta d'EDE'*
  3101 				 dta d' S '*
  3102
  3103 				;<<    **
  3104 				;IJK    **
  3105 				;YYY   ***
  3106 				t_klocek2
  3107 				 dta d' < '*
  3108 				 dta d' J '*
  3109 				 dta d' Y '*
  3110
  3111 				 dta d' < '*
  3112 				 dta d' J '*
  3113 				 dta d' YY'*
  3114
  3115 				 dta d'   '*
  3116 				 dta d' KK'*
  3117 				 dta d' YY'*
  3118
  3119 				 dta d'   '*
  3120 				 dta d' KK'*
  3121 				 dta d'YY '*
  3122
  3123 				 dta d'   '*
  3124 				 dta d'KK '*
  3125 				 dta d' YY'*
  3126
  3127 				 dta d'   '*
  3128 				 dta d'KKK'*
  3129 				 dta d' Y '*
  3130
  3131 				 dta d'  <'*
  3132 				 dta d'  J'*
  3133 				 dta d'YYY'*
  3134
  3135 				 dta d'<< '*
  3136 				 dta d'JJ '*
  3137 				 dta d'Y  '*
  3138
  3139 				 dta d' < '*
  3140 				 dta d'KJK'*
  3141 				 dta d' Y '*
  3142 				*/
  3142
  3143
  3144
  3145 76D4			l_klocek
  3146 76D4 81 C3 81 C3		 dta l(klocek1_0,klocek1_1,klocek1_0,klocek1_1)
  3147 76D8 08 5E D9 2F		 dta l(klocek2_0,klocek2_1,klocek2_2,klocek2_3)
  3148 76DC A3 A3 A3 A3		 dta l(klocek3_0,klocek3_0,klocek3_0,klocek3_0)
  3149 76E0 19 9B 19 9B		 dta l(klocek4_0,klocek4_1,klocek4_0,klocek4_1)
  3150 76E4 F1 4C F1 4C		 dta l(klocek5_0,klocek5_1,klocek5_0,klocek5_1)
  3151 76E8 53 CE 44 B8		 dta l(klocek7_0,klocek7_1,klocek7_2,klocek7_3)
  3152 76EC 2E C6 30 BA		 dta l(klocek8_0,klocek8_1,klocek8_2,klocek8_3)
  3153 76F0 24 A9 31 C4		 dta l(klocek9_0,klocek9_1,klocek9_2,klocek9_3)
  3154 76F4 55 D9 2D AF		 dta l(klocek10_0,klocek10_1,klocek10_2,klocek10_3)
  3155 76F8 C2 C2 C2 C2		 dta l(klocek6_0,klocek6_0,klocek6_0,klocek6_0)
  3156
  3157 76FC			h_klocek
  3158 76FC 5C 5C 5C 5C		 dta h(klocek1_0,klocek1_1,klocek1_0,klocek1_1)
  3159 7700 5D 5D 5D 5E		 dta h(klocek2_0,klocek2_1,klocek2_2,klocek2_3)
  3160 7704 5E 5E 5E 5E		 dta h(klocek3_0,klocek3_0,klocek3_0,klocek3_0)
  3161 7708 5F 5F 5F 5F		 dta h(klocek4_0,klocek4_1,klocek4_0,klocek4_1)
  3162 770C 5F 60 5F 60		 dta h(klocek5_0,klocek5_1,klocek5_0,klocek5_1)
  3163 7710 61 61 62 62		 dta h(klocek7_0,klocek7_1,klocek7_2,klocek7_3)
  3164 7714 63 63 64 64		 dta h(klocek8_0,klocek8_1,klocek8_2,klocek8_3)
  3165 7718 65 65 66 66		 dta h(klocek9_0,klocek9_1,klocek9_2,klocek9_3)
  3166 771C 67 67 68 68		 dta h(klocek10_0,klocek10_1,klocek10_2,klocek10_3)
  3167 7720 60 60 60 60		 dta h(klocek6_0,klocek6_0,klocek6_0,klocek6_0)
  3168
  3169 7724			l_test
  3170 7724 97 E3 97 E3		 dta l(klocek1_0.test,klocek1_1.test,klocek1_0.test,klocek1_1.test)
  3171 7728 26 91 F7 62		 dta l(klocek2_0.test,klocek2_1.test,klocek2_2.test,klocek2_3.test)
  3172 772C D1 D1 D1 D1		 dta l(klocek3_0.test,klocek3_0.test,klocek3_0.test,klocek3_0.test)
  3173 7730 53 B9 53 B9		 dta l(klocek4_0.test,klocek4_1.test,klocek4_0.test,klocek4_1.test)
  3174 7734 14 7A 14 7A		 dta l(klocek5_0.test,klocek5_1.test,klocek5_0.test,klocek5_1.test)
  3175 7738 86 FC 77 E6		 dta l(klocek7_0.test,klocek7_1.test,klocek7_2.test,klocek7_3.test)
  3176 773C 6B EC 66 E0		 dta l(klocek8_0.test,klocek8_1.test,klocek8_2.test,klocek8_3.test)
  3177 7740 55 DE 69 01		 dta l(klocek9_0.test,klocek9_1.test,klocek9_2.test,klocek9_3.test)
  3178 7744 8A FC 61 D2		 dta l(klocek10_0.test,klocek10_1.test,klocek10_2.test,klocek10_3.test)
  3179 7748 FF FF FF FF		 dta l(klocek6_0.test,klocek6_0.test,klocek6_0.test,klocek6_0.test)
  3180
  3181 774C			h_test
  3182 774C 5C 5C 5C 5C		 dta h(klocek1_0.test,klocek1_1.test,klocek1_0.test,klocek1_1.test)
  3183 7750 5D 5D 5D 5E		 dta h(klocek2_0.test,klocek2_1.test,klocek2_2.test,klocek2_3.test)
  3184 7754 5E 5E 5E 5E		 dta h(klocek3_0.test,klocek3_0.test,klocek3_0.test,klocek3_0.test)
  3185 7758 5F 5F 5F 5F		 dta h(klocek4_0.test,klocek4_1.test,klocek4_0.test,klocek4_1.test)
  3186 775C 60 60 60 60		 dta h(klocek5_0.test,klocek5_1.test,klocek5_0.test,klocek5_1.test)
  3187 7760 61 61 62 62		 dta h(klocek7_0.test,klocek7_1.test,klocek7_2.test,klocek7_3.test)
  3188 7764 63 63 64 64		 dta h(klocek8_0.test,klocek8_1.test,klocek8_2.test,klocek8_3.test)
  3189 7768 65 65 66 67		 dta h(klocek9_0.test,klocek9_1.test,klocek9_2.test,klocek9_3.test)
  3190 776C 67 67 68 68		 dta h(klocek10_0.test,klocek10_1.test,klocek10_2.test,klocek10_3.test)
  3191 7770 60 60 60 60		 dta h(klocek6_0.test,klocek6_0.test,klocek6_0.test,klocek6_0.test)
  3192
  3193 7774			l_scr1
  3194 7774 0C 34 5C 84 AC D4 +  :28 dta l(text1_null+12+#*40)
  3195
  3196 7790			h_scr1
  3197 7790 B0 B0 B0 B0 B0 B0 +  :28 dta h(text1_null+12+#*40)
  3198
  3199
  3200 77AC			l_scr2
  3201 77AC 0C 34 5C 84 AC D4 +  :28 dta l(text2_null+12+#*40)
  3202
  3203 77C8			h_scr2
  3204 77C8 B6 B6 B6 B6 B6 B6 +  :28 dta h(text2_null+12+#*40)
  3205
  3206
  3207 77E4			l_buf
  3208 77E4 00 0F 1E 2D 3C 4B +  :height+10 dta l(buf+#*width)
  3209
  3210 78BF			h_buf
  3211 78BF 02 02 02 02 02 02 +  :height+10 dta h(buf+#*width)
  3212
  3213
  3214 				.macro loa_buf
  3215 				 lda l_buf:2
  3216 				 sta :1
  3217 				 lda h_buf:2
  3218 				 sta :1+1
  3219 				.endm
  1442
  1443 				.endl 
  1444
  1445
  1446 				/*
  1447 				  Zapamietujemy kolory i kasujemy je
  1448 				*/
  1448
  1449 799A			.proc save_color
  1450
  1451 799A A9 00		 lda #0
  1452 799C 20 AD 79		 jsr scolor
  1453
  1454 799F EE B4 79		 inc sladr+2
  1455 79A2 EE B9 79		 inc shadr+2
  1456 79A5 EE C5 79		 inc sat+2
  1457 79A8 EE CB 79		 inc col+2
  1458 				 
  1459 79AB A9 BA		 lda <color_nr
  1460
  1461 79AD			scolor
  1462 79AD 8D D2 79		 sta c_max
  1463 79B0 A2 00		 ldx #0
  1464 79B2			save_l
  1465 79B2 BD B0 BA		sladr lda scren_lcol,x
  1466 79B5 85 83		 sta tmp
  1467 79B7 BD 6A BC		shadr lda scren_hcol,x
  1468 79BA 85 84		 sta tmp+1
  1469
  1470 79BC A0 01		 ldy #1
  1471 79BE B1 83		 lda (tmp),y
  1472 79C0 48			 pha
  1473 79C1 29 0F		 and #$0f
  1474 79C3 9D 00 C0		sat sta t_satur,x
  1475 79C6 68			 pla
  1476 79C7 29 F0		 and #$f0
  1477 79C9 9D 00 C8		col sta t_color,x
  1478
  1479 79CC A9 00		 lda #0        ; black screen (all colors = $00)
  1480 79CE 91 83		 sta (tmp),y
  1481
  1482 79D0 E8			 inx
  1483 79D1 E0 00		 cpx #0
  1484 = 79D2			c_max equ *-1
  1485 79D3 D0 DD		 bne save_l
  1486 79D5 60			 rts
  1487
  1488 				.endp
  1489
  1490
  1491 				/*
  1492 				  FADE in
  1493 				*/
  1493
  1494 79D6			.proc fade_in
  1495
  1496 79D6 A9 BA		 lda >scren_lcol
  1497 79D8 8D 04 7A		 sta sladr+2
  1498 79DB A9 BC		 lda >scren_hcol
  1499 79DD 8D 09 7A		 sta shadr+2
  1500 79E0 A9 C0		 lda >t_satur
  1501 79E2 8D 15 7A		 sta sat+2
  1502 79E5 A9 C8		 lda >t_color
  1503 79E7 8D 1E 7A		 sta col+2
  1504
  1505 79EA A9 00		 lda #0
  1506 79EC 20 FD 79		 jsr fadein
  1507
  1508 79EF EE 04 7A		 inc sladr+2
  1509 79F2 EE 09 7A		 inc shadr+2
  1510 79F5 EE 15 7A		 inc sat+2
  1511 79F8 EE 1E 7A		 inc col+2
  1512 				 
  1513 79FB A9 BA		 lda <color_nr
  1514
  1515 79FD			fadein
  1516 79FD 8D 2D 7A		 sta cmax
  1517 				 
  1518 7A00 A2 00		 ldx #0
  1519 7A02			fade_l
  1520 7A02 BD B0 BA		sladr lda scren_lcol,x
  1521 7A05 85 83		 sta tmp
  1522 7A07 BD 6A BC		shadr lda scren_hcol,x
  1523 7A0A 85 84		 sta tmp+1
  1524
  1525 7A0C A0 01		 ldy #1
  1526 7A0E B1 83		 lda (tmp),y
  1527 7A10 A8			 tay
  1528
  1529 7A11 29 0F		 and #$0f
  1530 7A13 DD 00 C0		sat cmp t_satur,x
  1531 7A16 F0 01		 beq skp0
  1532
  1533 7A18 C8			 iny
  1534
  1535 7A19			skp0
  1536
  1537 7A19 98			 tya
  1538 7A1A 29 F0		 and #$f0
  1539 7A1C DD 00 C8		col cmp t_color,x
  1540 7A1F F0 05		 beq skp1
  1541
  1542 7A21 98			 tya
  1543 7A22 18			 clc
  1544 7A23 69 10		 adc #$10
  1545 7A25 A8			 tay
  1546
  1547 7A26			skp1
  1548 7A26 98			 tya
  1549
  1550 7A27 A0 01		 ldy #1
  1551 7A29 91 83		 sta (tmp),y
  1552
  1553 7A2B E8			 inx
  1554 7A2C E0 00		 cpx #0
  1555 = 7A2D			cmax equ *-1
  1556 7A2E D0 D2		 bne fade_l
  1557 7A30 60			 rts
  1558
  1559 				.endp
  1560
  1561
  1562 				/*
  1563 				  FADE out
  1564 				*/
  1564
  1565 7A31			.proc fade_out
  1566
  1567 7A31 A9 BA		 lda >scren_lcol
  1568 7A33 8D 4F 7A		 sta sladr+2
  1569 7A36 A9 BC		 lda >scren_hcol
  1570 7A38 8D 54 7A		 sta shadr+2
  1571
  1572 7A3B A9 00		 lda #0
  1573 7A3D 20 48 7A		 jsr fadeout
  1574
  1575 7A40 EE 4F 7A		 inc sladr+2
  1576 7A43 EE 54 7A		 inc shadr+2
  1577 				 
  1578 7A46 A9 BA		 lda <color_nr
  1579
  1580 7A48			fadeout
  1581 7A48 8D 72 7A		 sta cmax
  1582 				 
  1583 7A4B A2 00		 ldx #0
  1584 7A4D			fade_l
  1585 7A4D BD B0 BA		sladr lda scren_lcol,x
  1586 7A50 85 83		 sta tmp
  1587 7A52 BD 6A BC		shadr lda scren_hcol,x
  1588 7A55 85 84		 sta tmp+1
  1589
  1590 7A57 A0 01		 ldy #1
  1591 7A59 B1 83		 lda (tmp),y
  1592 7A5B A8			 tay
  1593
  1594 7A5C 29 0F		 and #$0f
  1595 7A5E F0 01		 beq skp0
  1596
  1597 7A60 88			 dey
  1598
  1599 7A61			skp0
  1600
  1601 7A61 98			 tya
  1602 7A62 29 F0		 and #$f0
  1603 7A64 F0 05		 beq skp1
  1604
  1605 7A66 98			 tya
  1606 7A67 38			 sec
  1607 7A68 E9 10		 sbc #$10
  1608 7A6A A8			 tay
  1609
  1610 7A6B			skp1
  1611 7A6B 98			 tya
  1612
  1613 7A6C A0 01		 ldy #1
  1614 7A6E 91 83		 sta (tmp),y
  1615
  1616 7A70 E8			 inx
  1617 7A71 E0 00		 cpx #0
  1618 = 7A72			cmax equ *-1
  1619 7A73 D0 D8		 bne fade_l
  1620 7A75 60			 rts
  1621
  1622 				.endp
  1623
  1624
  1625
  1626 				/*
  1627 				  plynne zapalenie kolorow ekranu
  1628 				*/
  1628
  1629 7A76			.proc zapal_ekran
  1630
  1631 7A76 A9 00		 lda #0
  1632 7A78 8D 8C 7A		 sta licz
  1633 				 
  1634 7A7B			zap
  1635 7A7B 20 A6 7A		 jsr wajt
  1636 7A7E 20 D6 79		 jsr fade_in
  1637 				 
  1638 7A81 EE 8C 7A		 inc licz
  1639 7A84 AD 8C 7A		 lda licz
  1640 7A87 C9 10		 cmp #16
  1641 7A89 D0 F0		 bne zap
  1642 7A8B 60			 rts
  1643
  1644 7A8C 00			licz .byte
  1645
  1646 				.endp
  1647
  1648
  1649 				/*
  1650 				  plynne wygaszenie kolorow ekranu
  1651 				*/
  1651
  1652 7A8D			.proc zgas_ekran
  1653
  1654 7A8D A9 00		 lda #0
  1655 7A8F 8D A5 7A		 sta licz
  1656 				 
  1657 7A92			zap
  1658 7A92 20 A6 7A		 jsr wajt
  1659 7A95 20 31 7A		 jsr fade_out
  1660 				 
  1661 7A98 EE A5 7A		 inc licz
  1662 7A9B AD A5 7A		 lda licz
  1663 7A9E C9 10		 cmp #16
  1664 7AA0 D0 F0		 bne zap
  1665 				 
  1666 7AA2 4C B0 EB		 jmp game_msx_stop 
  1667
  1668 7AA5 00			licz .byte
  1669
  1670 				.endp
  1671
  1672
  1673 				/*
  1674 				  Wait 1 frame
  1675 				*/
  1675
  1676 7AA6			.proc wajt
  1677
  1678 7AA6 A5 14 C5 14 F0 FC	 lda:cmp:req 20
  1679 7AAC 60			 rts
  1680 				 
  1681 				.endp
  1682
  1683
  1684 				/*
  1685 				  Dekompresja RLE
  1686 				*/
  1686
  1687 7AAD			.proc decode
  1688
  1689 7AAD A0 00		        ldy <pmBase_Text
  1690 7AAF 8C C5 7A		        sty q1+1
  1691 7AB2 A0 CB		        ldy >pmBase_Text
  1692 7AB4 8C C6 7A		        sty q1+2
  1693
  1694 7AB7			dep
  1695 7AB7 8D DE 7A		        sta adr+2
  1696
  1697 7ABA 20 D6 7A		loop    jsr get
  1698 7ABD F0 20		        beq stop
  1699 7ABF 4A			        lsr @
  1700
  1701 7AC0 A8			        tay
  1702 7AC1 20 D6 7A		q0      jsr get
  1703 7AC4 8D FF FF		q1      sta $ffff
  1704 7AC7 EE C5 7A		        inc q1+1
  1705 7ACA D0 03		        bne skip0
  1706 7ACC EE C6 7A		        inc q1+2
  1707 7ACF			skip0
  1708 7ACF 88			        dey
  1709 7AD0 30 E8		_bpl    bmi loop
  1710
  1711 7AD2 B0 ED		        bcs q0
  1712 7AD4 90 EE		        bcc q1
  1713
  1714 7AD6 E8			get     inx
  1715 7AD7 D0 03		        bne skip1
  1716 7AD9 EE DE 7A		        inc adr+2
  1717 7ADC			skip1
  1718 7ADC BD 00 FF		adr     lda $ff00,x
  1719
  1720 7ADF 60			stop    rts
  1721
  1722 				.endp
  1723
  1724
  1725 7AE0			pg_tmp org *+[tetris.height+9]*2
  1726
  1727
  1728 				 .print "End: ",*
  1728 				End: $7C94
  1729
  1730 				 ift *>$7FFF
  1731 				  ert "Buuu !!!"
  1732 				 eif 
  1733 				 
  1734 				;---
  1735
  1736 02E0-02E1> 56 56		 run main
  1737
  1738 				;---
  1739
  1740 				/*******************************************************
  1741 				  Macro definition
  1742 				*******************************************************/
  1742
